import{f as D,G as M,T as i,O as Y,a as Z,b,V as u,c as f,d as p,S as c,e as m,F as P,M as z,g as U,h as J,i as K,o as w,$ as a,L as $,j as W,k as v,l as _,m as H,n as Q,p as X,q as ee,t as te}from"./vendor.7cdb755c.js";const oe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const y of l.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&n(y)}).observe(document,{childList:!0,subtree:!0});function d(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=d(r);fetch(r.href,l)}};oe();const k=16,I=D([1.957,41.271]),ae="https://mapa.psig.es/mapproxy/service",L="https://mapa.psig.es/qgisserver/wfs3/collections/",S="/items.geojson",g="?MAP=/home/ubuntu/bellamar/Obra_Bellamar_web.qgs",C="&limit=1000";let re=new M({title:"Mapes base",layers:[new i({title:"Ning\xFA",type:"base",source:null,visible:!1}),new i({title:"OpenStreetMap",type:"base",visible:!1,source:new Y}),new i({title:"Ortofoto hist\xF2rica de 2020 (AMB)",type:"base",visible:!1,source:new Z({url:"https://geoportal.amb.cat/geoserveis/rest/services/ortofoto_territorial_10cm_2020_25831/MapServer",projection:"EPSG:25831",params:{LAYERS:"Orto2020_10cm"},attributions:['\xA9 <a target="_blank" href="https://www.amb.cat/">AMB</a>']})}),new i({title:"Topogr\xE1fic (AMB)",type:"base",visible:!0,maxZoom:18,source:new b({url:"http://geoserveis.icc.cat/icc_mapesmultibase/utm/wms/service?",params:{LAYERS:"topogris",VERSION:"1.1.1"},attributions:['Cartografia topogr\xE0fica 1:1.000 de l\u2019<a target="_blank" href="http://www.icgc.cat/">Institut Cartogr\xE0fic i Geol\xF2gic de Catalunya (ICGC)</a>, sota una llic\xE8ncia <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/deed.ca">CC BY 4.0</a>']})})]}),le=new i({title:"Topografia completa",visible:!0,minZoom:18,source:new b({url:ae+g,params:{LAYERS:"bellamar_topografia",TRANSPARENT:!0,VERSION:"1.3.0"},serverType:"qgis"})}),se=new i({title:"Catastro",visible:!1,source:new b({url:"http://ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx",params:{LAYERS:"catastro",TILED:!0,SRS:"EPSG:3857"}})}),ne=new u({title:"Pluvial",visible:!0,source:new f({format:new p,url:L+"bellamar_pluvial"+S+g+C}),style:new c({stroke:new m({lineDash:[10,5],color:"#1f78b4",width:3})})}),F=new u({title:"Trams de les obres",name:"trams",visible:!0,source:new f({format:new p,url:L+"Trams de les obres"+S+g+C}),style:function(e,t){return e.get("estat")==="excl\xF2s"?new c({stroke:new m({color:"#929397",width:1})}):new c({stroke:new m({color:"#db1e2a",width:2})})}}),R=new u({title:"Parcel\xB7les projecte Bellamar",name:"parcelles",visible:!0,source:new f({format:new p,url:L+"Parcel\xB7les projecte Bellamar"+S+g+C}),style:function(e,t){return e.get("residual")==="No"?new c({fill:new P({color:"rgba(196,154,151,0.4)"})}):e.get("residual")==="S\xED"?new c({fill:new P({color:"rgba(135,105,100,0.4)"})}):null}}),ie=new u({title:"Barris",visible:!0,source:new f({format:new p,url:"barris.geojson"}),style:new c({stroke:new m({color:"#000",width:2})})});const o=new z({target:"map",controls:U().extend([new J]),layers:new M({title:"Mapes base",fold:"close",layers:[re,se,le,ie,ne,F,R]}),view:new K({center:I,zoom:k,minZoom:14,maxZoom:20})});let x=new w({closeBox:!0,className:"slide-left menu",content:a("#infoWindowDocs").get(0)});o.addControl(x);let B=new w({closeBox:!0,className:"slide-left menu",content:a("#infoWindowLayers").get(0)});o.addControl(B);let ce=document.getElementById("layers");$.renderPanel(o,ce,{reverse:!0});let N=new w({closeBox:!0,className:"slide-left menu",content:a("#infoWindowSearch").get(0)});o.addControl(N);let T=new w({closeBox:!0,className:"slide-right info",content:a("#infoWindowFeature").get(0)});o.addControl(T);let O=new W;o.addControl(O);O.setPosition("top-left");let s=new W({toggleOne:!0,group:!0});O.addControl(s);let de=new v({html:'<img src="logo.png" />',className:"logo",title:"Castelldefels",handleClick:function(){o.getView().setCenter(I),o.getView().setZoom(k)}});s.addControl(de);let G=new _({html:'<i class="fa fa-file-text-o"></i>',className:"docs",title:"Documents",onToggle:function(){A("docs"),x.toggle()}});s.addControl(G);let j=new _({html:'<i class="fa fa-align-justify"></i>',className:"layers",title:"Capas",onToggle:function(){A("layers"),B.toggle()}});s.addControl(j);let V=new _({html:'<i class="fa fa-search"></i>',className:"search",title:"Buscar",onToggle:function(){A("search"),N.toggle()}});s.addControl(V);function A(e){x.hide(),B.hide(),N.hide(),e!=="docs"?G.setActive(!1):e!=="layers"?j.setActive(!1):e!=="search"&&V.setActive(!1)}let ue=new v({html:'<i class="fa fa-whatsapp" aria-hidden="true"></i>',className:"whatsapp",title:"Whatsapp",handleClick:function(){}});s.addControl(ue);let fe=new v({html:'<i class="fa fa-telegram" aria-hidden="true"></i>',className:"telegram",title:"Whatsapp",handleClick:function(){}});s.addControl(fe);let pe=new H({urlReplace:!0});o.addControl(pe);let q=new Q({title:"On estic?",delay:5e3});o.addControl(q);let E=new X({positioning:"bottom-center"});o.addOverlay(E);q.on("position",function(e){e.coordinate?E.show(e.coordinate,"Ets aqu\xED!"):E.hide()});a(".window").show();let h=new ee({layers:[F,R],hitTolerance:5});o.addInteraction(h);h.getFeatures().on("add",function(e){let t=e.element,d=h.getLayer(t).get("name"),n=a("<div>");d==="trams"?n.append(a("<p>").text("eix_ncar: "+t.get("eix_ncar"))).append(a("<p>").text("observacions: "+t.get("observacions"))).append(a("<p>").text("estat: "+t.get("estat"))).append(a("<p>").text("data_inici_obres: "+t.get("data_inici_obres"))).append(a("<p>").text("data_fi_obres: "+t.get("data_fi_obres"))):d==="parcelles"&&n.append(a("<p>").text("refcat: "+t.get("refcat"))).append(a("<p>").text("residual: "+t.get("residual"))).append(a("<p>").text("conveni: "+t.get("conveni"))),a("#infoWindowFeature .content").html(n),T.show()});h.getFeatures().on("remove",function(e){a("#infoWindowFeature .content").html(""),T.hide()});o.on("pointermove",function(e){o.getTargetElement().style.cursor=o.hasFeatureAtPixel(o.getEventPixel(e.originalEvent),{hitTolerance:5,layerFilter:function(t){return t.get("name")==="trams"||t.get("name")==="parcelles"}})?"pointer":""});o.on("click",function(e){console.log(te(e.coordinate))});
//# sourceMappingURL=index.bc7096b8.js.map
