function dt(){return function(){throw new Error("Unimplemented abstract method.")}()}var Gd=0;function Ot(n){return n.ol_uid||(n.ol_uid=String(++Gd))}var jd="6.12.0",Bd=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ud=function(n){Bd(e,n);function e(t){var i=this,r="v"+jd.split("-")[0],a="Assertion failed. See https://openlayers.org/en/"+r+"/doc/errors/#"+t+" for details.";return i=n.call(this,a)||this,i.code=t,i.name="AssertionError",i.message=a,i}return e}(Error),zl=Ud,zd=function(){function n(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return n.prototype.preventDefault=function(){this.defaultPrevented=!0},n.prototype.stopPropagation=function(){this.propagationStopped=!0},n}(),oi=zd,Tr={PROPERTYCHANGE:"propertychange"},$d=function(){function n(){this.disposed=!1}return n.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},n.prototype.disposeInternal=function(){},n}(),As=$d;function Wd(n,e,t){for(var i,r,a=t||Yn,o=0,s=n.length,h=!1;o<s;)i=o+(s-o>>1),r=+a(n[i],e),r<0?o=i+1:(s=i,h=!r);return h?o:~o}function Yn(n,e){return n>e?1:n<e?-1:0}function bs(n,e){return n.indexOf(e)>=0}function Ns(n,e,t){var i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;var r=void 0;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return typeof t=="function"?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}function Xd(n,e,t){for(;e<t;){var i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function si(n,e){for(var t=Array.isArray(e)?e:[e],i=t.length,r=0;r<i;r++)n[n.length]=t[r]}function qn(n,e){var t=n.length;if(t!==e.length)return!1;for(var i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Yd(n,e,t){var i=e||Yn;return n.every(function(r,a){if(a===0)return!0;var o=i(n[a-1],r);return!(o>0||t&&o===0)})}function Wi(){return!0}function Cr(){return!1}function Vn(){}function qd(n){var e=!1,t,i,r;return function(){var a=Array.prototype.slice.call(arguments);return(!e||this!==r||!qn(a,i))&&(e=!0,r=this,i=a,t=n.apply(this,arguments)),t}}var $t=typeof Object.assign=="function"?Object.assign:function(n,e){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(n),i=1,r=arguments.length;i<r;++i){var a=arguments[i];if(a!=null)for(var o in a)a.hasOwnProperty(o)&&(t[o]=a[o])}return t};function Mr(n){for(var e in n)delete n[e]}var $l=typeof Object.values=="function"?Object.values:function(n){var e=[];for(var t in n)e.push(n[t]);return e};function wr(n){var e;for(e in n)return!1;return!e}var Vd=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Hd=function(n){Vd(e,n);function e(t){var i=n.call(this)||this;return i.eventTarget_=t,i.pendingRemovals_=null,i.dispatching_=null,i.listeners_=null,i}return e.prototype.addEventListener=function(t,i){if(!(!t||!i)){var r=this.listeners_||(this.listeners_={}),a=r[t]||(r[t]=[]);a.indexOf(i)===-1&&a.push(i)}},e.prototype.dispatchEvent=function(t){var i=typeof t=="string"?new oi(t):t,r=i.type;i.target||(i.target=this.eventTarget_||this);var a=this.listeners_&&this.listeners_[r],o;if(a){var s=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});r in s||(s[r]=0,h[r]=0),++s[r];for(var u=0,c=a.length;u<c;++u)if("handleEvent"in a[u]?o=a[u].handleEvent(i):o=a[u].call(this,i),o===!1||i.propagationStopped){o=!1;break}if(--s[r],s[r]===0){var p=h[r];for(delete h[r];p--;)this.removeEventListener(r,Vn);delete s[r]}return o}},e.prototype.disposeInternal=function(){this.listeners_&&Mr(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},e.prototype.removeEventListener=function(t,i){var r=this.listeners_&&this.listeners_[t];if(r){var a=r.indexOf(i);a!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[a]=Vn,++this.pendingRemovals_[t]):(r.splice(a,1),r.length===0&&delete this.listeners_[t]))}},e}(As),Sr=Hd,mt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Rt(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){var a=t;t=function(){n.removeEventListener(e,t),a.apply(this,arguments)}}var o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function ho(n,e,t,i){return Rt(n,e,t,i,!0)}function Wt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Mr(n))}var Kd=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Or=function(n){Kd(e,n);function e(){var t=n.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return e.prototype.changed=function(){++this.revision_,this.dispatchEvent(mt.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,i){if(Array.isArray(t)){for(var r=t.length,a=new Array(r),o=0;o<r;++o)a[o]=Rt(this,t[o],i);return a}else return Rt(this,t,i)},e.prototype.onceInternal=function(t,i){var r;if(Array.isArray(t)){var a=t.length;r=new Array(a);for(var o=0;o<a;++o)r[o]=ho(this,t[o],i)}else r=ho(this,t,i);return i.ol_key=r,r},e.prototype.unInternal=function(t,i){var r=i.ol_key;if(r)lo(r);else if(Array.isArray(t))for(var a=0,o=t.length;a<o;++a)this.removeEventListener(t[a],i);else this.removeEventListener(t,i)},e}(Sr);Or.prototype.on;Or.prototype.once;Or.prototype.un;function lo(n){if(Array.isArray(n))for(var e=0,t=n.length;e<t;++e)Wt(n[e]);else Wt(n)}var Zd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",unByKey:lo,default:Or}),Wl=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Xl=function(n){Wl(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.key=i,a.oldValue=r,a}return e}(oi),Jd=function(n){Wl(e,n);function e(t){var i=n.call(this)||this;return i.on,i.once,i.un,Ot(i),i.values_=null,t!==void 0&&i.setProperties(t),i}return e.prototype.get=function(t){var i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&$t({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,i){var r;r="change:"+t,this.dispatchEvent(new Xl(r,t,i)),r=Tr.PROPERTYCHANGE,this.dispatchEvent(new Xl(r,t,i))},e.prototype.addChangeListener=function(t,i){this.addEventListener("change:"+t,i)},e.prototype.removeChangeListener=function(t,i){this.removeEventListener("change:"+t,i)},e.prototype.set=function(t,i,r){var a=this.values_||(this.values_={});if(r)a[t]=i;else{var o=a[t];a[t]=i,o!==i&&this.notify(t,o)}},e.prototype.setProperties=function(t,i){for(var r in t)this.set(r,t[r],i)},e.prototype.applyProperties=function(t){!t.values_||$t(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,i){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],wr(this.values_)&&(this.values_=null),i||this.notify(t,r)}},e}(Or),Be=Jd,ce={ADD:"add",REMOVE:"remove"},Yl=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ql={LENGTH:"length"},uo=function(n){Yl(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.element=i,a.index=r,a}return e}(oi),Qd=function(n){Yl(e,n);function e(t,i){var r=n.call(this)||this;r.on,r.once,r.un;var a=i||{};if(r.unique_=!!a.unique,r.array_=t||[],r.unique_)for(var o=0,s=r.array_.length;o<s;++o)r.assertUnique_(r.array_[o],o);return r.updateLength_(),r}return e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var i=0,r=t.length;i<r;++i)this.push(t[i]);return this},e.prototype.forEach=function(t){for(var i=this.array_,r=0,a=i.length;r<a;++r)t(i[r],r,i)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(ql.LENGTH)},e.prototype.insertAt=function(t,i){this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new uo(ce.ADD,i,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var i=this.getLength();return this.insertAt(i,t),this.getLength()},e.prototype.remove=function(t){for(var i=this.array_,r=0,a=i.length;r<a;++r)if(i[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new uo(ce.REMOVE,i,t)),i},e.prototype.setAt=function(t,i){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(i,t);var a=this.array_[t];this.array_[t]=i,this.dispatchEvent(new uo(ce.REMOVE,a,t)),this.dispatchEvent(new uo(ce.ADD,i,t))}else{for(var o=r;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,i)}},e.prototype.updateLength_=function(){this.set(ql.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,i){for(var r=0,a=this.array_.length;r<a;++r)if(this.array_[r]===t&&r!==i)throw new zl(58)},e}(Be),Ze=Qd;function Mt(n,e){if(!n)throw new zl(e)}var tp=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ep=function(n){tp(e,n);function e(t){var i=n.call(this)||this;if(i.on,i.once,i.un,i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addChangeListener(i.geometryName_,i.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){var r=t;i.setGeometry(r)}else{var a=t;i.setProperties(a)}return i}return e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Wt(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Rt(t,mt.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?ip(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(Be);function ip(n){if(typeof n=="function")return n;var e;if(Array.isArray(n))e=n;else{Mt(typeof n.getZIndex=="function",41);var t=n;e=[t]}return function(){return e}}var Xi=ep,ee={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},W={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ir={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},yi={};yi[Ir.RADIANS]=6370997/(2*Math.PI);yi[Ir.DEGREES]=2*Math.PI*6370997/360;yi[Ir.FEET]=.3048;yi[Ir.METERS]=1;yi[Ir.USFEET]=1200/3937;var Ue=Ir,Rr=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",np=Rr.indexOf("firefox")!==-1;Rr.indexOf("safari")!==-1&&Rr.indexOf("chrom")==-1;var rp=Rr.indexOf("webkit")!==-1&&Rr.indexOf("edge")==-1,ap=Rr.indexOf("macintosh")!==-1,Vl=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,fo=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,op=typeof Image!="undefined"&&Image.prototype.decode,Hl=function(){var n=!1;try{var e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();new Array(6);function Ii(){return[1,0,0,1,0,0]}function sp(n,e,t,i,r,a,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=a,n[5]=o,n}function hp(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function ue(n,e){var t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function lp(n,e,t){return sp(n,e,0,0,t,0,0)}function Yi(n,e,t,i,r,a,o,s){var h=Math.sin(a),u=Math.cos(a);return n[0]=i*u,n[1]=r*h,n[2]=-i*h,n[3]=r*u,n[4]=o*i*u-s*i*h+e,n[5]=o*r*h+s*r*u+t,n}function Ds(n,e){var t=up(e);Mt(t!==0,32);var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],h=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-a/t,n[3]=i/t,n[4]=(a*h-o*s)/t,n[5]=-(i*h-r*s)/t,n}function up(n){return n[0]*n[3]-n[1]*n[2]}var Kl;function Zl(n){var e="matrix("+n.join(", ")+")";if(fo)return e;var t=Kl||(Kl=document.createElement("div"));return t.style.transform=e,t.style.transform}var ua={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},de={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Jl(n){for(var e=ze(),t=0,i=n.length;t<i;++t)va(e,n[t]);return e}function fp(n,e,t){var i=Math.min.apply(null,n),r=Math.min.apply(null,e),a=Math.max.apply(null,n),o=Math.max.apply(null,e);return mi(i,r,a,o,t)}function fa(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function Ql(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function Hn(n,e,t){var i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function ca(n,e){return Fs(n,e[0],e[1])}function dn(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function Fs(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function ks(n,e){var t=n[0],i=n[1],r=n[2],a=n[3],o=e[0],s=e[1],h=de.UNKNOWN;return o<t?h=h|de.LEFT:o>r&&(h=h|de.RIGHT),s<i?h=h|de.BELOW:s>a&&(h=h|de.ABOVE),h===de.UNKNOWN&&(h=de.INTERSECTING),h}function ze(){return[1/0,1/0,-1/0,-1/0]}function mi(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function da(n){return mi(1/0,1/0,-1/0,-1/0,n)}function cp(n,e){var t=n[0],i=n[1];return mi(t,i,t,i,e)}function tu(n,e,t,i,r){var a=da(r);return iu(a,n,e,t,i)}function pa(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function eu(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function va(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function iu(n,e,t,i,r){for(;t<i;t+=r)dp(n,e[t],e[t+1]);return n}function dp(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function Gs(n,e){var t;return t=e(co(n)),t||(t=e(po(n)),t)||(t=e(vo(n)),t)||(t=e(Zn(n)),t)?t:!1}function js(n){var e=0;return Us(n)||(e=qt(n)*Ei(n)),e}function co(n){return[n[0],n[1]]}function po(n){return[n[2],n[1]]}function Kn(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function pp(n,e){var t;return e===ua.BOTTOM_LEFT?t=co(n):e===ua.BOTTOM_RIGHT?t=po(n):e===ua.TOP_LEFT?t=Zn(n):e===ua.TOP_RIGHT?t=vo(n):Mt(!1,13),t}function Bs(n,e,t,i,r){var a=e*i[0]/2,o=e*i[1]/2,s=Math.cos(t),h=Math.sin(t),u=a*s,c=a*h,p=o*s,g=o*h,y=n[0],m=n[1],x=y-u+g,C=y-u-g,S=y+u-g,I=y+u+g,O=m-c-p,A=m-c+p,F=m+c+p,v=m+c-p;return mi(Math.min(x,C,S,I),Math.min(O,A,F,v),Math.max(x,C,S,I),Math.max(O,A,F,v),r)}function Ei(n){return n[3]-n[1]}function ga(n,e,t){var i=t||ze();return $e(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):da(i),i}function Zn(n){return[n[0],n[3]]}function vo(n){return[n[2],n[3]]}function qt(n){return n[2]-n[0]}function $e(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Us(n){return n[2]<n[0]||n[3]<n[1]}function vp(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function gp(n,e,t){var i=!1,r=ks(n,e),a=ks(n,t);if(r===de.INTERSECTING||a===de.INTERSECTING)i=!0;else{var o=n[0],s=n[1],h=n[2],u=n[3],c=e[0],p=e[1],g=t[0],y=t[1],m=(y-p)/(g-c),x=void 0,C=void 0;!!(a&de.ABOVE)&&!(r&de.ABOVE)&&(x=g-(y-u)/m,i=x>=o&&x<=h),!i&&!!(a&de.RIGHT)&&!(r&de.RIGHT)&&(C=y-(g-h)*m,i=C>=s&&C<=u),!i&&!!(a&de.BELOW)&&!(r&de.BELOW)&&(x=g-(y-s)/m,i=x>=o&&x<=h),!i&&!!(a&de.LEFT)&&!(r&de.LEFT)&&(C=y-(g-o)*m,i=C>=s&&C<=u)}return i}function _p(n,e,t,i){var r=[];if(i>1)for(var a=n[2]-n[0],o=n[3]-n[1],s=0;s<i;++s)r.push(n[0]+a*s/i,n[1],n[2],n[1]+o*s/i,n[2]-a*s/i,n[3],n[0],n[3]-o*s/i);else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];e(r,r,2);for(var h=[],u=[],s=0,c=r.length;s<c;s+=2)h.push(r[s]),u.push(r[s+1]);return fp(h,u,t)}function yp(n,e){var t=e.getExtent(),i=Kn(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){var r=qt(t),a=Math.floor((i[0]-t[0])/r),o=a*r;n[0]-=o,n[2]-=o}return n}var mp=function(){function n(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return n.prototype.canWrapX=function(){return this.canWrapX_},n.prototype.getCode=function(){return this.code_},n.prototype.getExtent=function(){return this.extent_},n.prototype.getUnits=function(){return this.units_},n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||yi[this.units_]},n.prototype.getWorldExtent=function(){return this.worldExtent_},n.prototype.getAxisOrientation=function(){return this.axisOrientation_},n.prototype.isGlobal=function(){return this.global_},n.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)},n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},n.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},n.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)},n.prototype.setWorldExtent=function(e){this.worldExtent_=e},n.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},n}(),zs=mp;function ie(n,e,t){return Math.min(Math.max(n,e),t)}var Ep=function(){var n;return"cosh"in Math?n=Math.cosh:n=function(e){var t=Math.exp(e);return(t+1/t)/2},n}(),xp=function(){var n;return"log2"in Math?n=Math.log2:n=function(e){return Math.log(e)*Math.LOG2E},n}();function Tp(n,e,t,i,r,a){var o=r-t,s=a-i;if(o!==0||s!==0){var h=((n-t)*o+(e-i)*s)/(o*o+s*s);h>1?(t=r,i=a):h>0&&(t+=o*h,i+=s*h)}return Jn(n,e,t,i)}function Jn(n,e,t,i){var r=t-n,a=i-e;return r*r+a*a}function Cp(n){for(var e=n.length,t=0;t<e;t++){for(var i=t,r=Math.abs(n[t][t]),a=t+1;a<e;a++){var o=Math.abs(n[a][t]);o>r&&(r=o,i=a)}if(r===0)return null;var s=n[i];n[i]=n[t],n[t]=s;for(var h=t+1;h<e;h++)for(var u=-n[h][t]/n[t][t],c=t;c<e+1;c++)t==c?n[h][c]=0:n[h][c]+=u*n[t][c]}for(var p=new Array(e),g=e-1;g>=0;g--){p[g]=n[g][e]/n[g][g];for(var y=g-1;y>=0;y--)n[y][e]-=n[y][g]*p[g]}return p}function nu(n){return n*180/Math.PI}function Ri(n){return n*Math.PI/180}function Pi(n,e){var t=n%e;return t*e<0?t+e:t}function qi(n,e,t){return n+t*(e-n)}function ru(n,e){var t=Math.pow(10,e);return Math.round(n*t)/t}function go(n,e){return Math.floor(ru(n,e))}function _o(n,e){return Math.ceil(ru(n,e))}var Mp=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_a=6378137,Pr=Math.PI*_a,wp=[-Pr,-Pr,Pr,Pr],Sp=[-180,-85,180,85],yo=_a*Math.log(Math.tan(Math.PI/2)),Lr=function(n){Mp(e,n);function e(t){return n.call(this,{code:t,units:Ue.METERS,extent:wp,global:!0,worldExtent:Sp,getPointResolution:function(i,r){return i/Ep(r[1]/_a)}})||this}return e}(zs),au=[new Lr("EPSG:3857"),new Lr("EPSG:102100"),new Lr("EPSG:102113"),new Lr("EPSG:900913"),new Lr("http://www.opengis.net/def/crs/EPSG/0/3857"),new Lr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Op(n,e,t){var i=n.length,r=t>1?t:2,a=e;a===void 0&&(r>2?a=n.slice():a=new Array(i));for(var o=0;o<i;o+=r){a[o]=Pr*n[o]/180;var s=_a*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));s>yo?s=yo:s<-yo&&(s=-yo),a[o+1]=s}return a}function Ip(n,e,t){var i=n.length,r=t>1?t:2,a=e;a===void 0&&(r>2?a=n.slice():a=new Array(i));for(var o=0;o<i;o+=r)a[o]=180*n[o]/Pr,a[o+1]=360*Math.atan(Math.exp(n[o+1]/_a))/Math.PI-90;return a}var Rp=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Pp=6378137,ou=[-180,-90,180,90],Lp=Math.PI*Pp/180,Qn=function(n){Rp(e,n);function e(t,i){return n.call(this,{code:t,units:Ue.DEGREES,extent:ou,axisOrientation:i,global:!0,metersPerUnit:Lp,worldExtent:ou})||this}return e}(zs),su=[new Qn("CRS:84"),new Qn("EPSG:4326","neu"),new Qn("urn:ogc:def:crs:OGC:1.3:CRS84"),new Qn("urn:ogc:def:crs:OGC:2:84"),new Qn("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Qn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Qn("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],$s={};function Ap(n){return $s[n]||$s[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function bp(n,e){$s[n]=e}var Ar={};function br(n,e,t){var i=n.getCode(),r=e.getCode();i in Ar||(Ar[i]={}),Ar[i][r]=t}function hu(n,e){var t;return n in Ar&&e in Ar[n]&&(t=Ar[n][e]),t}var mo=63710088e-1;function Eo(n,e,t){var i=t||mo,r=Ri(n[1]),a=Ri(e[1]),o=(a-r)/2,s=Ri(e[0]-n[0])/2,h=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(a);return 2*i*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function Ws(n,e){for(var t=0,i=0,r=n.length;i<r-1;++i)t+=Eo(n[i],n[i+1],e);return t}function Np(n,e){var t=e||{},i=t.radius||mo,r=t.projection||"EPSG:3857",a=n.getType();a!==W.GEOMETRY_COLLECTION&&(n=n.clone().transform(r,"EPSG:4326"));var o=0,s,h,u,c,p,g;switch(a){case W.POINT:case W.MULTI_POINT:break;case W.LINE_STRING:case W.LINEAR_RING:{s=n.getCoordinates(),o=Ws(s,i);break}case W.MULTI_LINE_STRING:case W.POLYGON:{for(s=n.getCoordinates(),u=0,c=s.length;u<c;++u)o+=Ws(s[u],i);break}case W.MULTI_POLYGON:{for(s=n.getCoordinates(),u=0,c=s.length;u<c;++u)for(h=s[u],p=0,g=h.length;p<g;++p)o+=Ws(h[p],i);break}case W.GEOMETRY_COLLECTION:{var y=n.getGeometries();for(u=0,c=y.length;u<c;++u)o+=Np(y[u],e);break}default:throw new Error("Unsupported geometry type: "+a)}return o}function xo(n,e){for(var t=0,i=n.length,r=n[i-1][0],a=n[i-1][1],o=0;o<i;o++){var s=n[o][0],h=n[o][1];t+=Ri(s-r)*(2+Math.sin(Ri(a))+Math.sin(Ri(h))),r=s,a=h}return t*e*e/2}function Dp(n,e){var t=e||{},i=t.radius||mo,r=t.projection||"EPSG:3857",a=n.getType();a!==W.GEOMETRY_COLLECTION&&(n=n.clone().transform(r,"EPSG:4326"));var o=0,s,h,u,c,p,g;switch(a){case W.POINT:case W.MULTI_POINT:case W.LINE_STRING:case W.MULTI_LINE_STRING:case W.LINEAR_RING:break;case W.POLYGON:{for(s=n.getCoordinates(),o=Math.abs(xo(s[0],i)),u=1,c=s.length;u<c;++u)o-=Math.abs(xo(s[u],i));break}case W.MULTI_POLYGON:{for(s=n.getCoordinates(),u=0,c=s.length;u<c;++u)for(h=s[u],o+=Math.abs(xo(h[0],i)),p=1,g=h.length;p<g;++p)o-=Math.abs(xo(h[p],i));break}case W.GEOMETRY_COLLECTION:{var y=n.getGeometries();for(u=0,c=y.length;u<c;++u)o+=Dp(y[u],e);break}default:throw new Error("Unsupported geometry type: "+a)}return o}function Fp(n,e,t,i){var r=i||mo,a=Ri(n[1]),o=Ri(n[0]),s=e/r,h=Math.asin(Math.sin(a)*Math.cos(s)+Math.cos(a)*Math.sin(s)*Math.cos(t)),u=o+Math.atan2(Math.sin(t)*Math.sin(s)*Math.cos(a),Math.cos(s)-Math.sin(a)*Math.sin(h));return[nu(u),nu(h)]}function kp(n,e){for(var t=(""+n).split("."),i=(""+e).split("."),r=0;r<Math.max(t.length,i.length);r++){var a=parseInt(t[r]||"0",10),o=parseInt(i[r]||"0",10);if(a>o)return 1;if(o>a)return-1}return 0}function Gp(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Xs(n,e){for(var t=!0,i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function Ys(n,e){var t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,a=n[1]*t+n[0]*i;return n[0]=r,n[1]=a,n}function jp(n,e){return n[0]*=e,n[1]*=e,n}function Bp(n,e){var t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function lu(n,e){if(e.canWrapX()){var t=qt(e.getExtent()),i=uu(n,e,t);i&&(n[0]-=i*t)}return n}function uu(n,e,t){var i=e.getExtent(),r=0;if(e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])){var a=t||qt(i);r=Math.floor((n[0]-i[0])/a)}return r}function qs(n,e,t){var i;if(e!==void 0){for(var r=0,a=n.length;r<a;++r)e[r]=n[r];i=e}else i=n.slice();return i}function Vs(n,e,t){if(e!==void 0&&n!==e){for(var i=0,r=n.length;i<r;++i)e[i]=n[i];n=e}return n}function fu(n){bp(n.getCode(),n),br(n,n,qs)}function Up(n){n.forEach(fu)}function zt(n){return typeof n=="string"?Ap(n):n||null}function To(n,e,t,i){n=zt(n);var r,a=n.getPointResolutionFunc();if(a){if(r=a(e,t),i&&i!==n.getUnits()){var o=n.getMetersPerUnit();o&&(r=r*o/yi[i])}}else{var s=n.getUnits();if(s==Ue.DEGREES&&!i||i==Ue.DEGREES)r=e;else{var h=Co(n,zt("EPSG:4326"));if(h===Vs&&s!==Ue.DEGREES)r=e*n.getMetersPerUnit();else{var u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=h(u,u,2);var c=Eo(u.slice(0,2),u.slice(2,4)),p=Eo(u.slice(4,6),u.slice(6,8));r=(c+p)/2}var o=i?yi[i]:n.getMetersPerUnit();o!==void 0&&(r/=o)}}return r}function Hs(n){Up(n),n.forEach(function(e){n.forEach(function(t){e!==t&&br(e,t,qs)})})}function zp(n,e,t,i){n.forEach(function(r){e.forEach(function(a){br(r,a,t),br(a,r,i)})})}function Ks(n,e){return n?typeof n=="string"?zt(n):n:zt(e)}function cu(n){return function(e,t,i){for(var r=e.length,a=i!==void 0?i:2,o=t!==void 0?t:new Array(r),s=0;s<r;s+=a){var h=n([e[s],e[s+1]]);o[s]=h[0],o[s+1]=h[1];for(var u=a-1;u>=2;--u)o[s+u]=e[s+u]}return o}}function $p(n,e,t,i){var r=zt(n),a=zt(e);br(r,a,cu(t)),br(a,r,cu(i))}function KC(n,e){return pn(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function ZC(n,e){var t=pn(n,e!==void 0?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Pi(i+180,360)-180),t}function tr(n,e){if(n===e)return!0;var t=n.getUnits()===e.getUnits();if(n.getCode()===e.getCode())return t;var i=Co(n,e);return i===qs&&t}function Co(n,e){var t=n.getCode(),i=e.getCode(),r=hu(t,i);return r||(r=Vs),r}function ya(n,e){var t=zt(n),i=zt(e);return Co(t,i)}function pn(n,e,t){var i=ya(e,t);return i(n,void 0,n.length)}function Wp(n,e,t,i){var r=ya(e,t);return _p(n,r,void 0,i)}var Xp=null;function Yp(){return Xp}function Zs(n,e){return n}function xi(n,e){return n}function du(n,e){return n}function er(n,e){return n}function pu(n,e,t){return function(i){var r=i[0],a=i[1],o,s;if(n.canWrapX()){var h=n.getExtent(),u=qt(h);s=uu(i,n,u),s&&(r=r-s*u),r=ie(r,h[0],h[2]),a=ie(a,h[1],h[3]),o=t([r,a])}else o=t(i);return s&&e.canWrapX()&&(o[0]+=s*qt(e.getExtent())),o}}function qp(){Hs(au),Hs(su),zp(su,au,Op,Ip)}qp();function ir(n,e,t,i,r,a){for(var o=a||[],s=0,h=e;h<t;h+=i){var u=n[h],c=n[h+1];o[s++]=r[0]*u+r[2]*c+r[4],o[s++]=r[1]*u+r[3]*c+r[5]}return a&&o.length!=s&&(o.length=s),o}function Js(n,e,t,i,r,a,o){for(var s=o||[],h=Math.cos(r),u=Math.sin(r),c=a[0],p=a[1],g=0,y=e;y<t;y+=i){var m=n[y]-c,x=n[y+1]-p;s[g++]=c+m*h-x*u,s[g++]=p+m*u+x*h;for(var C=y+2;C<y+i;++C)s[g++]=n[C]}return o&&s.length!=g&&(s.length=g),s}function Vp(n,e,t,i,r,a,o,s){for(var h=s||[],u=o[0],c=o[1],p=0,g=e;g<t;g+=i){var y=n[g]-u,m=n[g+1]-c;h[p++]=u+r*y,h[p++]=c+a*m;for(var x=g+2;x<g+i;++x)h[p++]=n[x]}return s&&h.length!=p&&(h.length=p),h}function vu(n,e,t,i,r,a,o){for(var s=o||[],h=0,u=e;u<t;u+=i){s[h++]=n[u]+r,s[h++]=n[u+1]+a;for(var c=u+2;c<u+i;++c)s[h++]=n[c]}return o&&s.length!=h&&(s.length=h),s}var Hp=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),gu=Ii(),Kp=function(n){Hp(e,n);function e(){var t=n.call(this)||this;return t.extent_=ze(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=qd(function(i,r,a){if(!a)return this.getSimplifiedGeometry(r);var o=this.clone();return o.applyTransform(a),o.getSimplifiedGeometry(r)}),t}return e.prototype.simplifyTransformed=function(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)},e.prototype.clone=function(){return dt()},e.prototype.closestPointXY=function(t,i,r,a){return dt()},e.prototype.containsXY=function(t,i){var r=this.getClosestPoint([t,i]);return r[0]===t&&r[1]===i},e.prototype.getClosestPoint=function(t,i){var r=i||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return dt()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&da(i),this.extentRevision_=this.getRevision()}return vp(this.extent_,t)},e.prototype.rotate=function(t,i){dt()},e.prototype.scale=function(t,i,r){dt()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return dt()},e.prototype.getType=function(){return dt()},e.prototype.applyTransform=function(t){dt()},e.prototype.intersectsExtent=function(t){return dt()},e.prototype.translate=function(t,i){dt()},e.prototype.transform=function(t,i){var r=zt(t),a=r.getUnits()==Ue.TILE_PIXELS?function(o,s,h){var u=r.getExtent(),c=r.getWorldExtent(),p=Ei(c)/Ei(u);return Yi(gu,c[0],c[3],p,-p,0,0,0),ir(o,0,o.length,h,gu,s),ya(r,i)(o,s,h)}:ya(r,i);return this.applyTransform(a),this},e}(Be),_u=Kp,Zp=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jp=function(n){Zp(e,n);function e(){var t=n.call(this)||this;return t.layout=ee.XY,t.stride=2,t.flatCoordinates=null,t}return e.prototype.computeExtent=function(t){return tu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return dt()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=this.getSimplifiedGeometryInternal(t),r=i.getFlatCoordinates();return r.length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,i){this.stride=yu(t),this.layout=t,this.flatCoordinates=i},e.prototype.setCoordinates=function(t,i){dt()},e.prototype.setLayout=function(t,i,r){var a;if(t)a=yu(t);else{for(var o=0;o<r;++o)if(i.length===0){this.layout=ee.XY,this.stride=2;return}else i=i[0];a=i.length,t=Qp(a)}this.layout=t,this.stride=a},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,i){var r=this.getFlatCoordinates();if(r){var a=this.getStride();Js(r,0,r.length,a,t,i,r),this.changed()}},e.prototype.scale=function(t,i,r){var a=i;a===void 0&&(a=t);var o=r;o||(o=Kn(this.getExtent()));var s=this.getFlatCoordinates();if(s){var h=this.getStride();Vp(s,0,s.length,h,t,a,o,s),this.changed()}},e.prototype.translate=function(t,i){var r=this.getFlatCoordinates();if(r){var a=this.getStride();vu(r,0,r.length,a,t,i,r),this.changed()}},e}(_u);function Qp(n){var e;return n==2?e=ee.XY:n==3?e=ee.XYZ:n==4&&(e=ee.XYZM),e}function yu(n){var e;return n==ee.XY?e=2:n==ee.XYZ||n==ee.XYM?e=3:n==ee.XYZM&&(e=4),e}function tv(n,e,t){var i=n.getFlatCoordinates();if(i){var r=n.getStride();return ir(i,0,i.length,r,e,t)}else return null}var vn=Jp;function mu(n,e,t,i,r,a,o){var s=n[e],h=n[e+1],u=n[t]-s,c=n[t+1]-h,p;if(u===0&&c===0)p=e;else{var g=((r-s)*u+(a-h)*c)/(u*u+c*c);if(g>1)p=t;else if(g>0){for(var y=0;y<i;++y)o[y]=qi(n[e+y],n[t+y],g);o.length=i;return}else p=e}for(var y=0;y<i;++y)o[y]=n[p+y];o.length=i}function Qs(n,e,t,i,r){var a=n[e],o=n[e+1];for(e+=i;e<t;e+=i){var s=n[e],h=n[e+1],u=Jn(a,o,s,h);u>r&&(r=u),a=s,o=h}return r}function th(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a){var s=t[a];r=Qs(n,e,s,i,r),e=s}return r}function ev(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a){var s=t[a];r=th(n,e,s,i,r),e=s[s.length-1]}return r}function eh(n,e,t,i,r,a,o,s,h,u,c){if(e==t)return u;var p,g;if(r===0)if(g=Jn(o,s,n[e],n[e+1]),g<u){for(p=0;p<i;++p)h[p]=n[e+p];return h.length=i,g}else return u;for(var y=c||[NaN,NaN],m=e+i;m<t;)if(mu(n,m-i,m,i,o,s,y),g=Jn(o,s,y[0],y[1]),g<u){for(u=g,p=0;p<i;++p)h[p]=y[p];h.length=i,m+=i}else m+=i*Math.max((Math.sqrt(g)-Math.sqrt(u))/r|0,1);if(a&&(mu(n,t-i,e,i,o,s,y),g=Jn(o,s,y[0],y[1]),g<u)){for(u=g,p=0;p<i;++p)h[p]=y[p];h.length=i}return u}function ih(n,e,t,i,r,a,o,s,h,u,c){for(var p=c||[NaN,NaN],g=0,y=t.length;g<y;++g){var m=t[g];u=eh(n,e,m,i,r,a,o,s,h,u,p),e=m}return u}function iv(n,e,t,i,r,a,o,s,h,u,c){for(var p=c||[NaN,NaN],g=0,y=t.length;g<y;++g){var m=t[g];u=ih(n,e,m,i,r,a,o,s,h,u,p),e=m[m.length-1]}return u}function Eu(n,e,t,i){for(var r=0,a=t.length;r<a;++r)n[e++]=t[r];return e}function Mo(n,e,t,i){for(var r=0,a=t.length;r<a;++r)for(var o=t[r],s=0;s<i;++s)n[e++]=o[s];return e}function nh(n,e,t,i,r){for(var a=r||[],o=0,s=0,h=t.length;s<h;++s){var u=Mo(n,e,t[s],i);a[o++]=u,e=u}return a.length=o,a}function nv(n,e,t,i,r){for(var a=r||[],o=0,s=0,h=t.length;s<h;++s){var u=nh(n,e,t[s],i,a[o]);a[o++]=u,e=u[u.length-1]}return a.length=o,a}function rh(n,e,t,i,r,a,o){var s=(t-e)/i;if(s<3){for(;e<t;e+=i)a[o++]=n[e],a[o++]=n[e+1];return o}var h=new Array(s);h[0]=1,h[s-1]=1;for(var u=[e,t-i],c=0;u.length>0;){for(var p=u.pop(),g=u.pop(),y=0,m=n[g],x=n[g+1],C=n[p],S=n[p+1],I=g+i;I<p;I+=i){var O=n[I],A=n[I+1],F=Tp(O,A,m,x,C,S);F>y&&(c=I,y=F)}y>r&&(h[(c-e)/i]=1,g+i<c&&u.push(g,c),c+i<p&&u.push(c,p))}for(var I=0;I<s;++I)h[I]&&(a[o++]=n[e+I*i],a[o++]=n[e+I*i+1]);return o}function rv(n,e,t,i,r,a,o,s){for(var h=0,u=t.length;h<u;++h){var c=t[h];o=rh(n,e,c,i,r,a,o),s.push(o),e=c}return o}function nr(n,e){return e*Math.round(n/e)}function av(n,e,t,i,r,a,o){if(e==t)return o;var s=nr(n[e],r),h=nr(n[e+1],r);e+=i,a[o++]=s,a[o++]=h;var u,c;do if(u=nr(n[e],r),c=nr(n[e+1],r),e+=i,e==t)return a[o++]=u,a[o++]=c,o;while(u==s&&c==h);for(;e<t;){var p=nr(n[e],r),g=nr(n[e+1],r);if(e+=i,!(p==u&&g==c)){var y=u-s,m=c-h,x=p-s,C=g-h;if(y*C==m*x&&(y<0&&x<y||y==x||y>0&&x>y)&&(m<0&&C<m||m==C||m>0&&C>m)){u=p,c=g;continue}a[o++]=u,a[o++]=c,s=u,h=c,u=p,c=g}}return a[o++]=u,a[o++]=c,o}function xu(n,e,t,i,r,a,o,s){for(var h=0,u=t.length;h<u;++h){var c=t[h];o=av(n,e,c,i,r,a,o),s.push(o),e=c}return o}function ov(n,e,t,i,r,a,o,s){for(var h=0,u=t.length;h<u;++h){var c=t[h],p=[];o=xu(n,e,c,i,r,a,o,p),s.push(p),e=c[c.length-1]}return o}function gn(n,e,t,i,r){for(var a=r!==void 0?r:[],o=0,s=e;s<t;s+=i)a[o++]=n.slice(s,s+i);return a.length=o,a}function ma(n,e,t,i,r){for(var a=r!==void 0?r:[],o=0,s=0,h=t.length;s<h;++s){var u=t[s];a[o++]=gn(n,e,u,i,a[o]),e=u}return a.length=o,a}function ah(n,e,t,i,r){for(var a=r!==void 0?r:[],o=0,s=0,h=t.length;s<h;++s){var u=t[s];a[o++]=ma(n,e,u,i,a[o]),e=u[u.length-1]}return a.length=o,a}function Tu(n,e,t,i){for(var r=0,a=n[t-i],o=n[t-i+1];e<t;e+=i){var s=n[e],h=n[e+1];r+=o*s-a*h,a=s,o=h}return r/2}function Cu(n,e,t,i){for(var r=0,a=0,o=t.length;a<o;++a){var s=t[a];r+=Tu(n,e,s,i),e=s}return r}function sv(n,e,t,i){for(var r=0,a=0,o=t.length;a<o;++a){var s=t[a];r+=Cu(n,e,s,i),e=s[s.length-1]}return r}var hv=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),lv=function(n){hv(e,n);function e(t,i){var r=n.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?r.setFlatCoordinates(i,t):r.setCoordinates(t,i),r}return e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,i,r,a){return a<Hn(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),eh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,r,a))},e.prototype.getArea=function(){return Tu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=rh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,ee.XY)},e.prototype.getType=function(){return W.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vn),Mu=lv,uv=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fv=function(n){uv(e,n);function e(t,i){var r=n.call(this)||this;return r.setCoordinates(t,i),r}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){var o=this.flatCoordinates,s=Jn(t,i,o[0],o[1]);if(s<a){for(var h=this.stride,u=0;u<h;++u)r[u]=o[u];return r.length=h,s}else return a},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return cp(this.flatCoordinates,t)},e.prototype.getType=function(){return W.POINT},e.prototype.intersectsExtent=function(t){return Fs(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Eu(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vn),Vi=fv;function cv(n,e,t,i,r){var a=Gs(r,function(o){return!rr(n,e,t,i,o[0],o[1])});return!a}function rr(n,e,t,i,r,a){for(var o=0,s=n[t-i],h=n[t-i+1];e<t;e+=i){var u=n[e],c=n[e+1];h<=a?c>a&&(u-s)*(a-h)-(r-s)*(c-h)>0&&o++:c<=a&&(u-s)*(a-h)-(r-s)*(c-h)<0&&o--,s=u,h=c}return o!==0}function oh(n,e,t,i,r,a){if(t.length===0||!rr(n,e,t[0],i,r,a))return!1;for(var o=1,s=t.length;o<s;++o)if(rr(n,t[o-1],t[o],i,r,a))return!1;return!0}function dv(n,e,t,i,r,a){if(t.length===0)return!1;for(var o=0,s=t.length;o<s;++o){var h=t[o];if(oh(n,e,h,i,r,a))return!0;e=h[h.length-1]}return!1}function wu(n,e,t,i,r,a,o){for(var s,h,u,c,p,g,y,m=r[a+1],x=[],C=0,S=t.length;C<S;++C){var I=t[C];for(c=n[I-i],g=n[I-i+1],s=e;s<I;s+=i)p=n[s],y=n[s+1],(m<=g&&y<=m||g<=m&&m<=y)&&(u=(m-g)/(y-g)*(p-c)+c,x.push(u)),c=p,g=y}var O=NaN,A=-1/0;for(x.sort(Yn),c=x[0],s=1,h=x.length;s<h;++s){p=x[s];var F=Math.abs(p-c);F>A&&(u=(c+p)/2,oh(n,e,t,i,u,m)&&(O=u,A=F)),c=p}return isNaN(O)&&(O=r[a]),o?(o.push(O,m,A),o):[O,m,A]}function pv(n,e,t,i,r){for(var a=[],o=0,s=t.length;o<s;++o){var h=t[o];a=wu(n,e,h,i,r,2*o,a),e=h[h.length-1]}return a}function Su(n,e,t,i,r){var a;for(e+=i;e<t;e+=i)if(a=r(n.slice(e-i,e),n.slice(e,e+i)),a)return a;return!1}function wo(n,e,t,i,r){var a=iu(ze(),n,e,t,i);return $e(r,a)?dn(r,a)||a[0]>=r[0]&&a[2]<=r[2]||a[1]>=r[1]&&a[3]<=r[3]?!0:Su(n,e,t,i,function(o,s){return gp(r,o,s)}):!1}function vv(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a){if(wo(n,e,t[a],i,r))return!0;e=t[a]}return!1}function gv(n,e,t,i,r){return!!(wo(n,e,t,i,r)||rr(n,e,t,i,r[0],r[1])||rr(n,e,t,i,r[0],r[3])||rr(n,e,t,i,r[2],r[1])||rr(n,e,t,i,r[2],r[3]))}function Ou(n,e,t,i,r){if(!gv(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(var a=1,o=t.length;a<o;++a)if(cv(n,t[a-1],t[a],i,r)&&!wo(n,t[a-1],t[a],i,r))return!1;return!0}function _v(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a){var s=t[a];if(Ou(n,e,s,i,r))return!0;e=s[s.length-1]}return!1}function yv(n,e,t,i){for(;e<t-i;){for(var r=0;r<i;++r){var a=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=a}e+=i,t-=i}}function Iu(n,e,t,i){for(var r=0,a=n[t-i],o=n[t-i+1];e<t;e+=i){var s=n[e],h=n[e+1];r+=(s-a)*(h+o),a=s,o=h}return r===0?void 0:r>0}function Ru(n,e,t,i,r){for(var a=r!==void 0?r:!1,o=0,s=t.length;o<s;++o){var h=t[o],u=Iu(n,e,h,i);if(o===0){if(a&&u||!a&&!u)return!1}else if(a&&!u||!a&&u)return!1;e=h}return!0}function mv(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a){var s=t[a];if(!Ru(n,e,s,i,r))return!1;s.length&&(e=s[s.length-1])}return!0}function sh(n,e,t,i,r){for(var a=r!==void 0?r:!1,o=0,s=t.length;o<s;++o){var h=t[o],u=Iu(n,e,h,i),c=o===0?a&&u||!a&&!u:a&&!u||!a&&u;c&&yv(n,e,h,i),e=h}return e}function Pu(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a)e=sh(n,e,t[a],i,r);return e}var Ev=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),So=function(n){Ev(e,n);function e(t,i,r){var a=n.call(this)||this;return a.ends_=[],a.flatInteriorPointRevision_=-1,a.flatInteriorPoint_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,i!==void 0&&r?(a.setFlatCoordinates(i,t),a.ends_=r):a.setCoordinates(t,i),a}return e.prototype.appendLinearRing=function(t){this.flatCoordinates?si(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){return a<Hn(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(th(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ih(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,r,a))},e.prototype.containsXY=function(t,i){return oh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)},e.prototype.getArea=function(){return Cu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),sh(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,ma(i,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Kn(this.getExtent());this.flatInteriorPoint_=wu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Vi(this.getFlatInteriorPoint(),ee.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Mu(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,i=this.flatCoordinates,r=this.ends_,a=[],o=0,s=0,h=r.length;s<h;++s){var u=r[s],c=new Mu(i.slice(o,u),t);a.push(c),o=u}return a},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Ru(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=sh(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=xu(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,r),new e(i,ee.XY,r)},e.prototype.getType=function(){return W.POLYGON},e.prototype.intersectsExtent=function(t){return Ou(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=nh(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()},e}(vn),ar=So;function xv(n,e,t,i){for(var r=t||32,a=[],o=0;o<r;++o)si(a,Fp(n,e,2*Math.PI*o/r,i));return a.push(a[0],a[1]),new So(a,ee.XY,[a.length])}function Lu(n){var e=n[0],t=n[1],i=n[2],r=n[3],a=[e,t,e,r,i,r,i,t,e,t];return new So(a,ee.XY,[a.length])}function Tv(n,e,t){for(var i=e||32,r=n.getStride(),a=n.getLayout(),o=n.getCenter(),s=r*(i+1),h=new Array(s),u=0;u<s;u+=r){h[u]=0,h[u+1]=0;for(var c=2;c<r;c++)h[u+c]=o[c]}var p=[h.length],g=new So(h,a,p);return Cv(g,o,n.getRadius(),t),g}function Cv(n,e,t,i){for(var r=n.getFlatCoordinates(),a=n.getStride(),o=r.length/a-1,s=i||0,h=0;h<=o;++h){var u=h*a,c=s+Pi(h,o)*2*Math.PI/o;r[u]=e[0]+t*Math.cos(c),r[u+1]=e[1]+t*Math.sin(c)}n.changed()}var Au=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Kt={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},Mv=function(n){Au(e,n);function e(t){var i=n.call(this,mt.ERROR)||this;return i.code=t.code,i.message=t.message,i}return e}(oi),wv=function(n){Au(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=t||{};return i.position_=null,i.transform_=Vs,i.watchId_=void 0,i.addChangeListener(Kt.PROJECTION,i.handleProjectionChanged_),i.addChangeListener(Kt.TRACKING,i.handleTrackingChanged_),r.projection!==void 0&&i.setProjection(r.projection),r.trackingOptions!==void 0&&i.setTrackingOptions(r.trackingOptions),i.setTracking(r.tracking!==void 0?r.tracking:!1),i}return e.prototype.disposeInternal=function(){this.setTracking(!1),n.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Co(zt("EPSG:4326"),t),this.position_&&this.set(Kt.POSITION,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!t&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var i=t.coords;this.set(Kt.ACCURACY,i.accuracy),this.set(Kt.ALTITUDE,i.altitude===null?void 0:i.altitude),this.set(Kt.ALTITUDE_ACCURACY,i.altitudeAccuracy===null?void 0:i.altitudeAccuracy),this.set(Kt.HEADING,i.heading===null?void 0:Ri(i.heading)),this.position_?(this.position_[0]=i.longitude,this.position_[1]=i.latitude):this.position_=[i.longitude,i.latitude];var r=this.transform_(this.position_);this.set(Kt.POSITION,r),this.set(Kt.SPEED,i.speed===null?void 0:i.speed);var a=xv(this.position_,i.accuracy);a.applyTransform(this.transform_),this.set(Kt.ACCURACY_GEOMETRY,a),this.changed()},e.prototype.positionError_=function(t){this.dispatchEvent(new Mv(t))},e.prototype.getAccuracy=function(){return this.get(Kt.ACCURACY)},e.prototype.getAccuracyGeometry=function(){return this.get(Kt.ACCURACY_GEOMETRY)||null},e.prototype.getAltitude=function(){return this.get(Kt.ALTITUDE)},e.prototype.getAltitudeAccuracy=function(){return this.get(Kt.ALTITUDE_ACCURACY)},e.prototype.getHeading=function(){return this.get(Kt.HEADING)},e.prototype.getPosition=function(){return this.get(Kt.POSITION)},e.prototype.getProjection=function(){return this.get(Kt.PROJECTION)},e.prototype.getSpeed=function(){return this.get(Kt.SPEED)},e.prototype.getTracking=function(){return this.get(Kt.TRACKING)},e.prototype.getTrackingOptions=function(){return this.get(Kt.TRACKING_OPTIONS)},e.prototype.setProjection=function(t){this.set(Kt.PROJECTION,zt(t))},e.prototype.setTracking=function(t){this.set(Kt.TRACKING,t)},e.prototype.setTrackingOptions=function(t){this.set(Kt.TRACKING_OPTIONS,t)},e}(Be),Sv=wv,or={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ov=function(){function n(e){var t=e||{};this.color_=t.color!==void 0?t.color:null}return n.prototype.clone=function(){var e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0})},n.prototype.getColor=function(){return this.color_},n.prototype.setColor=function(e){this.color_=e},n}(),Hi=Ov;function bu(n,e,t,i,r,a,o){var s,h,u=(t-e)/i;if(u===1)s=e;else if(u===2)s=e,h=r;else if(u!==0){for(var c=n[e],p=n[e+1],g=0,y=[0],m=e+i;m<t;m+=i){var x=n[m],C=n[m+1];g+=Math.sqrt((x-c)*(x-c)+(C-p)*(C-p)),y.push(g),c=x,p=C}var S=r*g,I=Wd(y,S);I<0?(h=(S-y[-I-2])/(y[-I-1]-y[-I-2]),s=e+(-I-2)*i):s=e+I*i}for(var O=o>1?o:2,A=a||new Array(O),m=0;m<O;++m)A[m]=s===void 0?NaN:h===void 0?n[s+m]:qi(n[s+m],n[s+i+m],h);return A}function hh(n,e,t,i,r,a){if(t==e)return null;var o;if(r<n[e+i-1])return a?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return a?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);for(var s=e/i,h=t/i;s<h;){var u=s+h>>1;r<n[(u+1)*i-1]?h=u:s=u+1}var c=n[s*i-1];if(r==c)return n.slice((s-1)*i,(s-1)*i+i);var p=n[(s+1)*i-1],g=(r-c)/(p-c);o=[];for(var y=0;y<i-1;++y)o.push(qi(n[(s-1)*i+y],n[s*i+y],g));return o.push(r),o}function Iv(n,e,t,i,r,a,o){if(o)return hh(n,e,t[t.length-1],i,r,a);var s;if(r<n[i-1])return a?(s=n.slice(0,i),s[i-1]=r,s):null;if(n[n.length-1]<r)return a?(s=n.slice(n.length-i),s[i-1]=r,s):null;for(var h=0,u=t.length;h<u;++h){var c=t[h];if(e!=c){if(r<n[e+i-1])return null;if(r<=n[c-1])return hh(n,e,c,i,r,!1);e=c}}return null}function Nu(n,e,t,i){for(var r=n[e],a=n[e+1],o=0,s=e+i;s<t;s+=i){var h=n[s],u=n[s+1];o+=Math.sqrt((h-r)*(h-r)+(u-a)*(u-a)),r=h,a=u}return o}var Rv=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Pv=function(n){Rv(e,n);function e(t,i){var r=n.call(this)||this;return r.flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?r.setFlatCoordinates(i,t):r.setCoordinates(t,i),r}return e.prototype.appendCoordinate=function(t){this.flatCoordinates?si(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){return a<Hn(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),eh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,r,a))},e.prototype.forEachSegment=function(t){return Su(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,i){if(this.layout!=ee.XYM&&this.layout!=ee.XYZM)return null;var r=i!==void 0?i:!1;return hh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,i){return bu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,this.stride)},e.prototype.getLength=function(){return Nu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=rh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,ee.XY)},e.prototype.getType=function(){return W.LINE_STRING},e.prototype.intersectsExtent=function(t){return wo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vn),_n=Pv,Lv=function(){function n(e){var t=e||{};this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return n.prototype.clone=function(){var e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},n.prototype.getColor=function(){return this.color_},n.prototype.getLineCap=function(){return this.lineCap_},n.prototype.getLineDash=function(){return this.lineDash_},n.prototype.getLineDashOffset=function(){return this.lineDashOffset_},n.prototype.getLineJoin=function(){return this.lineJoin_},n.prototype.getMiterLimit=function(){return this.miterLimit_},n.prototype.getWidth=function(){return this.width_},n.prototype.setColor=function(e){this.color_=e},n.prototype.setLineCap=function(e){this.lineCap_=e},n.prototype.setLineDash=function(e){this.lineDash_=e},n.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e},n.prototype.setLineJoin=function(e){this.lineJoin_=e},n.prototype.setMiterLimit=function(e){this.miterLimit_=e},n.prototype.setWidth=function(e){this.width_=e},n}(),yn=Lv,Xt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Du(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]+2*e,t[1]=n[1]+2*e,t}function Fu(n){return n[0]>0&&n[1]>0}function lh(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function Je(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}var Av=function(){function n(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Je(e.scale),this.displacement_=e.displacement}return n.prototype.clone=function(){var e=this.getScale();return new n({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},n.prototype.getOpacity=function(){return this.opacity_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getScaleArray=function(){return this.scaleArray_},n.prototype.getDisplacement=function(){return this.displacement_},n.prototype.getAnchor=function(){return dt()},n.prototype.getImage=function(e){return dt()},n.prototype.getHitDetectionImage=function(){return dt()},n.prototype.getPixelRatio=function(e){return 1},n.prototype.getImageState=function(){return dt()},n.prototype.getImageSize=function(){return dt()},n.prototype.getOrigin=function(){return dt()},n.prototype.getSize=function(){return dt()},n.prototype.setDisplacement=function(e){this.displacement_=e},n.prototype.setOpacity=function(e){this.opacity_=e},n.prototype.setRotateWithView=function(e){this.rotateWithView_=e},n.prototype.setRotation=function(e){this.rotation_=e},n.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=Je(e)},n.prototype.listenImageChange=function(e){dt()},n.prototype.load=function(){dt()},n.prototype.unlistenImageChange=function(e){dt()},n}(),ku=Av,bv=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Nv=/^([a-z]*)$|^hsla?\(.*\)$/i;function Gu(n){return typeof n=="string"?n:Bu(n)}function Dv(n){var e=document.createElement("div");if(e.style.color=n,e.style.color!==""){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}else return""}var Fv=function(){var n=1024,e={},t=0;return function(i){var r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=n){var a=0;for(var o in e)(a++&3)==0&&(delete e[o],--t)}r=kv(i),e[i]=r,++t}return r}}();function Oo(n){return Array.isArray(n)?n:Fv(n)}function kv(n){var e,t,i,r,a;if(Nv.exec(n)&&(n=Dv(n)),bv.exec(n)){var o=n.length-1,s=void 0;o<=4?s=1:s=2;var h=o===4||o===8;e=parseInt(n.substr(1+0*s,s),16),t=parseInt(n.substr(1+1*s,s),16),i=parseInt(n.substr(1+2*s,s),16),h?r=parseInt(n.substr(1+3*s,s),16):r=255,s==1&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,h&&(r=(r<<4)+r)),a=[e,t,i,r/255]}else n.indexOf("rgba(")==0?(a=n.slice(5,-1).split(",").map(Number),ju(a)):n.indexOf("rgb(")==0?(a=n.slice(4,-1).split(",").map(Number),a.push(1),ju(a)):Mt(!1,14);return a}function ju(n){return n[0]=ie(n[0]+.5|0,0,255),n[1]=ie(n[1]+.5|0,0,255),n[2]=ie(n[2]+.5|0,0,255),n[3]=ie(n[3],0,1),n}function Bu(n){var e=n[0];e!=(e|0)&&(e=e+.5|0);var t=n[1];t!=(t|0)&&(t=t+.5|0);var i=n[2];i!=(i|0)&&(i=i+.5|0);var r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+e+","+t+","+i+","+r+")"}function Li(n){return Array.isArray(n)?Bu(n):n}function hi(n,e,t,i){var r;return t&&t.length?r=t.shift():fo?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function Gv(n){var e=n.offsetWidth,t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function jv(n){var e=n.offsetHeight,t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function Uu(n,e){var t=e.parentNode;t&&t.replaceChild(n,e)}function Io(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function zu(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function Bv(n,e){for(var t=n.childNodes,i=0;;++i){var r=t[i],a=e[i];if(!r&&!a)break;if(r!==a){if(!r){n.appendChild(a);continue}if(!a){n.removeChild(r),--i;continue}n.insertBefore(a,r)}}}var Ro="ol-hidden",Uv="ol-selectable",Ea="ol-unselectable",uh="ol-control",$u="ol-collapsed",zv=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Wu=["style","variant","weight","size","lineHeight","family"],Xu=function(n){var e=n.match(zv);if(!e)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},i=0,r=Wu.length;i<r;++i){var a=e[i+1];a!==void 0&&(t[Wu[i]]=a)}return t.families=t.family.split(/,\s?/),t};function Yu(n){return n===1?"":String(Math.round(n*100)/100)}var qu="10px sans-serif",Ki="#000",Po="round",xa=[],Ta=0,Nr="round",Ca=10,Ma="#000",wa="center",Lo="middle",sr=[0,0,0,0],Sa=1,Zi=new Be,$v=new Sr;$v.setSize=function(){console.warn("labelCache is deprecated.")};var Dr=null,fh,ch={},Wv=function(){var n=100,e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uF013",a,o;function s(u,c,p){for(var g=!0,y=0;y<i;++y){var m=t[y];if(o=Ao(u+" "+c+" "+e+m,r),p!=m){var x=Ao(u+" "+c+" "+e+p+","+m,r);g=g&&x!=o}}return!!g}function h(){for(var u=!0,c=Zi.getKeys(),p=0,g=c.length;p<g;++p){var y=c[p];Zi.get(y)<n&&(s.apply(this,y.split(`
`))?(Mr(ch),Dr=null,fh=void 0,Zi.set(y,n)):(Zi.set(y,Zi.get(y)+1,!0),u=!1))}u&&(clearInterval(a),a=void 0)}return function(u){var c=Xu(u);if(!!c)for(var p=c.families,g=0,y=p.length;g<y;++g){var m=p[g],x=c.style+`
`+c.weight+`
`+m;Zi.get(x)===void 0&&(Zi.set(x,n,!0),s(c.style,c.weight,m)||(Zi.set(x,0,!0),a===void 0&&(a=setInterval(h,32))))}}}(),Xv=function(){var n;return function(e){var t=ch[e];if(t==null){if(fo){var i=Xu(e),r=Vu(e,"\u017Dg"),a=isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight);t=a*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);ch[e]=t}return t}}();function Vu(n,e){return Dr||(Dr=hi(1,1)),n!=fh&&(Dr.font=n,fh=Dr.font),Dr.measureText(e)}function Ao(n,e){return Vu(n,e).width}function Hu(n,e,t){if(e in t)return t[e];var i=Ao(n,e);return t[e]=i,i}function Yv(n,e,t){for(var i=e.length,r=0,a=0;a<i;++a){var o=Ao(n,e[a]);r=Math.max(r,o),t.push(o)}return r}function qv(n,e,t,i,r,a,o,s,h,u,c){n.save(),t!==1&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(h,u),n.scale(c[0],c[1]),Vv(i,n)):c[0]<0||c[1]<0?(n.translate(h,u),n.scale(c[0],c[1]),n.drawImage(i,r,a,o,s,0,0,o,s)):n.drawImage(i,r,a,o,s,h,u,o*c[0],s*c[1]),n.restore()}function Vv(n,e){for(var t=n.contextInstructions,i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}var Hv=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Kv=function(n){Hv(e,n);function e(t){var i=this,r=t.rotateWithView!==void 0?t.rotateWithView:!1;return i=n.call(this,{opacity:1,rotateWithView:r,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0]})||this,i.canvas_=void 0,i.hitDetectionCanvas_=null,i.fill_=t.fill!==void 0?t.fill:null,i.origin_=[0,0],i.points_=t.points,i.radius_=t.radius!==void 0?t.radius:t.radius1,i.radius2_=t.radius2,i.angle_=t.angle!==void 0?t.angle:0,i.stroke_=t.stroke!==void 0?t.stroke:null,i.size_=null,i.renderOptions_=null,i.render(),i}return e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var i=this.getDisplacement();return[t[0]/2-i[0],t[1]/2+i[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var i=this.canvas_[t];if(!i){var r=this.renderOptions_,a=hi(r.size*t,r.size*t);this.draw_(r,a,t),i=a.canvas,this.canvas_[t]=i}return i},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return Xt.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,i,r){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;var a=this.radius_,o=this.radius2_===void 0?a:this.radius2_;if(a<o){var s=a;a=o,o=s}var h=this.radius2_===void 0?this.points_:this.points_*2,u=2*Math.PI/h,c=o*Math.sin(u),p=Math.sqrt(o*o-c*c),g=a-p,y=Math.sqrt(c*c+g*g),m=y/c;if(t==="miter"&&m<=r)return m*i;var x=i/2/m,C=i/2*(g/y),S=Math.sqrt((a+x)*(a+x)+C*C),I=S-a;if(this.radius2_===void 0||t==="bevel")return I*2;var O=a*Math.sin(u),A=Math.sqrt(a*a-O*O),F=o-A,v=Math.sqrt(O*O+F*F),G=v/O;if(G<=r){var B=G*i/2-o-a;return 2*Math.max(I,B)}return I*2},e.prototype.createRenderOptions=function(){var t=Nr,i=0,r=null,a=0,o,s=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=Ma),o=Li(o),s=this.stroke_.getWidth(),s===void 0&&(s=Sa),r=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=Nr),i=this.stroke_.getMiterLimit(),i===void 0&&(i=Ca));var h=this.calculateLineJoinSize_(t,s,i),u=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*u+h);return{strokeStyle:o,strokeWidth:s,size:c,lineDash:r,lineDashOffset:a,lineJoin:t,miterLimit:i}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},e.prototype.draw_=function(t,i,r){if(i.scale(r,r),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){var a=this.fill_.getColor();a===null&&(a=Ki),i.fillStyle=Li(a),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.setLineDash&&t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var i=this.fill_.getColor(),r=0;if(typeof i=="string"&&(i=Oo(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0){var a=hi(t.size,t.size);this.hitDetectionCanvas_=a.canvas,this.drawHitDetectionCanvas_(t,a)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var i=this.points_,r=this.radius_;if(i===1/0)t.arc(0,0,r,0,2*Math.PI);else{var a=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(i*=2);for(var o=this.angle_-Math.PI/2,s=2*Math.PI/i,h=0;h<i;h++){var u=o+h*s,c=h%2==0?r:a;t.lineTo(c*Math.cos(u),c*Math.sin(u))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=Ki,i.fill(),this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},e}(ku),Ku=Kv,Zv=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jv=function(n){Zv(e,n);function e(t){var i=this,r=t||{};return i=n.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,scale:r.scale!==void 0?r.scale:1,rotation:r.rotation!==void 0?r.rotation:0,rotateWithView:r.rotateWithView!==void 0?r.rotateWithView:!1,displacement:r.displacement!==void 0?r.displacement:[0,0]})||this,i}return e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(Ku),dh=Jv,Fr=function(){function n(e){var t=e||{};this.geometry_=null,this.geometryFunction_=Ju,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}return n.prototype.clone=function(){var e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new n({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},n.prototype.getRenderer=function(){return this.renderer_},n.prototype.setRenderer=function(e){this.renderer_=e},n.prototype.setHitDetectionRenderer=function(e){this.hitDetectionRenderer_=e},n.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},n.prototype.getGeometry=function(){return this.geometry_},n.prototype.getGeometryFunction=function(){return this.geometryFunction_},n.prototype.getFill=function(){return this.fill_},n.prototype.setFill=function(e){this.fill_=e},n.prototype.getImage=function(){return this.image_},n.prototype.setImage=function(e){this.image_=e},n.prototype.getStroke=function(){return this.stroke_},n.prototype.setStroke=function(e){this.stroke_=e},n.prototype.getText=function(){return this.text_},n.prototype.setText=function(e){this.text_=e},n.prototype.getZIndex=function(){return this.zIndex_},n.prototype.setGeometry=function(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Ju,this.geometry_=e},n.prototype.setZIndex=function(e){this.zIndex_=e},n}();function Qv(n){var e;if(typeof n=="function")e=n;else{var t;if(Array.isArray(n))t=n;else{Mt(typeof n.getZIndex=="function",41);var i=n;t=[i]}e=function(){return t}}return e}var ph=null;function tg(n,e){if(!ph){var t=new Hi({color:"rgba(255,255,255,0.4)"}),i=new yn({color:"#3399CC",width:1.25});ph=[new Fr({image:new dh({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return ph}function Zu(){var n={},e=[255,255,255,1],t=[0,153,255,1],i=3;return n[W.POLYGON]=[new Fr({fill:new Hi({color:[255,255,255,.5]})})],n[W.MULTI_POLYGON]=n[W.POLYGON],n[W.LINE_STRING]=[new Fr({stroke:new yn({color:e,width:i+2})}),new Fr({stroke:new yn({color:t,width:i})})],n[W.MULTI_LINE_STRING]=n[W.LINE_STRING],n[W.CIRCLE]=n[W.POLYGON].concat(n[W.LINE_STRING]),n[W.POINT]=[new Fr({image:new dh({radius:i*2,fill:new Hi({color:t}),stroke:new yn({color:e,width:i/2})}),zIndex:1/0})],n[W.MULTI_POINT]=n[W.POINT],n[W.GEOMETRY_COLLECTION]=n[W.POLYGON].concat(n[W.LINE_STRING],n[W.POINT]),n}function Ju(n){return n.getGeometry()}var Oa=Fr,eg={POINT:"point",LINE:"line"},Gt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"},ig=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ng=function(n){ig(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un,i.background_=t.background;var r=$t({},t);return typeof t.properties=="object"&&(delete r.properties,$t(r,t.properties)),r[Gt.OPACITY]=t.opacity!==void 0?t.opacity:1,Mt(typeof r[Gt.OPACITY]=="number",64),r[Gt.VISIBLE]=t.visible!==void 0?t.visible:!0,r[Gt.Z_INDEX]=t.zIndex,r[Gt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,r[Gt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,r[Gt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,r[Gt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,i.className_=r.className!==void 0?t.className:"ol-layer",delete r.className,i.setProperties(r),i.state_=null,i}return e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var i=this.state_||{layer:this,managed:t===void 0?!0:t},r=this.getZIndex();return i.opacity=ie(Math.round(this.getOpacity()*100)/100,0,1),i.sourceState=this.getSourceState(),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=r===void 0&&!i.managed?1/0:r,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i},e.prototype.getLayersArray=function(t){return dt()},e.prototype.getLayerStatesArray=function(t){return dt()},e.prototype.getExtent=function(){return this.get(Gt.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(Gt.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(Gt.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(Gt.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(Gt.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(Gt.OPACITY)},e.prototype.getSourceState=function(){return dt()},e.prototype.getVisible=function(){return this.get(Gt.VISIBLE)},e.prototype.getZIndex=function(){return this.get(Gt.Z_INDEX)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(Gt.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(Gt.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(Gt.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(Gt.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(Gt.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){Mt(typeof t=="number",64),this.set(Gt.OPACITY,t)},e.prototype.setVisible=function(t){this.set(Gt.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(Gt.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),n.prototype.disposeInternal.call(this)},e}(Be),Qu=ng,hr={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},rg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ag=function(n){rg(e,n);function e(t){var i=this,r=$t({},t);delete r.source,i=n.call(this,r)||this,i.on,i.once,i.un,i.mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,t.render&&(i.render=t.render),t.map&&i.setMap(t.map),i.addChangeListener(Gt.SOURCE,i.handleSourcePropertyChange_);var a=t.source?t.source:null;return i.setSource(a),i}return e.prototype.getLayersArray=function(t){var i=t||[];return i.push(this),i},e.prototype.getLayerStatesArray=function(t){var i=t||[];return i.push(this.getLayerState()),i},e.prototype.getSource=function(){return this.get(Gt.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():hr.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Wt(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Rt(t,mt.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(i){return i([])})},e.prototype.render=function(t,i){var r=this.getRenderer();if(r.prepareFrame(t))return r.renderFrame(t,i)},e.prototype.setMapInternal=function(t){this.set(Gt.MAP,t)},e.prototype.getMapInternal=function(){return this.get(Gt.MAP)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Wt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Wt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Rt(t,or.PRECOMPOSE,function(i){var r=i,a=r.frameState.layerStatesArray,o=this.getLayerState(!1);Mt(!a.some(function(s){return s.layer===o.layer}),67),a.push(o)},this),this.mapRenderKey_=Rt(this,mt.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(Gt.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),n.prototype.disposeInternal.call(this)},e}(Qu);function bo(n,e){if(!n.visible)return!1;var t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;var i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}var No=ag;function og(n,e,t,i,r){tf(n,e,t||0,i||n.length-1,r||sg)}function tf(n,e,t,i,r){for(;i>t;){if(i-t>600){var a=i-t+1,o=e-t+1,s=Math.log(a),h=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*h*(a-h)/a)*(o-a/2<0?-1:1),c=Math.max(t,Math.floor(e-o*h/a+u)),p=Math.min(i,Math.floor(e+(a-o)*h/a+u));tf(n,e,c,p,r)}var g=n[e],y=t,m=i;for(Ia(n,t,e),r(n[i],g)>0&&Ia(n,t,i);y<m;){for(Ia(n,y,m),y++,m--;r(n[y],g)<0;)y++;for(;r(n[m],g)>0;)m--}r(n[t],g)===0?Ia(n,t,m):(m++,Ia(n,m,i)),m<=e&&(t=m+1),e<=m&&(i=m-1)}}function Ia(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function sg(n,e){return n<e?-1:n>e?1:0}class ef{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Fo(e,t))return i;const r=this.toBBox,a=[];for(;t;){for(let o=0;o<t.children.length;o++){const s=t.children[o],h=t.leaf?r(s):s;Fo(e,h)&&(t.leaf?i.push(s):gh(e,h)?this._all(s,i):a.push(s))}t=a.pop()}return i}collides(e){let t=this.data;if(!Fo(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const a=t.children[r],o=t.leaf?this.toBBox(a):a;if(Fo(e,o)){if(t.leaf||gh(e,o))return!0;i.push(a)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Gr([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),a=[],o=[];let s,h,u;for(;i||a.length;){if(i||(i=a.pop(),h=a[a.length-1],s=o.pop(),u=!0),i.leaf){const c=hg(e,i.children,t);if(c!==-1)return i.children.splice(c,1),a.push(i),this._condense(a),this}!u&&!i.leaf&&gh(i,r)?(a.push(i),o.push(s),s=0,h=i,i=i.children[0]):h?(s++,i=h.children[s],u=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const a=i-t+1;let o=this._maxEntries,s;if(a<=o)return s=Gr(e.slice(t,i+1)),kr(s,this.toBBox),s;r||(r=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,r-1))),s=Gr([]),s.leaf=!1,s.height=r;const h=Math.ceil(a/o),u=h*Math.ceil(Math.sqrt(o));nf(e,t,i,u,this.compareMinX);for(let c=t;c<=i;c+=u){const p=Math.min(c+u-1,i);nf(e,c,p,h,this.compareMinY);for(let g=c;g<=p;g+=h){const y=Math.min(g+h-1,p);s.children.push(this._build(e,g,y,r-1))}}return kr(s,this.toBBox),s}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let a=1/0,o=1/0,s;for(let h=0;h<t.children.length;h++){const u=t.children[h],c=vh(u),p=fg(e,u)-c;p<o?(o=p,a=c<a?c:a,s=u):p===o&&c<a&&(a=c,s=u)}t=s||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),a=[],o=this._chooseSubtree(r,this.data,t,a);for(o.children.push(e),Pa(o,r);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(r,a,t)}_split(e,t){const i=e[t],r=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,r);const o=this._chooseSplitIndex(i,a,r),s=Gr(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,kr(i,this.toBBox),kr(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(i,s)}_splitRoot(e,t){this.data=Gr([e,t]),this.data.height=e.height+1,this.data.leaf=!1,kr(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,a=1/0,o=1/0;for(let s=t;s<=i-t;s++){const h=Ra(e,0,s,this.toBBox),u=Ra(e,s,i,this.toBBox),c=cg(h,u),p=vh(h)+vh(u);c<a?(a=c,r=s,o=p<o?p:o):c===a&&p<o&&(o=p,r=s)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:lg,a=e.leaf?this.compareMinY:ug,o=this._allDistMargin(e,t,i,r),s=this._allDistMargin(e,t,i,a);o<s&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const a=this.toBBox,o=Ra(e,0,t,a),s=Ra(e,i-t,i,a);let h=Do(o)+Do(s);for(let u=t;u<i-t;u++){const c=e.children[u];Pa(o,e.leaf?a(c):c),h+=Do(o)}for(let u=i-t-1;u>=t;u--){const c=e.children[u];Pa(s,e.leaf?a(c):c),h+=Do(s)}return h}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)Pa(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():kr(e[t],this.toBBox)}}function hg(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function kr(n,e){Ra(n,0,n.children.length,e,n)}function Ra(n,e,t,i,r){r||(r=Gr(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let a=e;a<t;a++){const o=n.children[a];Pa(r,n.leaf?i(o):o)}return r}function Pa(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function lg(n,e){return n.minX-e.minX}function ug(n,e){return n.minY-e.minY}function vh(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Do(n){return n.maxX-n.minX+(n.maxY-n.minY)}function fg(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function cg(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),a=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,a-i)}function gh(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Fo(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function Gr(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function nf(n,e,t,i,r){const a=[e,t];for(;a.length;){if(t=a.pop(),e=a.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;og(n,o,e,t,r),a.push(e,o,o,t)}}var dg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rf={RENDER_ORDER:"renderOrder"},pg=function(n){dg(e,n);function e(t){var i=this,r=t||{},a=$t({},r);return delete a.style,delete a.renderBuffer,delete a.updateWhileAnimating,delete a.updateWhileInteracting,i=n.call(this,a)||this,i.declutter_=r.declutter!==void 0?r.declutter:!1,i.renderBuffer_=r.renderBuffer!==void 0?r.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(r.style),i.updateWhileAnimating_=r.updateWhileAnimating!==void 0?r.updateWhileAnimating:!1,i.updateWhileInteracting_=r.updateWhileInteracting!==void 0?r.updateWhileInteracting:!1,i}return e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(t){return n.prototype.getFeatures.call(this,t)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(rf.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new ef(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(rf.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=t!==void 0?t:tg,this.styleFunction_=t===null?void 0:Qv(this.style_),this.changed()},e}(No),vg=pg,La={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ko=[La.FILL],mn=[La.STROKE],lr=[La.BEGIN_PATH],af=[La.CLOSE_PATH],vt=La,gg=function(){function n(){}return n.prototype.drawCustom=function(e,t,i,r){},n.prototype.drawGeometry=function(e){},n.prototype.setStyle=function(e){},n.prototype.drawCircle=function(e,t){},n.prototype.drawFeature=function(e,t){},n.prototype.drawGeometryCollection=function(e,t){},n.prototype.drawLineString=function(e,t){},n.prototype.drawMultiLineString=function(e,t){},n.prototype.drawMultiPoint=function(e,t){},n.prototype.drawMultiPolygon=function(e,t){},n.prototype.drawPoint=function(e,t){},n.prototype.drawPolygon=function(e,t){},n.prototype.drawText=function(e,t){},n.prototype.setFillStrokeStyle=function(e,t){},n.prototype.setImageStyle=function(e,t){},n.prototype.setTextStyle=function(e,t){},n}(),of=gg,_g=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yg=function(n){_g(e,n);function e(t,i,r,a){var o=n.call(this)||this;return o.tolerance=t,o.maxExtent=i,o.pixelRatio=a,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return e.prototype.applyPixelRatio=function(t){var i=this.pixelRatio;return i==1?t:t.map(function(r){return r*i})},e.prototype.appendFlatPointCoordinates=function(t,i){for(var r=this.getBufferedMaxExtent(),a=this.tmpCoordinate_,o=this.coordinates,s=o.length,h=0,u=t.length;h<u;h+=i)a[0]=t[h],a[1]=t[h+1],ca(r,a)&&(o[s++]=a[0],o[s++]=a[1]);return s},e.prototype.appendFlatLineCoordinates=function(t,i,r,a,o,s){var h=this.coordinates,u=h.length,c=this.getBufferedMaxExtent();s&&(i+=a);var p=t[i],g=t[i+1],y=this.tmpCoordinate_,m=!0,x,C,S;for(x=i+a;x<r;x+=a)y[0]=t[x],y[1]=t[x+1],S=ks(c,y),S!==C?(m&&(h[u++]=p,h[u++]=g,m=!1),h[u++]=y[0],h[u++]=y[1]):S===de.INTERSECTING?(h[u++]=y[0],h[u++]=y[1],m=!1):m=!0,p=y[0],g=y[1],C=S;return(o&&m||x===i+a)&&(h[u++]=p,h[u++]=g),u},e.prototype.drawCustomCoordinates_=function(t,i,r,a,o){for(var s=0,h=r.length;s<h;++s){var u=r[s],c=this.appendFlatLineCoordinates(t,i,u,a,!1,!1);o.push(c),i=u}return i},e.prototype.drawCustom=function(t,i,r,a){this.beginGeometry(t,i);var o=t.getType(),s=t.getStride(),h=this.coordinates.length,u,c,p,g,y;switch(o){case W.MULTI_POLYGON:u=t.getOrientedFlatCoordinates(),g=[];var m=t.getEndss();y=0;for(var x=0,C=m.length;x<C;++x){var S=[];y=this.drawCustomCoordinates_(u,y,m[x],s,S),g.push(S)}this.instructions.push([vt.CUSTOM,h,g,t,r,ah]),this.hitDetectionInstructions.push([vt.CUSTOM,h,g,t,a||r,ah]);break;case W.POLYGON:case W.MULTI_LINE_STRING:p=[],u=o==W.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),y=this.drawCustomCoordinates_(u,0,t.getEnds(),s,p),this.instructions.push([vt.CUSTOM,h,p,t,r,ma]),this.hitDetectionInstructions.push([vt.CUSTOM,h,p,t,a||r,ma]);break;case W.LINE_STRING:case W.CIRCLE:u=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,s,!1,!1),this.instructions.push([vt.CUSTOM,h,c,t,r,gn]),this.hitDetectionInstructions.push([vt.CUSTOM,h,c,t,a||r,gn]);break;case W.MULTI_POINT:u=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,s),c>h&&(this.instructions.push([vt.CUSTOM,h,c,t,r,gn]),this.hitDetectionInstructions.push([vt.CUSTOM,h,c,t,a||r,gn]));break;case W.POINT:u=t.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([vt.CUSTOM,h,c,t,r]),this.hitDetectionInstructions.push([vt.CUSTOM,h,c,t,a||r]);break}this.endGeometry(i)},e.prototype.beginGeometry=function(t,i){this.beginGeometryInstruction1_=[vt.BEGIN_GEOMETRY,i,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[vt.BEGIN_GEOMETRY,i,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var i,r=t.length,a,o,s=-1;for(i=0;i<r;++i)a=t[i],o=a[0],o==vt.END_GEOMETRY?s=i:o==vt.BEGIN_GEOMETRY&&(a[2]=i,Xd(this.hitDetectionInstructions,s,i),s=-1)},e.prototype.setFillStrokeStyle=function(t,i){var r=this.state;if(t){var a=t.getColor();r.fillStyle=Li(a||Ki)}else r.fillStyle=void 0;if(i){var o=i.getColor();r.strokeStyle=Li(o||Ma);var s=i.getLineCap();r.lineCap=s!==void 0?s:Po;var h=i.getLineDash();r.lineDash=h?h.slice():xa;var u=i.getLineDashOffset();r.lineDashOffset=u||Ta;var c=i.getLineJoin();r.lineJoin=c!==void 0?c:Nr;var p=i.getWidth();r.lineWidth=p!==void 0?p:Sa;var g=i.getMiterLimit();r.miterLimit=g!==void 0?g:Ca,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},e.prototype.createFill=function(t){var i=t.fillStyle,r=[vt.SET_FILL_STYLE,i];return typeof i!="string"&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[vt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,i){var r=t.fillStyle;(typeof r!="string"||t.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(i.call(this,t)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,i){var r=t.strokeStyle,a=t.lineCap,o=t.lineDash,s=t.lineDashOffset,h=t.lineJoin,u=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=a||o!=t.currentLineDash&&!qn(t.currentLineDash,o)||t.currentLineDashOffset!=s||t.currentLineJoin!=h||t.currentLineWidth!=u||t.currentMiterLimit!=c)&&(r!==void 0&&i.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=a,t.currentLineDash=o,t.currentLineDashOffset=s,t.currentLineJoin=h,t.currentLineWidth=u,t.currentMiterLimit=c)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[vt.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Ql(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;fa(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(of),Aa=yg,mg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Eg=function(n){mg(e,n);function e(t,i,r,a){var o=n.call(this,t,i,r,a)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterImageWithText_=void 0,o}return e.prototype.drawPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var r=t.getFlatCoordinates(),a=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(r,a);this.instructions.push([vt.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([vt.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},e.prototype.drawMultiPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var r=t.getFlatCoordinates(),a=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(r,a);this.instructions.push([vt.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([vt.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,n.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,i){var r=t.getAnchor(),a=t.getSize(),o=t.getHitDetectionImage(),s=t.getImage(this.pixelRatio),h=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=o,this.image_=s,this.height_=a[1],this.opacity_=t.getOpacity(),this.originX_=h[0]*this.imagePixelRatio_,this.originY_=h[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=a[0],this.declutterImageWithText_=i},e}(Aa),xg=Eg,Tg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Cg=function(n){Tg(e,n);function e(t,i,r,a){return n.call(this,t,i,r,a)||this}return e.prototype.drawFlatCoordinates_=function(t,i,r,a){var o=this.coordinates.length,s=this.appendFlatLineCoordinates(t,i,r,a,!1,!1),h=[vt.MOVE_TO_LINE_TO,o,s];return this.instructions.push(h),this.hitDetectionInstructions.push(h),r},e.prototype.drawLineString=function(t,i){var r=this.state,a=r.strokeStyle,o=r.lineWidth;if(!(a===void 0||o===void 0)){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([vt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,xa,Ta],lr);var s=t.getFlatCoordinates(),h=t.getStride();this.drawFlatCoordinates_(s,0,s.length,h),this.hitDetectionInstructions.push(mn),this.endGeometry(i)}},e.prototype.drawMultiLineString=function(t,i){var r=this.state,a=r.strokeStyle,o=r.lineWidth;if(!(a===void 0||o===void 0)){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([vt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],lr);for(var s=t.getEnds(),h=t.getFlatCoordinates(),u=t.getStride(),c=0,p=0,g=s.length;p<g;++p)c=this.drawFlatCoordinates_(h,c,s[p],u);this.hitDetectionInstructions.push(mn),this.endGeometry(i)}},e.prototype.finish=function(){var t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(mn),this.reverseHitDetectionInstructions(),this.state=null,n.prototype.finish.call(this)},e.prototype.applyStroke=function(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(mn),t.lastStroke=this.coordinates.length),t.lastStroke=0,n.prototype.applyStroke.call(this,t),this.instructions.push(lr)},e}(Aa),Mg=Cg,wg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Sg=function(n){wg(e,n);function e(t,i,r,a){return n.call(this,t,i,r,a)||this}return e.prototype.drawFlatCoordinatess_=function(t,i,r,a){var o=this.state,s=o.fillStyle!==void 0,h=o.strokeStyle!==void 0,u=r.length;this.instructions.push(lr),this.hitDetectionInstructions.push(lr);for(var c=0;c<u;++c){var p=r[c],g=this.coordinates.length,y=this.appendFlatLineCoordinates(t,i,p,a,!0,!h),m=[vt.MOVE_TO_LINE_TO,g,y];this.instructions.push(m),this.hitDetectionInstructions.push(m),h&&(this.instructions.push(af),this.hitDetectionInstructions.push(af)),i=p}return s&&(this.instructions.push(ko),this.hitDetectionInstructions.push(ko)),h&&(this.instructions.push(mn),this.hitDetectionInstructions.push(mn)),i},e.prototype.drawCircle=function(t,i){var r=this.state,a=r.fillStyle,o=r.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_FILL_STYLE,Ki]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var s=t.getFlatCoordinates(),h=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,h,!1,!1);var c=[vt.CIRCLE,u];this.instructions.push(lr,c),this.hitDetectionInstructions.push(lr,c),r.fillStyle!==void 0&&(this.instructions.push(ko),this.hitDetectionInstructions.push(ko)),r.strokeStyle!==void 0&&(this.instructions.push(mn),this.hitDetectionInstructions.push(mn)),this.endGeometry(i)}},e.prototype.drawPolygon=function(t,i){var r=this.state,a=r.fillStyle,o=r.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_FILL_STYLE,Ki]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var s=t.getEnds(),h=t.getOrientedFlatCoordinates(),u=t.getStride();this.drawFlatCoordinatess_(h,0,s,u),this.endGeometry(i)}},e.prototype.drawMultiPolygon=function(t,i){var r=this.state,a=r.fillStyle,o=r.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_FILL_STYLE,Ki]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var s=t.getEndss(),h=t.getOrientedFlatCoordinates(),u=t.getStride(),c=0,p=0,g=s.length;p<g;++p)c=this.drawFlatCoordinatess_(h,c,s[p],u);this.endGeometry(i)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(t!==0)for(var i=this.coordinates,r=0,a=i.length;r<a;++r)i[r]=nr(i[r],t);return n.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state,i=t.fillStyle;i!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)},e}(Aa),sf=Sg;function Og(n,e,t,i,r){var a=t,o=t,s=0,h=0,u=t,c,p,g,y,m,x,C,S,I,O;for(p=t;p<i;p+=r){var A=e[p],F=e[p+1];m!==void 0&&(I=A-m,O=F-x,y=Math.sqrt(I*I+O*O),C!==void 0&&(h+=g,c=Math.acos((C*I+S*O)/(g*y)),c>n&&(h>s&&(s=h,a=u,o=p),h=0,u=p-r)),g=y,C=I,S=O),m=A,x=F}return h+=y,h>s?[u,p]:[a,o]}var Ig=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Go={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Rg=function(n){Ig(e,n);function e(t,i,r,a){var o=n.call(this,t,i,r,a)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return e.prototype.finish=function(){var t=n.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},e.prototype.drawText=function(t,i){var r=this.textFillState_,a=this.textStrokeState_,o=this.textState_;if(!(this.text_===""||!o||!r&&!a)){var s=this.coordinates,h=s.length,u=t.getType(),c=null,p=t.getStride();if(o.placement===eg.LINE&&(u==W.LINE_STRING||u==W.MULTI_LINE_STRING||u==W.POLYGON||u==W.MULTI_POLYGON)){if(!$e(this.getBufferedMaxExtent(),t.getExtent()))return;var g=void 0;if(c=t.getFlatCoordinates(),u==W.LINE_STRING)g=[c.length];else if(u==W.MULTI_LINE_STRING)g=t.getEnds();else if(u==W.POLYGON)g=t.getEnds().slice(0,1);else if(u==W.MULTI_POLYGON){var y=t.getEndss();g=[];for(var m=0,x=y.length;m<x;++m)g.push(y[m][0])}this.beginGeometry(t,i);for(var C=o.textAlign,S=0,I=void 0,O=0,A=g.length;O<A;++O){if(C==null){var F=Og(o.maxAngle,c,S,g[O],p);S=F[0],I=F[1]}else I=g[O];for(var m=S;m<I;m+=p)s.push(c[m],c[m+1]);var v=s.length;S=g[O],this.drawChars_(h,v),h=v}this.endGeometry(i)}else{var G=o.overflow?null:[];switch(u){case W.POINT:case W.MULTI_POINT:c=t.getFlatCoordinates();break;case W.LINE_STRING:c=t.getFlatMidpoint();break;case W.CIRCLE:c=t.getCenter();break;case W.MULTI_LINE_STRING:c=t.getFlatMidpoints(),p=2;break;case W.POLYGON:c=t.getFlatInteriorPoint(),o.overflow||G.push(c[2]/this.resolution),p=3;break;case W.MULTI_POLYGON:var B=t.getFlatInteriorPoints();c=[];for(var m=0,x=B.length;m<x;m+=3)o.overflow||G.push(B[m+2]/this.resolution),c.push(B[m],B[m+1]);if(c.length===0)return;p=2;break}var v=this.appendFlatPointCoordinates(c,p);if(v===h)return;if(G&&(v-h)/2!=c.length/p){var H=h/2;G=G.filter(function(Pt,St){var Nt=s[(H+St)*2]===c[St*p]&&s[(H+St)*2+1]===c[St*p+1];return Nt||--H,Nt})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);var tt=o.padding;if(tt!=sr&&(o.scale[0]<0||o.scale[1]<0)){var et=o.padding[0],Z=o.padding[1],ut=o.padding[2],Et=o.padding[3];o.scale[0]<0&&(Z=-Z,Et=-Et),o.scale[1]<0&&(et=-et,ut=-ut),tt=[et,Z,ut,Et]}var at=this.pixelRatio;this.instructions.push([vt.DRAW_IMAGE,h,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,tt==sr?sr:tt.map(function(Pt){return Pt*at}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,G]);var _t=1/at;this.hitDetectionInstructions.push([vt.DRAW_IMAGE,h,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[_t,_t],NaN,this.declutterImageWithText_,tt,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,G]),this.endGeometry(i)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,i=this.textState_,r=this.textFillState_,a=this.strokeKey_;t&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var o=this.textKey_;o in this.textStates||(this.textStates[o]={font:i.font,textAlign:i.textAlign||wa,textBaseline:i.textBaseline||Lo,scale:i.scale});var s=this.fillKey_;r&&(s in this.fillStates||(this.fillStates[s]={fillStyle:r.fillStyle}))},e.prototype.drawChars_=function(t,i){var r=this.textStrokeState_,a=this.textState_,o=this.strokeKey_,s=this.textKey_,h=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,c=Go[a.textBaseline],p=this.textOffsetY_*u,g=this.text_,y=r?r.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([vt.DRAW_CHARS,t,i,c,a.overflow,h,a.maxAngle,u,p,o,y*u,g,s,1]),this.hitDetectionInstructions.push([vt.DRAW_CHARS,t,i,c,a.overflow,h,a.maxAngle,1,p,o,y,g,s,1/u])},e.prototype.setTextStyle=function(t,i){var r,a,o;if(!t)this.text_="";else{var s=t.getFill();s?(a=this.textFillState_,a||(a={},this.textFillState_=a),a.fillStyle=Li(s.getColor()||Ki)):(a=null,this.textFillState_=a);var h=t.getStroke();if(!h)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);var u=h.getLineDash(),c=h.getLineDashOffset(),p=h.getWidth(),g=h.getMiterLimit();o.lineCap=h.getLineCap()||Po,o.lineDash=u?u.slice():xa,o.lineDashOffset=c===void 0?Ta:c,o.lineJoin=h.getLineJoin()||Nr,o.lineWidth=p===void 0?Sa:p,o.miterLimit=g===void 0?Ca:g,o.strokeStyle=Li(h.getColor()||Ma)}r=this.textState_;var y=t.getFont()||qu;Wv(y);var m=t.getScaleArray();r.overflow=t.getOverflow(),r.font=y,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||Lo,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||sr,r.scale=m===void 0?[1,1]:m;var x=t.getOffsetX(),C=t.getOffsetY(),S=t.getRotateWithView(),I=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=x===void 0?0:x,this.textOffsetY_=C===void 0?0:C,this.textRotateWithView_=S===void 0?!1:S,this.textRotation_=I===void 0?0:I,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:Ot(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.textBaseline||"?"),this.fillKey_=a?typeof a.fillStyle=="string"?a.fillStyle:"|"+Ot(a.fillStyle):""}this.declutterImageWithText_=i},e}(Aa),Pg=Rg,Lg={Circle:sf,Default:Aa,Image:xg,LineString:Mg,Polygon:sf,Text:Pg},Ag=function(){function n(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}return n.prototype.finish=function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var i=this.buildersByZIndex_[t];for(var r in i){var a=i[r].finish();e[t][r]=a}}return e},n.prototype.getBuilder=function(e,t){var i=e!==void 0?e.toString():"0",r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);var a=r[t];if(a===void 0){var o=Lg[t];a=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=a}return a},n}(),hf=Ag,bg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ng=function(n){bg(e,n);function e(t){var i=n.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=t,i.declutterExecutorGroup=null,i}return e.prototype.getFeatures=function(t){return dt()},e.prototype.prepareFrame=function(t){return dt()},e.prototype.renderFrame=function(t,i){return dt()},e.prototype.loadedTileCallback=function(t,i,r){t[i]||(t[i]={}),t[i][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,i,r){return function(a,o){var s=this.loadedTileCallback.bind(this,r,a);return t.forEachLoadedTile(i,a,o,s)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,i,r,a,o){},e.prototype.getDataAtPixel=function(t,i,r){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){var i=t.target;i.getState()===Xt.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var i=t.getState();return i!=Xt.LOADED&&i!=Xt.ERROR&&t.addEventListener(mt.CHANGE,this.boundHandleImageChange_),i==Xt.IDLE&&(t.load(),i=t.getState()),i==Xt.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==hr.READY&&t.changed()},e}(Or),Dg=Ng,Fg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),kg=function(n){Fg(e,n);function e(t,i,r,a){var o=n.call(this,t)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=a,o}return e}(oi),lf=kg,Gg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),jg=function(n){Gg(e,n);function e(t){var i=n.call(this,t)||this;return i.container=null,i.renderedResolution,i.tempTransform=Ii(),i.pixelTransform=Ii(),i.inversePixelTransform=Ii(),i.context=null,i.containerReused=!1,i.pixelContext_=null,i}return e.prototype.getBackground=function(t){var i=this.getLayer(),r=i.getBackground();return typeof r=="function"&&(r=r(t.viewState.resolution)),r||void 0},e.prototype.useContainer=function(t,i,r,a){var o=this.getLayer().getClassName(),s,h;if(t&&t.className===o&&t.style.opacity===""&&r===1&&(!a||t.style.backgroundColor&&qn(Oo(t.style.backgroundColor),Oo(a)))){var u=t.firstElementChild;u instanceof HTMLCanvasElement&&(h=u.getContext("2d"))}if(h&&h.canvas.style.transform===i?(this.container=t,this.context=h,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=o;var c=s.style;c.position="absolute",c.width="100%",c.height="100%",a&&(c.backgroundColor=a),h=hi();var u=h.canvas;s.appendChild(u),c=u.style,c.position="absolute",c.left="0",c.transformOrigin="top left",this.container=s,this.context=h}},e.prototype.clipUnrotated=function(t,i,r){var a=Zn(r),o=vo(r),s=po(r),h=co(r);ue(i.coordinateToPixelTransform,a),ue(i.coordinateToPixelTransform,o),ue(i.coordinateToPixelTransform,s),ue(i.coordinateToPixelTransform,h);var u=this.inversePixelTransform;ue(u,a),ue(u,o),ue(u,s),ue(u,h),t.save(),t.beginPath(),t.moveTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(h[0]),Math.round(h[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,i,r){var a=this.getLayer();if(a.hasListener(t)){var o=new lf(t,this.inversePixelTransform,r,i);a.dispatchEvent(o)}},e.prototype.preRender=function(t,i){this.dispatchRenderEvent_(or.PRERENDER,t,i)},e.prototype.postRender=function(t,i){this.dispatchRenderEvent_(or.POSTRENDER,t,i)},e.prototype.getRenderTransform=function(t,i,r,a,o,s,h){var u=o/2,c=s/2,p=a/i,g=-p,y=-t[0]+h,m=-t[1];return Yi(this.tempTransform,u,c,p,g,-r,y,m)},e.prototype.getDataAtPixel=function(t,i,r){var a=ue(this.inversePixelTransform,t.slice()),o=this.context,s=this.getLayer(),h=s.getExtent();if(h){var u=ue(i.pixelToCoordinateTransform,t.slice());if(!ca(h,u))return null}var c=Math.round(a[0]),p=Math.round(a[1]),g=this.pixelContext_;if(!g){var y=document.createElement("canvas");y.width=1,y.height=1,g=y.getContext("2d"),this.pixelContext_=g}g.clearRect(0,0,1,1);var m;try{g.drawImage(o.canvas,c,p,1,1,0,0,1,1),m=g.getImageData(0,0,1,1).data}catch(x){return x.name==="SecurityError"?(this.pixelContext_=null,new Uint8Array):m}return m[3]===0?null:m},e}(Dg),uf=jg,Zt={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function Bg(n,e,t,i,r,a,o,s,h,u,c,p){var g=n[e],y=n[e+1],m=0,x=0,C=0,S=0;function I(){m=g,x=y,e+=i,g=n[e],y=n[e+1],S+=C,C=Math.sqrt((g-m)*(g-m)+(y-x)*(y-x))}do I();while(e<t-i&&S+C<a);for(var O=C===0?0:(a-S)/C,A=qi(m,g,O),F=qi(x,y,O),v=e-i,G=S,B=a+s*h(u,r,c);e<t-i&&S+C<B;)I();O=C===0?0:(B-S)/C;var H=qi(m,g,O),tt=qi(x,y,O),et;if(p){var Z=[A,F,H,tt];Js(Z,0,4,2,p,Z,Z),et=Z[0]>Z[2]}else et=A>H;var ut=Math.PI,Et=[],at=v+i===e;e=v,C=0,S=G,g=n[e],y=n[e+1];var _t;if(at){I(),_t=Math.atan2(y-x,g-m),et&&(_t+=_t>0?-ut:ut);var st=(H+A)/2,Pt=(tt+F)/2;return Et[0]=[st,Pt,(B-a)/2,_t,r],Et}for(var St=0,Nt=r.length;St<Nt;){I();var It=Math.atan2(y-x,g-m);if(et&&(It+=It>0?-ut:ut),_t!==void 0){var V=It-_t;if(V+=V>ut?-2*ut:V<-ut?2*ut:0,Math.abs(V)>o)return null}_t=It;for(var Qt=St,Ct=0;St<Nt;++St){var te=et?Nt-St-1:St,Se=s*h(u,r[te],c);if(e+i<t&&S+C<a+Ct+Se/2)break;Ct+=Se}if(St!==Qt){var ve=et?r.substring(Nt-Qt,Nt-St):r.substring(Qt,St);O=C===0?0:(a+Ct/2-S)/C;var st=qi(m,g,O),Pt=qi(x,y,O);Et.push([st,Pt,Ct/2,It,ve]),a+=Ct}}return Et}var jr=ze(),En=[],Ji=[],Qi=[],xn=[];function ff(n){return n[3].declutterBox}var Ug=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function cf(n,e){return(e==="start"||e==="end")&&!Ug.test(n)&&(e=e==="start"?"left":"right"),Go[e]}var zg=function(){function n(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Ii(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return n.prototype.createLabel=function(e,t,i,r){var a=e+t+i+r;if(this.labels_[a])return this.labels_[a];var o=r?this.strokeStates[r]:null,s=i?this.fillStates[i]:null,h=this.textStates[t],u=this.pixelRatio,c=[h.scale[0]*u,h.scale[1]*u],p=cf(e,h.textAlign||wa),g=r&&o.lineWidth?o.lineWidth:0,y=e.split(`
`),m=y.length,x=[],C=Yv(h.font,y,x),S=Xv(h.font),I=S*m,O=C+g,A=[],F=(O+2)*c[0],v=(I+g)*c[1],G={width:F<0?Math.floor(F):Math.ceil(F),height:v<0?Math.floor(v):Math.ceil(v),contextInstructions:A};if((c[0]!=1||c[1]!=1)&&A.push("scale",c),A.push("font",h.font),r){A.push("strokeStyle",o.strokeStyle),A.push("lineWidth",g),A.push("lineCap",o.lineCap),A.push("lineJoin",o.lineJoin),A.push("miterLimit",o.miterLimit);var B=fo?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;B.prototype.setLineDash&&(A.push("setLineDash",[o.lineDash]),A.push("lineDashOffset",o.lineDashOffset))}i&&A.push("fillStyle",s.fillStyle),A.push("textBaseline","middle"),A.push("textAlign","center");var H=.5-p,tt=p*O+H*g,et;if(r)for(et=0;et<m;++et)A.push("strokeText",[y[et],tt+H*x[et],.5*(g+S)+et*S]);if(i)for(et=0;et<m;++et)A.push("fillText",[y[et],tt+H*x[et],.5*(g+S)+et*S]);return this.labels_[a]=G,G},n.prototype.replayTextBackground_=function(e,t,i,r,a,o,s){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,a),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),s&&(this.setStrokeStyle_(e,s),e.stroke())},n.prototype.calculateImageOrLabelDimensions_=function(e,t,i,r,a,o,s,h,u,c,p,g,y,m,x,C){s*=g[0],h*=g[1];var S=i-s,I=r-h,O=a+u>e?e-u:a,A=o+c>t?t-c:o,F=m[3]+O*g[0]+m[1],v=m[0]+A*g[1]+m[2],G=S-m[3],B=I-m[0];(x||p!==0)&&(En[0]=G,xn[0]=G,En[1]=B,Ji[1]=B,Ji[0]=G+F,Qi[0]=Ji[0],Qi[1]=B+v,xn[1]=Qi[1]);var H;return p!==0?(H=Yi(Ii(),i,r,1,1,p,-i,-r),ue(H,En),ue(H,Ji),ue(H,Qi),ue(H,xn),mi(Math.min(En[0],Ji[0],Qi[0],xn[0]),Math.min(En[1],Ji[1],Qi[1],xn[1]),Math.max(En[0],Ji[0],Qi[0],xn[0]),Math.max(En[1],Ji[1],Qi[1],xn[1]),jr)):mi(Math.min(G,G+F),Math.min(B,B+v),Math.max(G,G+F),Math.max(B,B+v),jr),y&&(S=Math.round(S),I=Math.round(I)),{drawImageX:S,drawImageY:I,drawImageW:O,drawImageH:A,originX:u,originY:c,declutterBox:{minX:jr[0],minY:jr[1],maxX:jr[2],maxY:jr[3],value:C},canvasTransform:H,scale:g}},n.prototype.replayImageOrLabel_=function(e,t,i,r,a,o,s){var h=!!(o||s),u=r.declutterBox,c=e.canvas,p=s?s[2]*r.scale[0]/2:0,g=u.minX-p<=c.width/t&&u.maxX+p>=0&&u.minY-p<=c.height/t&&u.maxY+p>=0;return g&&(h&&this.replayTextBackground_(e,En,Ji,Qi,xn,o,s),qv(e,r.canvasTransform,a,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},n.prototype.fill_=function(e){if(this.alignFill_){var t=ue(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()},n.prototype.setStrokeStyle_=function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.setLineDash&&(e.lineDashOffset=t[7],e.setLineDash(t[6]))},n.prototype.drawLabelWithPointPlacement_=function(e,t,i,r){var a=this.textStates[t],o=this.createLabel(e,t,r,i),s=this.strokeStates[i],h=this.pixelRatio,u=cf(e,a.textAlign||wa),c=Go[a.textBaseline||Lo],p=s&&s.lineWidth?s.lineWidth:0,g=o.width/h-2*a.scale[0],y=u*g+2*(.5-u)*p,m=c*o.height/h+2*(.5-c)*p;return{label:o,anchorX:y,anchorY:m}},n.prototype.execute_=function(e,t,i,r,a,o,s,h){var u;this.pixelCoordinates_&&qn(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=ir(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),hp(this.renderedTransform_,i));for(var c=0,p=r.length,g=0,y,m,x,C,S,I,O,A,F,v,G,B,H=0,tt=0,et=null,Z=null,ut=this.coordinateCache_,Et=this.viewRotation_,at=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,_t={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Et},st=this.instructions!=r||this.overlaps?0:200,Pt,St,Nt,It;c<p;){var V=r[c],Qt=V[0];switch(Qt){case vt.BEGIN_GEOMETRY:Pt=V[1],It=V[3],Pt.getGeometry()?s!==void 0&&!$e(s,It.getExtent())?c=V[2]+1:++c:c=V[2];break;case vt.BEGIN_PATH:H>st&&(this.fill_(e),H=0),tt>st&&(e.stroke(),tt=0),!H&&!tt&&(e.beginPath(),C=NaN,S=NaN),++c;break;case vt.CIRCLE:g=V[1];var Ct=u[g],te=u[g+1],Se=u[g+2],ve=u[g+3],oe=Se-Ct,Vt=ve-te,sn=Math.sqrt(oe*oe+Vt*Vt);e.moveTo(Ct+sn,te),e.arc(Ct,te,sn,0,2*Math.PI,!0),++c;break;case vt.CLOSE_PATH:e.closePath(),++c;break;case vt.CUSTOM:g=V[1],y=V[2];var ii=V[3],yr=V[4],Oe=V.length==6?V[5]:void 0;_t.geometry=ii,_t.feature=Pt,c in ut||(ut[c]=[]);var De=ut[c];Oe?Oe(u,g,y,2,De):(De[0]=u[g],De[1]=u[g+1],De.length=2),yr(De,_t),++c;break;case vt.DRAW_IMAGE:g=V[1],y=V[2],A=V[3],m=V[4],x=V[5];var ni=V[6],ot=V[7],re=V[8],mr=V[9],ki=V[10],Pn=V[11],Ln=V[12],Gi=V[13],Fe=V[14];if(!A&&V.length>=19){F=V[18],v=V[19],G=V[20],B=V[21];var Ee=this.drawLabelWithPointPlacement_(F,v,G,B);A=Ee.label,V[3]=A;var di=V[22];m=(Ee.anchorX-di)*this.pixelRatio,V[4]=m;var pi=V[23];x=(Ee.anchorY-pi)*this.pixelRatio,V[5]=x,ni=A.height,V[6]=ni,Gi=A.width,V[13]=Gi}var An=void 0;V.length>24&&(An=V[24]);var Ye=void 0,ri=void 0,wi=void 0;V.length>16?(Ye=V[15],ri=V[16],wi=V[17]):(Ye=sr,ri=!1,wi=!1),ki&&at?Pn+=Et:!ki&&!at&&(Pn-=Et);for(var hn=0;g<y;g+=2)if(!(An&&An[hn++]<Gi/this.pixelRatio)){var fe=this.calculateImageOrLabelDimensions_(A.width,A.height,u[g],u[g+1],Gi,ni,m,x,re,mr,Pn,Ln,a,Ye,ri||wi,Pt),ge=[e,t,A,fe,ot,ri?et:null,wi?Z:null],Si=void 0,ji=void 0;if(h&&Fe){var _e=y-g;if(!Fe[_e]){Fe[_e]=ge;continue}if(Si=Fe[_e],delete Fe[_e],ji=ff(Si),h.collides(ji))continue}h&&h.collides(fe.declutterBox)||(Si&&(h&&h.insert(ji),this.replayImageOrLabel_.apply(this,Si)),h&&h.insert(fe.declutterBox),this.replayImageOrLabel_.apply(this,ge))}++c;break;case vt.DRAW_CHARS:var ye=V[1],Er=V[2],Jr=V[3],Ha=V[4];B=V[5];var Ka=V[6],Bi=V[7],Ui=V[8];G=V[9];var Qr=V[10];F=V[11],v=V[12];var Za=[V[13],V[13]],bn=this.textStates[v],Oi=bn.font,Nn=[bn.scale[0]*Bi,bn.scale[1]*Bi],Dn=void 0;Oi in this.widths_?Dn=this.widths_[Oi]:(Dn={},this.widths_[Oi]=Dn);var Ja=Nu(u,ye,Er,2),ta=Math.abs(Nn[0])*Hu(Oi,F,Dn);if(Ha||ta<=Ja){var cs=this.textStates[v].textAlign,ds=(Ja-ta)*Go[cs],ln=Bg(u,ye,Er,2,F,ds,Ka,Math.abs(Nn[0]),Hu,Oi,Dn,at?0:this.viewRotation_);t:if(ln){var Fn=[],Ie=void 0,kn=void 0,un=void 0,se=void 0,Re=void 0;if(G)for(Ie=0,kn=ln.length;Ie<kn;++Ie){Re=ln[Ie],un=Re[4],se=this.createLabel(un,v,"",G),m=Re[2]+(Nn[0]<0?-Qr:Qr),x=Jr*se.height+(.5-Jr)*2*Qr*Nn[1]/Nn[0]-Ui;var fe=this.calculateImageOrLabelDimensions_(se.width,se.height,Re[0],Re[1],se.width,se.height,m,x,0,0,Re[3],Za,!1,sr,!1,Pt);if(h&&h.collides(fe.declutterBox))break t;Fn.push([e,t,se,fe,1,null,null])}if(B)for(Ie=0,kn=ln.length;Ie<kn;++Ie){Re=ln[Ie],un=Re[4],se=this.createLabel(un,v,B,""),m=Re[2],x=Jr*se.height-Ui;var fe=this.calculateImageOrLabelDimensions_(se.width,se.height,Re[0],Re[1],se.width,se.height,m,x,0,0,Re[3],Za,!1,sr,!1,Pt);if(h&&h.collides(fe.declutterBox))break t;Fn.push([e,t,se,fe,1,null,null])}h&&h.load(Fn.map(ff));for(var ea=0,Gn=Fn.length;ea<Gn;++ea)this.replayImageOrLabel_.apply(this,Fn[ea])}}++c;break;case vt.END_GEOMETRY:if(o!==void 0){Pt=V[1];var ia=o(Pt,It);if(ia)return ia}++c;break;case vt.FILL:st?H++:this.fill_(e),++c;break;case vt.MOVE_TO_LINE_TO:for(g=V[1],y=V[2],St=u[g],Nt=u[g+1],I=St+.5|0,O=Nt+.5|0,(I!==C||O!==S)&&(e.moveTo(St,Nt),C=I,S=O),g+=2;g<y;g+=2)St=u[g],Nt=u[g+1],I=St+.5|0,O=Nt+.5|0,(g==y-2||I!==C||O!==S)&&(e.lineTo(St,Nt),C=I,S=O);++c;break;case vt.SET_FILL_STYLE:et=V,this.alignFill_=V[2],H&&(this.fill_(e),H=0,tt&&(e.stroke(),tt=0)),e.fillStyle=V[1],++c;break;case vt.SET_STROKE_STYLE:Z=V,tt&&(e.stroke(),tt=0),this.setStrokeStyle_(e,V),++c;break;case vt.STROKE:st?tt++:e.stroke(),++c;break;default:++c;break}}H&&this.fill_(e),tt&&e.stroke()},n.prototype.execute=function(e,t,i,r,a,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,a,void 0,void 0,o)},n.prototype.executeHitDetection=function(e,t,i,r,a){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,a)},n}(),$g=zg,_h=[Zt.POLYGON,Zt.CIRCLE,Zt.LINE_STRING,Zt.IMAGE,Zt.TEXT,Zt.DEFAULT],Wg=function(){function n(e,t,i,r,a,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ii(),this.createExecutors_(a)}return n.prototype.clip=function(e,t){var i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()},n.prototype.createExecutors_=function(e){for(var t in e){var i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);var r=e[t];for(var a in r){var o=r[a];i[a]=new $g(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},n.prototype.hasExecutors=function(e){for(var t in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[t],r=0,a=e.length;r<a;++r)if(e[r]in i)return!0;return!1},n.prototype.forEachFeatureAtCoordinate=function(e,t,i,r,a,o){r=Math.round(r);var s=r*2+1,h=Yi(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=hi(s,s));var c=this.hitDetectionContext_;c.canvas.width!==s||c.canvas.height!==s?(c.canvas.width=s,c.canvas.height=s):u||c.clearRect(0,0,s,s);var p;this.renderBuffer_!==void 0&&(p=ze(),va(p,e),fa(p,t*(this.renderBuffer_+r),p));var g=Xg(r),y;function m(v,G){for(var B=c.getImageData(0,0,s,s).data,H=0,tt=g.length;H<tt;H++)if(B[g[H]]>0){if(!o||y!==Zt.IMAGE&&y!==Zt.TEXT||o.indexOf(v)!==-1){var et=(g[H]-3)/4,Z=r-et%s,ut=r-(et/s|0),Et=a(v,G,Z*Z+ut*ut);if(Et)return Et}c.clearRect(0,0,s,s);break}}var x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(Yn);var C,S,I,O,A;for(C=x.length-1;C>=0;--C){var F=x[C].toString();for(I=this.executorsByZIndex_[F],S=_h.length-1;S>=0;--S)if(y=_h[S],O=I[y],O!==void 0&&(A=O.executeHitDetection(c,h,i,m,p),A))return A}},n.prototype.getClipCoords=function(e){var t=this.maxExtent_;if(!t)return null;var i=t[0],r=t[1],a=t[2],o=t[3],s=[i,r,i,o,a,o,a,r];return ir(s,0,8,2,e,s),s},n.prototype.isEmpty=function(){return wr(this.executorsByZIndex_)},n.prototype.execute=function(e,t,i,r,a,o,s){var h=Object.keys(this.executorsByZIndex_).map(Number);h.sort(Yn),this.maxExtent_&&(e.save(),this.clip(e,i));var u=o||_h,c,p,g,y,m,x;for(s&&h.reverse(),c=0,p=h.length;c<p;++c){var C=h[c].toString();for(m=this.executorsByZIndex_[C],g=0,y=u.length;g<y;++g){var S=u[g];x=m[S],x!==void 0&&x.execute(e,t,i,r,a,s)}}this.maxExtent_&&e.restore()},n}(),yh={};function Xg(n){if(yh[n]!==void 0)return yh[n];for(var e=n*2+1,t=n*n,i=new Array(t+1),r=0;r<=n;++r)for(var a=0;a<=n;++a){var o=r*r+a*a;if(o>t)break;var s=i[o];s||(s=[],i[o]=s),s.push(((n+r)*e+(n+a))*4+3),r>0&&s.push(((n-r)*e+(n+a))*4+3),a>0&&(s.push(((n+r)*e+(n-a))*4+3),r>0&&s.push(((n-r)*e+(n-a))*4+3))}for(var h=[],r=0,u=i.length;r<u;++r)i[r]&&h.push.apply(h,i[r]);return yh[n]=h,h}var df=Wg,Te={ANIMATING:0,INTERACTING:1},Yg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),qg=function(n){Yg(e,n);function e(t,i,r,a,o,s,h){var u=n.call(this)||this;return u.context_=t,u.pixelRatio_=i,u.extent_=r,u.transform_=a,u.viewRotation_=o,u.squaredTolerance_=s,u.userTransform_=h,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=[0,0],u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=[0,0],u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=Ii(),u}return e.prototype.drawImages_=function(t,i,r,a){if(!!this.image_){var o=ir(t,i,r,a,this.transform_,this.pixelCoordinates_),s=this.context_,h=this.tmpLocalTransform_,u=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=u*this.imageOpacity_);var c=this.imageRotation_;this.imageRotateWithView_&&(c+=this.viewRotation_);for(var p=0,g=o.length;p<g;p+=2){var y=o[p]-this.imageAnchorX_,m=o[p+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var x=y+this.imageAnchorX_,C=m+this.imageAnchorY_;Yi(h,x,C,1,1,c,-x,-C),s.setTransform.apply(s,h),s.translate(x,C),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,m,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=u)}},e.prototype.drawText_=function(t,i,r,a){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=ir(t,i,r,a,this.transform_,this.pixelCoordinates_),s=this.context_,h=this.textRotation_;for(this.textRotateWithView_&&(h+=this.viewRotation_);i<r;i+=a){var u=o[i]+this.textOffsetX_,c=o[i+1]+this.textOffsetY_;if(h!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var p=Yi(this.tmpLocalTransform_,u,c,1,1,h,-u,-c);s.setTransform.apply(s,p),s.translate(u,c),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&s.strokeText(this.text_,u,c),this.textFillState_&&s.fillText(this.text_,u,c)}}},e.prototype.moveToLineTo_=function(t,i,r,a,o){var s=this.context_,h=ir(t,i,r,a,this.transform_,this.pixelCoordinates_);s.moveTo(h[0],h[1]);var u=h.length;o&&(u-=2);for(var c=2;c<u;c+=2)s.lineTo(h[c],h[c+1]);return o&&s.closePath(),r},e.prototype.drawRings_=function(t,i,r,a){for(var o=0,s=r.length;o<s;++o)i=this.moveToLineTo_(t,i,r[o],a,!0);return i},e.prototype.drawCircle=function(t){if(!!$e(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=tv(t,this.transform_,this.pixelCoordinates_),r=i[2]-i[0],a=i[3]-i[1],o=Math.sqrt(r*r+a*a),s=this.context_;s.beginPath(),s.arc(i[0],i[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){var i=t.getType();switch(i){case W.POINT:this.drawPoint(t);break;case W.LINE_STRING:this.drawLineString(t);break;case W.POLYGON:this.drawPolygon(t);break;case W.MULTI_POINT:this.drawMultiPoint(t);break;case W.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case W.MULTI_POLYGON:this.drawMultiPolygon(t);break;case W.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case W.CIRCLE:this.drawCircle(t);break}},e.prototype.drawFeature=function(t,i){var r=i.getGeometryFunction()(t);!r||!$e(this.extent_,r.getExtent())||(this.setStyle(i),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t){for(var i=t.getGeometriesArray(),r=0,a=i.length;r<a;++r)this.drawGeometry(i[r])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(i,0,i.length,r),this.text_!==""&&this.drawText_(i,0,i.length,r)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(i,0,i.length,r),this.text_!==""&&this.drawText_(i,0,i.length,r)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$e(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),i.stroke()}if(this.text_!==""){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getExtent();if(!!$e(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,a=t.getFlatCoordinates(),o=0,s=t.getEnds(),h=t.getStride();r.beginPath();for(var u=0,c=s.length;u<c;++u)o=this.moveToLineTo_(a,o,s[u],h,!1);r.stroke()}if(this.text_!==""){var p=t.getFlatMidpoints();this.drawText_(p,0,p.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$e(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$e(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getOrientedFlatCoordinates(),a=0,o=t.getEndss(),s=t.getStride();i.beginPath();for(var h=0,u=o.length;h<u;++h){var c=o[h];a=this.drawRings_(r,a,c,s)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var p=t.getFlatInteriorPoints();this.drawText_(p,0,p.length,2)}}},e.prototype.setContextFillState_=function(t){var i=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var i=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,i.lineCap=t.lineCap),i.setLineDash&&(qn(r.lineDash,t.lineDash)||i.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var i=this.context_,r=this.contextTextState_,a=t.textAlign?t.textAlign:wa;r?(r.font!=t.font&&(r.font=t.font,i.font=t.font),r.textAlign!=a&&(r.textAlign=a,i.textAlign=a),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=a,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:a,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,i){var r=this;if(!t)this.fillState_=null;else{var a=t.getColor();this.fillState_={fillStyle:Li(a||Ki)}}if(!i)this.strokeState_=null;else{var o=i.getColor(),s=i.getLineCap(),h=i.getLineDash(),u=i.getLineDashOffset(),c=i.getLineJoin(),p=i.getWidth(),g=i.getMiterLimit(),y=h||xa;this.strokeState_={lineCap:s!==void 0?s:Po,lineDash:this.pixelRatio_===1?y:y.map(function(m){return m*r.pixelRatio_}),lineDashOffset:(u||Ta)*this.pixelRatio_,lineJoin:c!==void 0?c:Nr,lineWidth:(p!==void 0?p:Sa)*this.pixelRatio_,miterLimit:g!==void 0?g:Ca,strokeStyle:Li(o||Ma)}}},e.prototype.setImageStyle=function(t){var i;if(!t||!(i=t.getSize())){this.image_=null;return}var r=t.getAnchor(),a=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*this.pixelRatio_,this.imageAnchorY_=r[1]*this.pixelRatio_,this.imageHeight_=i[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=i[0]*this.pixelRatio_},e.prototype.setTextStyle=function(t){if(!t)this.text_="";else{var i=t.getFill();if(!i)this.textFillState_=null;else{var r=i.getColor();this.textFillState_={fillStyle:Li(r||Ki)}}var a=t.getStroke();if(!a)this.textStrokeState_=null;else{var o=a.getColor(),s=a.getLineCap(),h=a.getLineDash(),u=a.getLineDashOffset(),c=a.getLineJoin(),p=a.getWidth(),g=a.getMiterLimit();this.textStrokeState_={lineCap:s!==void 0?s:Po,lineDash:h||xa,lineDashOffset:u||Ta,lineJoin:c!==void 0?c:Nr,lineWidth:p!==void 0?p:Sa,miterLimit:g!==void 0?g:Ca,strokeStyle:Li(o||Ma)}}var y=t.getFont(),m=t.getOffsetX(),x=t.getOffsetY(),C=t.getRotateWithView(),S=t.getRotation(),I=t.getScaleArray(),O=t.getText(),A=t.getTextAlign(),F=t.getTextBaseline();this.textState_={font:y!==void 0?y:qu,textAlign:A!==void 0?A:wa,textBaseline:F!==void 0?F:Lo},this.text_=O!==void 0?O:"",this.textOffsetX_=m!==void 0?this.pixelRatio_*m:0,this.textOffsetY_=x!==void 0?this.pixelRatio_*x:0,this.textRotateWithView_=C!==void 0?C:!1,this.textRotation_=S!==void 0?S:0,this.textScale_=[this.pixelRatio_*I[0],this.pixelRatio_*I[1]]}},e}(of),Vg=qg,Tn={FRACTION:"fraction",PIXELS:"pixels"},li={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Hg=function(){function n(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return n.prototype.clear=function(){this.cache_={},this.cacheSize_=0},n.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},n.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var i=this.cache_[t];(e++&3)==0&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}},n.prototype.get=function(e,t,i){var r=pf(e,t,i);return r in this.cache_?this.cache_[r]:null},n.prototype.set=function(e,t,i,r){var a=pf(e,t,i);this.cache_[a]=r,++this.cacheSize_},n.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},n}();function pf(n,e,t){var i=t?Gu(t):"null";return e+":"+n+":"+i}var jo=new Hg,Kg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zg=function(n){Kg(e,n);function e(t,i,r,a){var o=n.call(this)||this;return o.extent=t,o.pixelRatio_=r,o.resolution=i,o.state=a,o}return e.prototype.changed=function(){this.dispatchEvent(mt.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return dt()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){dt()},e}(Sr),Jg=Zg,Qg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();(function(n){Qg(e,n);function e(t,i,r,a,o,s){var h=n.call(this,t,i,r,Xt.IDLE)||this;return h.src_=a,h.image_=new Image,o!==null&&(h.image_.crossOrigin=o),h.unlisten_=null,h.state=Xt.IDLE,h.imageLoadFunction_=s,h}return e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=Xt.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=Ei(this.extent)/this.image_.height),this.state=Xt.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){(this.state==Xt.IDLE||this.state==Xt.ERROR)&&(this.state=Xt.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=mh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=Ei(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e})(Jg);function mh(n,e,t){var i=n,r=!0,a=!1,o=!1,s=[ho(i,mt.LOAD,function(){o=!0,a||e()})];return i.src&&op?(a=!0,i.decode().then(function(){r&&e()}).catch(function(h){r&&(o?e():t())})):s.push(ho(i,mt.ERROR,t)),function(){r=!1,s.forEach(Wt)}}var t_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ba=null,e_=function(n){t_(e,n);function e(t,i,r,a,o,s){var h=n.call(this)||this;return h.hitDetectionImage_=null,h.image_=t||new Image,a!==null&&(h.image_.crossOrigin=a),h.canvas_={},h.color_=s,h.unlisten_=null,h.imageState_=o,h.size_=r,h.src_=i,h.tainted_,h}return e.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===Xt.LOADED){ba||(ba=hi(1,1)),ba.drawImage(this.image_,0,0);try{ba.getImageData(0,0,1,1),this.tainted_=!1}catch{ba=null,this.tainted_=!0}}return this.tainted_===!0},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(mt.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=Xt.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=Xt.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],i=this.size_[1],r=hi(t,i);r.fillRect(0,0,t,i),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==Xt.IDLE){this.imageState_=Xt.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=mh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(!(!this.color_||this.canvas_[t]||this.imageState_!==Xt.LOADED)){var i=document.createElement("canvas");this.canvas_[t]=i,i.width=Math.ceil(this.image_.width*t),i.height=Math.ceil(this.image_.height*t);var r=i.getContext("2d");if(r.scale(t,t),r.drawImage(this.image_,0,0),r.globalCompositeOperation="multiply",r.globalCompositeOperation==="multiply"||this.isTainted_())r.fillStyle=Gu(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(this.image_,0,0);else{for(var a=r.getImageData(0,0,i.width,i.height),o=a.data,s=this.color_[0]/255,h=this.color_[1]/255,u=this.color_[2]/255,c=this.color_[3],p=0,g=o.length;p<g;p+=4)o[p]*=s,o[p+1]*=h,o[p+2]*=u,o[p+3]*=c;r.putImageData(a,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Sr);function i_(n,e,t,i,r,a){var o=jo.get(e,i,a);return o||(o=new e_(n,e,t,i,r,a),jo.set(e,i,a,o)),o}var n_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),r_=function(n){n_(e,n);function e(t){var i=this,r=t||{},a=r.opacity!==void 0?r.opacity:1,o=r.rotation!==void 0?r.rotation:0,s=r.scale!==void 0?r.scale:1,h=r.rotateWithView!==void 0?r.rotateWithView:!1;i=n.call(this,{opacity:a,rotation:o,scale:s,displacement:r.displacement!==void 0?r.displacement:[0,0],rotateWithView:h})||this,i.anchor_=r.anchor!==void 0?r.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=r.anchorOrigin!==void 0?r.anchorOrigin:li.TOP_LEFT,i.anchorXUnits_=r.anchorXUnits!==void 0?r.anchorXUnits:Tn.FRACTION,i.anchorYUnits_=r.anchorYUnits!==void 0?r.anchorYUnits:Tn.FRACTION,i.crossOrigin_=r.crossOrigin!==void 0?r.crossOrigin:null;var u=r.img!==void 0?r.img:null,c=r.imgSize!==void 0?r.imgSize:null,p=r.src;Mt(!(p!==void 0&&u),4),Mt(!u||u&&c,5),(p===void 0||p.length===0)&&u&&(p=u.src||Ot(u)),Mt(p!==void 0&&p.length>0,6);var g=r.src!==void 0?Xt.IDLE:Xt.LOADED;return i.color_=r.color!==void 0?Oo(r.color):null,i.iconImage_=i_(u,p,c,i.crossOrigin_,g,i.color_),i.offset_=r.offset!==void 0?r.offset:[0,0],i.offsetOrigin_=r.offsetOrigin!==void 0?r.offsetOrigin:li.TOP_LEFT,i.origin_=null,i.size_=r.size!==void 0?r.size:null,i}return e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:this.size_!==null?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var i=this.getSize();if(this.anchorXUnits_==Tn.FRACTION||this.anchorYUnits_==Tn.FRACTION){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_==Tn.FRACTION&&(t[0]*=i[0]),this.anchorYUnits_==Tn.FRACTION&&(t[1]*=i[1])}if(this.anchorOrigin_!=li.TOP_LEFT){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_==li.TOP_RIGHT||this.anchorOrigin_==li.BOTTOM_RIGHT)&&(t[0]=-t[0]+i[0]),(this.anchorOrigin_==li.BOTTOM_LEFT||this.anchorOrigin_==li.BOTTOM_RIGHT)&&(t[1]=-t[1]+i[1])}this.normalizedAnchor_=t}var r=this.getDisplacement();return[t[0]-r[0],t[1]+r[1]]},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=li.TOP_LEFT){var i=this.getSize(),r=this.iconImage_.getSize();if(!i||!r)return null;t=t.slice(),(this.offsetOrigin_==li.TOP_RIGHT||this.offsetOrigin_==li.BOTTOM_RIGHT)&&(t[0]=r[0]-i[0]-t[0]),(this.offsetOrigin_==li.BOTTOM_LEFT||this.offsetOrigin_==li.BOTTOM_RIGHT)&&(t[1]=r[1]-i[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(mt.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(mt.CHANGE,t)},e}(ku),a_=r_,Ai=.5;function o_(n,e,t,i,r,a,o){var s=n[0]*Ai,h=n[1]*Ai,u=hi(s,h);u.imageSmoothingEnabled=!1;for(var c=u.canvas,p=new Vg(u,Ai,r,null,o),g=t.length,y=Math.floor((256*256*256-1)/g),m={},x=1;x<=g;++x){var C=t[x-1],S=C.getStyleFunction()||i;if(!!i){var I=S(C,a);if(!!I){Array.isArray(I)||(I=[I]);for(var O=x*y,A="#"+("000000"+O.toString(16)).slice(-6),F=0,v=I.length;F<v;++F){var G=I[F],B=G.getGeometryFunction()(C);if(!(!B||!$e(r,B.getExtent()))){var H=G.clone(),tt=H.getFill();tt&&tt.setColor(A);var et=H.getStroke();et&&(et.setColor(A),et.setLineDash(null)),H.setText(void 0);var Z=G.getImage();if(Z&&Z.getOpacity()!==0){var ut=Z.getImageSize();if(!ut)continue;var Et=hi(ut[0],ut[1],void 0,{alpha:!1}),at=Et.canvas;Et.fillStyle=A,Et.fillRect(0,0,at.width,at.height),H.setImage(new a_({img:at,imgSize:ut,anchor:Z.getAnchor(),anchorXUnits:Tn.PIXELS,anchorYUnits:Tn.PIXELS,offset:Z.getOrigin(),opacity:1,size:Z.getSize(),scale:Z.getScale(),rotation:Z.getRotation(),rotateWithView:Z.getRotateWithView()}))}var _t=H.getZIndex()||0,st=m[_t];st||(st={},m[_t]=st,st[W.POLYGON]=[],st[W.CIRCLE]=[],st[W.LINE_STRING]=[],st[W.POINT]=[]),st[B.getType().replace("Multi","")].push(B,H)}}}}}for(var Pt=Object.keys(m).map(Number).sort(Yn),x=0,St=Pt.length;x<St;++x){var st=m[Pt[x]];for(var Nt in st)for(var It=st[Nt],F=0,v=It.length;F<v;F+=2){p.setStyle(It[F+1]);for(var V=0,Qt=e.length;V<Qt;++V)p.setTransform(e[V]),p.drawGeometry(It[F])}}return u.getImageData(0,0,c.width,c.height)}function s_(n,e,t){var i=[];if(t){var r=Math.floor(Math.round(n[0])*Ai),a=Math.floor(Math.round(n[1])*Ai),o=(ie(r,0,t.width-1)+ie(a,0,t.height-1)*t.width)*4,s=t.data[o],h=t.data[o+1],u=t.data[o+2],c=u+256*(h+256*s),p=Math.floor((256*256*256-1)/e.length);c&&c%p==0&&i.push(e[c/p-1])}return i}var h_=.5,vf={Point:__,LineString:p_,Polygon:m_,MultiPoint:y_,MultiLineString:v_,MultiPolygon:g_,GeometryCollection:d_,Circle:f_};function l_(n,e){return parseInt(Ot(n),10)-parseInt(Ot(e),10)}function u_(n,e){var t=Eh(n,e);return t*t}function Eh(n,e){return h_*n/e}function f_(n,e,t,i,r){var a=t.getFill(),o=t.getStroke();if(a||o){var s=n.getBuilder(t.getZIndex(),Zt.CIRCLE);s.setFillStrokeStyle(a,o),s.drawCircle(e,i)}var h=t.getText();if(h&&h.getText()){var u=(r||n).getBuilder(t.getZIndex(),Zt.TEXT);u.setTextStyle(h),u.drawText(e,i)}}function gf(n,e,t,i,r,a,o){var s=!1,h=t.getImage();if(h){var u=h.getImageState();u==Xt.LOADED||u==Xt.ERROR?h.unlistenImageChange(r):(u==Xt.IDLE&&h.load(),u=h.getImageState(),h.listenImageChange(r),s=!0)}return c_(n,e,t,i,a,o),s}function c_(n,e,t,i,r,a){var o=t.getGeometryFunction()(e);if(!!o){var s=o.simplifyTransformed(i,r),h=t.getRenderer();if(h)_f(n,s,t,e);else{var u=vf[s.getType()];u(n,s,t,e,a)}}}function _f(n,e,t,i){if(e.getType()==W.GEOMETRY_COLLECTION){for(var r=e.getGeometries(),a=0,o=r.length;a<o;++a)_f(n,r[a],t,i);return}var s=n.getBuilder(t.getZIndex(),Zt.DEFAULT);s.drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function d_(n,e,t,i,r){var a=e.getGeometriesArray(),o,s;for(o=0,s=a.length;o<s;++o){var h=vf[a[o].getType()];h(n,a[o],t,i,r)}}function p_(n,e,t,i,r){var a=t.getStroke();if(a){var o=n.getBuilder(t.getZIndex(),Zt.LINE_STRING);o.setFillStrokeStyle(null,a),o.drawLineString(e,i)}var s=t.getText();if(s&&s.getText()){var h=(r||n).getBuilder(t.getZIndex(),Zt.TEXT);h.setTextStyle(s),h.drawText(e,i)}}function v_(n,e,t,i,r){var a=t.getStroke();if(a){var o=n.getBuilder(t.getZIndex(),Zt.LINE_STRING);o.setFillStrokeStyle(null,a),o.drawMultiLineString(e,i)}var s=t.getText();if(s&&s.getText()){var h=(r||n).getBuilder(t.getZIndex(),Zt.TEXT);h.setTextStyle(s),h.drawText(e,i)}}function g_(n,e,t,i,r){var a=t.getFill(),o=t.getStroke();if(o||a){var s=n.getBuilder(t.getZIndex(),Zt.POLYGON);s.setFillStrokeStyle(a,o),s.drawMultiPolygon(e,i)}var h=t.getText();if(h&&h.getText()){var u=(r||n).getBuilder(t.getZIndex(),Zt.TEXT);u.setTextStyle(h),u.drawText(e,i)}}function __(n,e,t,i,r){var a=t.getImage(),o=t.getText(),s;if(r&&(n=r,s=a&&o&&o.getText()?{}:void 0),a){if(a.getImageState()!=Xt.LOADED)return;var h=n.getBuilder(t.getZIndex(),Zt.IMAGE);h.setImageStyle(a,s),h.drawPoint(e,i)}if(o&&o.getText()){var u=n.getBuilder(t.getZIndex(),Zt.TEXT);u.setTextStyle(o,s),u.drawText(e,i)}}function y_(n,e,t,i,r){var a=t.getImage(),o=t.getText(),s;if(r&&(n=r,s=a&&o&&o.getText()?{}:void 0),a){if(a.getImageState()!=Xt.LOADED)return;var h=n.getBuilder(t.getZIndex(),Zt.IMAGE);h.setImageStyle(a,s),h.drawMultiPoint(e,i)}if(o&&o.getText()){var u=(r||n).getBuilder(t.getZIndex(),Zt.TEXT);u.setTextStyle(o,s),u.drawText(e,i)}}function m_(n,e,t,i,r){var a=t.getFill(),o=t.getStroke();if(a||o){var s=n.getBuilder(t.getZIndex(),Zt.POLYGON);s.setFillStrokeStyle(a,o),s.drawPolygon(e,i)}var h=t.getText();if(h&&h.getText()){var u=(r||n).getBuilder(t.getZIndex(),Zt.TEXT);u.setTextStyle(h),u.drawText(e,i)}}var E_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),x_=function(n){E_(e,n);function e(t){var i=n.call(this,t)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=ze(),i.wrappedRenderedExtent_=ze(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return e.prototype.renderWorlds=function(t,i,r){var a=i.extent,o=i.viewState,s=o.center,h=o.resolution,u=o.projection,c=o.rotation,p=u.getExtent(),g=this.getLayer().getSource(),y=i.pixelRatio,m=i.viewHints,x=!(m[Te.ANIMATING]||m[Te.INTERACTING]),C=this.context,S=Math.round(i.size[0]*y),I=Math.round(i.size[1]*y),O=g.getWrapX()&&u.canWrapX(),A=O?qt(p):null,F=O?Math.ceil((a[2]-p[2])/A)+1:1,v=O?Math.floor((a[0]-p[0])/A):0;do{var G=this.getRenderTransform(s,h,c,y,S,I,v*A);t.execute(C,1,G,c,x,void 0,r)}while(++v<F)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,i){var r=t.pixelRatio,a=t.layerStatesArray[t.layerIndex];lp(this.pixelTransform,1/r,1/r),Ds(this.inversePixelTransform,this.pixelTransform);var o=Zl(this.pixelTransform);this.useContainer(i,o,a.opacity,this.getBackground(t));var s=this.context,h=s.canvas,u=this.replayGroup_,c=this.declutterExecutorGroup;if((!u||u.isEmpty())&&(!c||c.isEmpty()))return null;var p=Math.round(t.size[0]*r),g=Math.round(t.size[1]*r);h.width!=p||h.height!=g?(h.width=p,h.height=g,h.style.transform!==o&&(h.style.transform=o)):this.containerReused||s.clearRect(0,0,p,g),this.preRender(s,t);var y=t.viewState;y.projection;var m=!1,x=!0;if(a.extent&&this.clipping){var C=er(a.extent);x=$e(C,t.extent),m=x&&!dn(C,t.extent),m&&this.clipUnrotated(s,t,C)}x&&this.renderWorlds(u,t),m&&s.restore(),this.postRender(s,t);var S=Yu(a.opacity),I=this.container;return S!==I.style.opacity&&(I.style.opacity=S),this.renderedRotation_!==y.rotation&&(this.renderedRotation_=y.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];ue(this.pixelTransform,r);var a=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,h=this.renderedProjection_,u=this.wrappedRenderedExtent_,c=this.getLayer(),p=[],g=r[0]*Ai,y=r[1]*Ai;p.push(this.getRenderTransform(a,o,s,Ai,g,y,0).slice());var m=c.getSource(),x=h.getExtent();if(m.getWrapX()&&h.canWrapX()&&!dn(x,u)){for(var C=u[0],S=qt(x),I=0,O=void 0;C<x[0];)--I,O=S*I,p.push(this.getRenderTransform(a,o,s,Ai,g,y,O).slice()),C+=S;for(I=0,C=u[2];C>x[2];)++I,O=S*I,p.push(this.getRenderTransform(a,o,s,Ai,g,y,O).slice()),C-=S}this.hitDetectionImageData_=o_(r,p,this.renderedFeatures_,c.getStyleFunction(),u,o,s)}i(s_(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,i,r,a,o){var s=this;if(!!this.replayGroup_){var h=i.viewState.resolution,u=i.viewState.rotation,c=this.getLayer(),p={},g=function(x,C,S){var I=Ot(x),O=p[I];if(O){if(O!==!0&&S<O.distanceSq){if(S===0)return p[I]=!0,o.splice(o.lastIndexOf(O),1),a(x,c,C);O.geometry=C,O.distanceSq=S}}else{if(S===0)return p[I]=!0,a(x,c,C);o.push(p[I]={feature:x,layer:c,geometry:C,distanceSq:S,callback:a})}},y,m=[this.replayGroup_];return this.declutterExecutorGroup&&m.push(this.declutterExecutorGroup),m.some(function(x){return y=x.forEachFeatureAtCoordinate(t,h,u,r,g,x===s.declutterExecutorGroup&&i.declutterTree?i.declutterTree.all().map(function(C){return C.value}):null)}),y}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var i=this.getLayer(),r=i.getSource();if(!r)return!1;var a=t.viewHints[Te.ANIMATING],o=t.viewHints[Te.INTERACTING],s=i.getUpdateWhileAnimating(),h=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&a||!h&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var u=t.extent,c=t.viewState,p=c.projection,g=c.resolution,y=t.pixelRatio,m=i.getRevision(),x=i.getRenderBuffer(),C=i.getRenderOrder();C===void 0&&(C=l_);var S=c.center.slice(),I=fa(u,x*g),O=I.slice(),A=[I.slice()],F=p.getExtent();if(r.getWrapX()&&p.canWrapX()&&!dn(F,t.extent)){var v=qt(F),G=Math.max(qt(I)/2,v);I[0]=F[0]-G,I[2]=F[2]+G,lu(S,p);var B=yp(A[0],p);B[0]<F[0]&&B[2]<F[2]?A.push([B[0]+v,B[1],B[2]+v,B[3]]):B[0]>F[0]&&B[2]>F[2]&&A.push([B[0]-v,B[1],B[2]-v,B[3]])}if(!this.dirty_&&this.renderedResolution_==g&&this.renderedRevision_==m&&this.renderedRenderOrder_==C&&dn(this.wrappedRenderedExtent_,I))return qn(this.renderedExtent_,O)||(this.hitDetectionImageData_=null,this.renderedExtent_=O),this.renderedCenter_=S,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var H=new hf(Eh(g,y),I,g,y),tt;this.getLayer().getDeclutter()&&(tt=new hf(Eh(g,y),I,g,y));for(var et,Z,ut,Z=0,ut=A.length;Z<ut;++Z)r.loadFeatures(A[Z],g,p);var Et=u_(g,y),at=function(Nt){var It,V=Nt.getStyleFunction()||i.getStyleFunction();if(V&&(It=V(Nt,g)),It){var Qt=this.renderFeature(Nt,Et,It,H,et,tt);this.dirty_=this.dirty_||Qt}}.bind(this),_t=du(I),st=r.getFeaturesInExtent(_t);C&&st.sort(C);for(var Z=0,ut=st.length;Z<ut;++Z)at(st[Z]);this.renderedFeatures_=st;var Pt=H.finish(),St=new df(I,g,y,r.getOverlaps(),Pt,i.getRenderBuffer());return tt&&(this.declutterExecutorGroup=new df(I,g,y,r.getOverlaps(),tt.finish(),i.getRenderBuffer())),this.renderedResolution_=g,this.renderedRevision_=m,this.renderedRenderOrder_=C,this.renderedExtent_=O,this.wrappedRenderedExtent_=I,this.renderedCenter_=S,this.renderedProjection_=p,this.replayGroup_=St,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,i,r,a,o,s){if(!r)return!1;var h=!1;if(Array.isArray(r))for(var u=0,c=r.length;u<c;++u)h=gf(a,t,r[u],i,this.boundHandleStyleImageChange_,o,s)||h;else h=gf(a,t,r,i,this.boundHandleStyleImageChange_,o,s);return h},e}(uf),T_=x_,C_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),M_=function(n){C_(e,n);function e(t){return n.call(this,t)||this}return e.prototype.createRenderer=function(){return new T_(this)},e}(vg),xh=M_,w_=function(){function n(e){this.rbush_=new ef(e),this.items_={}}return n.prototype.insert=function(e,t){var i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Ot(t)]=i},n.prototype.load=function(e,t){for(var i=new Array(t.length),r=0,a=t.length;r<a;r++){var o=e[r],s=t[r],h={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[r]=h,this.items_[Ot(s)]=h}this.rbush_.load(i)},n.prototype.remove=function(e){var t=Ot(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null},n.prototype.update=function(e,t){var i=this.items_[Ot(t)],r=[i.minX,i.minY,i.maxX,i.maxY];pa(r,e)||(this.remove(t),this.insert(e,t))},n.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(t){return t.value})},n.prototype.getInExtent=function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},i=this.rbush_.search(t);return i.map(function(r){return r.value})},n.prototype.forEach=function(e){return this.forEach_(this.getAll(),e)},n.prototype.forEachInExtent=function(e,t){return this.forEach_(this.getInExtent(e),t)},n.prototype.forEach_=function(e,t){for(var i,r=0,a=e.length;r<a;r++)if(i=t(e[r]),i)return i;return i},n.prototype.isEmpty=function(){return wr(this.items_)},n.prototype.clear=function(){this.rbush_.clear(),this.items_={}},n.prototype.getExtent=function(e){var t=this.rbush_.toJSON();return mi(t.minX,t.minY,t.maxX,t.maxY,e)},n.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var t in e.items_)this.items_[t]=e.items_[t]},n}(),yf=w_,S_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),O_=function(n){S_(e,n);function e(t){var i=n.call(this)||this;i.projection=zt(t.projection),i.attributions_=mf(t.attributions),i.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,i.loading=!1,i.state_=t.state!==void 0?t.state:hr.READY,i.wrapX_=t.wrapX!==void 0?t.wrapX:!1,i.interpolate_=!!t.interpolate,i.viewResolver=null,i.viewRejector=null;var r=i;return i.viewPromise_=new Promise(function(a,o){r.viewResolver=a,r.viewRejector=o}),i}return e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return dt()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=mf(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Be);function mf(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}var Ef=O_,bi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function I_(n,e){return[[-1/0,-1/0,1/0,1/0]]}var Br={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"},R_=!1;function P_(n,e,t,i,r,a,o){var s=new XMLHttpRequest;s.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()==Br.ARRAY_BUFFER&&(s.responseType="arraybuffer"),s.withCredentials=R_,s.onload=function(h){if(!s.status||s.status>=200&&s.status<300){var u=e.getType(),c=void 0;u==Br.JSON||u==Br.TEXT?c=s.responseText:u==Br.XML?(c=s.responseXML,c||(c=new DOMParser().parseFromString(s.responseText,"application/xml"))):u==Br.ARRAY_BUFFER&&(c=s.response),c?a(e.readFeatures(c,{extent:t,featureProjection:r}),e.readProjection(c)):o()}else o()},s.onerror=o,s.send()}function xf(n,e){return function(t,i,r,a,o){var s=this;P_(n,e,t,i,r,function(h,u){s.addFeatures(h),a!==void 0&&a(h)},o||Vn)}}var Tf=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Cn=function(n){Tf(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.feature=i,a.features=r,a}return e}(oi),L_=function(n){Tf(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:hr.READY,wrapX:r.wrapX!==void 0?r.wrapX:!0})||this,i.on,i.once,i.un,i.loader_=Vn,i.format_=r.format,i.overlaps_=r.overlaps===void 0?!0:r.overlaps,i.url_=r.url,r.loader!==void 0?i.loader_=r.loader:i.url_!==void 0&&(Mt(i.format_,7),i.loader_=xf(i.url_,i.format_)),i.strategy_=r.strategy!==void 0?r.strategy:I_;var a=r.useSpatialIndex!==void 0?r.useSpatialIndex:!0;i.featuresRtree_=a?new yf:null,i.loadedExtentsRtree_=new yf,i.loadingExtentsCount_=0,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null;var o,s;return Array.isArray(r.features)?s=r.features:r.features&&(o=r.features,s=o.getArray()),!a&&o===void 0&&(o=new Ze(s)),s!==void 0&&i.addFeaturesInternal(s),o!==void 0&&i.bindFeaturesCollection_(o),i}return e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var i=Ot(t);if(!this.addToIndex_(i,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(i,t);var r=t.getGeometry();if(r){var a=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(a,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new Cn(bi.ADDFEATURE,t))},e.prototype.setupChangeEvents_=function(t,i){this.featureChangeKeys_[t]=[Rt(i,mt.CHANGE,this.handleFeatureChange_,this),Rt(i,Tr.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,i){var r=!0,a=i.getId();return a!==void 0&&(a.toString()in this.idIndex_?r=!1:this.idIndex_[a.toString()]=i),r&&(Mt(!(t in this.uidIndex_),30),this.uidIndex_[t]=i),r},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var i=[],r=[],a=[],o=0,s=t.length;o<s;o++){var h=t[o],u=Ot(h);this.addToIndex_(u,h)&&r.push(h)}for(var o=0,c=r.length;o<c;o++){var h=r[o],u=Ot(h);this.setupChangeEvents_(u,h);var p=h.getGeometry();if(p){var g=p.getExtent();i.push(g),a.push(h)}else this.nullGeometryFeatures_[u]=h}this.featuresRtree_&&this.featuresRtree_.load(i,a);for(var o=0,y=r.length;o<y;o++)this.dispatchEvent(new Cn(bi.ADDFEATURE,r[o]))},e.prototype.bindFeaturesCollection_=function(t){var i=!1;this.addEventListener(bi.ADDFEATURE,function(r){i||(i=!0,t.push(r.feature),i=!1)}),this.addEventListener(bi.REMOVEFEATURE,function(r){i||(i=!0,t.remove(r.feature),i=!1)}),t.addEventListener(ce.ADD,function(r){i||(i=!0,this.addFeature(r.element),i=!1)}.bind(this)),t.addEventListener(ce.REMOVE,function(r){i||(i=!0,this.removeFeature(r.element),i=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var i in this.featureChangeKeys_){var r=this.featureChangeKeys_[i];r.forEach(Wt)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var a=function(h){this.removeFeatureInternal(h)}.bind(this);this.featuresRtree_.forEach(a);for(var o in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var s=new Cn(bi.CLEAR);this.dispatchEvent(s),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,i){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,function(a){var o=a.getGeometry();if(o.intersectsCoordinate(t))return i(a)})},e.prototype.forEachFeatureInExtent=function(t,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)},e.prototype.forEachFeatureIntersectingExtent=function(t,i){return this.forEachFeatureInExtent(t,function(r){var a=r.getGeometry();if(a.intersectsExtent(t)){var o=i(r);if(o)return o}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),wr(this.nullGeometryFeatures_)||si(t,$l(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var i=[];return this.forEachFeatureAtCoordinateDirect(t,function(r){i.push(r)}),i},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,i){var r=t[0],a=t[1],o=null,s=[NaN,NaN],h=1/0,u=[-1/0,-1/0,1/0,1/0],c=i||Wi;return this.featuresRtree_.forEachInExtent(u,function(p){if(c(p)){var g=p.getGeometry(),y=h;if(h=g.closestPointXY(r,a,s,h),h<y){o=p;var m=Math.sqrt(h);u[0]=r-m,u[1]=a-m,u[2]=r+m,u[3]=a+m}}}),o},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var i=this.idIndex_[t.toString()];return i!==void 0?i:null},e.prototype.getFeatureByUid=function(t){var i=this.uidIndex_[t];return i!==void 0?i:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var i=t.target,r=Ot(i),a=i.getGeometry();if(!a)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[r]=i);else{var o=a.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,i)):this.featuresRtree_&&this.featuresRtree_.update(o,i)}var s=i.getId();if(s!==void 0){var h=s.toString();this.idIndex_[h]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[h]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[r]=i;this.changed(),this.dispatchEvent(new Cn(bi.CHANGEFEATURE,i))},e.prototype.hasFeature=function(t){var i=t.getId();return i!==void 0?i in this.idIndex_:Ot(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&wr(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,i,r){for(var a=this.loadedExtentsRtree_,o=this.strategy_(t,i,r),s=function(p,g){var y=o[p],m=a.forEachInExtent(y,function(x){return dn(x.extent,y)});m||(++h.loadingExtentsCount_,h.dispatchEvent(new Cn(bi.FEATURESLOADSTART)),h.loader_.call(h,y,i,r,function(x){--this.loadingExtentsCount_,this.dispatchEvent(new Cn(bi.FEATURESLOADEND,void 0,x))}.bind(h),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Cn(bi.FEATURESLOADERROR))}.bind(h)),a.insert(y,{extent:y.slice()}))},h=this,u=0,c=o.length;u<c;++u)s(u);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),n.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var i=this.loadedExtentsRtree_,r;i.forEachInExtent(t,function(a){if(pa(a.extent,t))return r=a,!0}),r&&i.remove(r)},e.prototype.removeFeature=function(t){if(!!t){var i=Ot(t);i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t);var r=this.removeFeatureInternal(t);r&&this.changed()}},e.prototype.removeFeatureInternal=function(t){var i=Ot(t),r=this.featureChangeKeys_[i];if(!!r){r.forEach(Wt),delete this.featureChangeKeys_[i];var a=t.getId();return a!==void 0&&delete this.idIndex_[a.toString()],delete this.uidIndex_[i],this.dispatchEvent(new Cn(bi.REMOVEFEATURE,t)),t}},e.prototype.removeFromIdIndex_=function(t){var i=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],i=!0;break}return i},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Mt(this.format_,7),this.url_=t,this.setLoader(xf(t,this.format_))},e}(Ef),Cf=L_,gt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Mf(n){return Math.pow(n,3)}function Ur(n){return 1-Mf(1-n)}function A_(n){return 3*n*n-2*n*n*n}function b_(n){return n}var N_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),D_=function(n){N_(e,n);function e(t,i,r){var a=n.call(this)||this,o=r||{};return a.tileCoord=t,a.state=i,a.interimTile=null,a.key="",a.transition_=o.transition===void 0?250:o.transition,a.transitionStarts_={},a.interpolate=!!o.interpolate,a}return e.prototype.changed=function(){this.dispatchEvent(mt.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==gt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(!!this.interimTile){var t=this.interimTile,i=this;do{if(t.getState()==gt.LOADED){t.interimTile=null;break}else t.getState()==gt.LOADING?i=t:t.getState()==gt.IDLE?i.interimTile=t.interimTile:i=t;t=i.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==gt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){dt()},e.prototype.getAlpha=function(t,i){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(!r)r=i,this.transitionStarts_[t]=r;else if(r===-1)return 1;var a=i-r+1e3/60;return a>=this.transition_?1:Mf(a/this.transition_)},e.prototype.inTransition=function(t){return this.transition_?this.transitionStarts_[t]!==-1:!1},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(Sr),wf=D_,F_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),k_=function(n){F_(e,n);function e(t,i,r,a,o,s){var h=n.call(this,t,i,s)||this;return h.crossOrigin_=a,h.src_=r,h.key=r,h.image_=new Image,a!==null&&(h.image_.crossOrigin=a),h.unlisten_=null,h.tileLoadFunction_=o,h}return e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=gt.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=gt.ERROR,this.unlistenImage_(),this.image_=G_(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=gt.LOADED:this.state=gt.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==gt.ERROR&&(this.state=gt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==gt.IDLE&&(this.state=gt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=mh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(wf);function G_(){var n=hi(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var j_=k_,B_=function(){function n(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}return n.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},n.prototype.update=function(e,t){this.points_.push(e,t,Date.now())},n.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var i=t-3;i>0&&this.points_[i+2]>e;)i-=3;var r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;var a=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,a),this.initialVelocity_=Math.sqrt(a*a+o*o)/r,this.initialVelocity_>this.minVelocity_},n.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},n.prototype.getAngle=function(){return this.angle_},n}(),U_=B_,z_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$_=function(n){z_(e,n);function e(t){var i=n.call(this)||this;return i.map_=t,i}return e.prototype.dispatchRenderEvent=function(t,i){dt()},e.prototype.calculateMatrices2D=function(t){var i=t.viewState,r=t.coordinateToPixelTransform,a=t.pixelToCoordinateTransform;Yi(r,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),Ds(a,r)},e.prototype.forEachFeatureAtCoordinate=function(t,i,r,a,o,s,h,u){var c,p=i.viewState;function g(at,_t,st,Pt){return o.call(s,_t,at?st:null,Pt)}var y=p.projection,m=lu(t.slice(),y),x=[[0,0]];if(y.canWrapX()&&a){var C=y.getExtent(),S=qt(C);x.push([-S,0],[S,0])}for(var I=i.layerStatesArray,O=I.length,A=[],F=[],v=0;v<x.length;v++)for(var G=O-1;G>=0;--G){var B=I[G],H=B.layer;if(H.hasRenderer()&&bo(B,p)&&h.call(u,H)){var tt=H.getRenderer(),et=H.getSource();if(tt&&et){var Z=et.getWrapX()?m:t,ut=g.bind(null,B.managed);F[0]=Z[0]+x[v][0],F[1]=Z[1]+x[v][1],c=tt.forEachFeatureAtCoordinate(F,i,r,ut,A)}if(c)return c}}if(A.length!==0){var Et=1/A.length;return A.forEach(function(at,_t){return at.distanceSq+=_t*Et}),A.sort(function(at,_t){return at.distanceSq-_t.distanceSq}),A.some(function(at){return c=at.callback(at.feature,at.layer,at.geometry)}),c}},e.prototype.forEachLayerAtPixel=function(t,i,r,a,o){return dt()},e.prototype.hasFeatureAtCoordinate=function(t,i,r,a,o,s){var h=this.forEachFeatureAtCoordinate(t,i,r,a,Wi,this,o,s);return h!==void 0},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){dt()},e.prototype.scheduleExpireIconCache=function(t){jo.canExpireCache()&&t.postRenderFunctions.push(W_)},e}(As);function W_(n,e){jo.expire()}var X_=$_,Y_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),q_=function(n){Y_(e,n);function e(t){var i=n.call(this,t)||this;i.fontChangeListenerKey_=Rt(Zi,Tr.PROPERTYCHANGE,t.redrawText.bind(t)),i.element_=document.createElement("div");var r=i.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.element_.className=Ea+" ol-layers";var a=t.getViewport();return a.insertBefore(i.element_,a.firstChild||null),i.children_=[],i.renderedVisible_=!0,i}return e.prototype.dispatchRenderEvent=function(t,i){var r=this.getMap();if(r.hasListener(t)){var a=new lf(t,void 0,i);r.dispatchEvent(a)}},e.prototype.disposeInternal=function(){Wt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),n.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(or.PRECOMPOSE,t);var i=t.layerStatesArray.sort(function(g,y){return g.zIndex-y.zIndex}),r=t.viewState;this.children_.length=0;for(var a=[],o=null,s=0,h=i.length;s<h;++s){var u=i[s];if(t.layerIndex=s,!(!bo(u,r)||u.sourceState!=hr.READY&&u.sourceState!=hr.UNDEFINED)){var c=u.layer,p=c.render(t,o);!p||(p!==o&&(this.children_.push(p),o=p),"getDeclutter"in c&&a.push(c))}}for(var s=a.length-1;s>=0;--s)a[s].renderDeclutter(t);Bv(this.element_,this.children_),this.dispatchRenderEvent(or.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)},e.prototype.forEachLayerAtPixel=function(t,i,r,a,o){for(var s=i.viewState,h=i.layerStatesArray,u=h.length,c=u-1;c>=0;--c){var p=h[c],g=p.layer;if(g.hasRenderer()&&bo(p,s)&&o(g)){var y=g.getRenderer(),m=y.getDataAtPixel(t,i,r);if(m){var x=a(g,m);if(x)return x}}}},e}(X_),V_=q_,Sf=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),tn=function(n){Sf(e,n);function e(t,i){var r=n.call(this,t)||this;return r.layer=i,r}return e}(oi),Th={LAYERS:"layers"},H_=function(n){Sf(e,n);function e(t){var i=this,r=t||{},a=$t({},r);delete a.layers;var o=r.layers;return i=n.call(this,a)||this,i.on,i.once,i.un,i.layersListenerKeys_=[],i.listenerKeys_={},i.addChangeListener(Th.LAYERS,i.handleLayersChanged_),o?Array.isArray(o)?o=new Ze(o.slice(),{unique:!0}):Mt(typeof o.getArray=="function",43):o=new Ze(void 0,{unique:!0}),i.setLayers(o),i}return e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Wt),this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(Rt(t,ce.ADD,this.handleLayersAdd_,this),Rt(t,ce.REMOVE,this.handleLayersRemove_,this));for(var i in this.listenerKeys_)this.listenerKeys_[i].forEach(Wt);Mr(this.listenerKeys_);for(var r=t.getArray(),a=0,o=r.length;a<o;a++){var s=r[a];this.registerLayerListeners_(s),this.dispatchEvent(new tn("addlayer",s))}this.changed()},e.prototype.registerLayerListeners_=function(t){var i=[Rt(t,Tr.PROPERTYCHANGE,this.handleLayerChange_,this),Rt(t,mt.CHANGE,this.handleLayerChange_,this)];t instanceof e&&i.push(Rt(t,"addlayer",this.handleLayerGroupAdd_,this),Rt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ot(t)]=i},e.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new tn("addlayer",t.layer))},e.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new tn("removelayer",t.layer))},e.prototype.handleLayersAdd_=function(t){var i=t.element;this.registerLayerListeners_(i),this.dispatchEvent(new tn("addlayer",i)),this.changed()},e.prototype.handleLayersRemove_=function(t){var i=t.element,r=Ot(i);this.listenerKeys_[r].forEach(Wt),delete this.listenerKeys_[r],this.dispatchEvent(new tn("removelayer",i)),this.changed()},e.prototype.getLayers=function(){return this.get(Th.LAYERS)},e.prototype.setLayers=function(t){var i=this.getLayers();if(i)for(var r=i.getArray(),a=0,o=r.length;a<o;++a)this.dispatchEvent(new tn("removelayer",r[a]));this.set(Th.LAYERS,t)},e.prototype.getLayersArray=function(t){var i=t!==void 0?t:[];return this.getLayers().forEach(function(r){r.getLayersArray(i)}),i},e.prototype.getLayerStatesArray=function(t){var i=t!==void 0?t:[],r=i.length;this.getLayers().forEach(function(c){c.getLayerStatesArray(i)});var a=this.getLayerState(),o=a.zIndex;!t&&a.zIndex===void 0&&(o=0);for(var s=r,h=i.length;s<h;s++){var u=i[s];u.opacity*=a.opacity,u.visible=u.visible&&a.visible,u.maxResolution=Math.min(u.maxResolution,a.maxResolution),u.minResolution=Math.max(u.minResolution,a.minResolution),u.minZoom=Math.max(u.minZoom,a.minZoom),u.maxZoom=Math.min(u.maxZoom,a.maxZoom),a.extent!==void 0&&(u.extent!==void 0?u.extent=ga(u.extent,a.extent):u.extent=a.extent),u.zIndex===void 0&&(u.zIndex=o)}return i},e.prototype.getSourceState=function(){return hr.READY},e}(Qu),Na=H_,K_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",GroupEvent:tn,default:Na}),Z_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),J_=function(n){Z_(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.map=i,a.frameState=r!==void 0?r:null,a}return e}(oi),Bo=J_,Q_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ty=function(n){Q_(e,n);function e(t,i,r,a,o){var s=n.call(this,t,i,o)||this;return s.originalEvent=r,s.pixel_=null,s.coordinate_=null,s.dragging=a!==void 0?a:!1,s}return Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){n.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){n.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Bo),en=ty,Lt={SINGLECLICK:"singleclick",CLICK:mt.CLICK,DBLCLICK:mt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ch={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ey=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),iy=function(n){ey(e,n);function e(t,i){var r=n.call(this,t)||this;r.map_=t,r.clickTimeoutId_,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=i===void 0?1:i,r.down_=null;var a=r.map_.getViewport();return r.activePointers_=0,r.trackedTouches_={},r.element_=a,r.pointerdownListenerKey_=Rt(a,Ch.POINTERDOWN,r.handlePointerDown_,r),r.originalPointerMoveEvent_,r.relayedListenerKey_=Rt(a,Ch.POINTERMOVE,r.relayEvent_,r),r.boundHandleTouchMove_=r.handleTouchMove_.bind(r),r.element_.addEventListener(mt.TOUCHMOVE,r.boundHandleTouchMove_,Hl?{passive:!1}:!1),r}return e.prototype.emulateClick_=function(t){var i=new en(Lt.CLICK,this.map_,t);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new en(Lt.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var r=new en(Lt.SINGLECLICK,this.map_,t);this.dispatchEvent(r)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var i=t;i.type==Lt.POINTERUP||i.type==Lt.POINTERCANCEL?delete this.trackedTouches_[i.pointerId]:i.type==Lt.POINTERDOWN&&(this.trackedTouches_[i.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var i=new en(Lt.POINTERUP,this.map_,t);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_===0&&(this.dragListenerKeys_.forEach(Wt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return t.button===0},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=this.activePointers_===0,this.updateActivePointers_(t);var i=new en(Lt.POINTERDOWN,this.map_,t);this.dispatchEvent(i),this.down_={};for(var r in t){var a=t[r];this.down_[r]=typeof a=="function"?Vn:a}if(this.dragListenerKeys_.length===0){var o=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Rt(o,Lt.POINTERMOVE,this.handlePointerMove_,this),Rt(o,Lt.POINTERUP,this.handlePointerUp_,this),Rt(this.element_,Lt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==o&&this.dragListenerKeys_.push(Rt(this.element_.getRootNode(),Lt.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var i=new en(Lt.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(i)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new en(t.type,this.map_,t,i))},e.prototype.handleTouchMove_=function(t){var i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Wt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(mt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Wt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Wt),this.dragListenerKeys_.length=0,this.element_=null,n.prototype.disposeInternal.call(this)},e}(Sr),ny=iy,Da={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},Ce={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Uo=1/0,ry=function(){function n(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return n.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Mr(this.queuedElements_)},n.prototype.dequeue=function(){var e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var r=this.keyFunction_(i);return delete this.queuedElements_[r],i},n.prototype.enqueue=function(e){Mt(!(this.keyFunction_(e)in this.queuedElements_),31);var t=this.priorityFunction_(e);return t!=Uo?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},n.prototype.getCount=function(){return this.elements_.length},n.prototype.getLeftChildIndex_=function(e){return e*2+1},n.prototype.getRightChildIndex_=function(e){return e*2+2},n.prototype.getParentIndex_=function(e){return e-1>>1},n.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},n.prototype.isEmpty=function(){return this.elements_.length===0},n.prototype.isKeyQueued=function(e){return e in this.queuedElements_},n.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},n.prototype.siftUp_=function(e){for(var t=this.elements_,i=this.priorities_,r=t.length,a=t[e],o=i[e],s=e;e<r>>1;){var h=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<r&&i[u]<i[h]?u:h;t[e]=t[c],i[e]=i[c],e=c}t[e]=a,i[e]=o,this.siftDown_(s,e)},n.prototype.siftDown_=function(e,t){for(var i=this.elements_,r=this.priorities_,a=i[t],o=r[t];t>e;){var s=this.getParentIndex_(t);if(r[s]>o)i[t]=i[s],r[t]=r[s],t=s;else break}i[t]=a,r[t]=o},n.prototype.reprioritize=function(){var e=this.priorityFunction_,t=this.elements_,i=this.priorities_,r=0,a=t.length,o,s,h;for(s=0;s<a;++s)o=t[s],h=e(o),h==Uo?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=h,t[r++]=o);t.length=r,i.length=r,this.heapify_()},n}(),ay=ry,oy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),sy=function(n){oy(e,n);function e(t,i){var r=n.call(this,function(a){return t.apply(null,a)},function(a){return a[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=i,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return e.prototype.enqueue=function(t){var i=n.prototype.enqueue.call(this,t);if(i){var r=t[0];r.addEventListener(mt.CHANGE,this.boundHandleTileChange_)}return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var i=t.target,r=i.getState();if(r===gt.LOADED||r===gt.ERROR||r===gt.EMPTY){i.removeEventListener(mt.CHANGE,this.boundHandleTileChange_);var a=i.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,i){for(var r=0,a,o,s;this.tilesLoading_<t&&r<i&&this.getCount()>0;)o=this.dequeue()[0],s=o.getKey(),a=o.getState(),a===gt.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,o.load())},e}(ay),hy=sy;function ly(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Uo;var a=n.viewState.center,o=i[0]-a[0],s=i[1]-a[1];return 65536*Math.log(r)+Math.sqrt(o*o+s*s)/r}var Ti={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},uy=42,Mh=256;function Of(n,e,t){return function(i,r,a,o,s){if(i){var h=e?0:a[0]*r,u=e?0:a[1]*r,c=s?s[0]:0,p=s?s[1]:0,g=n[0]+h/2+c,y=n[2]-h/2+c,m=n[1]+u/2+p,x=n[3]-u/2+p;g>y&&(g=(y+g)/2,y=g),m>x&&(m=(x+m)/2,x=m);var C=ie(i[0],g,y),S=ie(i[1],m,x),I=30*r;return o&&t&&(C+=-I*Math.log(1+Math.max(0,g-i[0])/I)+I*Math.log(1+Math.max(0,i[0]-y)/I),S+=-I*Math.log(1+Math.max(0,m-i[1])/I)+I*Math.log(1+Math.max(0,i[1]-x)/I)),[C,S]}else return}}function fy(n){return n}function wh(n,e,t,i){var r=qt(e)/t[0],a=Ei(e)/t[1];return i?Math.min(n,Math.max(r,a)):Math.min(n,Math.min(r,a))}function Sh(n,e,t){var i=Math.min(n,e),r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),ie(i,t/2,e*2)}function cy(n,e,t,i){return function(r,a,o,s){if(r!==void 0){var h=n[0],u=n[n.length-1],c=t?wh(h,t,o,i):h;if(s){var p=e!==void 0?e:!0;return p?Sh(r,c,u):ie(r,u,c)}var g=Math.min(c,r),y=Math.floor(Ns(n,g,a));return n[y]>c&&y<n.length-1?n[y+1]:n[y]}else return}}function dy(n,e,t,i,r,a){return function(o,s,h,u){if(o!==void 0){var c=r?wh(e,r,h,a):e,p=t!==void 0?t:0;if(u){var g=i!==void 0?i:!0;return g?Sh(o,c,p):ie(o,p,c)}var y=1e-9,m=Math.ceil(Math.log(e/c)/Math.log(n)-y),x=-s*(.5-y)+.5,C=Math.min(c,o),S=Math.floor(Math.log(e/C)/Math.log(n)+x),I=Math.max(m,S),O=e/Math.pow(n,I);return ie(O,p,c)}else return}}function If(n,e,t,i,r){return function(a,o,s,h){if(a!==void 0){var u=i?wh(n,i,s,r):n,c=t!==void 0?t:!0;return!c||!h?ie(a,e,u):Sh(a,u,e)}else return}}function Oh(n){if(n!==void 0)return 0}function Rf(n){if(n!==void 0)return n}function py(n){var e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function vy(n){var e=n||Ri(5);return function(t,i){if(i)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}var gy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ih=0,_y=function(n){gy(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=$t({},t);return i.hints_=[0,0],i.animations_=[],i.updateAnimationKey_,i.projection_=Ks(r.projection,"EPSG:3857"),i.viewportSize_=[100,100],i.targetCenter_=null,i.targetResolution_,i.targetRotation_,i.nextCenter_=null,i.nextResolution_,i.nextRotation_,i.cancelAnchor_=void 0,r.center&&(r.center=xi(r.center,i.projection_)),r.extent&&(r.extent=er(r.extent,i.projection_)),i.applyOptions_(r),i}return e.prototype.applyOptions_=function(t){var i=$t({},t);for(var r in Ti)delete i[r];this.setProperties(i,!0);var a=my(t);this.maxResolution_=a.maxResolution,this.minResolution_=a.minResolution,this.zoomFactor_=a.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=a.minZoom;var o=yy(t),s=a.constraint,h=Ey(t);this.constraints_={center:o,resolution:s,rotation:h},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var i=this.padding_;this.padding_=t;var r=this.getCenter();if(r){var a=t||[0,0,0,0];i=i||[0,0,0,0];var o=this.getResolution(),s=o/2*(a[3]-i[3]+i[1]-a[1]),h=o/2*(a[0]-i[0]+i[2]-a[2]);this.setCenterInternal([r[0]+s,r[1]-h])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var i=this.getProperties();return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),$t({},i,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var i=new Array(arguments.length),r=0;r<i.length;++r){var a=arguments[r];a.center&&(a=$t({},a),a.center=xi(a.center,this.getProjection())),a.anchor&&(a=$t({},a),a.anchor=xi(a.anchor,this.getProjection())),i[r]=a}this.animateInternal.apply(this,i)},e.prototype.animateInternal=function(t){var i=arguments.length,r;i>1&&typeof arguments[i-1]=="function"&&(r=arguments[i-1],--i);for(var a=0;a<i&&!this.isDef();++a){var o=arguments[a];o.center&&this.setCenterInternal(o.center),o.zoom!==void 0?this.setZoom(o.zoom):o.resolution&&this.setResolution(o.resolution),o.rotation!==void 0&&this.setRotation(o.rotation)}if(a===i){r&&zo(r,!0);return}for(var s=Date.now(),h=this.targetCenter_.slice(),u=this.targetResolution_,c=this.targetRotation_,p=[];a<i;++a){var g=arguments[a],y={start:s,complete:!1,anchor:g.anchor,duration:g.duration!==void 0?g.duration:1e3,easing:g.easing||A_,callback:r};if(g.center&&(y.sourceCenter=h,y.targetCenter=g.center.slice(),h=y.targetCenter),g.zoom!==void 0?(y.sourceResolution=u,y.targetResolution=this.getResolutionForZoom(g.zoom),u=y.targetResolution):g.resolution&&(y.sourceResolution=u,y.targetResolution=g.resolution,u=y.targetResolution),g.rotation!==void 0){y.sourceRotation=c;var m=Pi(g.rotation-c+Math.PI,2*Math.PI)-Math.PI;y.targetRotation=c+m,c=y.targetRotation}xy(y)?y.complete=!0:s+=y.duration,p.push(y)}this.animations_.push(p),this.setHint(Te.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[Te.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[Te.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(Te.ANIMATING,-this.hints_[Te.ANIMATING]);for(var t,i=0,r=this.animations_.length;i<r;++i){var a=this.animations_[i];if(a[0].callback&&zo(a[0].callback,!1),!t)for(var o=0,s=a.length;o<s;++o){var h=a[o];if(!h.complete){t=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var t=Date.now(),i=!1,r=this.animations_.length-1;r>=0;--r){for(var a=this.animations_[r],o=!0,s=0,h=a.length;s<h;++s){var u=a[s];if(!u.complete){var c=t-u.start,p=u.duration>0?c/u.duration:1;p>=1?(u.complete=!0,p=1):o=!1;var g=u.easing(p);if(u.sourceCenter){var y=u.sourceCenter[0],m=u.sourceCenter[1],x=u.targetCenter[0],C=u.targetCenter[1];this.nextCenter_=u.targetCenter;var S=y+g*(x-y),I=m+g*(C-m);this.targetCenter_=[S,I]}if(u.sourceResolution&&u.targetResolution){var O=g===1?u.targetResolution:u.sourceResolution+g*(u.targetResolution-u.sourceResolution);if(u.anchor){var A=this.getViewportSize_(this.getRotation()),F=this.constraints_.resolution(O,0,A,!0);this.targetCenter_=this.calculateCenterZoom(F,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=O,this.applyTargetState_(!0)}if(u.sourceRotation!==void 0&&u.targetRotation!==void 0){var v=g===1?Pi(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+g*(u.targetRotation-u.sourceRotation);if(u.anchor){var G=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(G,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=v}if(this.applyTargetState_(!0),i=!0,!u.complete)break}}if(o){this.animations_[r]=null,this.setHint(Te.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var B=a[0].callback;B&&zo(B,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,i){var r,a=this.getCenterInternal();return a!==void 0&&(r=[a[0]-i[0],a[1]-i[1]],Ys(r,t-this.getRotation()),Gp(r,i)),r},e.prototype.calculateCenterZoom=function(t,i){var r,a=this.getCenterInternal(),o=this.getResolution();if(a!==void 0&&o!==void 0){var s=i[0]-t*(i[0]-a[0])/o,h=i[1]-t*(i[1]-a[1])/o;r=[s,h]}return r},e.prototype.getViewportSize_=function(t){var i=this.viewportSize_;if(t){var r=i[0],a=i[1];return[Math.abs(r*Math.cos(t))+Math.abs(a*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(a*Math.cos(t))]}else return i},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&Zs(t,this.getProjection())},e.prototype.getCenterInternal=function(){return this.get(Ti.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var i=this.calculateExtentInternal(t);return du(i,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var i=t||this.getViewportSizeMinusPadding_(),r=this.getCenterInternal();Mt(r,1);var a=this.getResolution();Mt(a!==void 0,2);var o=this.getRotation();return Mt(o!==void 0,3),Bs(r,a,o,i)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(Ti.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,i){return this.getResolutionForExtentInternal(er(t,this.getProjection()),i)},e.prototype.getResolutionForExtentInternal=function(t,i){var r=i||this.getViewportSizeMinusPadding_(),a=qt(t)/r[0],o=Ei(t)/r[1];return Math.max(a,o)},e.prototype.getResolutionForValueFunction=function(t){var i=t||2,r=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(r/a)/Math.log(i);return function(s){var h=r/Math.pow(i,s*o);return h}},e.prototype.getRotation=function(){return this.get(Ti.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var i=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(r/a)/i;return function(s){var h=Math.log(r/s)/i/o;return h}},e.prototype.getViewportSizeMinusPadding_=function(t){var i=this.getViewportSize_(t),r=this.padding_;return r&&(i=[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]),i},e.prototype.getState=function(){var t=this.getProjection(),i=this.getResolution(),r=this.getRotation(),a=this.getCenterInternal(),o=this.padding_;if(o){var s=this.getViewportSizeMinusPadding_();a=Rh(a,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],i,r)}return{center:a.slice(0),projection:t!==void 0?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t},e.prototype.getZoomForResolution=function(t){var i=this.minZoom_||0,r,a;if(this.resolutions_){var o=Ns(this.resolutions_,t,1);i=o,r=this.resolutions_[o],o==this.resolutions_.length-1?a=2:a=r/this.resolutions_[o+1]}else r=this.maxResolution_,a=this.zoomFactor_;return i+Math.log(r/t)/Math.log(a)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var i=ie(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(r,ie(t-i,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,i){var r;if(Mt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){Mt(!Us(t),25);var a=er(t,this.getProjection());r=Lu(a)}else if(t.getType()===W.CIRCLE){var a=er(t.getExtent(),this.getProjection());r=Lu(a),r.rotate(this.getRotation(),Kn(a))}else{var o=Yp();o?r=t.clone().transform(o,this.getProjection()):r=t}this.fitInternal(r,i)},e.prototype.rotatedExtentForGeometry=function(t){for(var i=this.getRotation(),r=Math.cos(i),a=Math.sin(-i),o=t.getFlatCoordinates(),s=t.getStride(),h=1/0,u=1/0,c=-1/0,p=-1/0,g=0,y=o.length;g<y;g+=s){var m=o[g]*r-o[g+1]*a,x=o[g]*a+o[g+1]*r;h=Math.min(h,m),u=Math.min(u,x),c=Math.max(c,m),p=Math.max(p,x)}return[h,u,c,p]},e.prototype.fitInternal=function(t,i){var r=i||{},a=r.size;a||(a=this.getViewportSizeMinusPadding_());var o=r.padding!==void 0?r.padding:[0,0,0,0],s=r.nearest!==void 0?r.nearest:!1,h;r.minResolution!==void 0?h=r.minResolution:r.maxZoom!==void 0?h=this.getResolutionForZoom(r.maxZoom):h=0;var u=this.rotatedExtentForGeometry(t),c=this.getResolutionForExtentInternal(u,[a[0]-o[1]-o[3],a[1]-o[0]-o[2]]);c=isNaN(c)?h:Math.max(c,h),c=this.getConstrainedResolution(c,s?0:1);var p=this.getRotation(),g=Math.sin(p),y=Math.cos(p),m=Kn(u);m[0]+=(o[1]-o[3])/2*c,m[1]+=(o[0]-o[2])/2*c;var x=m[0]*y-m[1]*g,C=m[1]*y+m[0]*g,S=this.getConstrainedCenter([x,C],c),I=r.callback?r.callback:Vn;r.duration!==void 0?this.animateInternal({resolution:c,center:S,duration:r.duration,easing:r.easing},I):(this.targetResolution_=c,this.targetCenter_=S,this.applyTargetState_(!1,!0),zo(I,!0))},e.prototype.centerOn=function(t,i,r){this.centerOnInternal(xi(t,this.getProjection()),i,r)},e.prototype.centerOnInternal=function(t,i,r){this.setCenterInternal(Rh(t,i,r,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,i,r,a){var o,s=this.padding_;if(s&&t){var h=this.getViewportSizeMinusPadding_(-r),u=Rh(t,a,[h[0]/2+s[3],h[1]/2+s[0]],i,r);o=[t[0]-u[0],t[1]-u[1]]}return o},e.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},e.prototype.adjustCenter=function(t){var i=Zs(this.targetCenter_,this.getProjection());this.setCenter([i[0]+t[0],i[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])},e.prototype.adjustResolution=function(t,i){var r=i&&xi(i,this.getProjection());this.adjustResolutionInternal(t,r)},e.prototype.adjustResolutionInternal=function(t,i){var r=this.getAnimating()||this.getInteracting(),a=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,a,r);i&&(this.targetCenter_=this.calculateCenterZoom(o,i)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)},e.prototype.adjustRotation=function(t,i){i&&(i=xi(i,this.getProjection())),this.adjustRotationInternal(t,i)},e.prototype.adjustRotationInternal=function(t,i){var r=this.getAnimating()||this.getInteracting(),a=this.constraints_.rotation(this.targetRotation_+t,r);i&&(this.targetCenter_=this.calculateCenterRotate(a,i)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(xi(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,i){var r=this.getAnimating()||this.getInteracting()||i,a=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(a),s=this.constraints_.resolution(this.targetResolution_,0,o,r),h=this.constraints_.center(this.targetCenter_,s,o,r,this.calculateCenterShift(this.targetCenter_,s,a,o));this.get(Ti.ROTATION)!==a&&this.set(Ti.ROTATION,a),this.get(Ti.RESOLUTION)!==s&&(this.set(Ti.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(Ti.CENTER)||!Xs(this.get(Ti.CENTER),h))&&this.set(Ti.CENTER,h),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,i,r){var a=t!==void 0?t:200,o=i||0,s=this.constraints_.rotation(this.targetRotation_),h=this.getViewportSize_(s),u=this.constraints_.resolution(this.targetResolution_,o,h),c=this.constraints_.center(this.targetCenter_,u,h,!1,this.calculateCenterShift(this.targetCenter_,u,s,h));if(a===0&&!this.cancelAnchor_){this.targetResolution_=u,this.targetRotation_=s,this.targetCenter_=c,this.applyTargetState_();return}var p=r||(a===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==u||this.getRotation()!==s||!this.getCenterInternal()||!Xs(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:c,resolution:u,duration:a,easing:Ur,anchor:p}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Te.INTERACTING,1)},e.prototype.endInteraction=function(t,i,r){var a=r&&xi(r,this.getProjection());this.endInteractionInternal(t,i,a)},e.prototype.endInteractionInternal=function(t,i,r){this.setHint(Te.INTERACTING,-1),this.resolveConstraints(t,i,r)},e.prototype.getConstrainedCenter=function(t,i){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),r)},e.prototype.getConstrainedZoom=function(t,i){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,i))},e.prototype.getConstrainedResolution=function(t,i){var r=i||0,a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,r,a)},e}(Be);function zo(n,e){setTimeout(function(){n(e)},0)}function yy(n){if(n.extent!==void 0){var e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Of(n.extent,n.constrainOnlyCenter,e)}var t=Ks(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){var i=t.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Of(i,!1,!1)}return fy}function my(n){var e,t,i,r=28,a=2,o=n.minZoom!==void 0?n.minZoom:Ih,s=n.maxZoom!==void 0?n.maxZoom:r,h=n.zoomFactor!==void 0?n.zoomFactor:a,u=n.multiWorld!==void 0?n.multiWorld:!1,c=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,p=n.showFullExtent!==void 0?n.showFullExtent:!1,g=Ks(n.projection,"EPSG:3857"),y=g.getExtent(),m=n.constrainOnlyCenter,x=n.extent;if(!u&&!x&&g.isGlobal()&&(m=!1,x=y),n.resolutions!==void 0){var C=n.resolutions;t=C[o],i=C[s]!==void 0?C[s]:C[C.length-1],n.constrainResolution?e=cy(C,c,!m&&x,p):e=If(t,i,c,!m&&x,p)}else{var S=y?Math.max(qt(y),Ei(y)):360*yi[Ue.DEGREES]/g.getMetersPerUnit(),I=S/Mh/Math.pow(a,Ih),O=I/Math.pow(a,r-Ih);t=n.maxResolution,t!==void 0?o=0:t=I/Math.pow(h,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(h,s):i=I/Math.pow(h,s):i=O),s=o+Math.floor(Math.log(t/i)/Math.log(h)),i=t/Math.pow(h,s-o),n.constrainResolution?e=dy(h,t,i,c,!m&&x,p):e=If(t,i,c,!m&&x,p)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:h}}function Ey(n){var e=n.enableRotation!==void 0?n.enableRotation:!0;if(e){var t=n.constrainRotation;return t===void 0||t===!0?vy():t===!1?Rf:typeof t=="number"?py(t):Rf}else return Oh}function xy(n){return!(n.sourceCenter&&n.targetCenter&&!Xs(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Rh(n,e,t,i,r){var a=Math.cos(-r),o=Math.sin(-r),s=n[0]*a-n[1]*o,h=n[1]*a+n[0]*o;s+=(e[0]/2-t[0])*i,h+=(t[1]-e[1]/2)*i,o=-o;var u=s*a-h*o,c=h*a+s*o;return[u,c]}var ur=_y,Ty=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();function Pf(n){if(n instanceof No){n.setMapInternal(null);return}n instanceof Na&&n.getLayers().forEach(Pf)}function Lf(n,e){if(n instanceof No){n.setMapInternal(e);return}if(n instanceof Na)for(var t=n.getLayers().getArray(),i=0,r=t.length;i<r;++i)Lf(t[i],e)}var Cy=function(n){Ty(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=My(t);i.renderComplete_,i.boundHandleBrowserEvent_=i.handleBrowserEvent.bind(i),i.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,i.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:Vl,i.postRenderTimeoutHandle_,i.animationDelayKey_,i.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(i),i.coordinateToPixelTransform_=Ii(),i.pixelToCoordinateTransform_=Ii(),i.frameIndex_=0,i.frameState_=null,i.previousExtent_=null,i.viewPropertyListenerKey_=null,i.viewChangeListenerKey_=null,i.layerGroupPropertyListenerKeys_=null,i.viewport_=document.createElement("div"),i.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.viewport_.style.position="relative",i.viewport_.style.overflow="hidden",i.viewport_.style.width="100%",i.viewport_.style.height="100%",i.overlayContainer_=document.createElement("div"),i.overlayContainer_.style.position="absolute",i.overlayContainer_.style.zIndex="0",i.overlayContainer_.style.width="100%",i.overlayContainer_.style.height="100%",i.overlayContainer_.style.pointerEvents="none",i.overlayContainer_.className="ol-overlaycontainer",i.viewport_.appendChild(i.overlayContainer_),i.overlayContainerStopEvent_=document.createElement("div"),i.overlayContainerStopEvent_.style.position="absolute",i.overlayContainerStopEvent_.style.zIndex="0",i.overlayContainerStopEvent_.style.width="100%",i.overlayContainerStopEvent_.style.height="100%",i.overlayContainerStopEvent_.style.pointerEvents="none",i.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",i.viewport_.appendChild(i.overlayContainerStopEvent_),i.mapBrowserEventHandler_=null,i.moveTolerance_=t.moveTolerance,i.keyboardEventTarget_=r.keyboardEventTarget,i.targetChangeHandlerKeys_=null,i.controls=r.controls||new Ze,i.interactions=r.interactions||new Ze,i.overlays_=r.overlays,i.overlayIdIndex_={},i.renderer_=null,i.postRenderFunctions_=[],i.tileQueue_=new hy(i.getTilePriority.bind(i),i.handleTileChange_.bind(i)),i.addChangeListener(Ce.LAYERGROUP,i.handleLayerGroupChanged_),i.addChangeListener(Ce.VIEW,i.handleViewChanged_),i.addChangeListener(Ce.SIZE,i.handleSizeChanged_),i.addChangeListener(Ce.TARGET,i.handleTargetChanged_),i.setProperties(r.values);var a=i;return t.view&&!(t.view instanceof ur)&&t.view.then(function(o){a.setView(new ur(o))}),i.controls.addEventListener(ce.ADD,function(o){o.element.setMap(this)}.bind(i)),i.controls.addEventListener(ce.REMOVE,function(o){o.element.setMap(null)}.bind(i)),i.interactions.addEventListener(ce.ADD,function(o){o.element.setMap(this)}.bind(i)),i.interactions.addEventListener(ce.REMOVE,function(o){o.element.setMap(null)}.bind(i)),i.overlays_.addEventListener(ce.ADD,function(o){this.addOverlayInternal_(o.element)}.bind(i)),i.overlays_.addEventListener(ce.REMOVE,function(o){var s=o.element,h=s.getId();h!==void 0&&delete this.overlayIdIndex_[h.toString()],o.element.setMap(null)}.bind(i)),i.controls.forEach(function(o){o.setMap(this)}.bind(i)),i.interactions.forEach(function(o){o.setMap(this)}.bind(i)),i.overlays_.forEach(i.addOverlayInternal_.bind(i)),i}return e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){var i=this.getLayerGroup().getLayers();i.push(t)},e.prototype.handleLayerAdd_=function(t){Lf(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var i=t.getId();i!==void 0&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),n.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,i,r){if(!!this.frameState_){var a=this.getCoordinateFromPixelInternal(t);r=r!==void 0?r:{};var o=r.hitTolerance!==void 0?r.hitTolerance:0,s=r.layerFilter!==void 0?r.layerFilter:Wi,h=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(a,this.frameState_,o,h,i,null,s,null)}},e.prototype.getFeaturesAtPixel=function(t,i){var r=[];return this.forEachFeatureAtPixel(t,function(a){r.push(a)},i),r},e.prototype.getAllLayers=function(){var t=[];function i(r){r.forEach(function(a){a instanceof Na?i(a.getLayers()):t.push(a)})}return i(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,i,r){if(!!this.frameState_){var a=r||{},o=a.hitTolerance!==void 0?a.hitTolerance:0,s=a.layerFilter||Wi;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,i,s)}},e.prototype.hasFeatureAtPixel=function(t,i){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};var a=i.layerFilter!==void 0?i.layerFilter:Wi,o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,o,s,a,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var i=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-i.left,r.clientY-i.top]},e.prototype.getTarget=function(){return this.get(Ce.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Zs(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var i=this.frameState_;return i?ue(i.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var i=this.overlayIdIndex_[t.toString()];return i!==void 0?i:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Ce.LAYERGROUP)},e.prototype.setLayers=function(t){var i=this.getLayerGroup();if(t instanceof Ze){i.setLayers(t);return}var r=i.getLayers();r.clear(),r.extend(t)},e.prototype.getLayers=function(){var t=this.getLayerGroup().getLayers();return t},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),i=0,r=t.length;i<r;++i){var a=t[i].layer,o=a.getSource();if(o&&o.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var i=xi(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)},e.prototype.getPixelFromCoordinateInternal=function(t){var i=this.frameState_;return i?ue(i.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Ce.SIZE)},e.prototype.getView=function(){return this.get(Ce.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,i,r,a){return ly(this.frameState_,t,i,r,a)},e.prototype.handleBrowserEvent=function(t,i){var r=i||t.type,a=new en(r,this,t);this.handleMapBrowserEvent(a)},e.prototype.handleMapBrowserEvent=function(t){if(!!this.frameState_){var i=t.originalEvent,r=i.type;if(r===Ch.POINTERDOWN||r===mt.WHEEL||r===mt.KEYDOWN){var a=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():a,s=i.target;if(this.overlayContainerStopEvent_.contains(s)||!(o===a?a.documentElement:o).contains(s))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1)for(var h=this.getInteractions().getArray().slice(),u=h.length-1;u>=0;u--){var c=h[u];if(!(c.getMap()!==this||!c.getActive()||!this.getTargetElement())){var p=c.handleEvent(t);if(!p||t.propagationStopped)break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){var r=this.maxTilesLoading_,a=r;if(t){var o=t.viewHints;if(o[Te.ANIMATING]||o[Te.INTERACTING]){var s=Date.now()-t.time>8;r=s?0:8,a=s?0:2}}i.getTilesLoading()<r&&(i.reprioritize(),i.loadMoreTiles(r,a))}t&&this.hasListener(or.RENDERCOMPLETE)&&!t.animate&&this.renderComplete_&&this.renderer_.dispatchRenderEvent(or.RENDERCOMPLETE,t);for(var h=this.postRenderFunctions_,u=0,c=h.length;u<c;++u)h[u](this,t);h.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,i=this.targetChangeHandlerKeys_.length;t<i;++t)Wt(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(mt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(mt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Io(this.viewport_)}var r=this.getTargetElement();if(!r)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{r.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new ny(this,this.moveTolerance_);for(var a in Lt)this.mapBrowserEventHandler_.addEventListener(Lt[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(mt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(mt.WHEEL,this.boundHandleBrowserEvent_,Hl?{passive:!1}:!1);var o=this.getOwnerDocument().defaultView,s=this.keyboardEventTarget_?this.keyboardEventTarget_:r;this.targetChangeHandlerKeys_=[Rt(s,mt.KEYDOWN,this.handleBrowserEvent,this),Rt(s,mt.KEYPRESS,this.handleBrowserEvent,this),Rt(o,mt.RESIZE,this.updateSize,this)]}this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Wt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Wt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Rt(t,Tr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Rt(t,mt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Wt),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new tn("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Rt(t,Tr.PROPERTYCHANGE,this.render,this),Rt(t,mt.CHANGE,this.render,this),Rt(t,"addlayer",this.handleLayerAdd_,this),Rt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),i=0,r=t.length;i<r;++i){var a=t[i].layer;a.hasRenderer()&&a.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){var i=this.getLayerGroup().getLayers();return i.remove(t)},e.prototype.handleLayerRemove_=function(t){Pf(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var i=this,r=this.getSize(),a=this.getView(),o=this.frameState_,s=null;if(r!==void 0&&Fu(r)&&a&&a.isDef()){var h=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=a.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Bs(u.center,u.resolution,u.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:h,wantedTiles:{},mapId:Ot(this),renderTargets:{}},u.nextCenter&&u.nextResolution){var c=isNaN(u.nextRotation)?u.rotation:u.nextRotation;s.nextExtent=Bs(u.nextCenter,u.nextResolution,c,r)}}if(this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),o){var p=!this.previousExtent_||!Us(this.previousExtent_)&&!pa(s.extent,this.previousExtent_);p&&(this.dispatchEvent(new Bo(Da.MOVESTART,this,o)),this.previousExtent_=da(this.previousExtent_))}var g=this.previousExtent_&&!s.viewHints[Te.ANIMATING]&&!s.viewHints[Te.INTERACTING]&&!pa(s.extent,this.previousExtent_);g&&(this.dispatchEvent(new Bo(Da.MOVEEND,this,s)),Ql(s.extent,this.previousExtent_))}this.dispatchEvent(new Bo(Da.POSTRENDER,this,s)),this.renderComplete_=!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoading(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){i.postRenderTimeoutHandle_=void 0,i.handlePostRender()},0))},e.prototype.setLayerGroup=function(t){var i=this.getLayerGroup();i&&this.handleLayerRemove_(new tn("removelayer",i)),this.set(Ce.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(Ce.SIZE,t)},e.prototype.setTarget=function(t){this.set(Ce.TARGET,t)},e.prototype.setView=function(t){if(!t||t instanceof ur){this.set(Ce.VIEW,t);return}this.set(Ce.VIEW,new ur);var i=this;t.then(function(r){i.setView(new ur(r))})},e.prototype.updateSize=function(){var t=this.getTargetElement(),i=void 0;if(t){var r=getComputedStyle(t),a=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(a)&&!isNaN(o)&&(i=[a,o],!Fu(i)&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(i),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var i=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(i=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(i)}},e}(Be);function My(n){var e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);var t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Na({layers:n.layers});t[Ce.LAYERGROUP]=i,t[Ce.TARGET]=n.target,t[Ce.VIEW]=n.view instanceof ur?n.view:new ur;var r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Ze(n.controls.slice()):(Mt(typeof n.controls.getArray=="function",47),r=n.controls));var a;n.interactions!==void 0&&(Array.isArray(n.interactions)?a=new Ze(n.interactions.slice()):(Mt(typeof n.interactions.getArray=="function",48),a=n.interactions));var o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Ze(n.overlays.slice()):(Mt(typeof n.overlays.getArray=="function",49),o=n.overlays):o=new Ze,{controls:r,interactions:a,keyboardEventTarget:e,overlays:o,values:t}}var wy=Cy,Sy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Oy=function(n){Sy(e,n);function e(t){var i=n.call(this)||this,r=t.element;return r&&!t.target&&!r.style.pointerEvents&&(r.style.pointerEvents="auto"),i.element=r||null,i.target_=null,i.map_=null,i.listenerKeys=[],t.render&&(i.render=t.render),t.target&&i.setTarget(t.target),i}return e.prototype.disposeInternal=function(){Io(this.element),n.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Io(this.element);for(var i=0,r=this.listenerKeys.length;i<r;++i)Wt(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=t,this.map_){var a=this.target_?this.target_:t.getOverlayContainerStopEvent();a.appendChild(this.element),this.render!==Vn&&this.listenerKeys.push(Rt(t,Da.POSTRENDER,this.render,this)),t.render()}},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_=typeof t=="string"?document.getElementById(t):t},e}(Be),Pe=Oy,Iy=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Pe}),Ry=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Py=function(n){Ry(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this,i.ulElement_=document.createElement("ul"),i.collapsed_=r.collapsed!==void 0?r.collapsed:!0,i.userCollapsed_=i.collapsed_,i.overrideCollapsible_=r.collapsible!==void 0,i.collapsible_=r.collapsible!==void 0?r.collapsible:!0,i.collapsible_||(i.collapsed_=!1);var a=r.className!==void 0?r.className:"ol-attribution",o=r.tipLabel!==void 0?r.tipLabel:"Attributions",s=r.expandClassName!==void 0?r.expandClassName:a+"-expand",h=r.collapseLabel!==void 0?r.collapseLabel:"\u203A",u=r.collapseClassName!==void 0?r.collapseClassName:a+"-collpase";typeof h=="string"?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=h,i.collapseLabel_.className=u):i.collapseLabel_=h;var c=r.label!==void 0?r.label:"i";typeof c=="string"?(i.label_=document.createElement("span"),i.label_.textContent=c,i.label_.className=s):i.label_=c;var p=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_;i.toggleButton_=document.createElement("button"),i.toggleButton_.setAttribute("type","button"),i.toggleButton_.setAttribute("aria-expanded",String(!i.collapsed_)),i.toggleButton_.title=o,i.toggleButton_.appendChild(p),i.toggleButton_.addEventListener(mt.CLICK,i.handleClick_.bind(i),!1);var g=a+" "+Ea+" "+uh+(i.collapsed_&&i.collapsible_?" "+$u:"")+(i.collapsible_?"":" ol-uncollapsible"),y=i.element;return y.className=g,y.appendChild(i.toggleButton_),y.appendChild(i.ulElement_),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return e.prototype.collectSourceAttributions_=function(t){for(var i={},r=[],a=!0,o=t.layerStatesArray,s=0,h=o.length;s<h;++s){var u=o[s];if(!!bo(u,t.viewState)){var c=u.layer.getSource();if(!!c){var p=c.getAttributions();if(!!p){var g=p(t);if(!!g)if(a=a&&c.getAttributionsCollapsible()!==!1,Array.isArray(g))for(var y=0,m=g.length;y<m;++y)g[y]in i||(r.push(g[y]),i[g[y]]=!0);else g in i||(r.push(g),i[g]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(a),r},e.prototype.updateElement_=function(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var i=this.collectSourceAttributions_(t),r=i.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!qn(i,this.renderedAttributions_)){zu(this.ulElement_);for(var a=0,o=i.length;a<o;++a){var s=document.createElement("li");s.innerHTML=i[a],this.ulElement_.appendChild(s)}this.renderedAttributions_=i}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle($u),this.collapsed_?Uu(this.collapseLabel_,this.label_):Uu(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(Pe),Ly=Py,Ay=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),by=function(n){Ay(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var a=r.className!==void 0?r.className:"ol-rotate",o=r.label!==void 0?r.label:"\u21E7",s=r.compassClassName!==void 0?r.compassClassName:"ol-compass";i.label_=null,typeof o=="string"?(i.label_=document.createElement("span"),i.label_.className=s,i.label_.textContent=o):(i.label_=o,i.label_.classList.add(s));var h=r.tipLabel?r.tipLabel:"Reset rotation",u=document.createElement("button");u.className=a+"-reset",u.setAttribute("type","button"),u.title=h,u.appendChild(i.label_),u.addEventListener(mt.CLICK,i.handleClick_.bind(i),!1);var c=a+" "+Ea+" "+uh,p=i.element;return p.className=c,p.appendChild(u),i.callResetNorth_=r.resetNorth?r.resetNorth:void 0,i.duration_=r.duration!==void 0?r.duration:250,i.autoHide_=r.autoHide!==void 0?r.autoHide:!0,i.rotation_=void 0,i.autoHide_&&i.element.classList.add(Ro),i}return e.prototype.handleClick_=function(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap(),i=t.getView();if(!!i){var r=i.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!=0?i.animate({rotation:0,duration:this.duration_,easing:Ur}):i.setRotation(0))}},e.prototype.render=function(t){var i=t.frameState;if(!!i){var r=i.viewState.rotation;if(r!=this.rotation_){var a="rotate("+r+"rad)";if(this.autoHide_){var o=this.element.classList.contains(Ro);!o&&r===0?this.element.classList.add(Ro):o&&r!==0&&this.element.classList.remove(Ro)}this.label_.style.transform=a}this.rotation_=r}},e}(Pe),Ny=by,Dy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Fy=function(n){Dy(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{element:document.createElement("div"),target:r.target})||this;var a=r.className!==void 0?r.className:"ol-zoom",o=r.delta!==void 0?r.delta:1,s=r.zoomInClassName!==void 0?r.zoomInClassName:a+"-in",h=r.zoomOutClassName!==void 0?r.zoomOutClassName:a+"-out",u=r.zoomInLabel!==void 0?r.zoomInLabel:"+",c=r.zoomOutLabel!==void 0?r.zoomOutLabel:"\u2013",p=r.zoomInTipLabel!==void 0?r.zoomInTipLabel:"Zoom in",g=r.zoomOutTipLabel!==void 0?r.zoomOutTipLabel:"Zoom out",y=document.createElement("button");y.className=s,y.setAttribute("type","button"),y.title=p,y.appendChild(typeof u=="string"?document.createTextNode(u):u),y.addEventListener(mt.CLICK,i.handleClick_.bind(i,o),!1);var m=document.createElement("button");m.className=h,m.setAttribute("type","button"),m.title=g,m.appendChild(typeof c=="string"?document.createTextNode(c):c),m.addEventListener(mt.CLICK,i.handleClick_.bind(i,-o),!1);var x=a+" "+Ea+" "+uh,C=i.element;return C.className=x,C.appendChild(y),C.appendChild(m),i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleClick_=function(t,i){i.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var i=this.getMap(),r=i.getView();if(!!r){var a=r.getZoom();if(a!==void 0){var o=r.getConstrainedZoom(a+t);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:o,duration:this.duration_,easing:Ur})):r.setZoom(o)}}},e}(Pe),ky=Fy,Qe={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},Gy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Me={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},jy=function(n){Gy(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un,i.options=t,i.id=t.id,i.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,i.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,i.element=document.createElement("div"),i.element.className=t.className!==void 0?t.className:"ol-overlay-container "+Uv,i.element.style.position="absolute",i.element.style.pointerEvents="auto";var r=t.autoPan;return r&&typeof r!="object"&&(r={animation:t.autoPanAnimation,margin:t.autoPanMargin}),i.autoPan=r||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(Me.ELEMENT,i.handleElementChanged),i.addChangeListener(Me.MAP,i.handleMapChanged),i.addChangeListener(Me.OFFSET,i.handleOffsetChanged),i.addChangeListener(Me.POSITION,i.handlePositionChanged),i.addChangeListener(Me.POSITIONING,i.handlePositioningChanged),t.element!==void 0&&i.setElement(t.element),i.setOffset(t.offset!==void 0?t.offset:[0,0]),i.setPositioning(t.positioning!==void 0?t.positioning:Qe.TOP_LEFT),t.position!==void 0&&i.setPosition(t.position),i}return e.prototype.getElement=function(){return this.get(Me.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(Me.MAP)},e.prototype.getOffset=function(){return this.get(Me.OFFSET)},e.prototype.getPosition=function(){return this.get(Me.POSITION)},e.prototype.getPositioning=function(){return this.get(Me.POSITIONING)},e.prototype.handleElementChanged=function(){zu(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Io(this.element),Wt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Rt(t,Da.POSTRENDER,this.render,this),this.updatePixelPosition();var i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(Me.ELEMENT,t)},e.prototype.setMap=function(t){this.set(Me.MAP,t)},e.prototype.setOffset=function(t){this.set(Me.OFFSET,t)},e.prototype.setPosition=function(t){this.set(Me.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var i=this.getMap();if(!(!i||!i.getTargetElement()||!this.get(Me.POSITION))){var r=this.getRect(i.getTargetElement(),i.getSize()),a=this.getElement(),o=this.getRect(a,[Gv(a),jv(a)]),s=t||{},h=s.margin===void 0?20:s.margin;if(!dn(r,o)){var u=o[0]-r[0],c=r[2]-o[2],p=o[1]-r[1],g=r[3]-o[3],y=[0,0];if(u<0?y[0]=u-h:c<0&&(y[0]=Math.abs(c)+h),p<0?y[1]=p-h:g<0&&(y[1]=Math.abs(g)+h),y[0]!==0||y[1]!==0){var m=i.getView().getCenterInternal(),x=i.getPixelFromCoordinateInternal(m);if(!x)return;var C=[x[0]+y[0],x[1]+y[1]],S=s.animation||{};i.getView().animateInternal({center:i.getCoordinateFromPixelInternal(C),duration:S.duration,easing:S.easing})}}}},e.prototype.getRect=function(t,i){var r=t.getBoundingClientRect(),a=r.left+window.pageXOffset,o=r.top+window.pageYOffset;return[a,o,a+i[0],o+i[1]]},e.prototype.setPositioning=function(t){this.set(Me.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),i=this.getPosition();if(!t||!t.isRendered()||!i){this.setVisible(!1);return}var r=t.getPixelFromCoordinate(i),a=t.getSize();this.updateRenderedPosition(r,a)},e.prototype.updateRenderedPosition=function(t,i){var r=this.element.style,a=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var s=Math.round(t[0]+a[0])+"px",h=Math.round(t[1]+a[1])+"px",u="0%",c="0%";o==Qe.BOTTOM_RIGHT||o==Qe.CENTER_RIGHT||o==Qe.TOP_RIGHT?u="-100%":(o==Qe.BOTTOM_CENTER||o==Qe.CENTER_CENTER||o==Qe.TOP_CENTER)&&(u="-50%"),o==Qe.BOTTOM_LEFT||o==Qe.BOTTOM_CENTER||o==Qe.BOTTOM_RIGHT?c="-100%":(o==Qe.CENTER_LEFT||o==Qe.CENTER_CENTER||o==Qe.CENTER_RIGHT)&&(c="-50%");var p="translate("+u+", "+c+") translate("+s+", "+h+")";this.rendered.transform_!=p&&(this.rendered.transform_=p,r.transform=p,r.msTransform=p)},e.prototype.getOptions=function(){return this.options},e}(Be),Ph=jy,By=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Lh="units",fr={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},Uy=[1,2,5],Ah=25.4/.28,zy=function(n){By(e,n);function e(t){var i=this,r=t||{},a=r.className!==void 0?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return i=n.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this,i.on,i.once,i.un,i.innerElement_=document.createElement("div"),i.innerElement_.className=a+"-inner",i.element.className=a+" "+Ea,i.element.appendChild(i.innerElement_),i.viewState_=null,i.minWidth_=r.minWidth!==void 0?r.minWidth:64,i.renderedVisible_=!1,i.renderedWidth_=void 0,i.renderedHTML_="",i.addChangeListener(Lh,i.handleUnitsChanged_),i.setUnits(r.units||fr.METRIC),i.scaleBar_=r.bar||!1,i.scaleBarSteps_=r.steps||4,i.scaleBarText_=r.text||!1,i.dpi_=r.dpi||void 0,i}return e.prototype.getUnits=function(){return this.get(Lh)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(Lh,t)},e.prototype.setDpi=function(t){this.dpi_=t},e.prototype.updateElement_=function(){var t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var i=t.center,r=t.projection,a=this.getUnits(),o=a==fr.DEGREES?Ue.DEGREES:Ue.METERS,s=To(r,t.resolution,i,o),h=this.minWidth_*(this.dpi_||Ah)/Ah,u=h*s,c="";if(a==fr.DEGREES){var p=yi[Ue.DEGREES];u*=p,u<p/60?(c="\u2033",s*=3600):u<p?(c="\u2032",s*=60):c="\xB0"}else a==fr.IMPERIAL?u<.9144?(c="in",s/=.0254):u<1609.344?(c="ft",s/=.3048):(c="mi",s/=1609.344):a==fr.NAUTICAL?(s/=1852,c="nm"):a==fr.METRIC?u<.001?(c="\u03BCm",s*=1e6):u<1?(c="mm",s*=1e3):u<1e3?c="m":(c="km",s/=1e3):a==fr.US?u<.9144?(c="in",s*=39.37):u<1609.344?(c="ft",s/=.30480061):(c="mi",s/=1609.3472):Mt(!1,33);for(var g=3*Math.floor(Math.log(h*s)/Math.log(10)),y,m,x;;){x=Math.floor(g/3);var C=Math.pow(10,x);if(y=Uy[(g%3+3)%3]*C,m=Math.round(y/s),isNaN(m)){this.element.style.display="none",this.renderedVisible_=!1;return}else if(m>=h)break;++g}var S;this.scaleBar_?S=this.createScaleBar(m,y,c):S=y.toFixed(x<0?-x:0)+" "+c,this.renderedHTML_!=S&&(this.innerElement_.innerHTML=S,this.renderedHTML_=S),this.renderedWidth_!=m&&(this.innerElement_.style.width=m+"px",this.renderedWidth_=m),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)},e.prototype.createScaleBar=function(t,i,r){for(var a="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),o=[],s=t/this.scaleBarSteps_,h="#ffffff",u=0;u<this.scaleBarSteps_;u++)u===0&&o.push(this.createMarker("absolute",u)),o.push('<div><div class="ol-scale-singlebar" style="width: '+s+"px;background-color: "+h+';"></div>'+this.createMarker("relative",u)+(u%2==0||this.scaleBarSteps_===2?this.createStepText(u,t,!1,i,r):"")+"</div>"),u===this.scaleBarSteps_-1&&o.push(this.createStepText(u+1,t,!0,i,r)),h==="#ffffff"?h="#000000":h="#ffffff";var c;this.scaleBarText_?c='<div class="ol-scale-text" style="width: '+t+'px;">'+a+"</div>":c="";var p='<div style="display: flex;">'+c+o.join("")+"</div>";return p},e.prototype.createMarker=function(t,i){var r=t==="absolute"?3:-10;return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+r+'px;"></div>'},e.prototype.createStepText=function(t,i,r,a,o){var s=t===0?0:Math.round(a/this.scaleBarSteps_*t*100)/100,h=s+(t===0?"":" "+o),u=t===0?-3:i/this.scaleBarSteps_*-1,c=t===0?0:i/this.scaleBarSteps_*2;return'<div class="ol-scale-step-text" style="margin-left: '+u+"px;text-align: "+(t===0?"left":"center")+"; min-width: "+c+"px;left: "+(r?i+"px":"unset")+';">'+h+"</div>"},e.prototype.getScaleForResolution=function(){var t=To(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,Ue.METERS),i=this.dpi_||Ah,r=1e3/25.4;return parseFloat(t.toString())*r*i},e.prototype.render=function(t){var i=t.frameState;i?this.viewState_=i.viewState:this.viewState_=null,this.updateElement_()},e}(Pe),JC=zy;function $y(n){var e=n||{},t=new Ze,i=e.zoom!==void 0?e.zoom:!0;i&&t.push(new ky(e.zoomOptions));var r=e.rotate!==void 0?e.rotate:!0;r&&t.push(new Ny(e.rotateOptions));var a=e.attribution!==void 0?e.attribution:!0;return a&&t.push(new Ly(e.attributionOptions)),t}var bh={ACTIVE:"active"},Wy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Xy=function(n){Wy(e,n);function e(t){var i=n.call(this)||this;return i.on,i.once,i.un,t&&t.handleEvent&&(i.handleEvent=t.handleEvent),i.map_=null,i.setActive(!0),i}return e.prototype.getActive=function(){return this.get(bh.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(bh.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(Be);function Yy(n,e,t){var i=n.getCenterInternal();if(i){var r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:b_,center:n.getConstrainedCenter(r)})}}function Nh(n,e,t,i){var r=n.getZoom();if(r!==void 0){var a=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(a);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:Ur})}}var nn=Xy,qy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Vy=function(n){qy(e,n);function e(t){var i=n.call(this)||this,r=t||{};return i.delta_=r.delta?r.delta:1,i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleEvent=function(t){var i=!1;if(t.type==Lt.DBLCLICK){var r=t.originalEvent,a=t.map,o=t.coordinate,s=r.shiftKey?-this.delta_:this.delta_,h=a.getView();Nh(h,s,o,this.duration_),r.preventDefault(),i=!0}return!i},e}(nn),Hy=Vy,Ky=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zy=function(n){Ky(e,n);function e(t){var i=this,r=t||{};return i=n.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i.trackedPointers_={},i.targetPointers=[],i}return e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Lt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Lt.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==Lt.POINTERDOWN){var a=this.handleDownEvent(t);this.handlingDownUpSequence=a,i=this.stopDown(a)}else t.type==Lt.POINTERMOVE&&this.handleMoveEvent(t);return!i},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(Jy(t)){var i=t.originalEvent,r=i.pointerId.toString();t.type==Lt.POINTERUP?delete this.trackedPointers_[r]:t.type==Lt.POINTERDOWN?this.trackedPointers_[r]=i:r in this.trackedPointers_&&(this.trackedPointers_[r]=i),this.targetPointers=$l(this.trackedPointers_)}},e}(nn);function Dh(n){for(var e=n.length,t=0,i=0,r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return[t/e,i/e]}function Jy(n){var e=n.type;return e===Lt.POINTERDOWN||e===Lt.POINTERDRAG||e===Lt.POINTERUP}var cr=Zy;function Fh(n){var e=arguments;return function(t){for(var i=!0,r=0,a=e.length;r<a&&(i=i&&e[r](t),!!i);++r);return i}}var Qy=function(n){var e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},t0=function(n){var e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)},Af=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?t0(n):!0},bf=Wi,Nf=function(n){var e=n.originalEvent;return e.button==0&&!(rp&&ap&&e.ctrlKey)},Df=Cr,e0=function(n){return n.type==Lt.SINGLECLICK},kh=function(n){var e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Gh=function(n){var e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ff=function(n){var e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"},jh=function(n){var e=n.originalEvent;return Mt(e!==void 0,56),e.pointerType=="mouse"},i0=function(n){var e=n.originalEvent;return Mt(e!==void 0,56),e.isPrimary&&e.button===0},n0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),r0=function(n){n0(e,n);function e(t){var i=n.call(this,{stopDown:Cr})||this,r=t||{};i.kinetic_=r.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1;var a=r.condition?r.condition:Fh(kh,i0);return i.condition_=r.onFocusOnly?Fh(Af,a):a,i.noKinetic_=!1,i}return e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var i=this.targetPointers,r=Dh(i);if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var a=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],o=t.map,s=o.getView();jp(a,s.getResolution()),Ys(a,s.getRotation()),s.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var i=t.map,r=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var a=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=r.getCenterInternal(),h=i.getPixelFromCoordinateInternal(s),u=i.getCoordinateFromPixelInternal([h[0]-a*Math.cos(o),h[1]-a*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(u),duration:500,easing:Ur})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var i=t.map,r=i.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},e}(cr),a0=r0,o0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),s0=function(n){o0(e,n);function e(t){var i=this,r=t||{};return i=n.call(this,{stopDown:Cr})||this,i.condition_=r.condition?r.condition:Qy,i.lastAngle_=void 0,i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleDragEvent=function(t){if(!!jh(t)){var i=t.map,r=i.getView();if(r.getConstraints().rotation!==Oh){var a=i.getSize(),o=t.pixel,s=Math.atan2(a[1]/2-o[1],o[0]-a[0]/2);if(this.lastAngle_!==void 0){var h=s-this.lastAngle_;r.adjustRotationInternal(-h)}this.lastAngle_=s}}},e.prototype.handleUpEvent=function(t){if(!jh(t))return!0;var i=t.map,r=i.getView();return r.endInteraction(this.duration_),!1},e.prototype.handleDownEvent=function(t){if(!jh(t))return!1;if(Nf(t)&&this.condition_(t)){var i=t.map;return i.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},e}(cr),h0=s0,l0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),u0=function(n){l0(e,n);function e(t){var i=n.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.style.pointerEvents="auto",i.element_.className="ol-box "+t,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,i=this.endPixel_,r="px",a=this.element_.style;a.left=Math.min(t[0],i[0])+r,a.top=Math.min(t[1],i[1])+r,a.width=Math.abs(i[0]-t[0])+r,a.height=Math.abs(i[1]-t[1])+r},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,i=this.endPixel_,r=[t,[t[0],i[1]],i,[i[0],t[1]]],a=r.map(this.map_.getCoordinateFromPixelInternal,this.map_);a[4]=a[0].slice(),this.geometry_?this.geometry_.setCoordinates([a]):this.geometry_=new ar([a])},e.prototype.getGeometry=function(){return this.geometry_},e}(As),f0=u0,kf=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$o={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},Bh=function(n){kf(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.coordinate=i,a.mapBrowserEvent=r,a}return e}(oi),c0=function(n){kf(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=t||{};return i.box_=new f0(r.className||"ol-dragbox"),i.minArea_=r.minArea!==void 0?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.startPixel_=null,i.condition_=r.condition?r.condition:Nf,i.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return e.prototype.defaultBoxEndCondition=function(t,i,r){var a=r[0]-i[0],o=r[1]-i[1];return a*a+o*o>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Bh($o.BOXDRAG,t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new Bh(i?$o.BOXEND:$o.BOXCANCEL,t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Bh($o.BOXSTART,t.coordinate,t)),!0):!1},e.prototype.onBoxEnd=function(t){},e}(cr),d0=c0,p0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),v0=function(n){p0(e,n);function e(t){var i=this,r=t||{},a=r.condition?r.condition:Gh;return i=n.call(this,{condition:a,className:r.className||"ol-dragzoom",minArea:r.minArea})||this,i.duration_=r.duration!==void 0?r.duration:200,i.out_=r.out!==void 0?r.out:!1,i}return e.prototype.onBoxEnd=function(t){var i=this.getMap(),r=i.getView(),a=this.getGeometry();if(this.out_){var o=r.rotatedExtentForGeometry(a),s=r.getResolutionForExtentInternal(o),h=r.getResolution()/s;a=a.clone(),a.scale(h*h)}r.fitInternal(a,{duration:this.duration_,easing:Ur})},e}(d0),g0=v0,dr={LEFT:37,UP:38,RIGHT:39,DOWN:40},_0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),y0=function(n){_0(e,n);function e(t){var i=n.call(this)||this,r=t||{};return i.defaultCondition_=function(a){return kh(a)&&Ff(a)},i.condition_=r.condition!==void 0?r.condition:i.defaultCondition_,i.duration_=r.duration!==void 0?r.duration:100,i.pixelDelta_=r.pixelDelta!==void 0?r.pixelDelta:128,i}return e.prototype.handleEvent=function(t){var i=!1;if(t.type==mt.KEYDOWN){var r=t.originalEvent,a=r.keyCode;if(this.condition_(t)&&(a==dr.DOWN||a==dr.LEFT||a==dr.RIGHT||a==dr.UP)){var o=t.map,s=o.getView(),h=s.getResolution()*this.pixelDelta_,u=0,c=0;a==dr.DOWN?c=-h:a==dr.LEFT?u=-h:a==dr.RIGHT?u=h:c=h;var p=[u,c];Ys(p,s.getRotation()),Yy(s,p,this.duration_),r.preventDefault(),i=!0}}return!i},e}(nn),m0=y0,E0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),x0=function(n){E0(e,n);function e(t){var i=n.call(this)||this,r=t||{};return i.condition_=r.condition?r.condition:Ff,i.delta_=r.delta?r.delta:1,i.duration_=r.duration!==void 0?r.duration:100,i}return e.prototype.handleEvent=function(t){var i=!1;if(t.type==mt.KEYDOWN||t.type==mt.KEYPRESS){var r=t.originalEvent,a=r.charCode;if(this.condition_(t)&&(a=="+".charCodeAt(0)||a=="-".charCodeAt(0))){var o=t.map,s=a=="+".charCodeAt(0)?this.delta_:-this.delta_,h=o.getView();Nh(h,s,void 0,this.duration_),r.preventDefault(),i=!0}}return!i},e}(nn),T0=x0,C0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Uh={TRACKPAD:"trackpad",WHEEL:"wheel"},M0=function(n){C0(e,n);function e(t){var i=this,r=t||{};i=n.call(this,r)||this,i.totalDelta_=0,i.lastDelta_=0,i.maxDelta_=r.maxDelta!==void 0?r.maxDelta:1,i.duration_=r.duration!==void 0?r.duration:250,i.timeout_=r.timeout!==void 0?r.timeout:80,i.useAnchor_=r.useAnchor!==void 0?r.useAnchor:!0,i.constrainResolution_=r.constrainResolution!==void 0?r.constrainResolution:!1;var a=r.condition?r.condition:bf;return i.condition_=r.onFocusOnly?Fh(Af,a):a,i.lastAnchor_=null,i.startTime_=void 0,i.timeoutId_,i.mode_=void 0,i.trackpadEventGap_=400,i.trackpadTimeoutId_,i.deltaPerZoom_=300,i}return e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var t=this.getMap().getView();t.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var i=t.type;if(i!==mt.WHEEL)return!0;var r=t.map,a=t.originalEvent;a.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);var o;if(t.type==mt.WHEEL&&(o=a.deltaY,np&&a.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=Vl),a.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;var s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?Uh.TRACKPAD:Uh.WHEEL);var h=r.getView();if(this.mode_===Uh.TRACKPAD&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=o;var u=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),u),!1},e.prototype.handleWheelZoom_=function(t){var i=t.getView();i.getAnimating()&&i.cancelAnimations();var r=-ie(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),Nh(i,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(nn),w0=M0,S0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),O0=function(n){S0(e,n);function e(t){var i=this,r=t||{},a=r;return a.stopDown||(a.stopDown=Cr),i=n.call(this,a)||this,i.anchor_=null,i.lastAngle_=void 0,i.rotating_=!1,i.rotationDelta_=0,i.threshold_=r.threshold!==void 0?r.threshold:.3,i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleDragEvent=function(t){var i=0,r=this.targetPointers[0],a=this.targetPointers[1],o=Math.atan2(a.clientY-r.clientY,a.clientX-r.clientX);if(this.lastAngle_!==void 0){var s=o-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=s}this.lastAngle_=o;var h=t.map,u=h.getView();if(u.getConstraints().rotation!==Oh){var c=h.getViewport().getBoundingClientRect(),p=Dh(this.targetPointers);p[0]-=c.left,p[1]-=c.top,this.anchor_=h.getCoordinateFromPixelInternal(p),this.rotating_&&(h.render(),u.adjustRotationInternal(i,this.anchor_))}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map,r=i.getView();return r.endInteraction(this.duration_),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}else return!1},e}(cr),I0=O0,R0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),P0=function(n){R0(e,n);function e(t){var i=this,r=t||{},a=r;return a.stopDown||(a.stopDown=Cr),i=n.call(this,a)||this,i.anchor_=null,i.duration_=r.duration!==void 0?r.duration:400,i.lastDistance_=void 0,i.lastScaleDelta_=1,i}return e.prototype.handleDragEvent=function(t){var i=1,r=this.targetPointers[0],a=this.targetPointers[1],o=r.clientX-a.clientX,s=r.clientY-a.clientY,h=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(i=this.lastDistance_/h),this.lastDistance_=h;var u=t.map,c=u.getView();i!=1&&(this.lastScaleDelta_=i);var p=u.getViewport().getBoundingClientRect(),g=Dh(this.targetPointers);g[0]-=p.left,g[1]-=p.top,this.anchor_=u.getCoordinateFromPixelInternal(g),u.render(),c.adjustResolutionInternal(i,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map,r=i.getView(),a=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,a),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}else return!1},e}(cr),L0=P0,A0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Gf=function(n){A0(e,n);function e(t,i,r){var a=n.call(this)||this;if(r!==void 0&&i===void 0)a.setFlatCoordinates(r,t);else{var o=i||0;a.setCenterAndRadius(t,o,r)}return a}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){var o=this.flatCoordinates,s=t-o[0],h=i-o[1],u=s*s+h*h;if(u<a){if(u===0)for(var c=0;c<this.stride;++c)r[c]=o[c];else{var p=this.getRadius()/Math.sqrt(u);r[0]=o[0]+p*s,r[1]=o[1]+p*h;for(var c=2;c<this.stride;++c)r[c]=o[c]}return r.length=this.stride,u}else return a},e.prototype.containsXY=function(t,i){var r=this.flatCoordinates,a=t-r[0],o=i-r[1];return a*a+o*o<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var i=this.flatCoordinates,r=i[this.stride]-i[0];return mi(i[0]-r,i[1]-r,i[0]+r,i[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],i=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+i*i},e.prototype.getType=function(){return W.CIRCLE},e.prototype.intersectsExtent=function(t){var i=this.getExtent();if($e(t,i)){var r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||t[1]<=r[1]&&t[3]>=r[1]?!0:Gs(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var i=this.stride,r=this.flatCoordinates[i]-this.flatCoordinates[0],a=t.slice();a[i]=a[0]+r;for(var o=1;o<i;++o)a[i+o]=t[o];this.setFlatCoordinates(this.layout,a),this.changed()},e.prototype.setCenterAndRadius=function(t,i,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var a=this.flatCoordinates,o=Eu(a,0,t,this.stride);a[o++]=a[0]+i;for(var s=1,h=this.stride;s<h;++s)a[o++]=a[s];a.length=o,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,i){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,i){var r=this.getCenter(),a=this.getStride();this.setCenter(Js(r,0,r.length,a,t,i,r)),this.changed()},e.prototype.translate=function(t,i){var r=this.getCenter(),a=this.getStride();this.setCenter(vu(r,0,r.length,a,t,i,r)),this.changed()},e}(vn);Gf.prototype.transform;var jf=Gf,b0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),N0=function(n){b0(e,n);function e(t,i,r){var a=n.call(this)||this;if(a.ends_=[],a.maxDelta_=-1,a.maxDeltaRevision_=-1,Array.isArray(t[0]))a.setCoordinates(t,i);else if(i!==void 0&&r)a.setFlatCoordinates(i,t),a.ends_=r;else{for(var o=a.getLayout(),s=t,h=[],u=[],c=0,p=s.length;c<p;++c){var g=s[c];c===0&&(o=g.getLayout()),si(h,g.getFlatCoordinates()),u.push(h.length)}a.setFlatCoordinates(o,h),a.ends_=u}return a}return e.prototype.appendLineString=function(t){this.flatCoordinates?si(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){return a<Hn(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(th(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ih(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,i,r,a))},e.prototype.getCoordinateAtM=function(t,i,r){if(this.layout!=ee.XYM&&this.layout!=ee.XYZM||this.flatCoordinates.length===0)return null;var a=i!==void 0?i:!1,o=r!==void 0?r:!1;return Iv(this.flatCoordinates,0,this.ends_,this.stride,t,a,o)},e.prototype.getCoordinates=function(){return ma(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new _n(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,i=this.ends_,r=this.layout,a=[],o=0,s=0,h=i.length;s<h;++s){var u=i[s],c=new _n(t.slice(o,u),r);a.push(c),o=u}return a},e.prototype.getFlatMidpoints=function(){for(var t=[],i=this.flatCoordinates,r=0,a=this.ends_,o=this.stride,s=0,h=a.length;s<h;++s){var u=a[s],c=bu(i,r,u,o,.5);si(t,c),r=u}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=rv(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,r),new e(i,ee.XY,r)},e.prototype.getType=function(){return W.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return vv(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=nh(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()},e}(vn),Bf=N0,D0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),F0=function(n){D0(e,n);function e(t,i){var r=n.call(this)||this;return i&&!Array.isArray(t[0])?r.setFlatCoordinates(i,t):r.setCoordinates(t,i),r}return e.prototype.appendPoint=function(t){this.flatCoordinates?si(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){if(a<Hn(this.getExtent(),t,i))return a;for(var o=this.flatCoordinates,s=this.stride,h=0,u=o.length;h<u;h+=s){var c=Jn(t,i,o[h],o[h+1]);if(c<a){a=c;for(var p=0;p<s;++p)r[p]=o[h+p];r.length=s}}return a},e.prototype.getCoordinates=function(){return gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var i=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||i<=t?null:new Vi(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,i=this.layout,r=this.stride,a=[],o=0,s=t.length;o<s;o+=r){var h=new Vi(t.slice(o,o+r),i);a.push(h)}return a},e.prototype.getType=function(){return W.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var i=this.flatCoordinates,r=this.stride,a=0,o=i.length;a<o;a+=r){var s=i[a],h=i[a+1];if(Fs(t,s,h))return!0}return!1},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vn),zh=F0;function k0(n,e,t,i){for(var r=[],a=ze(),o=0,s=t.length;o<s;++o){var h=t[o];a=tu(n,e,h[0],i),r.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=h[h.length-1]}return r}var G0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),j0=function(n){G0(e,n);function e(t,i,r){var a=n.call(this)||this;if(a.endss_=[],a.flatInteriorPointsRevision_=-1,a.flatInteriorPoints_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,!r&&!Array.isArray(t[0])){for(var o=a.getLayout(),s=t,h=[],u=[],c=0,p=s.length;c<p;++c){var g=s[c];c===0&&(o=g.getLayout());for(var y=h.length,m=g.getEnds(),x=0,C=m.length;x<C;++x)m[x]+=y;si(h,g.getFlatCoordinates()),u.push(m)}i=o,t=h,r=u}return i!==void 0&&r?(a.setFlatCoordinates(i,t),a.endss_=r):a.setCoordinates(t,i),a}return e.prototype.appendPolygon=function(t){var i;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),i=t.getEnds().slice(),this.endss_.push();else{var r=this.flatCoordinates.length;si(this.flatCoordinates,t.getFlatCoordinates()),i=t.getEnds().slice();for(var a=0,o=i.length;a<o;++a)i[a]+=r}this.endss_.push(i),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),r=0;r<t;++r)i[r]=this.endss_[r].slice();var a=new e(this.flatCoordinates.slice(),this.layout,i);return a.applyProperties(this),a},e.prototype.closestPointXY=function(t,i,r,a){return a<Hn(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ev(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),iv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,r,a))},e.prototype.containsXY=function(t,i){return dv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,i)},e.prototype.getArea=function(){return sv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),Pu(i,0,this.endss_,this.stride,t)):i=this.flatCoordinates,ah(i,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=k0(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=pv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new zh(this.getFlatInteriorPoints().slice(),ee.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;mv(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Pu(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=ov(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,r),new e(i,ee.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var i;if(t===0)i=0;else{var r=this.endss_[t-1];i=r[r.length-1]}var a=this.endss_[t].slice(),o=a[a.length-1];if(i!==0)for(var s=0,h=a.length;s<h;++s)a[s]-=i;return new ar(this.flatCoordinates.slice(i,o),this.layout,a)},e.prototype.getPolygons=function(){for(var t=this.layout,i=this.flatCoordinates,r=this.endss_,a=[],o=0,s=0,h=r.length;s<h;++s){var u=r[s].slice(),c=u[u.length-1];if(o!==0)for(var p=0,g=u.length;p<g;++p)u[p]-=o;var y=new ar(i.slice(o,c),t,u);a.push(y),o=c}return a},e.prototype.getType=function(){return W.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return _v(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=nv(this.flatCoordinates,0,t,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{var a=r[r.length-1];this.flatCoordinates.length=a.length===0?0:a[a.length-1]}this.changed()},e}(vn),Uf=j0,zf=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),bt={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},Wo={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},Xo=function(n){zf(e,n);function e(t,i){var r=n.call(this,t)||this;return r.feature=i,r}return e}(oi),B0=function(n){zf(e,n);function e(t){var i=this,r=t;r.stopDown||(r.stopDown=Cr),i=n.call(this,r)||this,i.on,i.once,i.un,i.shouldHandle_=!1,i.downPx_=null,i.downTimeout_,i.lastDragTime_,i.pointerType_,i.freehand_=!1,i.source_=t.source?t.source:null,i.features_=t.features?t.features:null,i.snapTolerance_=t.snapTolerance?t.snapTolerance:12,i.type_=t.type,i.mode_=z0(i.type_),i.stopClick_=!!t.stopClick,i.minPoints_=t.minPoints?t.minPoints:i.mode_===bt.POLYGON?3:2,i.maxPoints_=i.mode_===bt.CIRCLE?2:t.maxPoints?t.maxPoints:1/0,i.finishCondition_=t.finishCondition?t.finishCondition:Wi;var a=t.geometryFunction;if(!a){var o=i.mode_;if(o===bt.CIRCLE)a=function(h,u,c){var p=u||new jf([NaN,NaN]),g=xi(h[0]),y=Bp(g,xi(h[h.length-1]));return p.setCenterAndRadius(g,Math.sqrt(y)),p};else{var s;o===bt.POINT?s=Vi:o===bt.LINE_STRING?s=_n:o===bt.POLYGON&&(s=ar),a=function(h,u,c){return u?o===bt.POLYGON?h[0].length?u.setCoordinates([h[0].concat([h[0][0]])]):u.setCoordinates([]):u.setCoordinates(h):u=new s(h),u}}}return i.geometryFunction_=a,i.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,i.overlay_=new xh({source:new Cf({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:U0(),updateWhileInteracting:!0}),i.geometryName_=t.geometryName,i.condition_=t.condition?t.condition:kh,i.freehandCondition_,t.freehand?i.freehandCondition_=bf:i.freehandCondition_=t.freehandCondition?t.freehandCondition:Gh,i.addChangeListener(bh.ACTIVE,i.updateState_),i}return e.prototype.setMap=function(t){n.prototype.setMap.call(this,t),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(t){t.originalEvent.type===mt.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==bt.POINT&&this.freehandCondition_(t);var i=t.type===Lt.POINTERMOVE,r=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===Lt.POINTERDRAG){var a=Date.now();a-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===Lt.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),r=!1):this.freehand_&&t.type===Lt.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=t.type===Lt.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===Lt.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===Lt.DBLCLICK&&(r=!1),n.prototype.handleEvent.call(this,t)&&r},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new en(Lt.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var i=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var r=!this.finishCoordinate_;r&&this.startDrawing_(t.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||this.mode_===bt.POINT)&&(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),i=!1}else this.freehand_&&this.abortDrawing();return!i&&this.stopClick_&&t.preventDefault(),i},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var i=this.downPx_,r=t.pixel,a=i[0]-r[0],o=i[1]-r[1],s=a*a+o*o;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},e.prototype.atFinish_=function(t){var i=!1;if(this.sketchFeature_){var r=!1,a=[this.finishCoordinate_],o=this.mode_;if(o===bt.POINT)i=!0;else if(o===bt.CIRCLE)i=this.sketchCoords_.length===2;else if(o===bt.LINE_STRING)r=this.sketchCoords_.length>this.minPoints_;else if(o===bt.POLYGON){var s=this.sketchCoords_;r=s[0].length>this.minPoints_,a=[s[0][0],s[0][s[0].length-2]]}if(r)for(var h=this.getMap(),u=0,c=a.length;u<c;u++){var p=a[u],g=h.getPixelFromCoordinate(p),y=t[0]-g[0],m=t[1]-g[1],x=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(y*y+m*m)<=x,i){this.finishCoordinate_=p;break}}}return i},e.prototype.createOrUpdateSketchPoint_=function(t){if(!this.sketchPoint_)this.sketchPoint_=new Xi(new Vi(t)),this.updateSketchFeatures_();else{var i=this.sketchPoint_.getGeometry();i.setCoordinates(t)}},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new Xi);var i=t.getLinearRing(0),r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(i.getLayout(),i.getFlatCoordinates()),r.changed()):(r=new _n(i.getFlatCoordinates(),i.getLayout()),this.sketchLine_.setGeometry(r))},e.prototype.startDrawing_=function(t){var i=this.getMap().getView().getProjection();this.finishCoordinate_=t,this.mode_===bt.POINT?this.sketchCoords_=t.slice():this.mode_===bt.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Xi(new _n(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_,void 0,i);this.sketchFeature_=new Xi,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new Xo(Wo.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var i=this.getMap(),r=this.sketchFeature_.getGeometry(),a=i.getView().getProjection(),o,s;if(this.mode_===bt.POINT?s=this.sketchCoords_:this.mode_===bt.POLYGON?(o=this.sketchCoords_[0],s=o[o.length-1],this.atFinish_(i.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(o=this.sketchCoords_,s=o[o.length-1]),s[0]=t[0],s[1]=t[1],this.geometryFunction_(this.sketchCoords_,r,a),this.sketchPoint_){var h=this.sketchPoint_.getGeometry();h.setCoordinates(t)}if(r.getType()===W.POLYGON&&this.mode_!==bt.POLYGON)this.createOrUpdateCustomSketchLine_(r);else if(this.sketchLineCoords_){var u=this.sketchLine_.getGeometry();u.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var i=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),a,o,s=this.mode_;s===bt.LINE_STRING||s===bt.CIRCLE?(this.finishCoordinate_=t.slice(),o=this.sketchCoords_,o.length>=this.maxPoints_&&(this.freehand_?o.pop():a=!0),o.push(t.slice()),this.geometryFunction_(o,i,r)):s===bt.POLYGON&&(o=this.sketchCoords_[0],o.length>=this.maxPoints_&&(this.freehand_?o.pop():a=!0),o.push(t.slice()),a&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,i,r)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),a&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(!!this.sketchFeature_){var t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r,a=this.mode_;if(a===bt.LINE_STRING||a===bt.CIRCLE){if(r=this.sketchCoords_,r.splice(-2,1),r.length>=2){this.finishCoordinate_=r[r.length-2].slice();var o=this.finishCoordinate_.slice();r[r.length-1]=o,this.createOrUpdateSketchPoint_(o)}this.geometryFunction_(r,t,i),t.getType()===W.POLYGON&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(a===bt.POLYGON){r=this.sketchCoords_[0],r.splice(-2,1);var s=this.sketchLine_.getGeometry();if(r.length>=2){var o=r[r.length-2].slice();r[r.length-1]=o,this.createOrUpdateSketchPoint_(o)}s.setCoordinates(r),this.geometryFunction_(this.sketchCoords_,t,i)}r.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(!!t){var i=this.sketchCoords_,r=t.getGeometry(),a=this.getMap().getView().getProjection();this.mode_===bt.LINE_STRING?(i.pop(),this.geometryFunction_(i,r,a)):this.mode_===bt.POLYGON&&(i[0].pop(),this.geometryFunction_(i,r,a),i=r.getCoordinates()),this.type_===W.MULTI_POINT?t.setGeometry(new zh([i])):this.type_===W.MULTI_LINE_STRING?t.setGeometry(new Bf([i])):this.type_===W.MULTI_POLYGON&&t.setGeometry(new Uf([i])),this.dispatchEvent(new Xo(Wo.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new Xo(Wo.DRAWABORT,t))},e.prototype.appendCoordinates=function(t){var i=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(t[0]);var a;if(i===bt.LINE_STRING||i===bt.CIRCLE)a=this.sketchCoords_;else if(i===bt.POLYGON)a=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&a.shift(),a.pop();for(var o=0;o<t.length;o++)this.addToDrawing_(t[o]);var s=t[t.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)},e.prototype.extend=function(t){var i=t.getGeometry(),r=i;this.sketchFeature_=t,this.sketchCoords_=r.getCoordinates();var a=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=a.slice(),this.sketchCoords_.push(a.slice()),this.sketchPoint_=new Xi(new Vi(a)),this.updateSketchFeatures_(),this.dispatchEvent(new Xo(Wo.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var i=this.overlay_.getSource();i.clear(!0),i.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),i=this.getActive();(!t||!i)&&this.abortDrawing(),this.overlay_.setMap(i?t:null)},e}(cr);function U0(){var n=Zu();return function(e,t){return n[e.getGeometry().getType()]}}function z0(n){switch(n){case W.POINT:case W.MULTI_POINT:return bt.POINT;case W.LINE_STRING:case W.MULTI_LINE_STRING:return bt.LINE_STRING;case W.POLYGON:case W.MULTI_POLYGON:return bt.POLYGON;case W.CIRCLE:return bt.CIRCLE;default:throw new Error("Invalid type: "+n)}}var QC=B0,$f=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$0={SELECT:"select"},W0=function(n){$f(e,n);function e(t,i,r,a){var o=n.call(this,t)||this;return o.selected=i,o.deselected=r,o.mapBrowserEvent=a,o}return e}(oi),Yo={},X0=function(n){$f(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=t||{};i.boundAddFeature_=i.addFeature_.bind(i),i.boundRemoveFeature_=i.removeFeature_.bind(i),i.condition_=r.condition?r.condition:e0,i.addCondition_=r.addCondition?r.addCondition:Df,i.removeCondition_=r.removeCondition?r.removeCondition:Df,i.toggleCondition_=r.toggleCondition?r.toggleCondition:Gh,i.multi_=r.multi?r.multi:!1,i.filter_=r.filter?r.filter:Wi,i.hitTolerance_=r.hitTolerance?r.hitTolerance:0,i.style_=r.style!==void 0?r.style:Y0(),i.features_=r.features||new Ze;var a;if(r.layers)if(typeof r.layers=="function")a=r.layers;else{var o=r.layers;a=function(s){return bs(o,s)}}else a=Wi;return i.layerFilter_=a,i.featureLayerAssociation_={},i}return e.prototype.addFeatureLayerAssociation_=function(t,i){this.featureLayerAssociation_[Ot(t)]=i},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[Ot(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(t){var i=this.getMap();i&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),n.prototype.setMap.call(this,t),t?(this.features_.addEventListener(ce.ADD,this.boundAddFeature_),this.features_.addEventListener(ce.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ce.ADD,this.boundAddFeature_),this.features_.removeEventListener(ce.REMOVE,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var i=t.element;if(this.style_&&this.applySelectedStyle_(i),!this.getLayer(i)){var r=this.getMap().getAllLayers().find(function(a){if(a instanceof xh&&a.getSource()&&a.getSource().hasFeature(i))return a});r&&this.addFeatureLayerAssociation_(i,r)}},e.prototype.removeFeature_=function(t){var i=t.element;this.style_&&this.restorePreviousStyle_(i)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var i=Ot(t);i in Yo||(Yo[i]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){for(var i=this.getMap().getInteractions().getArray(),r=i.length-1;r>=0;--r){var a=i[r];if(a!==this&&a instanceof e&&a.getStyle()&&a.getFeatures().getArray().lastIndexOf(t)!==-1){t.setStyle(a.getStyle());return}}var o=Ot(t);t.setStyle(Yo[o]),delete Yo[o]},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[Ot(t)]},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var i=this.addCondition_(t),r=this.removeCondition_(t),a=this.toggleCondition_(t),o=!i&&!r&&!a,s=t.map,h=this.getFeatures(),u=[],c=[];if(o){Mr(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,function(x,C){if(this.filter_(x,C))return this.addFeatureLayerAssociation_(x,C),c.push(x),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=h.getLength()-1;p>=0;--p){var g=h.item(p),y=c.indexOf(g);y>-1?c.splice(y,1):(h.remove(g),u.push(g))}c.length!==0&&h.extend(c)}else{s.forEachFeatureAtPixel(t.pixel,function(x,C){if(this.filter_(x,C))return(i||a)&&!bs(h.getArray(),x)?(this.addFeatureLayerAssociation_(x,C),c.push(x)):(r||a)&&bs(h.getArray(),x)&&(u.push(x),this.removeFeatureLayerAssociation_(x)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var m=u.length-1;m>=0;--m)h.remove(u[m]);h.extend(c)}return(c.length>0||u.length>0)&&this.dispatchEvent(new W0($0.SELECT,c,u,t)),!0},e}(nn);function Y0(){var n=Zu();return si(n[W.POLYGON],n[W.LINE_STRING]),si(n[W.GEOMETRY_COLLECTION],n[W.LINE_STRING]),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}var tM=X0;function q0(n){var e=n||{},t=new Ze,i=new U_(-.005,.05,100),r=e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0;r&&t.push(new h0);var a=e.doubleClickZoom!==void 0?e.doubleClickZoom:!0;a&&t.push(new Hy({delta:e.zoomDelta,duration:e.zoomDuration}));var o=e.dragPan!==void 0?e.dragPan:!0;o&&t.push(new a0({onFocusOnly:e.onFocusOnly,kinetic:i}));var s=e.pinchRotate!==void 0?e.pinchRotate:!0;s&&t.push(new I0);var h=e.pinchZoom!==void 0?e.pinchZoom:!0;h&&t.push(new L0({duration:e.zoomDuration}));var u=e.keyboard!==void 0?e.keyboard:!0;u&&(t.push(new m0),t.push(new T0({delta:e.zoomDelta,duration:e.zoomDuration})));var c=e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0;c&&t.push(new w0({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration}));var p=e.shiftDragZoom!==void 0?e.shiftDragZoom:!0;return p&&t.push(new g0({duration:e.zoomDuration})),t}var V0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),H0=function(n){V0(e,n);function e(t){var i=this;return t=$t({},t),t.controls||(t.controls=$y()),t.interactions||(t.interactions=q0({onFocusOnly:!0})),i=n.call(this,t)||this,i}return e.prototype.createRenderer=function(){return new V_(this)},e}(wy),eM=H0,K0=function(){function n(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return n.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},n.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},n.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},n.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},n.prototype.get=function(e,t){var i=this.entries_[e];return Mt(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},n.prototype.remove=function(e){var t=this.entries_[e];return Mt(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},n.prototype.getCount=function(){return this.count_},n.prototype.getKeys=function(){var e=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e},n.prototype.getValues=function(){var e=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e},n.prototype.peekLast=function(){return this.oldest_.value_},n.prototype.peekLastKey=function(){return this.oldest_.key_},n.prototype.peekFirstKey=function(){return this.newest_.key_},n.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},n.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},n.prototype.set=function(e,t){Mt(!(e in this.entries_),16);var i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_},n.prototype.setSize=function(e){this.highWaterMark=e},n}(),Z0=K0;function Wf(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function qo(n,e,t){return n+"/"+e+"/"+t}function Xf(n){return qo(n[0],n[1],n[2])}function J0(n){return n.split("/").map(Number)}function $h(n){return(n[1]<<n[0])+n[2]}function Q0(n,e){var t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;var a=e.getFullTileRange(t);return a?a.containsXY(i,r):!0}var tm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),em=function(n){tm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.expireCache=function(t){for(;this.canExpireCache();){var i=this.peekLast();if(i.getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var t=this.peekFirstKey(),i=J0(t),r=i[0];this.forEach(function(a){a.tileCoord[0]!==r&&(this.remove(Xf(a.tileCoord)),a.release())}.bind(this))}},e}(Z0),Yf=em,qf=function(){function n(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}return n.prototype.contains=function(e){return this.containsXY(e[1],e[2])},n.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},n.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},n.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},n.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},n.prototype.getHeight=function(){return this.maxY-this.minY+1},n.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},n.prototype.getWidth=function(){return this.maxX-this.minX+1},n.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},n}();function zr(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new qf(n,e,t,i)}var Vf=qf,im=.5,rn=!0,Wh={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},nm={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},rm=function(){function n(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return n.prototype.getReadOptions=function(e,t){var i;if(t){var r=t.dataProjection?zt(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()===Ue.TILE_PIXELS&&(r=zt(r),r.setWorldExtent(t.extent)),i={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(i)},n.prototype.adaptOptions=function(e){return $t({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)},n.prototype.getType=function(){return dt()},n.prototype.readFeature=function(e,t){return dt()},n.prototype.readFeatures=function(e,t){return dt()},n.prototype.readGeometry=function(e,t){return dt()},n.prototype.readProjection=function(e){return dt()},n.prototype.writeFeature=function(e,t){return dt()},n.prototype.writeFeatures=function(e,t){return dt()},n.prototype.writeGeometry=function(e,t){return dt()},n}();function Hf(n,e,t){var i=t?zt(t.featureProjection):null,r=t?zt(t.dataProjection):null,a;if(i&&r&&!tr(i,r)?a=(e?n.clone():n).transform(e?i:r,e?r:i):a=n,e&&t&&t.decimals!==void 0){var o=Math.pow(10,t.decimals),s=function(h){for(var u=0,c=h.length;u<c;++u)h[u]=Math.round(h[u]*o)/o;return h};a===n&&(a=n.clone()),a.applyTransform(s)}return a}var Kf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Xh(n){if(n.__esModule)return n;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(t){var i=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:function(){return n[t]}})}),e}var am=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zf=function(n){am(e,n);function e(t){var i=n.call(this,t)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=ze(),i.tmpTileRange_=new Vf(0,0,0,0),i}return e.prototype.isDrawableTile=function(t){var i=this.getLayer(),r=t.getState(),a=i.getUseInterimTilesOnError();return r==gt.LOADED||r==gt.EMPTY||r==gt.ERROR&&!a},e.prototype.getTile=function(t,i,r,a){var o=a.pixelRatio,s=a.viewState.projection,h=this.getLayer(),u=h.getSource(),c=u.getTile(t,i,r,o,s);return c.getState()==gt.ERROR&&(h.getUseInterimTilesOnError()?h.getPreload()>0&&(this.newTiles_=!0):c.setState(gt.LOADED)),this.isDrawableTile(c)||(c=c.getInterimTile()),c},e.prototype.loadedTileCallback=function(t,i,r){return this.isDrawableTile(r)?n.prototype.loadedTileCallback.call(this,t,i,r):!1},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,i){var r=t.layerStatesArray[t.layerIndex],a=t.viewState,o=a.projection,s=a.resolution,h=a.center,u=a.rotation,c=t.pixelRatio,p=this.getLayer(),g=p.getSource(),y=g.getRevision(),m=g.getTileGridForProjection(o),x=m.getZForResolution(s,g.zDirection),C=m.getResolution(x),S=t.extent,I=r.extent&&er(r.extent);I&&(S=ga(S,er(r.extent)));var O=g.getTilePixelRatio(c),A=Math.round(t.size[0]*O),F=Math.round(t.size[1]*O);if(u){var v=Math.round(Math.sqrt(A*A+F*F));A=v,F=v}var G=C*A/2/O,B=C*F/2/O,H=[h[0]-G,h[1]-B,h[0]+G,h[1]+B],tt=m.getTileRangeForExtentAndZ(S,x),et={};et[x]={};var Z=this.createLoadedTileFinder(g,o,et),ut=this.tmpExtent,Et=this.tmpTileRange_;this.newTiles_=!1;for(var at=tt.minX;at<=tt.maxX;++at)for(var _t=tt.minY;_t<=tt.maxY;++_t){var st=this.getTile(x,at,_t,t);if(this.isDrawableTile(st)){var Pt=Ot(this);if(st.getState()==gt.LOADED){et[x][st.tileCoord.toString()]=st;var St=st.inTransition(Pt);!this.newTiles_&&(St||this.renderedTiles.indexOf(st)===-1)&&(this.newTiles_=!0)}if(st.getAlpha(Pt,t.time)===1)continue}var Nt=m.getTileCoordChildTileRange(st.tileCoord,Et,ut),It=!1;Nt&&(It=Z(x+1,Nt)),It||m.forEachTileCoordParentTileRange(st.tileCoord,Z,Et,ut)}var V=C/s;Yi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/O,1/O,u,-A/2,-F/2);var Qt=Zl(this.pixelTransform);this.useContainer(i,Qt,r.opacity,this.getBackground(t));var Ct=this.context,te=Ct.canvas;Ds(this.inversePixelTransform,this.pixelTransform),Yi(this.tempTransform,A/2,F/2,V,V,0,-A/2,-F/2),te.width!=A||te.height!=F?(te.width=A,te.height=F):this.containerReused||Ct.clearRect(0,0,A,F),I&&this.clipUnrotated(Ct,t,I),g.getInterpolate()||$t(Ct,Wh),this.preRender(Ct,t),this.renderedTiles.length=0;var Se=Object.keys(et).map(Number);Se.sort(Yn);var ve,oe,Vt;r.opacity===1&&(!this.containerReused||g.getOpaque(t.viewState.projection))?Se=Se.reverse():(ve=[],oe=[]);for(var sn=Se.length-1;sn>=0;--sn){var ii=Se[sn],yr=g.getTilePixelSize(ii,c,o),Oe=m.getResolution(ii),De=Oe/C,ni=yr[0]*De*V,ot=yr[1]*De*V,re=m.getTileCoordForCoordAndZ(Zn(H),ii),mr=m.getTileCoordExtent(re),ki=ue(this.tempTransform,[O*(mr[0]-H[0])/C,O*(H[3]-mr[3])/C]),Pn=O*g.getGutterForProjection(o),Ln=et[ii];for(var Gi in Ln){var st=Ln[Gi],Fe=st.tileCoord,Ee=re[1]-Fe[1],di=Math.round(ki[0]-(Ee-1)*ni),pi=re[2]-Fe[2],An=Math.round(ki[1]-(pi-1)*ot),at=Math.round(ki[0]-Ee*ni),_t=Math.round(ki[1]-pi*ot),Ye=di-at,ri=An-_t,wi=x===ii,St=wi&&st.getAlpha(Ot(this),t.time)!==1;if(!St)if(ve){Ct.save(),Vt=[at,_t,at+Ye,_t,at+Ye,_t+ri,at,_t+ri];for(var hn=0,fe=ve.length;hn<fe;++hn)if(x!==ii&&ii<oe[hn]){var ge=ve[hn];Ct.beginPath(),Ct.moveTo(Vt[0],Vt[1]),Ct.lineTo(Vt[2],Vt[3]),Ct.lineTo(Vt[4],Vt[5]),Ct.lineTo(Vt[6],Vt[7]),Ct.moveTo(ge[6],ge[7]),Ct.lineTo(ge[4],ge[5]),Ct.lineTo(ge[2],ge[3]),Ct.lineTo(ge[0],ge[1]),Ct.clip()}ve.push(Vt),oe.push(ii)}else Ct.clearRect(at,_t,Ye,ri);this.drawTileImage(st,t,at,_t,Ye,ri,Pn,wi),ve&&!St?(Ct.restore(),this.renderedTiles.unshift(st)):this.renderedTiles.push(st),this.updateUsedTiles(t.usedTiles,g,st)}}this.renderedRevision=y,this.renderedResolution=C,this.extentChanged=!this.renderedExtent_||!pa(this.renderedExtent_,H),this.renderedExtent_=H,this.renderedPixelRatio=c,this.renderedProjection=o,this.manageTilePyramid(t,g,m,c,o,S,x,p.getPreload()),this.scheduleExpireCache(t,g),this.postRender(Ct,t),r.extent&&Ct.restore(),$t(Ct,nm),Qt!==te.style.transform&&(te.style.transform=Qt);var Si=Yu(r.opacity),ji=this.container;return Si!==ji.style.opacity&&(ji.style.opacity=Si),this.container},e.prototype.drawTileImage=function(t,i,r,a,o,s,h,u){var c=this.getTileImage(t);if(!!c){var p=Ot(this),g=u?t.getAlpha(p,i.time):1,y=g!==this.context.globalAlpha;y&&(this.context.save(),this.context.globalAlpha=g),this.context.drawImage(c,h,h,c.width-2*h,c.height-2*h,r,a,o,s),y&&this.context.restore(),g!==1?i.animate=!0:u&&t.endTransition(p)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,i){if(i.canExpireCache()){var r=function(a,o,s){var h=Ot(a);h in s.usedTiles&&a.expireCache(s.viewState.projection,s.usedTiles[h])}.bind(null,i);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,i,r){var a=Ot(i);a in t||(t[a]={}),t[a][r.getKey()]=!0},e.prototype.manageTilePyramid=function(t,i,r,a,o,s,h,u,c){var p=Ot(i);p in t.wantedTiles||(t.wantedTiles[p]={});var g=t.wantedTiles[p],y=t.tileQueue,m=r.getMinZoom(),x=0,C,S,I,O,A,F;for(F=m;F<=h;++F)for(S=r.getTileRangeForExtentAndZ(s,F,S),I=r.getResolution(F),O=S.minX;O<=S.maxX;++O)for(A=S.minY;A<=S.maxY;++A)h-F<=u?(++x,C=i.getTile(F,O,A,a,o),C.getState()==gt.IDLE&&(g[C.getKey()]=!0,y.isKeyQueued(C.getKey())||y.enqueue([C,p,r.getTileCoordCenter(C.tileCoord),I])),c!==void 0&&c(C)):i.useTile(F,O,A,o);i.updateCacheSize(x,o)},e}(uf);Zf.prototype.getLayer;var om=Zf,Vo={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},Yh={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},sm=[0,0,0],Mn=5,hm=function(){function n(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Mt(Yd(this.resolutions_,function(o,s){return s-o},!0),17);var t;if(!e.origins){for(var i=0,r=this.resolutions_.length-1;i<r;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Mt(this.origins_.length==this.resolutions_.length,20));var a=e.extent;a!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Zn(a)),Mt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Mt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Mh,Mt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=a!==void 0?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(o,s){var h=new Vf(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(a){var u=this.getTileRangeForExtentAndZ(a,s);h.minX=Math.max(u.minX,h.minX),h.maxX=Math.min(u.maxX,h.maxX),h.minY=Math.max(u.minY,h.minY),h.maxY=Math.min(u.maxY,h.maxY)}return h},this):a&&this.calculateTileRanges_(a)}return n.prototype.forEachTileCoord=function(e,t,i){for(var r=this.getTileRangeForExtentAndZ(e,t),a=r.minX,o=r.maxX;a<=o;++a)for(var s=r.minY,h=r.maxY;s<=h;++s)i([t,a,s])},n.prototype.forEachTileCoordParentTileRange=function(e,t,i,r){var a,o,s,h=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],s=e[2]):h=this.getTileCoordExtent(e,r);u>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),s=Math.floor(s/2),a=zr(o,o,s,s,i)):a=this.getTileRangeForExtentAndZ(h,u,i),t(u,a))return!0;--u}return!1},n.prototype.getExtent=function(){return this.extent_},n.prototype.getMaxZoom=function(){return this.maxZoom},n.prototype.getMinZoom=function(){return this.minZoom},n.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},n.prototype.getResolution=function(e){return this.resolutions_[e]},n.prototype.getResolutions=function(){return this.resolutions_},n.prototype.getTileCoordChildTileRange=function(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var r=e[1]*2,a=e[2]*2;return zr(r,r+1,a,a+1,t)}var o=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e[0]+1,t)}return null},n.prototype.getTileRangeForTileCoordAndZ=function(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;var r=e[0],a=e[1],o=e[2];if(t===r)return zr(a,o,a,o,i);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,t-r),h=Math.floor(a*s),u=Math.floor(o*s);if(t<r)return zr(h,h,u,u,i);var c=Math.floor(s*(a+1))-1,p=Math.floor(s*(o+1))-1;return zr(h,c,u,p,i)}var g=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(g,t,i)},n.prototype.getTileRangeExtent=function(e,t,i){var r=this.getOrigin(e),a=this.getResolution(e),o=Je(this.getTileSize(e),this.tmpSize_),s=r[0]+t.minX*o[0]*a,h=r[0]+(t.maxX+1)*o[0]*a,u=r[1]+t.minY*o[1]*a,c=r[1]+(t.maxY+1)*o[1]*a;return mi(s,u,h,c,i)},n.prototype.getTileRangeForExtentAndZ=function(e,t,i){var r=sm;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);var a=r[1],o=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),zr(a,r[1],o,r[2],i)},n.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=Je(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]},n.prototype.getTileCoordExtent=function(e,t){var i=this.getOrigin(e[0]),r=this.getResolution(e[0]),a=Je(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*a[0]*r,s=i[1]-(e[2]+1)*a[1]*r,h=o+a[0]*r,u=s+a[1]*r;return mi(o,s,h,u,t)},n.prototype.getTileCoordForCoordAndResolution=function(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)},n.prototype.getTileCoordForXYAndResolution_=function(e,t,i,r,a){var o=this.getZForResolution(i),s=i/this.getResolution(o),h=this.getOrigin(o),u=Je(this.getTileSize(o),this.tmpSize_),c=s*(e-h[0])/i/u[0],p=s*(h[1]-t)/i/u[1];return r?(c=_o(c,Mn)-1,p=_o(p,Mn)-1):(c=go(c,Mn),p=go(p,Mn)),Wf(o,c,p,a)},n.prototype.getTileCoordForXYAndZ_=function(e,t,i,r,a){var o=this.getOrigin(i),s=this.getResolution(i),h=Je(this.getTileSize(i),this.tmpSize_),u=(e-o[0])/s/h[0],c=(o[1]-t)/s/h[1];return r?(u=_o(u,Mn)-1,c=_o(c,Mn)-1):(u=go(u,Mn),c=go(c,Mn)),Wf(i,u,c,a)},n.prototype.getTileCoordForCoordAndZ=function(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)},n.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},n.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},n.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},n.prototype.getZForResolution=function(e,t){var i=Ns(this.resolutions_,e,t||0);return ie(i,this.minZoom,this.maxZoom)},n.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,i=new Array(t),r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i},n}(),Jf=hm;function Qf(n){var e=n.getDefaultTileGrid();return e||(e=cm(n),n.setDefaultTileGrid(e)),e}function lm(n,e,t){var i=e[0],r=n.getTileCoordCenter(e),a=qh(t);if(ca(a,r))return e;var o=qt(a),s=Math.ceil((a[0]-r[0])/o);return r[0]+=o*s,n.getTileCoordForCoordAndZ(r,i)}function um(n,e,t,i){var r=i!==void 0?i:ua.TOP_LEFT,a=tc(n,e,t);return new Jf({extent:n,origin:pp(n,r),resolutions:a,tileSize:t})}function fm(n){var e=n||{},t=e.extent||zt("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:tc(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Jf(i)}function tc(n,e,t,i){for(var r=e!==void 0?e:uy,a=Ei(n),o=qt(n),s=Je(t!==void 0?t:Mh),h=i>0?i:Math.max(o/s[0],a/s[1]),u=r+1,c=new Array(u),p=0;p<u;++p)c[p]=h/Math.pow(2,p);return c}function cm(n,e,t,i){var r=qh(n);return um(r,e,t,i)}function qh(n){n=zt(n);var e=n.getExtent();if(!e){var t=180*yi[Ue.DEGREES]/n.getMetersPerUnit();e=mi(-t,-t,t,t)}return e}var ec=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),dm=function(n){ec(e,n);function e(t){var i=n.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate})||this;i.on,i.once,i.un,i.opaque_=t.opaque!==void 0?t.opaque:!1,i.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,i.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;var r=[256,256],a=t.tileGrid;return a&&Je(a.getTileSize(a.getMinZoom()),r),i.tileCache=new Yf(t.cacheSize||0),i.tmpSize=[0,0],i.key_=t.key||"",i.tileOptions={transition:t.transition,interpolate:t.interpolate},i.zDirection=t.zDirection?t.zDirection:0,i}return e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,i){var r=this.getTileCacheForProjection(t);r&&r.expireCache(i)},e.prototype.forEachLoadedTile=function(t,i,r,a){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var s=!0,h,u,c,p=r.minX;p<=r.maxX;++p)for(var g=r.minY;g<=r.maxY;++g)u=qo(i,p,g),c=!1,o.containsKey(u)&&(h=o.get(u),c=h.getState()===gt.LOADED,c&&(c=a(h)!==!1)),c||(s=!1);return s},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,i,r,a,o){return dt()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Qf(t)},e.prototype.getTileCacheForProjection=function(t){return Mt(tr(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,i,r){var a=this.getTileGridForProjection(r),o=this.getTilePixelRatio(i),s=Je(a.getTileSize(t),this.tmpSize);return o==1?s:lh(s,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,i){var r=i!==void 0?i:this.getProjection(),a=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=lm(a,t,r)),Q0(t,a)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),n.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,i){var r=this.getTileCacheForProjection(i);t>r.highWaterMark&&(r.highWaterMark=t)},e.prototype.useTile=function(t,i,r,a){},e}(Ef),pm=function(n){ec(e,n);function e(t,i){var r=n.call(this,t)||this;return r.tile=i,r}return e}(oi),vm=dm;function gm(n,e){var t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,a=/\{-y\}/g;return function(o,s,h){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(a,function(){var u=o[0],c=e.getFullTileRange(u);Mt(c,55);var p=c.getHeight()-o[2]-1;return p.toString()})}}function _m(n,e){for(var t=n.length,i=new Array(t),r=0;r<t;++r)i[r]=gm(n[r],e);return ym(i)}function ym(n){return n.length===1?n[0]:function(e,t,i){if(e){var r=$h(e),a=Pi(r,n.length);return n[a](e,t,i)}else return}}function mm(n){var e=[],t=/\{([a-z])-([a-z])\}/.exec(n);if(t){var i=t[1].charCodeAt(0),r=t[2].charCodeAt(0),a=void 0;for(a=i;a<=r;++a)e.push(n.replace(t[0],String.fromCharCode(a)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){for(var o=parseInt(t[2],10),s=parseInt(t[1],10);s<=o;s++)e.push(n.replace(t[0],s.toString()));return e}return e.push(n),e}var Em=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xm=function(n){Em(e,n);function e(t){var i=n.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return i.generateTileUrlFunction_=i.tileUrlFunction===e.prototype.tileUrlFunction,i.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(i.tileUrlFunction=t.tileUrlFunction),i.urls=null,t.urls?i.setUrls(t.urls):t.url&&i.setUrl(t.url),i.tileLoadingKeys_={},i}return e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var i=t.target,r=Ot(i),a=i.getState(),o;a==gt.LOADING?(this.tileLoadingKeys_[r]=!0,o=Yh.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=a==gt.ERROR?Yh.TILELOADERROR:a==gt.LOADED?Yh.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new pm(o,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,i){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof i!="undefined"?this.setKey(i):this.changed()},e.prototype.setUrl=function(t){var i=mm(t);this.urls=i,this.setUrls(i)},e.prototype.setUrls=function(t){this.urls=t;var i=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(_m(t,this.tileGrid),i):this.setKey(i)},e.prototype.tileUrlFunction=function(t,i,r){},e.prototype.useTile=function(t,i,r){var a=qo(t,i,r);this.tileCache.containsKey(a)&&this.tileCache.get(a)},e}(vm),Tm=xm,Cm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Mm=function(n){Cm(e,n);function e(t){var i=n.call(this)||this;return i.geometries_=t||null,i.changeEventsKeys_=[],i.listenGeometriesChange_(),i}return e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(Wt),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(!!this.geometries_)for(var t=0,i=this.geometries_.length;t<i;++t)this.changeEventsKeys_.push(Rt(this.geometries_[t],mt.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){if(a<Hn(this.getExtent(),t,i))return a;for(var o=this.geometries_,s=0,h=o.length;s<h;++s)a=o[s].closestPointXY(t,i,r,a);return a},e.prototype.containsXY=function(t,i){for(var r=this.geometries_,a=0,o=r.length;a<o;++a)if(r[a].containsXY(t,i))return!0;return!1},e.prototype.computeExtent=function(t){da(t);for(var i=this.geometries_,r=0,a=i.length;r<a;++r)eu(t,i[r].getExtent());return t},e.prototype.getGeometries=function(){return ic(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],i=this.geometries_,r=0,a=i.length;r<a;++r)i[r].getType()===this.getType()?t=t.concat(i[r].getGeometriesArrayRecursive()):t.push(i[r]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],r=this.geometries_,a=!1,o=0,s=r.length;o<s;++o){var h=r[o],u=h.getSimplifiedGeometry(t);i.push(u),u!==h&&(a=!0)}if(a){var c=new e(null);return c.setGeometriesArray(i),c}else return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return W.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var i=this.geometries_,r=0,a=i.length;r<a;++r)if(i[r].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return this.geometries_.length===0},e.prototype.rotate=function(t,i){for(var r=this.geometries_,a=0,o=r.length;a<o;++a)r[a].rotate(t,i);this.changed()},e.prototype.scale=function(t,i,r){var a=r;a||(a=Kn(this.getExtent()));for(var o=this.geometries_,s=0,h=o.length;s<h;++s)o[s].scale(t,i,a);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(ic(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var i=this.geometries_,r=0,a=i.length;r<a;++r)i[r].applyTransform(t);this.changed()},e.prototype.translate=function(t,i){for(var r=this.geometries_,a=0,o=r.length;a<o;++a)r[a].translate(t,i);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),n.prototype.disposeInternal.call(this)},e}(_u);function ic(n){for(var e=[],t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}var wm=Mm,Sm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Om=function(n){Sm(e,n);function e(){return n.call(this)||this}return e.prototype.getType=function(){return Br.JSON},e.prototype.readFeature=function(t,i){return this.readFeatureFromObject(Ho(t),this.getReadOptions(t,i))},e.prototype.readFeatures=function(t,i){return this.readFeaturesFromObject(Ho(t),this.getReadOptions(t,i))},e.prototype.readFeatureFromObject=function(t,i){return dt()},e.prototype.readFeaturesFromObject=function(t,i){return dt()},e.prototype.readGeometry=function(t,i){return this.readGeometryFromObject(Ho(t),this.getReadOptions(t,i))},e.prototype.readGeometryFromObject=function(t,i){return dt()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(Ho(t))},e.prototype.readProjectionFromObject=function(t){return dt()},e.prototype.writeFeature=function(t,i){return JSON.stringify(this.writeFeatureObject(t,i))},e.prototype.writeFeatureObject=function(t,i){return dt()},e.prototype.writeFeatures=function(t,i){return JSON.stringify(this.writeFeaturesObject(t,i))},e.prototype.writeFeaturesObject=function(t,i){return dt()},e.prototype.writeGeometry=function(t,i){return JSON.stringify(this.writeGeometryObject(t,i))},e.prototype.writeGeometryObject=function(t,i){return dt()},e}(rm);function Ho(n){if(typeof n=="string"){var e=JSON.parse(n);return e||null}else return n!==null?n:null}var Im=Om,Rm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Pm=function(n){Rm(e,n);function e(t){var i=this,r=t||{};return i=n.call(this)||this,i.dataProjection=zt(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(i.defaultFeatureProjection=zt(r.featureProjection)),i.geometryName_=r.geometryName,i.extractGeometryName_=r.extractGeometryName,i.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],i}return e.prototype.readFeatureFromObject=function(t,i){var r=null;t.type==="Feature"?r=t:r={type:"Feature",geometry:t,properties:null};var a=Vh(r.geometry,i),o=new Xi;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&o.setGeometryName(r.geometry_name),o.setGeometry(a),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties,!0),o},e.prototype.readFeaturesFromObject=function(t,i){var r=t,a=null;if(r.type==="FeatureCollection"){var o=t;a=[];for(var s=o.features,h=0,u=s.length;h<u;++h)a.push(this.readFeatureFromObject(s[h],i))}else a=[this.readFeatureFromObject(t,i)];return a},e.prototype.readGeometryFromObject=function(t,i){return Vh(t,i)},e.prototype.readProjectionFromObject=function(t){var i=t.crs,r;return i?i.type=="name"?r=zt(i.properties.name):i.type==="EPSG"?r=zt("EPSG:"+i.properties.code):Mt(!1,36):r=this.dataProjection,r},e.prototype.writeFeatureObject=function(t,i){i=this.adaptOptions(i);var r={type:"Feature",geometry:null,properties:null},a=t.getId();if(a!==void 0&&(r.id=a),!t.hasProperties())return r;var o=t.getProperties(),s=t.getGeometry();return s&&(r.geometry=Hh(s,i),delete o[t.getGeometryName()]),wr(o)||(r.properties=o),r},e.prototype.writeFeaturesObject=function(t,i){i=this.adaptOptions(i);for(var r=[],a=0,o=t.length;a<o;++a)r.push(this.writeFeatureObject(t[a],i));return{type:"FeatureCollection",features:r}},e.prototype.writeGeometryObject=function(t,i){return Hh(t,this.adaptOptions(i))},e}(Im);function Vh(n,e){if(!n)return null;var t;switch(n.type){case W.POINT:{t=Am(n);break}case W.LINE_STRING:{t=bm(n);break}case W.POLYGON:{t=km(n);break}case W.MULTI_POINT:{t=Dm(n);break}case W.MULTI_LINE_STRING:{t=Nm(n);break}case W.MULTI_POLYGON:{t=Fm(n);break}case W.GEOMETRY_COLLECTION:{t=Lm(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return Hf(t,!1,e)}function Lm(n,e){var t=n.geometries.map(function(i){return Vh(i,e)});return new wm(t)}function Am(n){return new Vi(n.coordinates)}function bm(n){return new _n(n.coordinates)}function Nm(n){return new Bf(n.coordinates)}function Dm(n){return new zh(n.coordinates)}function Fm(n){return new Uf(n.coordinates)}function km(n){return new ar(n.coordinates)}function Hh(n,e){n=Hf(n,!0,e);var t=n.getType(),i;switch(t){case W.POINT:{i=$m(n);break}case W.LINE_STRING:{i=jm(n);break}case W.POLYGON:{i=Wm(n,e);break}case W.MULTI_POINT:{i=Um(n);break}case W.MULTI_LINE_STRING:{i=Bm(n);break}case W.MULTI_POLYGON:{i=zm(n,e);break}case W.GEOMETRY_COLLECTION:{i=Gm(n,e);break}case W.CIRCLE:{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function Gm(n,e){var t=n.getGeometriesArray().map(function(i){var r=$t({},e);return delete r.featureProjection,Hh(i,r)});return{type:"GeometryCollection",geometries:t}}function jm(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Bm(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Um(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function zm(n,e){var t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function $m(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Wm(n,e){var t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}var iM=Pm,Xm=10,nc=.25,Ym=function(){function n(e,t,i,r,a,o){this.sourceProj_=e,this.targetProj_=t;var s={},h=ya(this.targetProj_,this.sourceProj_);this.transformInv_=function(O){var A=O[0]+"/"+O[1];return s[A]||(s[A]=h(O)),s[A]},this.maxSourceExtent_=r,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&qt(r)==qt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?qt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?qt(this.targetProj_.getExtent()):null;var u=Zn(i),c=vo(i),p=po(i),g=co(i),y=this.transformInv_(u),m=this.transformInv_(c),x=this.transformInv_(p),C=this.transformInv_(g),S=Xm+(o?Math.max(0,Math.ceil(xp(js(i)/(o*o*256*256)))):0);if(this.addQuad_(u,c,p,g,y,m,x,C,S),this.wrapsXInSource_){var I=1/0;this.triangles_.forEach(function(O,A,F){I=Math.min(I,O.source[0][0],O.source[1][0],O.source[2][0])}),this.triangles_.forEach(function(O){if(Math.max(O.source[0][0],O.source[1][0],O.source[2][0])-I>this.sourceWorldWidth_/2){var A=[[O.source[0][0],O.source[0][1]],[O.source[1][0],O.source[1][1]],[O.source[2][0],O.source[2][1]]];A[0][0]-I>this.sourceWorldWidth_/2&&(A[0][0]-=this.sourceWorldWidth_),A[1][0]-I>this.sourceWorldWidth_/2&&(A[1][0]-=this.sourceWorldWidth_),A[2][0]-I>this.sourceWorldWidth_/2&&(A[2][0]-=this.sourceWorldWidth_);var F=Math.min(A[0][0],A[1][0],A[2][0]),v=Math.max(A[0][0],A[1][0],A[2][0]);v-F<this.sourceWorldWidth_/2&&(O.source=A)}}.bind(this))}s={}}return n.prototype.addTriangle_=function(e,t,i,r,a,o){this.triangles_.push({source:[r,a,o],target:[e,t,i]})},n.prototype.addQuad_=function(e,t,i,r,a,o,s,h,u){var c=Jl([a,o,s,h]),p=this.sourceWorldWidth_?qt(c)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,y=this.sourceProj_.canWrapX()&&p>.5&&p<1,m=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var x=Jl([e,t,i,r]),C=qt(x)/this.targetWorldWidth_;m=C>nc||m}!y&&this.sourceProj_.isGlobal()&&p&&(m=p>nc||m)}if(!(!m&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!$e(c,this.maxSourceExtent_))){var S=0;if(!m&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(h[0])||!isFinite(h[1]))){if(u>0)m=!0;else if(S=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),S!=1&&S!=2&&S!=4&&S!=8)return}if(u>0){if(!m){var I=[(e[0]+i[0])/2,(e[1]+i[1])/2],O=this.transformInv_(I),A=void 0;if(y){var F=(Pi(a[0],g)+Pi(s[0],g))/2;A=F-Pi(O[0],g)}else A=(a[0]+s[0])/2-O[0];var v=(a[1]+s[1])/2-O[1],G=A*A+v*v;m=G>this.errorThresholdSquared_}if(m){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){var B=[(t[0]+i[0])/2,(t[1]+i[1])/2],H=this.transformInv_(B),tt=[(r[0]+e[0])/2,(r[1]+e[1])/2],et=this.transformInv_(tt);this.addQuad_(e,t,B,tt,a,o,H,et,u-1),this.addQuad_(tt,B,i,r,et,H,s,h,u-1)}else{var Z=[(e[0]+t[0])/2,(e[1]+t[1])/2],ut=this.transformInv_(Z),Et=[(i[0]+r[0])/2,(i[1]+r[1])/2],at=this.transformInv_(Et);this.addQuad_(e,Z,Et,r,a,ut,at,h,u-1),this.addQuad_(Z,t,i,Et,ut,o,s,at,u-1)}return}}if(y){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(S&11)==0&&this.addTriangle_(e,i,r,a,s,h),(S&14)==0&&this.addTriangle_(e,i,t,a,s,o),S&&((S&13)==0&&this.addTriangle_(t,r,e,o,h,a),(S&7)==0&&this.addTriangle_(t,r,i,o,h,s))}},n.prototype.calculateSourceExtent=function(){var e=ze();return this.triangles_.forEach(function(t,i,r){var a=t.source;va(e,a[0]),va(e,a[1]),va(e,a[2])}),e},n.prototype.getTriangles=function(){return this.triangles_},n}(),qm=Ym,Kh;function rc(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function Zh(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Vm(){if(Kh===void 0){var n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",rc(n,4,5,4,0),rc(n,4,5,0,5);var e=n.getImageData(0,0,3,3).data;Kh=Zh(e,0)||Zh(e,4)||Zh(e,8)}return Kh}function Jh(n,e,t,i){var r=pn(t,e,n),a=To(e,i,t),o=e.getMetersPerUnit();o!==void 0&&(a*=o);var s=n.getMetersPerUnit();s!==void 0&&(a/=s);var h=n.getExtent();if(!h||ca(h,r)){var u=To(n,a,r)/a;isFinite(u)&&u>0&&(a/=u)}return a}function Hm(n,e,t,i){var r=Kn(t),a=Jh(n,e,r,i);return(!isFinite(a)||a<=0)&&Gs(t,function(o){return a=Jh(n,e,o,i),isFinite(a)&&a>0}),a}function Km(n,e,t,i,r,a,o,s,h,u,c,p){var g=hi(Math.round(t*n),Math.round(t*e));if(p||$t(g,Wh),h.length===0)return g.canvas;g.scale(t,t);function y(A){return Math.round(A*t)/t}g.globalCompositeOperation="lighter";var m=ze();h.forEach(function(A,F,v){eu(m,A.extent)});var x=qt(m),C=Ei(m),S=hi(Math.round(t*x/i),Math.round(t*C/i));p||$t(S,Wh);var I=t/i;h.forEach(function(A,F,v){var G=A.extent[0]-m[0],B=-(A.extent[3]-m[3]),H=qt(A.extent),tt=Ei(A.extent);A.image.width>0&&A.image.height>0&&S.drawImage(A.image,u,u,A.image.width-2*u,A.image.height-2*u,G*I,B*I,H*I,tt*I)});var O=Zn(o);return s.getTriangles().forEach(function(A,F,v){var G=A.source,B=A.target,H=G[0][0],tt=G[0][1],et=G[1][0],Z=G[1][1],ut=G[2][0],Et=G[2][1],at=y((B[0][0]-O[0])/a),_t=y(-(B[0][1]-O[1])/a),st=y((B[1][0]-O[0])/a),Pt=y(-(B[1][1]-O[1])/a),St=y((B[2][0]-O[0])/a),Nt=y(-(B[2][1]-O[1])/a),It=H,V=tt;H=0,tt=0,et-=It,Z-=V,ut-=It,Et-=V;var Qt=[[et,Z,0,0,st-at],[ut,Et,0,0,St-at],[0,0,et,Z,Pt-_t],[0,0,ut,Et,Nt-_t]],Ct=Cp(Qt);if(!!Ct){if(g.save(),g.beginPath(),Vm()||!p){g.moveTo(st,Pt);for(var te=4,Se=at-st,ve=_t-Pt,oe=0;oe<te;oe++)g.lineTo(st+y((oe+1)*Se/te),Pt+y(oe*ve/(te-1))),oe!=te-1&&g.lineTo(st+y((oe+1)*Se/te),Pt+y((oe+1)*ve/(te-1)));g.lineTo(St,Nt)}else g.moveTo(st,Pt),g.lineTo(at,_t),g.lineTo(St,Nt);g.clip(),g.transform(Ct[0],Ct[2],Ct[1],Ct[3],at,_t),g.translate(m[0]-It,m[3]-V),g.scale(i/t,-i/t),g.drawImage(S.canvas,0,0),g.restore()}}),c&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,s.getTriangles().forEach(function(A,F,v){var G=A.target,B=(G[0][0]-O[0])/a,H=-(G[0][1]-O[1])/a,tt=(G[1][0]-O[0])/a,et=-(G[1][1]-O[1])/a,Z=(G[2][0]-O[0])/a,ut=-(G[2][1]-O[1])/a;g.beginPath(),g.moveTo(tt,et),g.lineTo(B,H),g.lineTo(Z,ut),g.closePath(),g.stroke()}),g.restore()),g.canvas}var Zm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jm=function(n){Zm(e,n);function e(t,i,r,a,o,s,h,u,c,p,g,y){var m=n.call(this,o,gt.IDLE,{interpolate:!!y})||this;m.renderEdges_=g!==void 0?g:!1,m.pixelRatio_=h,m.gutter_=u,m.canvas_=null,m.sourceTileGrid_=i,m.targetTileGrid_=a,m.wrappedTileCoord_=s||o,m.sourceTiles_=[],m.sourcesListenerKeys_=null,m.sourceZ_=0;var x=a.getTileCoordExtent(m.wrappedTileCoord_),C=m.targetTileGrid_.getExtent(),S=m.sourceTileGrid_.getExtent(),I=C?ga(x,C):x;if(js(I)===0)return m.state=gt.EMPTY,m;var O=t.getExtent();O&&(S?S=ga(S,O):S=O);var A=a.getResolution(m.wrappedTileCoord_[0]),F=Hm(t,r,I,A);if(!isFinite(F)||F<=0)return m.state=gt.EMPTY,m;var v=p!==void 0?p:im;if(m.triangulation_=new qm(t,r,I,S,F*v,A),m.triangulation_.getTriangles().length===0)return m.state=gt.EMPTY,m;m.sourceZ_=i.getZForResolution(F);var G=m.triangulation_.calculateSourceExtent();if(S&&(t.canWrapX()?(G[1]=ie(G[1],S[1],S[3]),G[3]=ie(G[3],S[1],S[3])):G=ga(G,S)),!js(G))m.state=gt.EMPTY;else{for(var B=i.getTileRangeForExtentAndZ(G,m.sourceZ_),H=B.minX;H<=B.maxX;H++)for(var tt=B.minY;tt<=B.maxY;tt++){var et=c(m.sourceZ_,H,tt,h);et&&m.sourceTiles_.push(et)}m.sourceTiles_.length===0&&(m.state=gt.EMPTY)}return m}return e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(c,p,g){c&&c.getState()==gt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(c.tileCoord),image:c.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=gt.ERROR;else{var i=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(i),a=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],s=this.targetTileGrid_.getResolution(i),h=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Km(a,o,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),s,u,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=gt.LOADED}this.changed()},e.prototype.load=function(){if(this.state==gt.IDLE){this.state=gt.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i,r,a){var o=i.getState();if(o==gt.IDLE||o==gt.LOADING){t++;var s=Rt(i,mt.CHANGE,function(h){var u=i.getState();(u==gt.LOADED||u==gt.ERROR||u==gt.EMPTY)&&(Wt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(i,r,a){var o=i.getState();o==gt.IDLE&&i.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Wt),this.sourcesListenerKeys_=null},e}(wf),Qm=Jm,t1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),e1=function(n){t1(e,n);function e(t){var i=this,r=t.imageSmoothing!==void 0?t.imageSmoothing:!0;return t.interpolate!==void 0&&(r=t.interpolate),i=n.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:i1,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:r,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this,i.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,i.tileClass=t.tileClass!==void 0?t.tileClass:j_,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,i.renderReprojectionEdges_=!1,i}return e.prototype.canExpireCache=function(){if(!rn)return n.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,i){if(!rn){n.prototype.expireCache.call(this,t,i);return}var r=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==r?i:{});for(var a in this.tileCacheForProjection){var o=this.tileCacheForProjection[a];o.expireCache(o==r?i:{})}},e.prototype.getGutterForProjection=function(t){return rn&&this.getProjection()&&t&&!tr(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var t=n.prototype.getKey.call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t},e.prototype.getOpaque=function(t){return rn&&this.getProjection()&&t&&!tr(this.getProjection(),t)?!1:n.prototype.getOpaque.call(this,t)},e.prototype.getTileGridForProjection=function(t){if(!rn)return n.prototype.getTileGridForProjection.call(this,t);var i=this.getProjection();if(this.tileGrid&&(!i||tr(i,t)))return this.tileGrid;var r=Ot(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Qf(t)),this.tileGridForProjection[r]},e.prototype.getTileCacheForProjection=function(t){if(!rn)return n.prototype.getTileCacheForProjection.call(this,t);var i=this.getProjection();if(!i||tr(i,t))return this.tileCache;var r=Ot(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new Yf(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},e.prototype.createTile_=function(t,i,r,a,o,s){var h=[t,i,r],u=this.getTileCoordForTileUrlFunction(h,o),c=u?this.tileUrlFunction(u,a,o):void 0,p=new this.tileClass(h,c!==void 0?gt.IDLE:gt.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=s,p.addEventListener(mt.CHANGE,this.handleTileChange.bind(this)),p},e.prototype.getTile=function(t,i,r,a,o){var s=this.getProjection();if(!rn||!s||!o||tr(s,o))return this.getTileInternal(t,i,r,a,s||o);var h=this.getTileCacheForProjection(o),u=[t,i,r],c=void 0,p=Xf(u);h.containsKey(p)&&(c=h.get(p));var g=this.getKey();if(c&&c.key==g)return c;var y=this.getTileGridForProjection(s),m=this.getTileGridForProjection(o),x=this.getTileCoordForTileUrlFunction(u,o),C=new Qm(s,y,o,m,u,x,this.getTilePixelRatio(a),this.getGutter(),function(S,I,O,A){return this.getTileInternal(S,I,O,A,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return C.key=g,c?(C.interimTile=c,C.refreshInterimChain(),h.replace(p,C)):h.set(p,C),C},e.prototype.getTileInternal=function(t,i,r,a,o){var s=null,h=qo(t,i,r),u=this.getKey();if(!this.tileCache.containsKey(h))s=this.createTile_(t,i,r,a,o,u),this.tileCache.set(h,s);else if(s=this.tileCache.get(h),s.key!=u){var c=s;s=this.createTile_(t,i,r,a,o,u),c.getState()==gt.IDLE?s.interimTile=c.interimTile:s.interimTile=c,s.refreshInterimChain(),this.tileCache.replace(h,s)}return s},e.prototype.setRenderReprojectionEdges=function(t){if(!(!rn||this.renderReprojectionEdges_==t)){this.renderReprojectionEdges_=t;for(var i in this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,i){if(rn){var r=zt(t);if(r){var a=Ot(r);a in this.tileGridForProjection||(this.tileGridForProjection[a]=i)}}},e}(Tm);function i1(n,e){n.getImage().src=e}var Qh=e1,n1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),r1=function(n){n1(e,n);function e(t){var i=this,r=t||{},a=$t({},r);return delete a.preload,delete a.useInterimTilesOnError,i=n.call(this,a)||this,i.on,i.once,i.un,i.setPreload(r.preload!==void 0?r.preload:0),i.setUseInterimTilesOnError(r.useInterimTilesOnError!==void 0?r.useInterimTilesOnError:!0),i}return e.prototype.getPreload=function(){return this.get(Vo.PRELOAD)},e.prototype.setPreload=function(t){this.set(Vo.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Vo.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Vo.USE_INTERIM_TILES_ON_ERROR,t)},e}(No),a1=r1,o1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),s1=function(n){o1(e,n);function e(t){return n.call(this,t)||this}return e.prototype.createRenderer=function(){return new om(this)},e}(a1),nM=s1,h1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),l1=function(n){h1(e,n);function e(t){var i=this,r=t||{},a=r.imageSmoothing!==void 0?r.imageSmoothing:!0;r.interpolate!==void 0&&(a=r.interpolate);var o=r.projection!==void 0?r.projection:"EPSG:3857",s=r.tileGrid!==void 0?r.tileGrid:fm({extent:qh(o),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return i=n.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:a,opaque:r.opaque,projection:o,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX!==void 0?r.wrapX:!0,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,i}return e}(Qh),u1=l1;function tl(n,e){var t=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&t.push(r+"="+encodeURIComponent(e[r]))});var i=t.join("&");return n=n.replace(/[?&]$/,""),n=n.indexOf("?")===-1?n+"?":n+"&",n+i}var Ko="1.3.0",Zo={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"},f1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),c1='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',d1=function(n){f1(e,n);function e(t){var i=this,r=t||{},a=r.imageSmoothing!==void 0?r.imageSmoothing:!0;r.interpolate!==void 0&&(a=r.interpolate);var o;r.attributions!==void 0?o=r.attributions:o=[c1];var s=r.crossOrigin!==void 0?r.crossOrigin:"anonymous",h=r.url!==void 0?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return i=n.call(this,{attributions:o,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:s,interpolate:a,maxZoom:r.maxZoom!==void 0?r.maxZoom:19,opaque:r.opaque!==void 0?r.opaque:!0,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:h,wrapX:r.wrapX,zDirection:r.zDirection})||this,i}return e}(u1),rM=d1,p1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),v1=function(n){p1(e,n);function e(t){var i=this,r=t||{},a=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(a=r.interpolate),i=n.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:a,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:r.wrapX!==void 0?r.wrapX:!0,transition:r.transition,zDirection:r.zDirection})||this,i.params_=r.params||{},i.hidpi_=r.hidpi!==void 0?r.hidpi:!0,i.tmpExtent_=ze(),i.setKey(i.getKeyForParams_()),i}return e.prototype.getKeyForParams_=function(){var t=0,i=[];for(var r in this.params_)i[t++]=r+"-"+this.params_[r];return i.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,i,r,a,o,s){var h=this.urls;if(!!h){var u=o.getCode().split(/:(?=\d+$)/).pop();s.SIZE=i[0]+","+i[1],s.BBOX=r.join(","),s.BBOXSR=u,s.IMAGESR=u,s.DPI=Math.round(s.DPI?s.DPI*a:90*a);var c;if(h.length==1)c=h[0];else{var p=Pi($h(t),h.length);c=h[p]}var g=c.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return tl(g,s)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){$t(this.params_,t),this.setKey(this.getKeyForParams_())},e.prototype.tileUrlFunction=function(t,i,r){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(r)),!(a.getResolutions().length<=t[0])){i!=1&&!this.hidpi_&&(i=1);var o=a.getTileCoordExtent(t,this.tmpExtent_),s=Je(a.getTileSize(t[0]),this.tmpSize);i!=1&&(s=lh(s,i,this.tmpSize));var h={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return $t(h,this.params_),this.getRequestUrl_(t,s,o,i,r,h)}},e}(Qh),aM=v1,g1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_1=function(n){g1(e,n);function e(t){var i=this,r=t||{},a=r.imageSmoothing!==void 0?r.imageSmoothing:!0;r.interpolate!==void 0&&(a=r.interpolate);var o=r.params||{},s="TRANSPARENT"in o?o.TRANSPARENT:!0;return i=n.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:a,opaque:!s,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:r.wrapX!==void 0?r.wrapX:!0,transition:r.transition,zDirection:r.zDirection})||this,i.gutter_=r.gutter!==void 0?r.gutter:0,i.params_=o,i.v13_=!0,i.serverType_=r.serverType,i.hidpi_=r.hidpi!==void 0?r.hidpi:!0,i.tmpExtent_=ze(),i.updateV13_(),i.setKey(i.getKeyForParams_()),i}return e.prototype.getFeatureInfoUrl=function(t,i,r,a){var o=zt(r),s=this.getProjection(),h=this.getTileGrid();h||(h=this.getTileGridForProjection(o));var u=h.getZForResolution(i,this.zDirection),c=h.getTileCoordForCoordAndZ(t,u);if(!(h.getResolutions().length<=c[0])){var p=h.getResolution(c[0]),g=h.getTileCoordExtent(c,this.tmpExtent_),y=Je(h.getTileSize(c[0]),this.tmpSize),m=this.gutter_;m!==0&&(y=Du(y,m,this.tmpSize),g=fa(g,p*m,g)),s&&s!==o&&(p=Jh(s,o,t,p),g=Wp(g,o,s),t=pn(t,o,s));var x={SERVICE:"WMS",VERSION:Ko,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};$t(x,this.params_,a);var C=Math.floor((t[0]-g[0])/p),S=Math.floor((g[3]-t[1])/p);return x[this.v13_?"I":"X"]=C,x[this.v13_?"J":"Y"]=S,this.getRequestUrl_(c,y,g,1,s||o,x)}},e.prototype.getLegendUrl=function(t,i){if(this.urls[0]!==void 0){var r={SERVICE:"WMS",VERSION:Ko,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(i===void 0||i.LAYER===void 0){var a=this.params_.LAYERS,o=!Array.isArray(a)||a.length===1;if(!o)return;r.LAYER=a}if(t!==void 0){var s=this.getProjection()?this.getProjection().getMetersPerUnit():1,h=28e-5;r.SCALE=t*s/h}return $t(r,i),tl(this.urls[0],r)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,i,r,a,o,s){var h=this.urls;if(!!h){if(s.WIDTH=i[0],s.HEIGHT=i[1],s[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(s.STYLES=""),a!=1)switch(this.serverType_){case Zo.GEOSERVER:var u=90*a+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+u:s.FORMAT_OPTIONS="dpi:"+u;break;case Zo.MAPSERVER:s.MAP_RESOLUTION=90*a;break;case Zo.CARMENTA_SERVER:case Zo.QGIS:s.DPI=90*a;break;default:Mt(!1,52);break}var c=o.getAxisOrientation(),p=r;if(this.v13_&&c.substr(0,2)=="ne"){var g=void 0;g=r[0],p[0]=r[1],p[1]=g,g=r[2],p[2]=r[3],p[3]=g}s.BBOX=p.join(",");var y;if(h.length==1)y=h[0];else{var m=Pi($h(t),h.length);y=h[m]}return tl(y,s)}},e.prototype.getTilePixelRatio=function(t){return!this.hidpi_||this.serverType_===void 0?1:t},e.prototype.getKeyForParams_=function(){var t=0,i=[];for(var r in this.params_)i[t++]=r+"-"+this.params_[r];return i.join("/")},e.prototype.updateParams=function(t){$t(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||Ko;this.v13_=kp(t,"1.3")>=0},e.prototype.tileUrlFunction=function(t,i,r){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(r)),!(a.getResolutions().length<=t[0])){i!=1&&(!this.hidpi_||this.serverType_===void 0)&&(i=1);var o=a.getResolution(t[0]),s=a.getTileCoordExtent(t,this.tmpExtent_),h=Je(a.getTileSize(t[0]),this.tmpSize),u=this.gutter_;u!==0&&(h=Du(h,u,this.tmpSize),s=fa(s,o*u,s)),i!=1&&(h=lh(h,i,this.tmpSize));var c={SERVICE:"WMS",VERSION:Ko,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return $t(c,this.params_),this.getRequestUrl_(t,h,s,i,r,c)}},e}(Qh),oM=_1;function sM(n){var e=Object.keys(n.defs),t=e.length,i,r;for(i=0;i<t;++i){var a=e[i];if(!zt(a)){var o=n.defs(a),s=o.units;!s&&o.projName==="longlat"&&(s=Ue.DEGREES),fu(new zs({code:a,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:s}))}}for(i=0;i<t;++i){var h=e[i],u=zt(h);for(r=0;r<t;++r){var c=e[r],p=zt(c);if(!hu(h,c))if(n.defs[h]===n.defs[c])Hs([u,p]);else{var g=n(h,c);$p(u,p,pu(u,p,g.forward),pu(p,u,g.inverse))}}}}var ac={exports:{}},y1=Xh(Iy),m1=Xh(Zd),E1=Xh(K_);(function(n,e){(function(t,i){n.exports=i(y1,m1,E1)})(Kf,function(t,i,r){t="default"in t?t.default:t,r="default"in r?r.default:r;var a=function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")},o=function(){function g(y,m){for(var x=0;x<m.length;x++){var C=m[x];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(y,C.key,C)}}return function(y,m,x){return m&&g(y.prototype,m),x&&g(y,x),y}}(),s=function g(y,m,x){y===null&&(y=Function.prototype);var C=Object.getOwnPropertyDescriptor(y,m);if(C===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:g(S,m,x)}else{if("value"in C)return C.value;var I=C.get;return I===void 0?void 0:I.call(x)}},h=function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)},u=function(g,y){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:g},c="layer-switcher-",p=function(g){h(y,g);function y(m){a(this,y);var x=Object.assign({},m),C=x.tipLabel?x.tipLabel:"Legend",S=x.collapseTipLabel?x.collapseTipLabel:"Collapse legend",I=document.createElement("div"),O=u(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,{element:I,target:x.target}));O.activationMode=x.activationMode||"mouseover",O.startActive=x.startActive===!0;var A=x.label!==void 0?x.label:"",F=x.collapseLabel!==void 0?x.collapseLabel:"\xBB";O.groupSelectStyle=y.getGroupSelectStyle(x.groupSelectStyle),O.reverse=x.reverse!==!1,O.mapListeners=[],O.hiddenClassName="ol-unselectable ol-control layer-switcher",y.isTouchDevice_()&&(O.hiddenClassName+=" touch"),O.shownClassName="shown",I.className=O.hiddenClassName;var v=document.createElement("button");return v.setAttribute("title",C),v.setAttribute("aria-label",C),I.appendChild(v),O.panel=document.createElement("div"),O.panel.className="panel",I.appendChild(O.panel),y.enableTouchScroll_(O.panel),v.textContent=A,I.classList.add(c+"group-select-style-"+O.groupSelectStyle),I.classList.add(c+"activation-mode-"+O.activationMode),O.activationMode==="click"?(I.classList.add("activationModeClick"),O.startActive&&(v.textContent=F,v.setAttribute("title",S),v.setAttribute("aria-label",S)),v.onclick=function(G){var B=G||window.event;O.element.classList.contains(O.shownClassName)?(O.hidePanel(),v.textContent=A,v.setAttribute("title",C),v.setAttribute("aria-label",C)):(O.showPanel(),v.textContent=F,v.setAttribute("title",S),v.setAttribute("aria-label",S)),B.preventDefault()}):(v.onmouseover=function(){O.showPanel()},v.onclick=function(G){var B=G||window.event;O.showPanel(),B.preventDefault()},O.panel.onmouseout=function(G){O.panel.contains(G.relatedTarget)||O.hidePanel()}),O}return o(y,[{key:"setMap",value:function(x){for(var C=this,S=0;S<this.mapListeners.length;S++)i.unByKey(this.mapListeners[S]);this.mapListeners.length=0,s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"setMap",this).call(this,x),x&&(this.startActive?this.showPanel():this.renderPanel(),this.activationMode!=="click"&&this.mapListeners.push(x.on("pointerdown",function(){C.hidePanel()})))}},{key:"showPanel",value:function(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.renderPanel())}},{key:"hidePanel",value:function(){this.element.classList.contains(this.shownClassName)&&this.element.classList.remove(this.shownClassName)}},{key:"renderPanel",value:function(){this.dispatchEvent("render"),y.renderPanel(this.getMap(),this.panel,{groupSelectStyle:this.groupSelectStyle,reverse:this.reverse}),this.dispatchEvent("rendercomplete")}}],[{key:"renderPanel",value:function(x,C,S){var I=new Event("render");for(C.dispatchEvent(I),S=S||{},S.groupSelectStyle=y.getGroupSelectStyle(S.groupSelectStyle),y.ensureTopVisibleBaseLayerShown(x,S.groupSelectStyle);C.firstChild;)C.removeChild(C.firstChild);y.forEachRecursive(x,function(F,v,G){F.set("indeterminate",!1)}),S.groupSelectStyle==="children"||S.groupSelectStyle==="none"?y.setGroupVisibility(x):S.groupSelectStyle==="group"&&y.setChildVisibility(x);var O=document.createElement("ul");C.appendChild(O),y.renderLayers_(x,x,O,S,function(v){y.renderPanel(x,C,S)});var A=new Event("rendercomplete");C.dispatchEvent(A)}},{key:"isBaseGroup",value:function(x){if(x instanceof r){var C=x.getLayers().getArray();return C.length&&C[0].get("type")==="base"}else return!1}},{key:"setGroupVisibility",value:function(x){var C=y.getGroupsAndLayers(x,function(S){return S instanceof r&&!S.get("combine")&&!y.isBaseGroup(S)}).reverse();C.forEach(function(S){var I=S.getLayersArray().map(function(O){var A=O.getVisible();return A});I.every(function(O){return O===!0})?(S.setVisible(!0),S.set("indeterminate",!1)):I.every(function(O){return O===!1})?(S.setVisible(!1),S.set("indeterminate",!1)):(S.setVisible(!0),S.set("indeterminate",!0))})}},{key:"setChildVisibility",value:function(x){var C=y.getGroupsAndLayers(x,function(S){return S instanceof r&&!S.get("combine")&&!y.isBaseGroup(S)});C.forEach(function(S){var I=S,O=I.getVisible(),A=I.get("indeterminate");I.getLayers().getArray().forEach(function(F){F.set("indeterminate",!1),(!O||A)&&F.getVisible()&&F.set("indeterminate",!0)})})}},{key:"ensureTopVisibleBaseLayerShown",value:function(x,C){var S=void 0;y.forEachRecursive(x,function(I,O,A){I.get("type")==="base"&&I.getVisible()&&(S=I)}),S&&y.setVisible_(x,S,!0,C)}},{key:"getGroupsAndLayers",value:function(x,C){var S=[];return C=C||function(I,O,A){return!0},y.forEachRecursive(x,function(I,O,A){I.get("title")&&C(I,O,A)&&S.push(I)}),S}},{key:"setVisible_",value:function(x,C,S,I){C.setVisible(S),S&&C.get("type")==="base"&&y.forEachRecursive(x,function(O,A,F){O!=C&&O.get("type")==="base"&&O.setVisible(!1)}),C instanceof r&&!C.get("combine")&&I==="children"&&C.getLayers().forEach(function(O){y.setVisible_(x,O,C.getVisible(),I)})}},{key:"renderLayer_",value:function(x,C,S,I,O){var A=document.createElement("li"),F=C.get("title"),v=y.uuid(),G=document.createElement("label");if(C instanceof r&&!C.get("combine")){var B=y.isBaseGroup(C);if(A.classList.add("group"),B&&A.classList.add(c+"base-group"),C.get("fold")){A.classList.add(c+"fold"),A.classList.add(c+C.get("fold"));var H=document.createElement("button");H.onclick=function(Et){var at=Et||window.event;y.toggleFold_(C,A),at.preventDefault()},A.appendChild(H)}if(!B&&I.groupSelectStyle!="none"){var tt=document.createElement("input");tt.type="checkbox",tt.id=v,tt.checked=C.getVisible(),tt.indeterminate=C.get("indeterminate"),tt.onchange=function(Et){var at=Et.target;y.setVisible_(x,C,at.checked,I.groupSelectStyle),O(C)},A.appendChild(tt),G.htmlFor=v}G.innerHTML=F,A.appendChild(G);var et=document.createElement("ul");A.appendChild(et),y.renderLayers_(x,C,et,I,O)}else{A.className="layer";var Z=document.createElement("input");C.get("type")==="base"?(Z.type="radio",Z.name="base"):Z.type="checkbox",Z.id=v,Z.checked=C.get("visible"),Z.indeterminate=C.get("indeterminate"),Z.onchange=function(Et){var at=Et.target;y.setVisible_(x,C,at.checked,I.groupSelectStyle),O(C)},A.appendChild(Z),G.htmlFor=v,G.innerHTML=F;var ut=x.getView().getResolution();(ut>C.getMaxResolution()||ut<C.getMinResolution())&&(G.className+=" disabled"),A.appendChild(G)}return A}},{key:"renderLayers_",value:function(x,C,S,I,O){var A=C.getLayers().getArray().slice();I.reverse&&(A=A.reverse());for(var F=0,v;F<A.length;F++)v=A[F],v.get("title")&&S.appendChild(y.renderLayer_(x,v,F,I,O))}},{key:"forEachRecursive",value:function(x,C){x.getLayers().forEach(function(S,I,O){C(S,I,O),S instanceof r&&y.forEachRecursive(S,C)})}},{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var C=Math.random()*16|0,S=x=="x"?C:C&3|8;return S.toString(16)})}},{key:"enableTouchScroll_",value:function(x){if(y.isTouchDevice_()){var C=0;x.addEventListener("touchstart",function(S){C=this.scrollTop+S.touches[0].pageY},!1),x.addEventListener("touchmove",function(S){this.scrollTop=C-S.touches[0].pageY},!1)}}},{key:"isTouchDevice_",value:function(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}},{key:"toggleFold_",value:function(x,C){C.classList.remove(c+x.get("fold")),x.set("fold",x.get("fold")==="open"?"close":"open"),C.classList.add(c+x.get("fold"))}},{key:"getGroupSelectStyle",value:function(x){return["none","children","group"].indexOf(x)>=0?x:"children"}}]),y}(t);return window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=p),p})})(ac);var hM=ac.exports;window.ol&&!ol.ext&&(ol.ext={});var ti=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n};window.ol&&(ol.inherits||(ol.inherits=ti));window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);window.Element&&!Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});window.ol&&(ol.ext.input={});var pr=function(n){n=n||{},Be.call(this);var e=this.input=n.input;e||(e=this.input=document.createElement("INPUT"),n.type&&e.setAttribute("type",n.type),n.min!==void 0&&e.setAttribute("min",n.min),n.max!==void 0&&e.setAttribute("max",n.max),n.step!==void 0&&e.setAttribute("step",n.step),n.parent&&n.parent.appendChild(e)),n.disabled&&(e.disabled=!0),n.checked!==void 0&&(e.checked=!!n.checked),n.val!==void 0&&(e.value=n.val),n.hidden&&(e.style.display="none")};ti(pr,Be);pr.prototype._listenDrag=function(n,e){var t=function(i){this.moving=!0;var r=function(a){a.type==="pointerup"&&(document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",r),document.removeEventListener("pointercancel",r),setTimeout(function(){this.moving=!1}.bind(this))),a.target===n&&e(a),a.stopPropagation(),a.preventDefault()}.bind(this);document.addEventListener("pointermove",r,!1),document.addEventListener("pointerup",r,!1),document.addEventListener("pointercancel",r,!1),i.stopPropagation(),i.preventDefault()}.bind(this);n.addEventListener("mousedown",t,!1),n.addEventListener("touchstart",t,!1)};pr.prototype.setValue=function(n){n!==void 0&&(this.input.value=n),this.input.dispatchEvent(new Event("change"))};pr.prototype.getValue=function(){return this.input.value};pr.prototype.getInputElement=function(){return this.input};var vr=function(n){n=n||{},pr.call(this,n);var e=this.element=document.createElement("LABEL");n.html instanceof Element?e.appendChild(n.html):n.html!==void 0&&(e.innerHTML=n.html),e.className=("ol-ext-check ol-ext-checkbox"+(n.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),n.after&&e.appendChild(document.createTextNode(n.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))};ti(vr,pr);vr.prototype.isChecked=function(){return this.input.checked};var oc=function(n){n=n||{},vr.call(this,n),this.element.className=("ol-ext-toggle-switch "+(n.className||"")).trim()};ti(oc,vr);var sc=function(n,e){e=e||{},vr.call(this,n,e),this.element.className=("ol-ext-check ol-ext-radio"+(e.className||"")).trim()};ti(sc,vr);var lt={};lt.create=function(n,e){e=e||{};var t;if(n==="TEXT")t=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(t);else{t=document.createElement(n),/button/i.test(n)&&t.setAttribute("type","button");for(var i in e)switch(i){case"className":{e.className&&e.className.trim&&t.setAttribute("class",e.className.trim());break}case"html":{e.html instanceof Element?t.appendChild(e.html):e.html!==void 0&&(t.innerHTML=e.html);break}case"parent":{e.parent&&e.parent.appendChild(t);break}case"options":{if(/select/i.test(n))for(var r in e.options)lt.create("OPTION",{html:r,value:e.options[r],parent:t});break}case"style":{this.setStyle(t,e.style);break}case"change":case"click":{lt.addListener(t,i,e[i]);break}case"on":{for(var a in e.on)lt.addListener(t,a,e.on[a]);break}case"checked":{t.checked=!!e.checked;break}default:{t.setAttribute(i,e[i]);break}}}return t};lt.createSwitch=function(n){var e=lt.create("INPUT",{type:"checkbox",on:n.on,click:n.click,change:n.change,parent:n.parent}),t=Object.assign({input:e},n||{});return new oc(t),e};lt.createCheck=function(n){var e=lt.create("INPUT",{name:n.name,type:n.type==="radio"?"radio":"checkbox",on:n.on,parent:n.parent});console.log(e);var t=Object.assign({input:e},n||{});return n.type==="radio"?new sc(t):new vr(t),e};lt.setHTML=function(n,e){e instanceof Element?n.appendChild(e):e!==void 0&&(n.innerHTML=e)};lt.appendText=function(n,e){n.appendChild(document.createTextNode(e||""))};lt.addListener=function(n,e,t,i){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(r){n.addEventListener(r,t,i)})};lt.removeListener=function(n,e,t){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(i){n.removeEventListener(i,t)})};lt.show=function(n){n.style.display=""};lt.hide=function(n){n.style.display="none"};lt.hidden=function(n){return lt.getStyle(n,"display")==="none"};lt.toggle=function(n){n.style.display=n.style.display==="none"?"":"none"};lt.setStyle=function(n,e){for(var t in e)switch(t){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":{typeof e[t]=="number"?n.style[t]=e[t]+"px":n.style[t]=e[t];break}default:n.style[t]=e[t]}};lt.getStyle=function(n,e){var t,i=(n.ownerDocument||document).defaultView;if(i&&i.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),t=i.getComputedStyle(n,null).getPropertyValue(e);else if(n.currentStyle&&(e=e.replace(/-(\w)/g,function(r,a){return a.toUpperCase()}),t=n.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(t)))return function(r){var a=n.style.left,o=n.runtimeStyle.left;return n.runtimeStyle.left=n.currentStyle.left,n.style.left=r||0,r=n.style.pixelLeft+"px",n.style.left=a,n.runtimeStyle.left=o,r}(t);return/px$/.test(t)?parseInt(t):t};lt.outerHeight=function(n){return n.offsetHeight+lt.getStyle(n,"marginBottom")};lt.outerWidth=function(n){return n.offsetWidth+lt.getStyle(n,"marginLeft")};lt.offsetRect=function(n){var e=n.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}};lt.getFixedOffset=function(n){var e={left:0,top:0},t=function(i){if(!i)return e;if(lt.getStyle(i,"position")==="absolute"&&lt.getStyle(i,"transform")!=="none"){var r=i.getBoundingClientRect();return e.left+=r.left,e.top+=r.top,e}return console.log(i,e),t(i.offsetParent)};return t(n.offsetParent)};lt.positionRect=function(n,e){var t=0,i=0,r=function(a){if(a)return t+=a.offsetLeft,i+=a.offsetTop,r(a.offsetParent);var o={top:n.offsetTop+i,left:n.offsetLeft+t};return e&&(o.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),o.bottom=o.top+n.offsetHeight,o.right=o.top+n.offsetWidth,o};return r(n.offsetParent)};lt.scrollDiv=function(n,e){e=e||{};var t=!1,i=0,r,a=0,o=typeof e.onmove=="function"?e.onmove:function(){},s=e.vertical?"screenY":"screenX",h=e.vertical?"scrollTop":"scrollLeft",u=!1,c,p,g=0,y=function(){O&&(g++,setTimeout(m))},m=function(){if(O){if(g--,g)return;var G=n.clientHeight,B=n.scrollHeight;c=G/B,O.style.height=c*100+"%",O.style.top=n.scrollTop/B*100+"%",I.style.height=G+"px",G>B-.5?I.classList.add("ol-100pc"):I.classList.remove("ol-100pc")}},x=function(G){G.target.classList.contains("ol-noscroll")||(u=!1,t=G[s],a=new Date,n.classList.add("ol-move"),G.preventDefault(),window.addEventListener("pointermove",C),lt.addListener(window,["pointerup","pointercancel"],F))},C=function(G){if(u=!0,t!==!1){var B=(p?-1/c:1)*(t-G[s]);n[h]+=B,r=new Date,r-a&&(i=(i+B/(r-a))/2),t=G[s],a=r,B&&o(!0)}},S=function(G){var B=G>0?Math.min(100,G/2):Math.max(-100,G/2);G-=B,n[h]+=B,-1<G&&G<1?(u?setTimeout(function(){n.classList.remove("ol-move")}):n.classList.remove("ol-move"),u=!1,o(!1)):setTimeout(function(){S(G)},40)},I,O;if(e.vertical&&e.minibar){var A=function(G){n.removeEventListener("pointermove",A),n.parentNode.classList.add("ol-miniscroll"),O=lt.create("DIV"),I=lt.create("DIV",{className:"ol-scroll",html:O}),n.parentNode.insertBefore(I,n),O.addEventListener("pointerdown",function(B){p=!0,x(B)}),e.mousewheel&&(lt.addListener(I,["mousewheel","DOMMouseScroll","onmousewheel"],function(B){v(B)}),lt.addListener(O,["mousewheel","DOMMouseScroll","onmousewheel"],function(B){v(B)})),n.parentNode.addEventListener("pointerenter",y),window.addEventListener("resize",y),G!==!1&&y()};n.parentNode?A(!1):n.addEventListener("pointermove",A),n.addEventListener("scroll",function(){y()})}n.style["touch-action"]="none",n.style.overflow="hidden",n.classList.add("ol-scrolldiv"),lt.addListener(n,["pointerdown"],function(G){p=!1,x(G)}),n.addEventListener("click",function(G){n.classList.contains("ol-move")&&(G.preventDefault(),G.stopPropagation())},!0);var F=function(G){a=new Date-a,a>100||p?i=0:a>0&&(i=((i||0)+(t-G[s])/a)/2),S(e.animate===!1?0:i*200),t=!1,i=0,a=0,n.classList.contains("ol-move")?n.classList.remove("ol-hasClick"):(n.classList.add("ol-hasClick"),setTimeout(function(){n.classList.remove("ol-hasClick")},500)),p=!1,window.removeEventListener("pointermove",C),lt.removeListener(window,["pointerup","pointercancel"],F)},v=function(G){var B=Math.max(-1,Math.min(1,G.wheelDelta||-G.detail));return n.classList.add("ol-move"),n[h]-=B*30,n.classList.remove("ol-move"),!1};return e.mousewheel&&lt.addListener(n,["mousewheel","DOMMouseScroll","onmousewheel"],v),{refresh:y}};lt.dispatchEvent=function(n,e){var t;try{t=new CustomEvent(n)}catch{t=document.createEvent("CustomEvent"),t.initCustomEvent(n,!0,!0,{})}e.dispatchEvent(t)};var hc={base32:"0123456789bcdefghjkmnpqrstuvwxyz"},lc=function(n,e){var t=n[0],i=n[1];if(!e){for(var r=1;r<=12;r++){var a=lc([t,i],r),o=el(a);if(o.lat==i&&o.lon==t)return a}e=12}(e<1||e>12)&&(e=12);for(var s=0,h=0,u=!0,c="",p=-90,g=90,y=-180,m=180;c.length<e;){if(u){var x=(y+m)/2;t>=x?(s=s*2+1,y=x):(s=s*2,m=x)}else{var C=(p+g)/2;i>=C?(s=s*2+1,p=C):(s=s*2,g=C)}u=!u,++h==5&&(c+=hc.base32.charAt(s),h=0,s=0)}return c},el=function(n){var e=x1(n),t=e[1],i=e[0],r=e[3],a=e[2],o=(t+r)/2,s=(i+a)/2;return o=o.toFixed(Math.floor(2-Math.log(r-t)/Math.LN10)),s=s.toFixed(Math.floor(2-Math.log(a-i)/Math.LN10)),[Number(s),Number(o)]},x1=function(n){if(!n)return!1;n=n.toLowerCase();for(var e=!0,t=-90,i=90,r=-180,a=180,o=0;o<n.length;o++){var s=n.charAt(o),h=hc.base32.indexOf(s);if(h==-1)return!1;for(var u=4;u>=0;u--){var c=h>>u&1;if(e){var p=(r+a)/2;c==1?r=p:a=p}else{var g=(t+i)/2;c==1?t=g:i=g}e=!e}}return[r,t,a,i]},Le=function(n){var e=n||{},t=this,i=document.createElement("button");if(this.replaceState_=e.urlReplace!==!1,this.fixed_=e.fixed||6,this.hash_=e.anchor?"#":"?",this._localStorage=e.localStorage,!this._localStorage)try{localStorage.removeItem("ol@permalink")}catch{console.warn("Failed to access localStorage...")}function r(){typeof e.onclick=="function"?e.onclick(t.getLink()):t.setUrlReplace(!t.replaceState_)}i.addEventListener("click",r,!1),i.addEventListener("touchstart",r,!1);var a=document.createElement("div");a.className=(e.className||"ol-permalink")+" ol-unselectable ol-control",a.appendChild(i),(e.hidden||e.visible===!1)&&lt.hide(a),Pe.call(this,{element:a,target:e.target}),this.set("geohash",e.geohash),this.set("initial",!1),this.on("change",this.viewChange_.bind(this)),this.search_={};var o={},s=document.location.hash||document.location.search||"";if(this.replaceState_&&!s&&this._localStorage)try{s=localStorage["ol@permalink"]}catch{console.warn("Failed to access localStorage...")}if(s){s=s.replace(/(^#|^\?)/,"").split("&");for(var h=0;h<s.length;h++){var u=s[h].split("=");switch(u[0]){case"lon":case"lat":case"z":case"r":{o[u[0]]=u[1];break}case"gh":{const c=u[1].split("-"),p=el(c[0]);o.lon=p[0],o.lat=p[1],o.z=c[1];break}case"l":break;default:this.search_[u[0]]=u[1]}}}o.hasOwnProperty("lon")&&this.set("initial",o),this.replaceState_&&this.setPosition()};ti(Le,Pe);Le.prototype.getInitialPosition=function(){return this.get("initial")};Le.prototype.setMap=function(n){this._listener&&(lo(this._listener.change),lo(this._listener.moveend)),this._listener=null,Pe.prototype.setMap.call(this,n),n&&(this._listener={change:n.getLayerGroup().on("change",this.layerChange_.bind(this)),moveend:n.on("moveend",this.viewChange_.bind(this))},this.setPosition())};Le.prototype.getLayerByLink=function(n,e){!e&&this.getMap()&&(e=this.getMap().getLayers().getArray());for(var t=0;t<e.length;t++){if(e[t].get("permalink")==n)return e[t];if(e[t].getLayers){var i=this.getLayerByLink(n,e[t].getLayers().getArray());if(i)return i}}return!1};Le.prototype.setGeohash=function(n){this.set("geohash",n),this.setUrlParam()};Le.prototype.setPosition=function(n){var e=this.getMap();if(!e)return;var t=this.replaceState_||n?document.location.hash||document.location.search:"";if(!t&&this._localStorage)try{t=localStorage["ol@permalink"]}catch{console.warn("Failed to access localStorage...")}if(!t)return;var i,r,a={};for(t=t.replace(/(^#|^\?)/,"").split("&"),i=0;i<t.length;i++)r=t[i].split("="),a[r[0]]=r[1];if(a.gh){var o=a.gh.split("-"),s=el(o[0]);a.lon=s[0],a.lat=s[1],a.z=o[1]}var h=pn([Number(a.lon),Number(a.lat)],"EPSG:4326",e.getView().getProjection());h[0]&&h[1]&&e.getView().setCenter(h),a.z&&e.getView().setZoom(Number(a.z)),a.r&&e.getView().setRotation(Number(a.r));function u(y){y||(y=e.getLayers().getArray());for(var m=0;m<y.length;m++)y[m].get("permalink")&&y[m].setVisible(!1),y[m].getLayers&&u(y[m].getLayers().getArray())}if(a.l){u();var c=a.l.split("|");for(i=0;i<c.length;i++){r=c[i].split(":");var p=this.getLayerByLink(r[0]),g=Number(r[1]);p&&(p.setOpacity(g),p.setVisible(!0))}}};Le.prototype.getUrlParams=function(){return this.search_};Le.prototype.setUrlParam=function(n,e){n&&(e===void 0||e===""?delete this.search_[encodeURIComponent(n)]:this.search_[encodeURIComponent(n)]=encodeURIComponent(e)),this.viewChange_()};Le.prototype.getUrlParam=function(n){return decodeURIComponent(this.search_[encodeURIComponent(n)]||"")};Le.prototype.hasUrlParam=function(n){return this.search_.hasOwnProperty(encodeURIComponent(n))};Le.prototype.getLink=function(n){var e=this.getMap(),t=pn(e.getView().getCenter(),e.getView().getProjection(),"EPSG:4326"),i=Math.round(e.getView().getZoom()*10)/10,r=e.getView().getRotation(),a=this.layerStr_,o=(r?"&r="+Math.round(r*1e4)/1e4:"")+(a?"&l="+a:"");if(this.get("geohash")){var s=lc(t,8);o="gh="+s+"-"+i+o}else o="lon="+t[0].toFixed(this.fixed_)+"&lat="+t[1].toFixed(this.fixed_)+"&z="+i+o;if(n==="position")return o;for(var h in this.search_)o+="&"+h+(typeof this.search_[h]!="undefined"?"="+this.search_[h]:"");return n?o:document.location.protocol+"//"+document.location.host+document.location.pathname+this.hash_+o};Le.prototype.getUrlReplace=function(){return this.replaceState_};Le.prototype.setUrlReplace=function(n){try{if(this.replaceState_=n,n)window.history.replaceState(null,null,this.getLink());else{var e="";for(var t in this.search_)e+=(e==""?"?":"&")+t+(typeof this.search_[t]!="undefined"?"="+this.search_[t]:"");window.history.replaceState(null,null,document.location.origin+document.location.pathname+e)}}catch{}};Le.prototype.viewChange_=function(){try{this.replaceState_&&window.history.replaceState(null,null,this.getLink())}catch{}if(this._localStorage)try{localStorage["ol@permalink"]=this.getLink(this._localStorage)}catch{console.warn("Failed to access localStorage...")}};Le.prototype.layerChange_=function(){this._tout&&(clearTimeout(this._tout),this._tout=null),this._tout=setTimeout(function(){this._tout=null;var n="";function e(t){for(var i=0;i<t.length;i++)t[i].getVisible()&&t[i].get("permalink")&&(n&&(n+="|"),n+=t[i].get("permalink")+":"+t[i].get("opacity")),t[i].getLayers&&e(t[i].getLayers().getArray())}e(this.getMap().getLayers().getArray()),this.layerStr_=n,this.viewChange_()}.bind(this),200)};var ui=function(n){n||(n={});var e=document.createElement("div");if(e.classList.add("ol-unselectable","ol-control","ol-bar"),n.className){var t=n.className.split(" ").filter(function(r){return r.length>0});e.classList.add.apply(e.classList,t)}if(n.group&&e.classList.add("ol-group"),Pe.call(this,{element:e,target:n.target}),this.set("toggleOne",n.toggleOne),this.set("autoDeactivate",n.autoDeactivate),this.controls_=[],n.controls instanceof Array)for(var i=0;i<n.controls.length;i++)this.addControl(n.controls[i])};ti(ui,Pe);ui.prototype.setVisible=function(n){n?this.element.style.display="":this.element.style.display="none"};ui.prototype.getVisible=function(){return this.element.style.display!="none"};ui.prototype.setMap=function(n){Pe.prototype.setMap.call(this,n);for(var e=0;e<this.controls_.length;e++){var t=this.controls_[e];t.setMap(n)}};ui.prototype.getControls=function(){return this.controls_};ui.prototype.setPosition=function(n){this.element.classList.remove("ol-left","ol-top","ol-bottom","ol-right"),n=n.split("-");for(var e=0;e<n.length;e++)switch(n[e]){case"top":case"left":case"bottom":case"right":this.element.classList.add("ol-"+n[e]);break}};ui.prototype.addControl=function(n){this.controls_.push(n),n.setTarget(this.element),this.getMap()&&this.getMap().addControl(n),n.on("change:active",function(e){this.onActivateControl_(e,n)}.bind(this)),n.getActive&&this.onActivateControl_({target:n,active:n.getActive()},n)};ui.prototype.deactivateControls=function(n){for(var e=0;e<this.controls_.length;e++)this.controls_[e]!==n&&this.controls_[e].setActive&&this.controls_[e].setActive(!1)};ui.prototype.getActiveControls=function(){for(var n=[],e=0,t;t=this.controls_[e];e++)t.getActive&&t.getActive()&&n.push(t);return n};ui.prototype.setActive=function(n){if(!n&&this.get("autoDeactivate")&&this.deactivateControls(),n)for(var e=this.getControls(),t=0,i;i=e[t];t++)i.get("autoActivate")&&i.setActive(!0)};ui.prototype.onActivateControl_=function(n,e){if(this.get("toggleOne")){if(n.active){var t;for(t=0;t<this.controls_.length&&this.controls_[t]!==e;t++);if(t==this.controls_.length)return;this.deactivateControls(this.controls_[t])}else if(!this.getActiveControls().length){for(var i=0,r;r=this.controls_[i];i++)if(r.get("autoActivate")){r.setActive(!0);break}}}};ui.prototype.getControlsByName=function(n){var e=this.getControls();return e.filter(function(t){return t.get("name")===n})};var wn=function(n){n=n||{};var e=document.createElement("div");e.className=(n.className||"")+" ol-button ol-unselectable ol-control";var t=this,i=this.button_=document.createElement(/ol-text-button/.test(n.className)?"div":"button");i.type="button",n.title&&(i.title=n.title),n.name&&(i.name=n.name),n.html instanceof Element?i.appendChild(n.html):i.innerHTML=n.html||"";var r=function(a){a&&a.preventDefault&&(a.preventDefault(),a.stopPropagation()),n.handleClick&&n.handleClick.call(t,a)};i.addEventListener("click",r),i.addEventListener("touchstart",r),e.appendChild(i),!n.title&&i.firstElementChild&&(i.title=i.firstElementChild.title),Pe.call(this,{element:e,target:n.target}),n.title&&this.set("title",n.title),n.title&&this.set("title",n.title),n.name&&this.set("name",n.name)};ti(wn,Pe);wn.prototype.setVisible=function(n){n?lt.show(this.element):lt.hide(this.element)};wn.prototype.setTitle=function(n){this.button_.setAttribute("title",n)};wn.prototype.setHtml=function(n){lt.setHTML(this.button_,n)};wn.prototype.getButtonElement=function(){return this.button_};var ei=function(n){n=n||{};var e=this;this.interaction_=n.interaction,this.interaction_&&(this.interaction_.setActive(n.active),this.interaction_.on("change:active",function(){e.setActive(e.interaction_.getActive())})),n.toggleFn&&(n.onToggle=n.toggleFn),n.handleClick=function(){e.toggle(),n.onToggle&&n.onToggle.call(e,e.getActive())},n.className=(n.className||"")+" ol-toggle",wn.call(this,n),this.set("title",n.title),this.set("autoActivate",n.autoActivate),n.bar&&this.setSubBar(n.bar),this.setActive(n.active),this.setDisable(n.disable)};ti(ei,wn);ei.prototype.setMap=function(n){!n&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),wn.prototype.setMap.call(this,n),n&&(this.interaction_&&n.addInteraction(this.interaction_),this.subbar_&&n.addControl(this.subbar_))};ei.prototype.getSubBar=function(){return this.subbar_};ei.prototype.setSubBar=function(n){var e=this.getMap();e&&this.subbar_&&e.removeControl(this.subbar_),this.subbar_=n,n&&(this.subbar_.setTarget(this.element),this.subbar_.element.classList.add("ol-option-bar"),e&&e.addControl(this.subbar_))};ei.prototype.getDisable=function(){var n=this.element.querySelector("button");return n&&n.disabled};ei.prototype.setDisable=function(n){this.getDisable()!=n&&(this.element.querySelector("button").disabled=n,n&&this.getActive()&&this.setActive(!1),this.dispatchEvent({type:"change:disable",key:"disable",oldValue:!n,disable:n}))};ei.prototype.getActive=function(){return this.element.classList.contains("ol-active")};ei.prototype.toggle=function(){this.getActive()?this.setActive(!1):this.setActive(!0)};ei.prototype.setActive=function(n){this.interaction_&&this.interaction_.setActive(n),this.subbar_&&this.subbar_.setActive(n),this.getActive()!==n&&(n?this.element.classList.add("ol-active"):this.element.classList.remove("ol-active"),this.dispatchEvent({type:"change:active",key:"active",oldValue:!n,active:n}))};ei.prototype.setInteraction=function(n){this.interaction_=n};ei.prototype.getInteraction=function(){return this.interaction_};var Sn=function(n){n||(n={});var e=lt.create("DIV",{className:"ol-unselectable ol-overlay "+(n.className||""),html:n.content});Pe.call(this,{element:e,target:n.target});var t=this;n.hideOnClick&&e.addEventListener("click",function(){t.hide()}),this.set("closeBox",n.closeBox),this._timeout=!1,this.setContent(n.content)};ti(Sn,Pe);Sn.prototype.setContent=function(n){var e=this;if(n){var t=this.element;if(n instanceof Element?(t.innerHTML="",t.appendChild(n)):n!==void 0&&(t.innerHTML=n),this.get("closeBox")){var i=document.createElement("div");i.classList.add("ol-closebox"),i.addEventListener("click",function(){e.hide()}),t.insertBefore(i,t.firstChild)}}};Sn.prototype.show=function(n,e){var t=this,i=this.element;i.style.display="block",e?(this.center_=this.getMap().getPixelFromCoordinate(e),i.style.top=this.center_[1]+"px",i.style.left=this.center_[0]+"px"):(this.center_=!1,i.style.top="",i.style.left=""),n&&this.setContent(n),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){i.classList.add("ol-visible"),i.style.top="",i.style.left="",t.dispatchEvent({type:"change:visible",visible:!0,element:t.element})},10)};Sn.prototype.showImage=function(n,e){e=e||{};var t=lt.create("DIV",{className:"ol-fullscreen-image"});lt.create("IMG",{src:n,parent:t}),e.title&&(t.classList.add("ol-has-title"),lt.create("P",{html:e.title,parent:t})),this.show(t,e.coordinate)};Sn.prototype.hide=function(){var n=this.element;this.element.classList.remove("ol-visible"),this.center_&&(n.style.top=this.center_[1]+"px",n.style.left=this.center_[0]+"px",this.center_=!1),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){n.style.display="none"},500),this.dispatchEvent({type:"change:visible",visible:!1,element:this.element})};Sn.prototype.toggle=function(){this.getVisible()?this.hide():this.show()};Sn.prototype.getVisible=function(){return lt.getStyle(this.element,"display")!=="none"};Sn.prototype.setClass=function(n){var e=this.element.classList.contains("ol-visible");this.element.className=("ol-unselectable ol-overlay "+(e?"ol-visible ":"")+n).trim()};var Ae=function(n){n||(n={}),this.geolocation=new Sv({projection:"EPSG:4326",trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),this.geolocation.on("change",this.draw_.bind(this)),this.path_=[],this.lastPosition_=!1;var e=[255,255,255,1],t=[0,153,255,1],i=3,r=new dh({radius:i*2,fill:new Hi({color:t}),stroke:new yn({color:e,width:i/2})}),a=[new Oa({stroke:new yn({color:e,width:i+2})}),new Oa({stroke:new yn({color:t,width:i}),fill:new Hi({color:[255,255,255,.5]})})],o=new Ku({radius:i*3.5,points:3,rotation:0,fill:new Hi({color:t}),stroke:new yn({color:e,width:i/2})}),s=o.getImage(),h=s.getContext("2d"),u=document.createElement("canvas");u.width=u.height=s.width,u.getContext("2d").drawImage(s,0,0),h.clearRect(0,0,s.width,s.height),h.drawImage(u,0,0,s.width,s.height,i,0,s.width-2*i,s.height);var c=function(p){return p.get("heading")===void 0?a[1].setImage(r):(a[1].setImage(o),o.setRotation(p.get("heading")||0)),a};this.locStyle={error:new Oa({fill:new Hi({color:[255,0,0,.2]})}),warn:new Oa({fill:new Hi({color:[255,192,0,.2]})}),ok:new Oa({fill:new Hi({color:[0,255,0,.2]})})},this.overlayLayer_=new xh({source:new Cf,name:"GeolocationDraw overlay",style:n.style||c}),this.sketch_=[new Xi,new Xi,new Xi],this.overlayLayer_.getSource().addFeatures(this.sketch_),this.features_=n.features,this.source_=n.source,this.condition_=n.condition||function(p){return p.getAccuracy()<this.get("minAccuracy")},nn.call(this,{handleEvent:function(){return!this.get("followTrack")||this.get("followTrack")=="auto"}}),this.set("type",n.type||"LineString"),this.set("attributes",n.attributes||{}),this.set("minAccuracy",n.minAccuracy||20),this.set("tolerance",n.tolerance||5),this.set("zoom",n.zoom),this.set("minZoom",n.minZoom),this.setFollowTrack(n.followTrack===void 0?!0:n.followTrack),this.setActive(!1)};ti(Ae,nn);Ae.prototype.simplify3D=function(n,e){var t=n.getCoordinates(),i=this.getMap().getView().getProjection();this.get("type")==="Polygon"&&(t=t[0]);for(var r=[t[0]],a,o=pn(t[0],i,"EPSG:4326"),s=1;s<t.length;s++){a=pn(t[s],i,"EPSG:4326");var h=Eo(o,a);h>e&&(r.push(t[s]),o=a)}return r[r.length-1]!==t[t.length-1]&&r.push(t[t.length-1]),this.get("type")==="Polygon"?n=new ar([r],"XYZM"):n=new _n(r,"XYZM"),n};Ae.prototype.setMap=function(n){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),cr.prototype.setMap.call(this,n),this.overlayLayer_.setMap(n),n&&this.geolocation.setProjection(n.getView().getProjection())};Ae.prototype.setActive=function(n){if(n!==this.getActive()){if(nn.prototype.setActive.call(this,n),this.overlayLayer_.setVisible(n),this.getMap()){this.geolocation.setTracking(n);try{this.getMap().renderSync()}catch{}}if(this.pause(!n),n)this.reset(),this.dispatchEvent({type:"drawstart",feature:this.sketch_[1]});else{var e=this.sketch_[1].clone();e.getGeometry()&&(this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)),this.dispatchEvent({type:"drawend",feature:e})}}};Ae.prototype.simulate=function(n,e){if(this._track&&clearTimeout(this._track.timeout),!n){this._track=!1;return}e=e||{};var t=e.delay||1e3;function i(){if(this._track.pos>=this._track.track.length){this._track=!1;return}var r=this._track.track[this._track.pos];r[2]=r[3]||0,r[3]=new Date().getTime(),this._track.pos++,e.repeat!==!1&&(this._track.pos=this._track.pos%this._track.track.length),this.getActive()&&this.draw_(!0,r,e.accuracy),this._track.timeout=setTimeout(i.bind(this),t)}this._track={track:n,pos:0,timeout:setTimeout(i.bind(this),0)}};Ae.prototype.simulating=function(){return!!this._track};Ae.prototype.reset=function(){this.sketch_[1].setGeometry(),this.path_=[],this.lastPosition_=!1};Ae.prototype.start=function(){this.setActive(!0)};Ae.prototype.stop=function(){this.setActive(!1)};Ae.prototype.pause=function(n){this.pause_=n!==!1};Ae.prototype.isPaused=function(){return this.pause_};Ae.prototype.setFollowTrack=function(n){this.set("followTrack",n);var e=this.getMap();if(this.getActive()&&e){var t;if(n!=="position"&&(this.get("minZoom")?t=Math.max(this.get("minZoom"),e.getView().getZoom()):t=this.get("zoom")),n!==!1&&!this.lastPosition_){var i=this.path_[this.path_.length-1];i&&e.getView().animate({center:i,zoom:t})}else n==="auto"&&this.lastPosition_&&e.getView().animate({center:this.lastPosition_,zoom:t})}this.lastPosition_=!1,this.dispatchEvent({type:"follow",following:n!==!1})};Ae.prototype.draw_=function(n,e,t){var i=this.getMap();if(!!i){var r,a,o,s,h;if(this._track){if(n!==!0)return;if(a=e,r=t||10,this.path_&&this.path_.length){var u=this.path_[this.path_.length-1];h=Math.atan2(e[0]-u[0],e[1]-u[1])}var c=new jf(a,i.getView().getResolution()*r);o=Tv(c)}else s=this.geolocation,r=s.getAccuracy(),a=this.getPosition(s),o=s.getAccuracyGeometry(),h=s.getHeading();switch(this.get("followTrack")){case!0:{this.get("followTrack")==!0&&(this.get("minZoom")?this.get("minZoom")>i.getView().getZoom()&&i.getView().setZoom(this.get("minZoom")):i.getView().setZoom(this.get("zoom")||16),dn(i.getView().calculateExtent(i.getSize()),o.getExtent())||i.getView().fit(o.getExtent())),i.getView().setCenter(a);break}case"position":{i.getView().setCenter(a);break}case"auto":{if(this.lastPosition_){var p=i.getView().getCenter();p[0]!=this.lastPosition_[0]||p[1]!=this.lastPosition_[1]?this.setFollowTrack(!1):(i.getView().setCenter(a),this.lastPosition_=a)}else i.getView().setCenter(a),this.get("minZoom")?this.get("minZoom")>i.getView().getZoom()&&i.getView().setZoom(this.get("minZoom")):this.get("zoom")&&i.getView().setZoom(this.get("zoom")),this.lastPosition_=a;break}case"visible":{ca(i.getView().calculateExtent(i.getSize()),a)||i.getView().setCenter(a);break}}var g=this.sketch_[0];g.setGeometry(o),r<this.get("minAccuracy")/2?g.setStyle(this.locStyle.ok):r<this.get("minAccuracy")?g.setStyle(this.locStyle.warn):g.setStyle(this.locStyle.error);var y;if(this.pause_&&(this.lastPosition_=a),!this.pause_&&(!s||this.condition_.call(this,s))){switch(g=this.sketch_[1],this.path_.push(a),this.get("type")){case"Point":this.path_=[a],g.setGeometry(new Vi(a,"XYZM"));var m=this.get("attributes");m.heading&&g.set("heading",s.getHeading()),m.accuracy&&g.set("accuracy",s.getAccuracy()),m.altitudeAccuracy&&g.set("altitudeAccuracy",s.getAltitudeAccuracy()),m.speed&&g.set("speed",s.getSpeed());break;case"LineString":this.path_.length>1?(y=new _n(this.path_,"XYZM"),this.get("tolerance")&&(y=this.simplify3D(y,this.get("tolerance"))),g.setGeometry(y)):g.setGeometry();break;case"Polygon":this.path_.length>2?(y=new ar([this.path_],"XYZM"),this.get("tolerance")&&(y=this.simplify3D(y,this.get("tolerance"))),g.setGeometry(y)):g.setGeometry();break}this.dispatchEvent({type:"drawing",feature:this.sketch_[1],geolocation:s})}this.sketch_[2].setGeometry(new Vi(a)),this.sketch_[2].set("heading",h),this.dispatchEvent({type:"tracking",feature:this.sketch_[1],geolocation:s})}};Ae.prototype.getPosition=function(n){var e=n.getPosition();return e.push(Math.round((n.getAltitude()||0)*100)/100),e.push(Math.round(new Date().getTime()/1e3)),e};var T1=function(n){n||(n={}),n.followTrack=n.followTrack||"auto",n.zoom=n.zoom||16;var e=new Ae(n);ei.call(this,{className:n.className=((n.className||"")+" ol-geobt").trim(),interaction:e,title:n.title||"Geolocation",onToggle:function(){e.pause(!0),e.setFollowTrack(n.followTrack||"auto")}}),this.setActive(!1),e.on("tracking",function(i){this.dispatchEvent({type:"position",coordinate:i.geolocation.getPosition()})}.bind(this));var t;e.on("change:active",function(){this.dispatchEvent({type:"position"}),t&&(clearTimeout(t),t=null),e.getActive()&&(t=setTimeout(function(){e.setActive(!1),t=null}.bind(this),n.delay||3e3))}.bind(this))};ti(T1,ei);var Ci=function(n){n=n||{},typeof n.offsetBox=="number"?this.offsetBox=[n.offsetBox,n.offsetBox,n.offsetBox,n.offsetBox]:this.offsetBox=n.offsetBox;var e=document.createElement("div");n.element=e,this.closeBox=n.closeBox,this.onclose=n.onclose,this.onshow=n.onshow,lt.create("BUTTON",{className:"closeBox"+(n.closeBox?" hasclosebox":""),type:"button",click:function(){this.hide()}.bind(this),parent:e}),n.anchor!==!1&&lt.create("DIV",{className:"anchor",parent:e}),this.content=lt.create("DIV",{html:n.html||"",className:"ol-popup-content",parent:e}),n.minibar&&lt.scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:!0}),n.stopEvent&&(e.addEventListener("mousedown",function(t){t.stopPropagation()}),e.addEventListener("touchstart",function(t){t.stopPropagation()})),Ph.call(this,n),this._elt=e,this.setPositioning(n.positioning||"auto"),this.setPopupClass(n.popupClass||n.className||"default"),n.anim&&this.addPopupClass("anim"),n.position&&setTimeout(function(){this.show(n.position)}.bind(this))};ti(Ci,Ph);Ci.prototype.getClassPositioning=function(){var n="",e=this.getPositioning();return/bottom/.test(e)&&(n+="ol-popup-bottom "),/top/.test(e)&&(n+="ol-popup-top "),/left/.test(e)&&(n+="ol-popup-left "),/right/.test(e)&&(n+="ol-popup-right "),/^center/.test(e)&&(n+="ol-popup-middle "),/center$/.test(e)&&(n+="ol-popup-center "),n};Ci.prototype.setClosebox=function(n){this.closeBox=n,n?this.element.classList.add("hasclosebox"):this.element.classList.remove("hasclosebox")};Ci.prototype.setPopupClass=function(n){var e=["ol-popup"];this.getVisible()&&e.push("visible"),this.element.className="";var t=this.getClassPositioning().split(" ").filter(function(i){return i.length>0});n?n.split(" ").filter(function(i){return i.length>0}).forEach(function(i){e.push(i)}):e.push("default"),t.forEach(function(i){e.push(i)}),this.closeBox&&e.push("hasclosebox"),this.element.classList.add.apply(this.element.classList,e)};Ci.prototype.addPopupClass=function(n){this.element.classList.add(n)};Ci.prototype.removePopupClass=function(n){this.element.classList.remove(n)};Ci.prototype.setPositioning=function(n){n!==void 0&&(/auto/.test(n)?(this.autoPositioning=n.split("-"),this.autoPositioning.length==1&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,n=n.replace(/auto/g,"center"),n=="center"&&(n="bottom-center"),this.setPositioning_(n))};Ci.prototype.setPositioning_=function(n){if(this.element){Ph.prototype.setPositioning.call(this,n),this.element.classList.remove("ol-popup-top","ol-popup-bottom","ol-popup-left","ol-popup-right","ol-popup-center","ol-popup-middle");var e=this.getClassPositioning().split(" ").filter(function(t){return t.length>0});this.element.classList.add.apply(this.element.classList,e)}};Ci.prototype.getVisible=function(){return this.element.classList.contains("visible")};Ci.prototype.show=function(n,e){!e&&typeof n=="string"&&(e=n,n=null),n===!0&&(n=this.getPosition());var t=this,i=this.getMap();if(!!i&&(e&&e!==this.prevHTML&&(this.prevHTML=e,this.content.innerHTML="",e instanceof Element?this.content.appendChild(e):lt.create("DIV",{html:e,parent:this.content}),Array.prototype.slice.call(this.content.querySelectorAll("img")).forEach(function(s){s.addEventListener("load",function(){try{i.renderSync()}catch{}t.content.dispatchEvent(new Event("scroll"))})})),n)){if(this.autoPositioning){var r=i.getPixelFromCoordinate(n),a=i.getSize(),o=[];this.autoPositioning[0]=="auto"?o[0]=r[1]<a[1]/3?"top":"bottom":o[0]=this.autoPositioning[0],o[1]=r[0]<2*a[0]/3?"left":"right",this.setPositioning_(o[0]+"-"+o[1]),this.offsetBox&&this.setOffset([this.offsetBox[o[1]=="left"?2:0],this.offsetBox[o[0]=="top"?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(n),this.element.parentElement.style.display="",typeof this.onshow=="function"&&this.onshow(),this.dispatchEvent({type:"show"}),this._tout=setTimeout(function(){t.element.classList.add("visible")},0)}};Ci.prototype.hide=function(){this.getPosition()!=null&&(typeof this.onclose=="function"&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this.element.classList.remove("visible"),this.dispatchEvent({type:"hide"}))};function C1(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var gr=1,_r=2,Jo=3,M1=4,il=5,uc=6378137,w1=6356752314e-3,fc=.0066943799901413165,Fa=484813681109536e-20,q=Math.PI/2,S1=.16666666666666666,O1=.04722222222222222,I1=.022156084656084655,Q=1e-10,me=.017453292519943295,Ni=57.29577951308232,Ft=Math.PI/4,ka=Math.PI*2,ne=3.14159265359,We={};We.greenwich=0;We.lisbon=-9.131906111111;We.paris=2.337229166667;We.bogota=-74.080916666667;We.madrid=-3.687938888889;We.rome=12.452333333333;We.bern=7.439583333333;We.jakarta=106.807719444444;We.ferro=-17.666666666667;We.brussels=4.367975;We.stockholm=18.058277777778;We.athens=23.7163375;We.oslo=10.722916666667;var R1={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},cc=/[\s_\-\/\(\)]/g;function On(n,e){if(n[e])return n[e];for(var t=Object.keys(n),i=e.toLowerCase().replace(cc,""),r=-1,a,o;++r<t.length;)if(a=t[r],o=a.toLowerCase().replace(cc,""),o===i)return n[a]}function nl(n){var e={},t=n.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,h){var u=h.split("=");return u.push(!0),s[u[0].toLowerCase()]=u[1],s},{}),i,r,a,o={proj:"projName",datum:"datumCode",rf:function(s){e.rf=parseFloat(s)},lat_0:function(s){e.lat0=s*me},lat_1:function(s){e.lat1=s*me},lat_2:function(s){e.lat2=s*me},lat_ts:function(s){e.lat_ts=s*me},lon_0:function(s){e.long0=s*me},lon_1:function(s){e.long1=s*me},lon_2:function(s){e.long2=s*me},alpha:function(s){e.alpha=parseFloat(s)*me},gamma:function(s){e.rectified_grid_angle=parseFloat(s)},lonc:function(s){e.longc=s*me},x_0:function(s){e.x0=parseFloat(s)},y_0:function(s){e.y0=parseFloat(s)},k_0:function(s){e.k0=parseFloat(s)},k:function(s){e.k0=parseFloat(s)},a:function(s){e.a=parseFloat(s)},b:function(s){e.b=parseFloat(s)},r_a:function(){e.R_A=!0},zone:function(s){e.zone=parseInt(s,10)},south:function(){e.utmSouth=!0},towgs84:function(s){e.datum_params=s.split(",").map(function(h){return parseFloat(h)})},to_meter:function(s){e.to_meter=parseFloat(s)},units:function(s){e.units=s;var h=On(R1,s);h&&(e.to_meter=h.to_meter)},from_greenwich:function(s){e.from_greenwich=s*me},pm:function(s){var h=On(We,s);e.from_greenwich=(h||parseFloat(s))*me},nadgrids:function(s){s==="@null"?e.datumCode="none":e.nadgrids=s},axis:function(s){var h="ewnsud";s.length===3&&h.indexOf(s.substr(0,1))!==-1&&h.indexOf(s.substr(1,1))!==-1&&h.indexOf(s.substr(2,1))!==-1&&(e.axis=s)},approx:function(){e.approx=!0}};for(i in t)r=t[i],i in o?(a=o[i],typeof a=="function"?a(r):e[a]=r):e[i]=r;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Ga=1,dc=2,pc=3,Qo=4,vc=5,rl=-1,P1=/\s/,L1=/[A-Za-z]/,A1=/[A-Za-z84_]/,ts=/[,\]]/,gc=/[\d\.E\-\+]/;function an(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Ga}an.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==Qo)for(;P1.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case Ga:return this.neutral(n);case dc:return this.keyword(n);case Qo:return this.quoted(n);case vc:return this.afterquote(n);case pc:return this.number(n);case rl:return}};an.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=Qo;return}if(ts.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};an.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Ga;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Ga,this.currentObject=this.stack.pop(),this.currentObject||(this.state=rl);return}};an.prototype.number=function(n){if(gc.test(n)){this.word+=n;return}if(ts.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};an.prototype.quoted=function(n){if(n==='"'){this.state=vc;return}this.word+=n};an.prototype.keyword=function(n){if(A1.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Ga;return}if(ts.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};an.prototype.neutral=function(n){if(L1.test(n)){this.word=n,this.state=dc;return}if(n==='"'){this.word="",this.state=Qo;return}if(gc.test(n)){this.word=n,this.state=pc;return}if(ts.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};an.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===rl)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function b1(n){var e=new an(n);return e.output()}function _c(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var i=e?{}:n,r=t.reduce(function(a,o){return $r(o,a),a},i);e&&(n[e]=r)}function $r(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},$r(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var i;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&$r(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&$r(n[3],e[t]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":n[0]=["name",n[0]],_c(e,t,n);return;default:for(i=-1;++i<n.length;)if(!Array.isArray(n[i]))return $r(n,e[t]);return _c(e,t,n)}}var N1=.017453292519943295;function D1(n,e){var t=e[0],i=e[1];!(t in n)&&i in n&&(n[t]=n[i],e.length===3&&(n[t]=e[2](n[t])))}function on(n){return n*N1}function F1(n){if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var e="",t=0,i=n.AXIS.length;t<i;++t){var r=[n.AXIS[t][0].toLowerCase(),n.AXIS[t][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?e+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?e+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?e+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(n.axis=e)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var a=n.GEOGCS;n.type==="GEOGCS"&&(a=n),a&&(a.DATUM?n.datumCode=a.DATUM.name.toLowerCase():n.datumCode=a.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),(n.datumCode==="new_zealand_geodetic_datum_1949"||n.datumCode==="new_zealand_1949")&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode.slice(-6)==="_ferro"&&(n.datumCode=n.datumCode.slice(0,-6)),n.datumCode.slice(-8)==="_jakarta"&&(n.datumCode=n.datumCode.slice(0,-8)),~n.datumCode.indexOf("belge")&&(n.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(n.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=a.DATUM.SPHEROID.a,n.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(n.datum_params=a.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a);function o(u){var c=n.to_meter||1;return u*c}var s=function(u){return D1(n,u)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",on],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",on],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",on],["lat0","latitude_of_origin",on],["lat0","standard_parallel_1",on],["lat1","standard_parallel_1",on],["lat2","standard_parallel_2",on],["azimuth","Azimuth"],["alpha","azimuth",on],["srsCode","name"]];h.forEach(s),!n.long0&&n.longc&&(n.projName==="Albers_Conic_Equal_Area"||n.projName==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(n.projName==="Stereographic_South_Pole"||n.projName==="Polar Stereographic (variant B)")&&(n.lat0=on(n.lat1>0?90:-90),n.lat_ts=n.lat1)}function yc(n){var e=b1(n),t=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",t]);var r={};return $r(e,r),F1(r),r}function be(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?be[n]=nl(arguments[1]):be[n]=yc(arguments[1]):be[n]=t}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(i){Array.isArray(i)?be.apply(e,i):be(i)});if(typeof n=="string"){if(n in be)return be[n]}else"EPSG"in n?be["EPSG:"+n.EPSG]=n:"ESRI"in n?be["ESRI:"+n.ESRI]=n:"IAU2000"in n?be["IAU2000:"+n.IAU2000]=n:console.log(n);return}}C1(be);function k1(n){return typeof n=="string"}function G1(n){return n in be}var j1=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function B1(n){return j1.some(function(e){return n.indexOf(e)>-1})}var U1=["3857","900913","3785","102113"];function z1(n){var e=On(n,"authority");if(!!e){var t=On(e,"epsg");return t&&U1.indexOf(t)>-1}}function $1(n){var e=On(n,"extension");if(!!e)return On(e,"proj4")}function W1(n){return n[0]==="+"}function X1(n){if(k1(n)){if(G1(n))return be[n];if(B1(n)){var e=yc(n);if(z1(e))return be["EPSG:3857"];var t=$1(e);return t?nl(t):e}if(W1(n))return nl(n)}else return n}function mc(n,e){n=n||{};var t,i;if(!e)return n;for(i in e)t=e[i],t!==void 0&&(n[i]=t);return n}function Di(n,e,t){var i=n*e;return t/Math.sqrt(1-i*i)}function ja(n){return n<0?-1:1}function it(n){return Math.abs(n)<=ne?n:n-ja(n)*ka}function Mi(n,e,t){var i=n*t,r=.5*n;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(q-e))/i}function Ba(n,e){for(var t=.5*n,i,r,a=q-2*Math.atan(e),o=0;o<=15;o++)if(i=n*Math.sin(a),r=q-2*Math.atan(e*Math.pow((1-i)/(1+i),t))-a,a+=r,Math.abs(r)<=1e-10)return a;return-9999}function Y1(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Di(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function q1(n){var e=n.x,t=n.y;if(t*Ni>90&&t*Ni<-90&&e*Ni>180&&e*Ni<-180)return null;var i,r;if(Math.abs(Math.abs(t)-q)<=Q)return null;if(this.sphere)i=this.x0+this.a*this.k0*it(e-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(Ft+.5*t));else{var a=Math.sin(t),o=Mi(this.e,t,a);i=this.x0+this.a*this.k0*it(e-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return n.x=i,n.y=r,n}function V1(n){var e=n.x-this.x0,t=n.y-this.y0,i,r;if(this.sphere)r=q-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var a=Math.exp(-t/(this.a*this.k0));if(r=Ba(this.e,a),r===-9999)return null}return i=it(this.long0+e/(this.a*this.k0)),n.x=i,n.y=r,n}var H1=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],K1={init:Y1,forward:q1,inverse:V1,names:H1};function Z1(){}function Ec(n){return n}var J1=["longlat","identity"],Q1={init:Z1,forward:Ec,inverse:Ec,names:J1},tE=[K1,Q1],es={},is=[];function xc(n,e){var t=is.length;return n.names?(is[t]=n,n.names.forEach(function(i){es[i.toLowerCase()]=t}),this):(console.log(e),!0)}function eE(n){if(!n)return!1;var e=n.toLowerCase();if(typeof es[e]!="undefined"&&is[es[e]])return is[es[e]]}function iE(){tE.forEach(xc)}var nE={start:iE,add:xc,get:eE},Tt={};Tt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Tt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Tt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Tt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Tt.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Tt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Tt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Tt.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Tt.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Tt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Tt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Tt.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Tt.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Tt.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Tt.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Tt.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Tt.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Tt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Tt.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Tt.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Tt.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Tt.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Tt.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Tt.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Tt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Tt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Tt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Tt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Tt.hough={a:6378270,rf:297,ellipseName:"Hough"};Tt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Tt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Tt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Tt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Tt.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Tt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Tt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Tt.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Tt.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Tt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Tt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Tt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var rE=Tt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Tt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function aE(n,e,t,i){var r=n*n,a=e*e,o=(r-a)/r,s=0;i?(n*=1-o*(S1+o*(O1+o*I1)),r=n*n,o=0):s=Math.sqrt(o);var h=(r-a)/a;return{es:o,e:s,ep2:h}}function oE(n,e,t,i,r){if(!n){var a=On(Tt,i);a||(a=rE),n=a.a,e=a.b,t=a.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<Q)&&(r=!0,e=n),{a:n,b:e,rf:t,sphere:r}}var pe={};pe.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};pe.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};pe.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};pe.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};pe.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};pe.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};pe.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};pe.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};pe.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};pe.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};pe.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};pe.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};pe.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};pe.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};pe.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};pe.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};pe.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function sE(n,e,t,i,r,a,o){var s={};return n===void 0||n==="none"?s.datum_type=il:s.datum_type=M1,e&&(s.datum_params=e.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=gr),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=_r,s.datum_params[3]*=Fa,s.datum_params[4]*=Fa,s.datum_params[5]*=Fa,s.datum_params[6]=s.datum_params[6]/1e6+1)),o&&(s.datum_type=Jo,s.grids=o),s.a=t,s.b=i,s.es=r,s.ep2=a,s}var Tc={};function hE(n,e){var t=new DataView(e),i=fE(t),r=cE(t,i);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var a=dE(t,r,i),o={header:r,subgrids:a};return Tc[n]=o,o}function lE(n){if(n===void 0)return null;var e=n.split(",");return e.map(uE)}function uE(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:Tc[n]||null,isNull:!1}}function Wr(n){return n/3600*Math.PI/180}function fE(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function cE(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:al(n,56,56+8).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function al(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function dE(n,e,t){for(var i=176,r=[],a=0;a<e.nSubgrids;a++){var o=vE(n,i,t),s=gE(n,i,o,t),h=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[Wr(o.lowerLongitude),Wr(o.lowerLatitude)],del:[Wr(o.longitudeInterval),Wr(o.latitudeInterval)],lim:[h,u],count:o.gridNodeCount,cvs:pE(s)})}return r}function pE(n){return n.map(function(e){return[Wr(e.longitudeShift),Wr(e.latitudeShift)]})}function vE(n,e,t){return{name:al(n,e+8,e+16).trim(),parent:al(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function gE(n,e,t,i){for(var r=e+176,a=16,o=[],s=0;s<t.gridNodeCount;s++){var h={latitudeShift:n.getFloat32(r+s*a,i),longitudeShift:n.getFloat32(r+s*a+4,i),latitudeAccuracy:n.getFloat32(r+s*a+8,i),longitudeAccuracy:n.getFloat32(r+s*a+12,i)};o.push(h)}return o}function Fi(n,e){if(!(this instanceof Fi))return new Fi(n);e=e||function(u){if(u)throw u};var t=X1(n);if(typeof t!="object"){e(n);return}var i=Fi.projections.get(t.projName);if(!i){e(n);return}if(t.datumCode&&t.datumCode!=="none"){var r=On(pe,t.datumCode);r&&(t.datum_params=t.datum_params||(r.towgs84?r.towgs84.split(","):null),t.ellps=r.ellipse,t.datumName=r.datumName?r.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var a=oE(t.a,t.b,t.rf,t.ellps,t.sphere),o=aE(a.a,a.b,a.rf,t.R_A),s=lE(t.nadgrids),h=t.datum||sE(t.datumCode,t.datum_params,a.a,a.b,o.es,o.ep2,s);mc(this,t),mc(this,i),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=h,this.init(),e(null,this)}Fi.projections=nE;Fi.projections.start();function _E(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===gr?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===_r?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function Cc(n,e,t){var i=n.x,r=n.y,a=n.z?n.z:0,o,s,h,u;if(r<-q&&r>-1.001*q)r=-q;else if(r>q&&r<1.001*q)r=q;else{if(r<-q)return{x:-1/0,y:-1/0,z:n.z};if(r>q)return{x:1/0,y:1/0,z:n.z}}return i>Math.PI&&(i-=2*Math.PI),s=Math.sin(r),u=Math.cos(r),h=s*s,o=t/Math.sqrt(1-e*h),{x:(o+a)*u*Math.cos(i),y:(o+a)*u*Math.sin(i),z:(o*(1-e)+a)*s}}function Mc(n,e,t,i){var r=1e-12,a=r*r,o=30,s,h,u,c,p,g,y,m,x,C,S,I,O,A=n.x,F=n.y,v=n.z?n.z:0,G,B,H;if(s=Math.sqrt(A*A+F*F),h=Math.sqrt(A*A+F*F+v*v),s/t<r){if(G=0,h/t<r)return B=q,H=-i,{x:n.x,y:n.y,z:n.z}}else G=Math.atan2(F,A);u=v/h,c=s/h,p=1/Math.sqrt(1-e*(2-e)*c*c),m=c*(1-e)*p,x=u*p,O=0;do O++,y=t/Math.sqrt(1-e*x*x),H=s*m+v*x-y*(1-e*x*x),g=e*y/(y+H),p=1/Math.sqrt(1-g*(2-g)*c*c),C=c*(1-g)*p,S=u*p,I=S*m-C*x,m=C,x=S;while(I*I>a&&O<o);return B=Math.atan(S/Math.abs(C)),{x:G,y:B,z:H}}function yE(n,e,t){if(e===gr)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===_r){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],h=t[5],u=t[6];return{x:u*(n.x-h*n.y+s*n.z)+i,y:u*(h*n.x+n.y-o*n.z)+r,z:u*(-s*n.x+o*n.y+n.z)+a}}}function mE(n,e,t){if(e===gr)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===_r){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],h=t[5],u=t[6],c=(n.x-i)/u,p=(n.y-r)/u,g=(n.z-a)/u;return{x:c+h*p-s*g,y:-h*c+p+o*g,z:s*c-o*p+g}}}function ns(n){return n===gr||n===_r}function EE(n,e,t){if(_E(n,e)||n.datum_type===il||e.datum_type===il)return t;var i=n.a,r=n.es;if(n.datum_type===Jo){var a=wc(n,!1,t);if(a!==0)return;i=uc,r=fc}var o=e.a,s=e.b,h=e.es;if(e.datum_type===Jo&&(o=uc,s=w1,h=fc),r===h&&i===o&&!ns(n.datum_type)&&!ns(e.datum_type))return t;if(t=Cc(t,r,i),ns(n.datum_type)&&(t=yE(t,n.datum_type,n.datum_params)),ns(e.datum_type)&&(t=mE(t,e.datum_type,e.datum_params)),t=Mc(t,h,o,s),e.datum_type===Jo){var u=wc(e,!0,t);if(u!==0)return}return t}function wc(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var i={x:-t.x,y:t.y},r={x:Number.NaN,y:Number.NaN},a=[],o=0;o<n.grids.length;o++){var s=n.grids[o];if(a.push(s.name),s.isNull){r=i;break}if(s.grid===null){if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1;continue}var h=s.grid.subgrids[0],u=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,c=h.ll[0]-u,p=h.ll[1]-u,g=h.ll[0]+(h.lim[0]-1)*h.del[0]+u,y=h.ll[1]+(h.lim[1]-1)*h.del[1]+u;if(!(p>i.y||c>i.x||y<i.y||g<i.x)&&(r=xE(i,e,h),!isNaN(r.x)))break}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Ni+" "+i.y*Ni+" tried: '"+a+"'"),-1):(t.x=-r.x,t.y=r.y,0)}function xE(n,e,t){var i={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return i;var r={x:n.x,y:n.y};r.x-=t.ll[0],r.y-=t.ll[1],r.x=it(r.x-Math.PI)+Math.PI;var a=Sc(r,t);if(e){if(isNaN(a.x))return i;a.x=r.x-a.x,a.y=r.y-a.y;var o=9,s=1e-12,h,u;do{if(u=Sc(a,t),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:r.x-(u.x+a.x),y:r.y-(u.y+a.y)},a.x+=h.x,a.y+=h.y}while(o--&&Math.abs(h.x)>s&&Math.abs(h.y)>s);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=it(a.x+t.ll[0]),i.y=a.y+t.ll[1]}else isNaN(a.x)||(i.x=n.x+a.x,i.y=n.y+a.y);return i}function Sc(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},i={x:Math.floor(t.x),y:Math.floor(t.y)},r={x:t.x-1*i.x,y:t.y-1*i.y},a={x:Number.NaN,y:Number.NaN},o;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return a;o=i.y*e.lim[0]+i.x;var s={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var h={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var u={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var c={x:e.cvs[o][0],y:e.cvs[o][1]},p=r.x*r.y,g=r.x*(1-r.y),y=(1-r.x)*(1-r.y),m=(1-r.x)*r.y;return a.x=y*s.x+g*h.x+m*c.x+p*u.x,a.y=y*s.y+g*h.y+m*c.y+p*u.y,a}function Oc(n,e,t){var i=t.x,r=t.y,a=t.z||0,o,s,h,u={};for(h=0;h<3;h++)if(!(e&&h===2&&t.z===void 0))switch(h===0?(o=i,"ew".indexOf(n.axis[h])!==-1?s="x":s="y"):h===1?(o=r,"ns".indexOf(n.axis[h])!==-1?s="y":s="x"):(o=a,s="z"),n.axis[h]){case"e":u[s]=o;break;case"w":u[s]=-o;break;case"n":u[s]=o;break;case"s":u[s]=-o;break;case"u":t[s]!==void 0&&(u.z=o);break;case"d":t[s]!==void 0&&(u.z=-o);break;default:return null}return u}function Ic(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function TE(n){Rc(n.x),Rc(n.y)}function Rc(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function CE(n,e){return(n.datum.datum_type===gr||n.datum.datum_type===_r)&&e.datumCode!=="WGS84"||(e.datum.datum_type===gr||e.datum.datum_type===_r)&&n.datumCode!=="WGS84"}function rs(n,e,t,i){var r;if(Array.isArray(t)&&(t=Ic(t)),TE(t),n.datum&&e.datum&&CE(n,e)&&(r=new Fi("WGS84"),t=rs(n,r,t,i),n=r),i&&n.axis!=="enu"&&(t=Oc(n,!1,t)),n.projName==="longlat")t={x:t.x*me,y:t.y*me,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=EE(n.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*Ni,y:t.y*Ni,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),i&&e.axis!=="enu"?Oc(e,!0,t):t}var Pc=Fi("WGS84");function sl(n,e,t,i){var r,a,o;return Array.isArray(t)?(r=rs(n,e,t,i)||{x:NaN,y:NaN},t.length>2?typeof n.name!="undefined"&&n.name==="geocent"||typeof e.name!="undefined"&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(t.splice(3)):[r.x,r.y,t[2]].concat(t.splice(3)):[r.x,r.y].concat(t.splice(2)):[r.x,r.y]):(a=rs(n,e,t,i),o=Object.keys(t),o.length===2||o.forEach(function(s){if(typeof n.name!="undefined"&&n.name==="geocent"||typeof e.name!="undefined"&&e.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;a[s]=t[s]}),a)}function Lc(n){return n instanceof Fi?n:n.oProj?n.oProj:Fi(n)}function fi(n,e,t){n=Lc(n);var i=!1,r;return typeof e=="undefined"?(e=n,n=Pc,i=!0):(typeof e.x!="undefined"||Array.isArray(e))&&(t=e,e=n,n=Pc,i=!0),e=Lc(e),t?sl(n,e,t):(r={forward:function(a,o){return sl(n,e,a,o)},inverse:function(a,o){return sl(e,n,a,o)}},i&&(r.oProj=e),r)}var Ac=6,bc="AJSAJS",Nc="AFAFAF",Xr=65,Xe=73,ci=79,Ua=86,za=90,ME={forward:Dc,inverse:wE,toPoint:Fc};function Dc(n,e){return e=e||5,IE(SE({lat:n[1],lon:n[0]}),e)}function wE(n){var e=ll(jc(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Fc(n){var e=ll(jc(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function hl(n){return n*(Math.PI/180)}function kc(n){return 180*(n/Math.PI)}function SE(n){var e=n.lat,t=n.lon,i=6378137,r=.00669438,a=.9996,o,s,h,u,c,p,g,y=hl(e),m=hl(t),x,C;C=Math.floor((t+180)/6)+1,t===180&&(C=60),e>=56&&e<64&&t>=3&&t<12&&(C=32),e>=72&&e<84&&(t>=0&&t<9?C=31:t>=9&&t<21?C=33:t>=21&&t<33?C=35:t>=33&&t<42&&(C=37)),o=(C-1)*6-180+3,x=hl(o),s=r/(1-r),h=i/Math.sqrt(1-r*Math.sin(y)*Math.sin(y)),u=Math.tan(y)*Math.tan(y),c=s*Math.cos(y)*Math.cos(y),p=Math.cos(y)*(m-x),g=i*((1-r/4-3*r*r/64-5*r*r*r/256)*y-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*y)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*y)-35*r*r*r/3072*Math.sin(6*y));var S=a*h*(p+(1-u+c)*p*p*p/6+(5-18*u+u*u+72*c-58*s)*p*p*p*p*p/120)+5e5,I=a*(g+h*Math.tan(y)*(p*p/2+(5-u+9*c+4*c*c)*p*p*p*p/24+(61-58*u+u*u+600*c-330*s)*p*p*p*p*p*p/720));return e<0&&(I+=1e7),{northing:Math.round(I),easting:Math.round(S),zoneNumber:C,zoneLetter:OE(e)}}function ll(n){var e=n.northing,t=n.easting,i=n.zoneLetter,r=n.zoneNumber;if(r<0||r>60)return null;var a=.9996,o=6378137,s=.00669438,h,u=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),c,p,g,y,m,x,C,S,I,O=t-5e5,A=e;i<"N"&&(A-=1e7),C=(r-1)*6-180+3,h=s/(1-s),x=A/a,S=x/(o*(1-s/4-3*s*s/64-5*s*s*s/256)),I=S+(3*u/2-27*u*u*u/32)*Math.sin(2*S)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*S)+151*u*u*u/96*Math.sin(6*S),c=o/Math.sqrt(1-s*Math.sin(I)*Math.sin(I)),p=Math.tan(I)*Math.tan(I),g=h*Math.cos(I)*Math.cos(I),y=o*(1-s)/Math.pow(1-s*Math.sin(I)*Math.sin(I),1.5),m=O/(c*a);var F=I-c*Math.tan(I)/y*(m*m/2-(5+3*p+10*g-4*g*g-9*h)*m*m*m*m/24+(61+90*p+298*g+45*p*p-252*h-3*g*g)*m*m*m*m*m*m/720);F=kc(F);var v=(m-(1+2*p+g)*m*m*m/6+(5-2*g+28*p-3*g*g+8*h+24*p*p)*m*m*m*m*m/120)/Math.cos(I);v=C+kc(v);var G;if(n.accuracy){var B=ll({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});G={top:B.lat,right:B.lon,bottom:F,left:v}}else G={lat:F,lon:v};return G}function OE(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function IE(n,e){var t="00000"+n.easting,i="00000"+n.northing;return n.zoneNumber+n.zoneLetter+RE(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+i.substr(i.length-5,e)}function RE(n,e,t){var i=Gc(t),r=Math.floor(n/1e5),a=Math.floor(e/1e5)%20;return PE(r,a,i)}function Gc(n){var e=n%Ac;return e===0&&(e=Ac),e}function PE(n,e,t){var i=t-1,r=bc.charCodeAt(i),a=Nc.charCodeAt(i),o=r+n-1,s=a+e,h=!1;o>za&&(o=o-za+Xr-1,h=!0),(o===Xe||r<Xe&&o>Xe||(o>Xe||r<Xe)&&h)&&o++,(o===ci||r<ci&&o>ci||(o>ci||r<ci)&&h)&&(o++,o===Xe&&o++),o>za&&(o=o-za+Xr-1),s>Ua?(s=s-Ua+Xr-1,h=!0):h=!1,(s===Xe||a<Xe&&s>Xe||(s>Xe||a<Xe)&&h)&&s++,(s===ci||a<ci&&s>ci||(s>ci||a<ci)&&h)&&(s++,s===Xe&&s++),s>Ua&&(s=s-Ua+Xr-1);var u=String.fromCharCode(o)+String.fromCharCode(s);return u}function jc(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,i="",r,a=0;!/[A-Z]/.test(r=n.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+n;i+=r,a++}var o=parseInt(i,10);if(a===0||a+3>e)throw"MGRSPoint bad conversion from: "+n;var s=n.charAt(a++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+n;t=n.substring(a,a+=2);for(var h=Gc(o),u=LE(t.charAt(0),h),c=AE(t.charAt(1),h);c<bE(s);)c+=2e6;var p=e-a;if(p%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var g=p/2,y=0,m=0,x,C,S,I,O;return g>0&&(x=1e5/Math.pow(10,g),C=n.substring(a,a+g),y=parseFloat(C)*x,S=n.substring(a+g),m=parseFloat(S)*x),I=y+u,O=m+c,{easting:I,northing:O,zoneLetter:s,zoneNumber:o,accuracy:x}}function LE(n,e){for(var t=bc.charCodeAt(e-1),i=1e5,r=!1;t!==n.charCodeAt(0);){if(t++,t===Xe&&t++,t===ci&&t++,t>za){if(r)throw"Bad character: "+n;t=Xr,r=!0}i+=1e5}return i}function AE(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=Nc.charCodeAt(e-1),i=0,r=!1;t!==n.charCodeAt(0);){if(t++,t===Xe&&t++,t===ci&&t++,t>Ua){if(r)throw"Bad character: "+n;t=Xr,r=!0}i+=1e5}return i}function bE(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function Yr(n,e,t){if(!(this instanceof Yr))return new Yr(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e=="undefined"){var i=n.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Yr.fromMGRS=function(n){return new Yr(Fc(n))};Yr.prototype.toMGRS=function(n){return Dc([this.x,this.y],n)};var NE=1,DE=.25,Bc=.046875,Uc=.01953125,zc=.01068115234375,FE=.75,kE=.46875,GE=.013020833333333334,jE=.007120768229166667,BE=.3645833333333333,UE=.005696614583333333,zE=.3076171875;function $c(n){var e=[];e[0]=NE-n*(DE+n*(Bc+n*(Uc+n*zc))),e[1]=n*(FE-n*(Bc+n*(Uc+n*zc)));var t=n*n;return e[2]=t*(kE-n*(GE+n*jE)),t*=n,e[3]=t*(BE-n*UE),e[4]=t*n*zE,e}function as(n,e,t,i){return t*=e,e*=e,i[0]*n-t*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var $E=20;function Wc(n,e,t){for(var i=1/(1-e),r=n,a=$E;a;--a){var o=Math.sin(r),s=1-e*o*o;if(s=(as(r,o,Math.cos(r),t)-n)*(s*Math.sqrt(s))*i,r-=s,Math.abs(s)<Q)return r}return r}function WE(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=$c(this.es),this.ml0=as(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function XE(n){var e=n.x,t=n.y,i=it(e-this.long0),r,a,o,s=Math.sin(t),h=Math.cos(t);if(this.es){var c=h*i,p=Math.pow(c,2),g=this.ep2*Math.pow(h,2),y=Math.pow(g,2),m=Math.abs(h)>Q?Math.tan(t):0,x=Math.pow(m,2),C=Math.pow(x,2);r=1-this.es*Math.pow(s,2),c=c/Math.sqrt(r);var S=as(t,s,h,this.en);a=this.a*(this.k0*c*(1+p/6*(1-x+g+p/20*(5-18*x+C+14*g-58*x*g+p/42*(61+179*C-C*x-479*x)))))+this.x0,o=this.a*(this.k0*(S-this.ml0+s*i*c/2*(1+p/12*(5-x+9*g+4*y+p/30*(61+C-58*x+270*g-330*x*g+p/56*(1385+543*C-C*x-3111*x))))))+this.y0}else{var u=h*Math.sin(i);if(Math.abs(Math.abs(u)-1)<Q)return 93;if(a=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=h*Math.cos(i)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>Q)return 93;o=0}else o=Math.acos(o);t<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return n.x=a,n.y=o,n}function YE(n){var e,t,i,r,a=(n.x-this.x0)*(1/this.a),o=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,t=Wc(e,this.es,this.en),Math.abs(t)<q){var p=Math.sin(t),g=Math.cos(t),y=Math.abs(g)>Q?Math.tan(t):0,m=this.ep2*Math.pow(g,2),x=Math.pow(m,2),C=Math.pow(y,2),S=Math.pow(C,2);e=1-this.es*Math.pow(p,2);var I=a*Math.sqrt(e)/this.k0,O=Math.pow(I,2);e=e*y,i=t-e*O/(1-this.es)*.5*(1-O/12*(5+3*C-9*m*C+m-4*x-O/30*(61+90*C-252*m*C+45*S+46*m-O/56*(1385+3633*C+4095*S+1574*S*C)))),r=it(this.long0+I*(1-O/6*(1+2*C+m-O/20*(5+28*C+24*S+8*m*C+6*m-O/42*(61+662*C+1320*S+720*S*C))))/g)}else i=q*ja(o),r=0;else{var s=Math.exp(a/this.k0),h=.5*(s-1/s),u=this.lat0+o/this.k0,c=Math.cos(u);e=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(h,2))),i=Math.asin(e),o<0&&(i=-i),h===0&&c===0?r=0:r=it(Math.atan2(h,c)+this.long0)}return n.x=r,n.y=i,n}var qE=["Fast_Transverse_Mercator","Fast Transverse Mercator"],os={init:WE,forward:XE,inverse:YE,names:qE};function Xc(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function ss(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),i=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(i,2))}function VE(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function HE(n){var e=Math.abs(n);return e=VE(e*(1+e/(ss(1,e)+1))),n<0?-e:e}function ul(n,e){for(var t=2*Math.cos(2*e),i=n.length-1,r=n[i],a=0,o;--i>=0;)o=-a+t*r+n[i],a=r,r=o;return e+o*Math.sin(2*e)}function KE(n,e){for(var t=2*Math.cos(e),i=n.length-1,r=n[i],a=0,o;--i>=0;)o=-a+t*r+n[i],a=r,r=o;return Math.sin(e)*o}function ZE(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function Yc(n,e,t){for(var i=Math.sin(e),r=Math.cos(e),a=Xc(t),o=ZE(t),s=2*r*o,h=-2*i*a,u=n.length-1,c=n[u],p=0,g=0,y=0,m,x;--u>=0;)m=g,x=p,g=c,p=y,c=-m+s*g-h*p+n[u],y=-x+h*g+s*p;return s=i*o,h=r*a,[s*c-h*y,s*y+h*c]}function JE(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(os.init.apply(this),this.forward=os.forward,this.inverse=os.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var i=ul(this.cbg,this.lat0);this.Zb=-this.Qn*(i+KE(this.gtu,2*i))}function QE(n){var e=it(n.x-this.long0),t=n.y;t=ul(this.cbg,t);var i=Math.sin(t),r=Math.cos(t),a=Math.sin(e),o=Math.cos(e);t=Math.atan2(i,o*r),e=Math.atan2(a*r,ss(i,r*o)),e=HE(Math.tan(e));var s=Yc(this.gtu,2*t,2*e);t=t+s[0],e=e+s[1];var h,u;return Math.abs(e)<=2.623395162778?(h=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*t+this.Zb)+this.y0):(h=1/0,u=1/0),n.x=h,n.y=u,n}function tx(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var i,r;if(Math.abs(e)<=2.623395162778){var a=Yc(this.utg,2*t,2*e);t=t+a[0],e=e+a[1],e=Math.atan(Xc(e));var o=Math.sin(t),s=Math.cos(t),h=Math.sin(e),u=Math.cos(e);t=Math.atan2(o*u,ss(h,u*s)),e=Math.atan2(h,u*s),i=it(e+this.long0),r=ul(this.cgb,t)}else i=1/0,r=1/0;return n.x=i,n.y=r,n}var ex=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],hs={init:JE,forward:QE,inverse:tx,names:ex};function ix(n,e){if(n===void 0){if(n=Math.floor((it(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var nx="etmerc";function rx(){var n=ix(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*me,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,hs.init.apply(this),this.forward=hs.forward,this.inverse=hs.inverse}var ax=["Universal Transverse Mercator System","utm"],ox={init:rx,names:ax,dependsOn:nx};function fl(n,e){return Math.pow((1-n)/(1+n),e)}var sx=20;function hx(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ft)/(Math.pow(Math.tan(.5*this.lat0+Ft),this.C)*fl(this.e*n,this.ratexp))}function lx(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+Ft),this.C)*fl(this.e*Math.sin(t),this.ratexp))-q,n.x=this.C*e,n}function ux(n){for(var e=1e-14,t=n.x/this.C,i=n.y,r=Math.pow(Math.tan(.5*i+Ft)/this.K,1/this.C),a=sx;a>0&&(i=2*Math.atan(r*fl(this.e*Math.sin(n.y),-.5*this.e))-q,!(Math.abs(i-n.y)<e));--a)n.y=i;return a?(n.x=t,n.y=i,n):null}var fx=["gauss"],cl={init:hx,forward:lx,inverse:ux,names:fx};function cx(){cl.init.apply(this),!!this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function dx(n){var e,t,i,r;return n.x=it(n.x-this.long0),cl.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),i=Math.cos(n.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*i),n.x=r*t*Math.sin(n.x),n.y=r*(this.cosc0*e-this.sinc0*t*i),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function px(n){var e,t,i,r,a;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,a=Math.sqrt(n.x*n.x+n.y*n.y)){var o=2*Math.atan2(a,this.R2);e=Math.sin(o),t=Math.cos(o),r=Math.asin(t*this.sinc0+n.y*e*this.cosc0/a),i=Math.atan2(n.x*e,a*this.cosc0*t-n.y*this.sinc0*e)}else r=this.phic0,i=0;return n.x=i,n.y=r,cl.inverse.apply(this,[n]),n.x=it(n.x+this.long0),n}var vx=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],gx={init:cx,forward:dx,inverse:px,names:vx};function _x(n,e,t){return e*=t,Math.tan(.5*(q+n))*Math.pow((1-e)/(1+e),.5*t)}function yx(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Q&&(this.k0=.5*(1+ja(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Q&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Q&&(this.k0=.5*this.cons*Di(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Mi(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Di(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-q,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function mx(n){var e=n.x,t=n.y,i=Math.sin(t),r=Math.cos(t),a,o,s,h,u,c,p=it(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Q&&Math.abs(t+this.lat0)<=Q?(n.x=NaN,n.y=NaN,n):this.sphere?(a=2*this.k0/(1+this.sinlat0*i+this.coslat0*r*Math.cos(p)),n.x=this.a*a*r*Math.sin(p)+this.x0,n.y=this.a*a*(this.coslat0*i-this.sinlat0*r*Math.cos(p))+this.y0,n):(o=2*Math.atan(this.ssfn_(t,i,this.e))-q,h=Math.cos(o),s=Math.sin(o),Math.abs(this.coslat0)<=Q?(u=Mi(this.e,t*this.con,this.con*i),c=2*this.a*this.k0*u/this.cons,n.x=this.x0+c*Math.sin(e-this.long0),n.y=this.y0-this.con*c*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<Q?(a=2*this.a*this.k0/(1+h*Math.cos(p)),n.y=a*s):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*h*Math.cos(p))),n.y=a*(this.cosX0*s-this.sinX0*h*Math.cos(p))+this.y0),n.x=a*h*Math.sin(p)+this.x0,n))}function Ex(n){n.x-=this.x0,n.y-=this.y0;var e,t,i,r,a,o=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,t=this.lat0,o<=Q?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(s)*this.sinlat0+n.y*Math.sin(s)*this.coslat0/o),Math.abs(this.coslat0)<Q?this.lat0>0?e=it(this.long0+Math.atan2(n.x,-1*n.y)):e=it(this.long0+Math.atan2(n.x,n.y)):e=it(this.long0+Math.atan2(n.x*Math.sin(s),o*this.coslat0*Math.cos(s)-n.y*this.sinlat0*Math.sin(s))),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=Q){if(o<=Q)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,i=o*this.cons/(2*this.a*this.k0),t=this.con*Ba(this.e,i),e=this.con*it(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=Q?a=this.X0:(a=Math.asin(Math.cos(r)*this.sinX0+n.y*Math.sin(r)*this.cosX0/o),e=it(this.long0+Math.atan2(n.x*Math.sin(r),o*this.cosX0*Math.cos(r)-n.y*this.sinX0*Math.sin(r)))),t=-1*Ba(this.e,Math.tan(.5*(q+a)));return n.x=e,n.y=t,n}var xx=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],Tx={init:yx,forward:mx,inverse:Ex,names:xx,ssfn_:_x};function Cx(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,i=this.rf,r=1/i,a=2*r-Math.pow(r,2),o=this.e=Math.sqrt(a);this.R=this.k0*t*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+n/2)),u=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*h+this.alpha*o/2*u}function Mx(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),i=-this.alpha*(e+t)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),a=this.alpha*(n.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(a))),s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(a));return n.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,n.x=this.R*o+this.x0,n}function wx(n){for(var e=n.x-this.x0,t=n.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),s=this.lambda0+o/this.alpha,h=0,u=a,c=-1e3,p=0;Math.abs(u-c)>1e-7;){if(++p>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(h))-Math.PI/2}return n.x=s,n.y=u,n}var Sx=["somerc"],Ox={init:Cx,forward:Mx,inverse:wx,names:Sx},qr=1e-7;function Ix(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.PROJECTION=="object"?Object.keys(n.PROJECTION)[0]:n.PROJECTION;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1}function Rx(){var n,e,t,i,r,a,o,s,h,u,c=0,p,g=0,y=0,m=0,x=0,C=0,S=0;this.no_off=Ix(this),this.no_rot="no_rot"in this;var I=!1;"alpha"in this&&(I=!0);var O=!1;if("rectified_grid_angle"in this&&(O=!0),I&&(S=this.alpha),O&&(c=this.rectified_grid_angle*me),I||O)g=this.longc;else if(y=this.long1,x=this.lat1,m=this.long2,C=this.lat2,Math.abs(x-C)<=qr||(n=Math.abs(x))<=qr||Math.abs(n-q)<=qr||Math.abs(Math.abs(this.lat0)-q)<=qr||Math.abs(Math.abs(C)-q)<=qr)throw new Error;var A=1-this.es;e=Math.sqrt(A),Math.abs(this.lat0)>Q?(s=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*s*s,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/A),this.A=this.B*this.k0*e/n,i=this.B*e/(t*Math.sqrt(n)),r=i*i-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(Mi(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),I||O?(I?(p=Math.asin(Math.sin(S)/i),O||(c=S)):(p=c,S=Math.asin(i*Math.sin(p))),this.lam0=g-Math.asin(.5*(r-1/r)*Math.tan(p))/this.B):(a=Math.pow(Mi(this.e,x,Math.sin(x)),this.B),o=Math.pow(Mi(this.e,C,Math.sin(C)),this.B),r=this.E/a,h=(o-a)/(o+a),u=this.E*this.E,u=(u-o*a)/(u+o*a),n=y-m,n<-Math.pi?m-=ka:n>Math.pi&&(m+=ka),this.lam0=it(.5*(y+m)-Math.atan(u*Math.tan(.5*this.B*(y-m))/h)/this.B),p=Math.atan(2*Math.sin(this.B*it(y-this.lam0))/(r-1/r)),c=S=Math.asin(i*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(Ft-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(Ft+r))}function Px(n){var e={},t,i,r,a,o,s,h,u;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-q)>Q){if(o=this.E/Math.pow(Mi(this.e,n.y,Math.sin(n.y)),this.B),s=1/o,t=.5*(o-s),i=.5*(o+s),a=Math.sin(this.B*n.x),r=(t*this.singam-a*this.cosgam)/i,Math.abs(Math.abs(r)-1)<Q)throw new Error;u=.5*this.ArB*Math.log((1-r)/(1+r)),s=Math.cos(this.B*n.x),Math.abs(s)<qr?h=this.A*n.x:h=this.ArB*Math.atan2(t*this.cosgam+a*this.singam,s)}else u=n.y>0?this.v_pole_n:this.v_pole_s,h=this.ArB*n.y;return this.no_rot?(e.x=h,e.y=u):(h-=this.u_0,e.x=u*this.cosrot+h*this.sinrot,e.y=h*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Lx(n){var e,t,i,r,a,o,s,h={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*t),r=.5*(i-1/i),a=.5*(i+1/i),o=Math.sin(this.BrA*e),s=(o*this.cosgam+r*this.singam)/a,Math.abs(Math.abs(s)-1)<Q)h.x=0,h.y=s<0?-q:q;else{if(h.y=this.E/Math.sqrt((1+s)/(1-s)),h.y=Ba(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h}var Ax=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],bx={init:Rx,forward:Px,inverse:Lx,names:Ax};function Nx(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Q)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),i=Di(this.e,e,t),r=Mi(this.e,this.lat1,e),a=Math.sin(this.lat2),o=Math.cos(this.lat2),s=Di(this.e,a,o),h=Mi(this.e,this.lat2,a),u=Mi(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Q?this.ns=Math.log(i/s)/Math.log(r/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Dx(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=Q&&(t=ja(t)*(q-2*Q));var i=Math.abs(Math.abs(t)-q),r,a;if(i>Q)r=Mi(this.e,t,Math.sin(t)),a=this.a*this.f0*Math.pow(r,this.ns);else{if(i=t*this.ns,i<=0)return null;a=0}var o=this.ns*it(e-this.long0);return n.x=this.k0*(a*Math.sin(o))+this.x0,n.y=this.k0*(this.rh-a*Math.cos(o))+this.y0,n}function Fx(n){var e,t,i,r,a,o=(n.x-this.x0)/this.k0,s=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+s*s),t=1):(e=-Math.sqrt(o*o+s*s),t=-1);var h=0;if(e!==0&&(h=Math.atan2(t*o,t*s)),e!==0||this.ns>0){if(t=1/this.ns,i=Math.pow(e/(this.a*this.f0),t),r=Ba(this.e,i),r===-9999)return null}else r=-q;return a=it(h/this.ns+this.long0),n.x=a,n.y=r,n}var kx=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"],Gx={init:Nx,forward:Dx,inverse:Fx,names:kx};function jx(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Bx(n){var e,t,i,r,a,o,s,h=n.x,u=n.y,c=it(h-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),i=-c*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(i)),a=Math.asin(Math.cos(t)*Math.sin(i)/Math.cos(r)),o=this.n*a,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),n.y=s*Math.cos(o)/1,n.x=s*Math.sin(o)/1,this.czech||(n.y*=-1,n.x*=-1),n}function Ux(n){var e,t,i,r,a,o,s,h,u=n.x;n.x=n.y,n.y=u,this.czech||(n.y*=-1,n.x*=-1),o=Math.sqrt(n.x*n.x+n.y*n.y),a=Math.atan2(n.y,n.x),r=a/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),t=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),n.x=this.long0-t/this.alfa,s=e,h=0;var c=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-n.y)<1e-10&&(h=1),s=n.y,c+=1;while(h===0&&c<15);return c>=15?null:n}var zx=["Krovak","krovak"],$x={init:jx,forward:Bx,inverse:Ux,names:zx};function Ne(n,e,t,i,r){return n*r-e*Math.sin(2*r)+t*Math.sin(4*r)-i*Math.sin(6*r)}function $a(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function Wa(n){return .375*n*(1+.25*n*(1+.46875*n))}function Xa(n){return .05859375*n*n*(1+.75*n)}function Ya(n){return n*n*n*(35/3072)}function Vr(n,e,t){var i=e*t;return n/Math.sqrt(1-i*i)}function Hr(n){return Math.abs(n)<q?n:n-ja(n)*Math.PI}function ls(n,e,t,i,r){var a,o;a=n/e;for(var s=0;s<15;s++)if(o=(n-(e*a-t*Math.sin(2*a)+i*Math.sin(4*a)-r*Math.sin(6*a)))/(e-2*t*Math.cos(2*a)+4*i*Math.cos(4*a)-6*r*Math.cos(6*a)),a+=o,Math.abs(o)<=1e-10)return a;return NaN}function Wx(){this.sphere||(this.e0=$a(this.es),this.e1=Wa(this.es),this.e2=Xa(this.es),this.e3=Ya(this.es),this.ml0=this.a*Ne(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Xx(n){var e,t,i=n.x,r=n.y;if(i=it(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),t=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var a=Math.sin(r),o=Math.cos(r),s=Vr(this.a,this.e,a),h=Math.tan(r)*Math.tan(r),u=i*Math.cos(r),c=u*u,p=this.es*o*o/(1-this.es),g=this.a*Ne(this.e0,this.e1,this.e2,this.e3,r);e=s*u*(1-c*h*(1/6-(8-h+8*p)*c/120)),t=g-this.ml0+s*a/o*c*(.5+(5-h+6*p)*c/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function Yx(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,i,r;if(this.sphere){var a=t+this.lat0;i=Math.asin(Math.sin(a)*Math.cos(e)),r=Math.atan2(Math.tan(e),Math.cos(a))}else{var o=this.ml0/this.a+t,s=ls(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-q)<=Q)return n.x=this.long0,n.y=q,t<0&&(n.y*=-1),n;var h=Vr(this.a,this.e,Math.sin(s)),u=h*h*h/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),p=e*this.a/h,g=p*p;i=s-h*Math.tan(s)/u*p*p*(.5-(1+3*c)*p*p/24),r=p*(1-g*(c/3+(1+3*c)*c*g/15))/Math.cos(s)}return n.x=it(r+this.long0),n.y=Hr(i),n}var qx=["Cassini","Cassini_Soldner","cass"],Vx={init:Wx,forward:Xx,inverse:Yx,names:qx};function In(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var Hx=1,Kx=2,Zx=3,Jx=4;function Qx(){var n=Math.abs(this.lat0);if(Math.abs(n-q)<Q?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<Q?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=In(this.e,1),this.mmf=.5/(1-this.es),this.apa=hT(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=In(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function tT(n){var e,t,i,r,a,o,s,h,u,c,p=n.x,g=n.y;if(p=it(p-this.long0),this.sphere){if(a=Math.sin(g),c=Math.cos(g),i=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+c*i:1+this.sinph0*a+this.cosph0*c*i,t<=Q)return null;t=Math.sqrt(2/t),e=t*c*Math.sin(p),t*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*c*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(g+this.lat0)<Q)return null;t=Ft-g*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(p),t*=i}}else{switch(s=0,h=0,u=0,i=Math.cos(p),r=Math.sin(p),a=Math.sin(g),o=In(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=o/this.qp,h=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*h*i;break;case this.EQUIT:u=1+h*i;break;case this.N_POLE:u=q+g,o=this.qp-o;break;case this.S_POLE:u=g-q,o=this.qp+o;break}if(Math.abs(u)<Q)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?t=this.ymf*u*(this.cosb1*s-this.sinb1*h*i):t=(u=Math.sqrt(2/(1+h*i)))*s*this.ymf,e=this.xmf*u*h*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(u=Math.sqrt(o))*r,t=i*(this.mode===this.S_POLE?u:-u)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function eT(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,i,r,a,o,s,h,u;if(this.sphere){var c=0,p,g=0;if(p=Math.sqrt(e*e+t*t),r=p*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(r),c=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=Q?0:Math.asin(t*g/p),e*=g,t=c*p;break;case this.OBLIQ:r=Math.abs(p)<=Q?this.lat0:Math.asin(c*this.sinph0+t*g*this.cosph0/p),e*=g*this.cosph0,t=(c-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:t=-t,r=q-r;break;case this.S_POLE:r-=q;break}i=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,h=Math.sqrt(e*e+t*t),h<Q)return n.x=this.long0,n.y=this.lat0,n;o=2*Math.asin(.5*h/this.rq),a=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(u=a*this.sinb1+t*o*this.cosb1/h,s=this.qp*u,t=h*this.cosb1*a-t*this.sinb1*o):(u=t*o/h,s=this.qp*u,t=h*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),s=e*e+t*t,!s)return n.x=this.long0,n.y=this.lat0,n;u=1-s/this.qp,this.mode===this.S_POLE&&(u=-u)}i=Math.atan2(e,t),r=lT(Math.asin(u),this.apa)}return n.x=it(this.long0+i),n.y=r,n}var iT=.3333333333333333,nT=.17222222222222222,rT=.10257936507936508,aT=.06388888888888888,oT=.0664021164021164,sT=.016415012942191543;function hT(n){var e,t=[];return t[0]=n*iT,e=n*n,t[0]+=e*nT,t[1]=e*aT,e*=n,t[0]+=e*rT,t[1]+=e*oT,t[2]=e*sT,t}function lT(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var uT=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],fT={init:Qx,forward:tT,inverse:eT,names:uT,S_POLE:Hx,N_POLE:Kx,EQUIT:Zx,OBLIQ:Jx};function Rn(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function cT(){Math.abs(this.lat1+this.lat2)<Q||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Di(this.e3,this.sin_po,this.cos_po),this.qs1=In(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Di(this.e3,this.sin_po,this.cos_po),this.qs2=In(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=In(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Q?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function dT(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var i=In(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,a=this.ns0*it(e-this.long0),o=r*Math.sin(a)+this.x0,s=this.rh-r*Math.cos(a)+this.y0;return n.x=o,n.y=s,n}function pT(n){var e,t,i,r,a,o;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),i=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),i=-1),r=0,e!==0&&(r=Math.atan2(i*n.x,i*n.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(t=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,t)),a=it(r/this.ns0+this.long0),n.x=a,n.y=o,n}function vT(n,e){var t,i,r,a,o,s=Rn(.5*e);if(n<Q)return s;for(var h=n*n,u=1;u<=25;u++)if(t=Math.sin(s),i=Math.cos(s),r=n*t,a=1-r*r,o=.5*a*a/i*(e/(1-h)-t/a+.5/n*Math.log((1-r)/(1+r))),s=s+o,Math.abs(o)<=1e-7)return s;return null}var gT=["Albers_Conic_Equal_Area","Albers","aea"],_T={init:cT,forward:dT,inverse:pT,names:gT,phi1z:vT};function yT(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function mT(n){var e,t,i,r,a,o,s,h,u=n.x,c=n.y;return i=it(u-this.long0),e=Math.sin(c),t=Math.cos(c),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*t*r,a=1,o>0||Math.abs(o)<=Q?(s=this.x0+this.a*a*t*Math.sin(i)/o,h=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*t*r)/o):(s=this.x0+this.infinity_dist*t*Math.sin(i),h=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*r)),n.x=s,n.y=h,n}function ET(n){var e,t,i,r,a,o;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(r=Math.atan2(e,this.rc),t=Math.sin(r),i=Math.cos(r),o=Rn(i*this.sin_p14+n.y*t*this.cos_p14/e),a=Math.atan2(n.x*t,e*this.cos_p14*i-n.y*this.sin_p14*t),a=it(this.long0+a)):(o=this.phic0,a=0),n.x=a,n.y=o,n}var xT=["gnom"],TT={init:yT,forward:mT,inverse:ET,names:xT};function CT(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*q:q;for(var i=Math.asin(.5*e),r,a,o,s,h=0;h<30;h++)if(a=Math.sin(i),o=Math.cos(i),s=n*a,r=Math.pow(1-s*s,2)/(2*o)*(e/(1-n*n)-a/(1-s*s)+.5/n*Math.log((1-s)/(1+s))),i+=r,Math.abs(r)<=1e-10)return i;return NaN}function MT(){this.sphere||(this.k0=Di(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function wT(n){var e=n.x,t=n.y,i,r,a=it(e-this.long0);if(this.sphere)i=this.x0+this.a*a*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var o=In(this.e,Math.sin(t));i=this.x0+this.a*this.k0*a,r=this.y0+this.a*o*.5/this.k0}return n.x=i,n.y=r,n}function ST(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=it(this.long0+n.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=CT(this.e,2*n.y*this.k0/this.a),e=it(this.long0+n.x/(this.a*this.k0))),n.x=e,n.y=t,n}var OT=["cea"],IT={init:MT,forward:wT,inverse:ST,names:OT};function RT(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function PT(n){var e=n.x,t=n.y,i=it(e-this.long0),r=Hr(t-this.lat0);return n.x=this.x0+this.a*i*this.rc,n.y=this.y0+this.a*r,n}function LT(n){var e=n.x,t=n.y;return n.x=it(this.long0+(e-this.x0)/(this.a*this.rc)),n.y=Hr(this.lat0+(t-this.y0)/this.a),n}var AT=["Equirectangular","Equidistant_Cylindrical","eqc"],bT={init:RT,forward:PT,inverse:LT,names:AT},qc=20;function NT(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=$a(this.es),this.e1=Wa(this.es),this.e2=Xa(this.es),this.e3=Ya(this.es),this.ml0=this.a*Ne(this.e0,this.e1,this.e2,this.e3,this.lat0)}function DT(n){var e=n.x,t=n.y,i,r,a,o=it(e-this.long0);if(a=o*Math.sin(t),this.sphere)Math.abs(t)<=Q?(i=this.a*o,r=-1*this.a*this.lat0):(i=this.a*Math.sin(a)/Math.tan(t),r=this.a*(Hr(t-this.lat0)+(1-Math.cos(a))/Math.tan(t)));else if(Math.abs(t)<=Q)i=this.a*o,r=-1*this.ml0;else{var s=Vr(this.a,this.e,Math.sin(t))/Math.tan(t);i=s*Math.sin(a),r=this.a*Ne(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+s*(1-Math.cos(a))}return n.x=i+this.x0,n.y=r+this.y0,n}function FT(n){var e,t,i,r,a,o,s,h,u;if(i=n.x-this.x0,r=n.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=Q)e=it(i/this.a+this.long0),t=0;else{o=this.lat0+r/this.a,s=i*i/this.a/this.a+o*o,h=o;var c;for(a=qc;a;--a)if(c=Math.tan(h),u=-1*(o*(h*c+1)-h-.5*(h*h+s)*c)/((h-o)/c-1),h+=u,Math.abs(u)<=Q){t=h;break}e=it(this.long0+Math.asin(i*Math.tan(h)/this.a)/Math.sin(t))}else if(Math.abs(r+this.ml0)<=Q)t=0,e=it(this.long0+i/this.a);else{o=(this.ml0+r)/this.a,s=i*i/this.a/this.a+o*o,h=o;var p,g,y,m,x;for(a=qc;a;--a)if(x=this.e*Math.sin(h),p=Math.sqrt(1-x*x)*Math.tan(h),g=this.a*Ne(this.e0,this.e1,this.e2,this.e3,h),y=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),m=g/this.a,u=(o*(p*m+1)-m-.5*p*(m*m+s))/(this.es*Math.sin(2*h)*(m*m+s-2*o*m)/(4*p)+(o-m)*(p*y-2/Math.sin(2*h))-y),h-=u,Math.abs(u)<=Q){t=h;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=it(this.long0+Math.asin(i*p/this.a)/Math.sin(t))}return n.x=e,n.y=t,n}var kT=["Polyconic","poly"],GT={init:NT,forward:DT,inverse:FT,names:kT};function jT(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function BT(n){var e,t=n.x,i=n.y,r=i-this.lat0,a=t-this.long0,o=r/Fa*1e-5,s=a,h=1,u=0;for(e=1;e<=10;e++)h=h*o,u=u+this.A[e]*h;var c=u,p=s,g=1,y=0,m,x,C=0,S=0;for(e=1;e<=6;e++)m=g*c-y*p,x=y*c+g*p,g=m,y=x,C=C+this.B_re[e]*g-this.B_im[e]*y,S=S+this.B_im[e]*g+this.B_re[e]*y;return n.x=S*this.a+this.x0,n.y=C*this.a+this.y0,n}function UT(n){var e,t=n.x,i=n.y,r=t-this.x0,a=i-this.y0,o=a/this.a,s=r/this.a,h=1,u=0,c,p,g=0,y=0;for(e=1;e<=6;e++)c=h*o-u*s,p=u*o+h*s,h=c,u=p,g=g+this.C_re[e]*h-this.C_im[e]*u,y=y+this.C_im[e]*h+this.C_re[e]*u;for(var m=0;m<this.iterations;m++){var x=g,C=y,S,I,O=o,A=s;for(e=2;e<=6;e++)S=x*g-C*y,I=C*g+x*y,x=S,C=I,O=O+(e-1)*(this.B_re[e]*x-this.B_im[e]*C),A=A+(e-1)*(this.B_im[e]*x+this.B_re[e]*C);x=1,C=0;var F=this.B_re[1],v=this.B_im[1];for(e=2;e<=6;e++)S=x*g-C*y,I=C*g+x*y,x=S,C=I,F=F+e*(this.B_re[e]*x-this.B_im[e]*C),v=v+e*(this.B_im[e]*x+this.B_re[e]*C);var G=F*F+v*v;g=(O*F+A*v)/G,y=(A*F-O*v)/G}var B=g,H=y,tt=1,et=0;for(e=1;e<=9;e++)tt=tt*B,et=et+this.D[e]*tt;var Z=this.lat0+et*Fa*1e5,ut=this.long0+H;return n.x=ut,n.y=Z,n}var zT=["New_Zealand_Map_Grid","nzmg"],$T={init:jT,forward:BT,inverse:UT,names:zT};function WT(){}function XT(n){var e=n.x,t=n.y,i=it(e-this.long0),r=this.x0+this.a*i,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=r,n.y=a,n}function YT(n){n.x-=this.x0,n.y-=this.y0;var e=it(this.long0+n.x/this.a),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var qT=["Miller_Cylindrical","mill"],VT={init:WT,forward:XT,inverse:YT,names:qT},HT=20;function KT(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=$c(this.es)}function ZT(n){var e,t,i=n.x,r=n.y;if(i=it(i-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var a=this.n*Math.sin(r),o=HT;o;--o){var s=(this.m*r+Math.sin(r)-a)/(this.m+Math.cos(r));if(r-=s,Math.abs(s)<Q)break}e=this.a*this.C_x*i*(this.m+Math.cos(r)),t=this.a*this.C_y*r}else{var h=Math.sin(r),u=Math.cos(r);t=this.a*as(r,h,u,this.en),e=this.a*i*u/Math.sqrt(1-this.es*h*h)}return n.x=e,n.y=t,n}function JT(n){var e,t,i,r;return n.x-=this.x0,i=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=Rn((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Rn(Math.sin(e)/this.n)),i=it(i+this.long0),e=Hr(e)):(e=Wc(n.y/this.a,this.es,this.en),r=Math.abs(e),r<q?(r=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),i=it(t)):r-Q<q&&(i=this.long0)),n.x=i,n.y=e,n}var QT=["Sinusoidal","sinu"],tC={init:KT,forward:ZT,inverse:JT,names:QT};function eC(){}function iC(n){for(var e=n.x,t=n.y,i=it(e-this.long0),r=t,a=Math.PI*Math.sin(t);;){var o=-(r+Math.sin(r)-a)/(1+Math.cos(r));if(r+=o,Math.abs(o)<Q)break}r/=2,Math.PI/2-Math.abs(t)<Q&&(i=0);var s=.900316316158*this.a*i*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return n.x=s,n.y=h,n}function nC(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var i=it(this.long0+n.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var r=Math.asin(t);return n.x=i,n.y=r,n}var rC=["Mollweide","moll"],aC={init:eC,forward:iC,inverse:nC,names:rC};function oC(){Math.abs(this.lat1+this.lat2)<Q||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=$a(this.es),this.e1=Wa(this.es),this.e2=Xa(this.es),this.e3=Ya(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Di(this.e,this.sinphi,this.cosphi),this.ml1=Ne(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Q?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Di(this.e,this.sinphi,this.cosphi),this.ml2=Ne(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ne(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function sC(n){var e=n.x,t=n.y,i;if(this.sphere)i=this.a*(this.g-t);else{var r=Ne(this.e0,this.e1,this.e2,this.e3,t);i=this.a*(this.g-r)}var a=this.ns*it(e-this.long0),o=this.x0+i*Math.sin(a),s=this.y0+this.rh-i*Math.cos(a);return n.x=o,n.y=s,n}function hC(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,i,r;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var a=0;if(t!==0&&(a=Math.atan2(e*n.x,e*n.y)),this.sphere)return r=it(this.long0+a/this.ns),i=Hr(this.g-t/this.a),n.x=r,n.y=i,n;var o=this.g-t/this.a;return i=ls(o,this.e0,this.e1,this.e2,this.e3),r=it(this.long0+a/this.ns),n.x=r,n.y=i,n}var lC=["Equidistant_Conic","eqdc"],uC={init:oC,forward:sC,inverse:hC,names:lC};function fC(){this.R=this.a}function cC(n){var e=n.x,t=n.y,i=it(e-this.long0),r,a;Math.abs(t)<=Q&&(r=this.x0+this.R*i,a=this.y0);var o=Rn(2*Math.abs(t/Math.PI));(Math.abs(i)<=Q||Math.abs(Math.abs(t)-q)<=Q)&&(r=this.x0,t>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*o):a=this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/i-i/Math.PI),h=s*s,u=Math.sin(o),c=Math.cos(o),p=c/(u+c-1),g=p*p,y=p*(2/u-1),m=y*y,x=Math.PI*this.R*(s*(p-m)+Math.sqrt(h*(p-m)*(p-m)-(m+h)*(g-m)))/(m+h);i<0&&(x=-x),r=this.x0+x;var C=h+p;return x=Math.PI*this.R*(y*C-s*Math.sqrt((m+h)*(h+1)-C*C))/(m+h),t>=0?a=this.y0+x:a=this.y0-x,n.x=r,n.y=a,n}function dC(n){var e,t,i,r,a,o,s,h,u,c,p,g,y;return n.x-=this.x0,n.y-=this.y0,p=Math.PI*this.R,i=n.x/p,r=n.y/p,a=i*i+r*r,o=-Math.abs(r)*(1+a),s=o-2*r*r+i*i,h=-2*o+1+2*r*r+a*a,y=r*r/h+(2*s*s*s/h/h/h-9*o*s/h/h)/27,u=(o-s*s/3/h)/h,c=2*Math.sqrt(-u/3),p=3*y/u/c,Math.abs(p)>1&&(p>=0?p=1:p=-1),g=Math.acos(p)/3,n.y>=0?t=(-c*Math.cos(g+Math.PI/3)-s/3/h)*Math.PI:t=-(-c*Math.cos(g+Math.PI/3)-s/3/h)*Math.PI,Math.abs(i)<Q?e=this.long0:e=it(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(i*i-r*r)+a*a))/2/i),n.x=e,n.y=t,n}var pC=["Van_der_Grinten_I","VanDerGrinten","vandg"],vC={init:fC,forward:cC,inverse:dC,names:pC};function gC(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function _C(n){var e=n.x,t=n.y,i=Math.sin(n.y),r=Math.cos(n.y),a=it(e-this.long0),o,s,h,u,c,p,g,y,m,x,C,S,I,O,A,F,v,G,B,H,tt,et,Z;return this.sphere?Math.abs(this.sin_p12-1)<=Q?(n.x=this.x0+this.a*(q-t)*Math.sin(a),n.y=this.y0-this.a*(q-t)*Math.cos(a),n):Math.abs(this.sin_p12+1)<=Q?(n.x=this.x0+this.a*(q+t)*Math.sin(a),n.y=this.y0+this.a*(q+t)*Math.cos(a),n):(G=this.sin_p12*i+this.cos_p12*r*Math.cos(a),F=Math.acos(G),v=F?F/Math.sin(F):1,n.x=this.x0+this.a*v*r*Math.sin(a),n.y=this.y0+this.a*v*(this.cos_p12*i-this.sin_p12*r*Math.cos(a)),n):(o=$a(this.es),s=Wa(this.es),h=Xa(this.es),u=Ya(this.es),Math.abs(this.sin_p12-1)<=Q?(c=this.a*Ne(o,s,h,u,q),p=this.a*Ne(o,s,h,u,t),n.x=this.x0+(c-p)*Math.sin(a),n.y=this.y0-(c-p)*Math.cos(a),n):Math.abs(this.sin_p12+1)<=Q?(c=this.a*Ne(o,s,h,u,q),p=this.a*Ne(o,s,h,u,t),n.x=this.x0+(c+p)*Math.sin(a),n.y=this.y0+(c+p)*Math.cos(a),n):(g=i/r,y=Vr(this.a,this.e,this.sin_p12),m=Vr(this.a,this.e,i),x=Math.atan((1-this.es)*g+this.es*y*this.sin_p12/(m*r)),C=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(x)-this.sin_p12*Math.cos(a)),C===0?B=Math.asin(this.cos_p12*Math.sin(x)-this.sin_p12*Math.cos(x)):Math.abs(Math.abs(C)-Math.PI)<=Q?B=-Math.asin(this.cos_p12*Math.sin(x)-this.sin_p12*Math.cos(x)):B=Math.asin(Math.sin(a)*Math.cos(x)/Math.sin(C)),S=this.e*this.sin_p12/Math.sqrt(1-this.es),I=this.e*this.cos_p12*Math.cos(C)/Math.sqrt(1-this.es),O=S*I,A=I*I,H=B*B,tt=H*B,et=tt*B,Z=et*B,F=y*B*(1-H*A*(1-A)/6+tt/8*O*(1-2*A)+et/120*(A*(4-7*A)-3*S*S*(1-7*A))-Z/48*O),n.x=this.x0+F*Math.sin(C),n.y=this.y0+F*Math.cos(C),n))}function yC(n){n.x-=this.x0,n.y-=this.y0;var e,t,i,r,a,o,s,h,u,c,p,g,y,m,x,C,S,I,O,A,F,v,G,B;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*q*this.a?void 0:(t=e/this.a,i=Math.sin(t),r=Math.cos(t),a=this.long0,Math.abs(e)<=Q?o=this.lat0:(o=Rn(r*this.sin_p12+n.y*i*this.cos_p12/e),s=Math.abs(this.lat0)-q,Math.abs(s)<=Q?this.lat0>=0?a=it(this.long0+Math.atan2(n.x,-n.y)):a=it(this.long0-Math.atan2(-n.x,n.y)):a=it(this.long0+Math.atan2(n.x*i,e*this.cos_p12*r-n.y*this.sin_p12*i))),n.x=a,n.y=o,n)):(h=$a(this.es),u=Wa(this.es),c=Xa(this.es),p=Ya(this.es),Math.abs(this.sin_p12-1)<=Q?(g=this.a*Ne(h,u,c,p,q),e=Math.sqrt(n.x*n.x+n.y*n.y),y=g-e,o=ls(y/this.a,h,u,c,p),a=it(this.long0+Math.atan2(n.x,-1*n.y)),n.x=a,n.y=o,n):Math.abs(this.sin_p12+1)<=Q?(g=this.a*Ne(h,u,c,p,q),e=Math.sqrt(n.x*n.x+n.y*n.y),y=e-g,o=ls(y/this.a,h,u,c,p),a=it(this.long0+Math.atan2(n.x,n.y)),n.x=a,n.y=o,n):(e=Math.sqrt(n.x*n.x+n.y*n.y),C=Math.atan2(n.x,n.y),m=Vr(this.a,this.e,this.sin_p12),S=Math.cos(C),I=this.e*this.cos_p12*S,O=-I*I/(1-this.es),A=3*this.es*(1-O)*this.sin_p12*this.cos_p12*S/(1-this.es),F=e/m,v=F-O*(1+O)*Math.pow(F,3)/6-A*(1+3*O)*Math.pow(F,4)/24,G=1-O*v*v/2-F*v*v*v/6,x=Math.asin(this.sin_p12*Math.cos(v)+this.cos_p12*Math.sin(v)*S),a=it(this.long0+Math.asin(Math.sin(C)*Math.sin(v)/Math.cos(x))),B=Math.sin(x),o=Math.atan2((B-this.es*G*this.sin_p12)*Math.tan(x),B*(1-this.es)),n.x=a,n.y=o,n))}var mC=["Azimuthal_Equidistant","aeqd"],EC={init:gC,forward:_C,inverse:yC,names:mC};function xC(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function TC(n){var e,t,i,r,a,o,s,h,u=n.x,c=n.y;return i=it(u-this.long0),e=Math.sin(c),t=Math.cos(c),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*t*r,a=1,(o>0||Math.abs(o)<=Q)&&(s=this.a*a*t*Math.sin(i),h=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*t*r)),n.x=s,n.y=h,n}function CC(n){var e,t,i,r,a,o,s;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=Rn(e/this.a),i=Math.sin(t),r=Math.cos(t),o=this.long0,Math.abs(e)<=Q?(s=this.lat0,n.x=o,n.y=s,n):(s=Rn(r*this.sin_p14+n.y*i*this.cos_p14/e),a=Math.abs(this.lat0)-q,Math.abs(a)<=Q?(this.lat0>=0?o=it(this.long0+Math.atan2(n.x,-n.y)):o=it(this.long0-Math.atan2(-n.x,n.y)),n.x=o,n.y=s,n):(o=it(this.long0+Math.atan2(n.x*i,e*this.cos_p14*r-n.y*this.sin_p14*i)),n.x=o,n.y=s,n))}var MC=["ortho"],wC={init:xC,forward:TC,inverse:CC,names:MC},Jt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},kt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function SC(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=q-Ft/2?this.face=Jt.TOP:this.lat0<=-(q-Ft/2)?this.face=Jt.BOTTOM:Math.abs(this.long0)<=Ft?this.face=Jt.FRONT:Math.abs(this.long0)<=q+Ft?this.face=this.long0>0?Jt.RIGHT:Jt.LEFT:this.face=Jt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function OC(n){var e={x:0,y:0},t,i,r,a,o,s,h={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,i=n.x,this.face===Jt.TOP)a=q-t,i>=Ft&&i<=q+Ft?(h.value=kt.AREA_0,r=i-q):i>q+Ft||i<=-(q+Ft)?(h.value=kt.AREA_1,r=i>0?i-ne:i+ne):i>-(q+Ft)&&i<=-Ft?(h.value=kt.AREA_2,r=i+q):(h.value=kt.AREA_3,r=i);else if(this.face===Jt.BOTTOM)a=q+t,i>=Ft&&i<=q+Ft?(h.value=kt.AREA_0,r=-i+q):i<Ft&&i>=-Ft?(h.value=kt.AREA_1,r=-i):i<-Ft&&i>=-(q+Ft)?(h.value=kt.AREA_2,r=-i-q):(h.value=kt.AREA_3,r=i>0?-i+ne:-i-ne);else{var u,c,p,g,y,m,x;this.face===Jt.RIGHT?i=Kr(i,+q):this.face===Jt.BACK?i=Kr(i,+ne):this.face===Jt.LEFT&&(i=Kr(i,-q)),g=Math.sin(t),y=Math.cos(t),m=Math.sin(i),x=Math.cos(i),u=y*x,c=y*m,p=g,this.face===Jt.FRONT?(a=Math.acos(u),r=us(a,p,c,h)):this.face===Jt.RIGHT?(a=Math.acos(c),r=us(a,p,-u,h)):this.face===Jt.BACK?(a=Math.acos(-u),r=us(a,p,-c,h)):this.face===Jt.LEFT?(a=Math.acos(-c),r=us(a,p,u,h)):(a=r=0,h.value=kt.AREA_0)}return s=Math.atan(12/ne*(r+Math.acos(Math.sin(r)*Math.cos(Ft))-q)),o=Math.sqrt((1-Math.cos(a))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(r))))),h.value===kt.AREA_1?s+=q:h.value===kt.AREA_2?s+=ne:h.value===kt.AREA_3&&(s+=1.5*ne),e.x=o*Math.cos(s),e.y=o*Math.sin(s),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function IC(n){var e={lam:0,phi:0},t,i,r,a,o,s,h,u,c,p={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,i=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?p.value=kt.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(p.value=kt.AREA_1,t-=q):n.x<0&&-n.x>=Math.abs(n.y)?(p.value=kt.AREA_2,t=t<0?t+ne:t-ne):(p.value=kt.AREA_3,t+=q),c=ne/12*Math.tan(t),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),s=Math.atan(o),r=Math.cos(t),a=Math.tan(i),h=1-r*r*a*a*(1-Math.cos(Math.atan(1/Math.cos(s)))),h<-1?h=-1:h>1&&(h=1),this.face===Jt.TOP)u=Math.acos(h),e.phi=q-u,p.value===kt.AREA_0?e.lam=s+q:p.value===kt.AREA_1?e.lam=s<0?s+ne:s-ne:p.value===kt.AREA_2?e.lam=s-q:e.lam=s;else if(this.face===Jt.BOTTOM)u=Math.acos(h),e.phi=u-q,p.value===kt.AREA_0?e.lam=-s+q:p.value===kt.AREA_1?e.lam=-s:p.value===kt.AREA_2?e.lam=-s-q:e.lam=s<0?-s-ne:-s+ne;else{var g,y,m;g=h,c=g*g,c>=1?m=0:m=Math.sqrt(1-c)*Math.sin(s),c+=m*m,c>=1?y=0:y=Math.sqrt(1-c),p.value===kt.AREA_1?(c=y,y=-m,m=c):p.value===kt.AREA_2?(y=-y,m=-m):p.value===kt.AREA_3&&(c=y,y=m,m=-c),this.face===Jt.RIGHT?(c=g,g=-y,y=c):this.face===Jt.BACK?(g=-g,y=-y):this.face===Jt.LEFT&&(c=g,g=y,y=-c),e.phi=Math.acos(-m)-q,e.lam=Math.atan2(y,g),this.face===Jt.RIGHT?e.lam=Kr(e.lam,-q):this.face===Jt.BACK?e.lam=Kr(e.lam,-ne):this.face===Jt.LEFT&&(e.lam=Kr(e.lam,+q))}if(this.es!==0){var x,C,S;x=e.phi<0?1:0,C=Math.tan(e.phi),S=this.b/Math.sqrt(C*C+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-S*S)/(this.one_minus_f*S)),x&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function us(n,e,t,i){var r;return n<Q?(i.value=kt.AREA_0,r=0):(r=Math.atan2(e,t),Math.abs(r)<=Ft?i.value=kt.AREA_0:r>Ft&&r<=q+Ft?(i.value=kt.AREA_1,r-=q):r>q+Ft||r<=-(q+Ft)?(i.value=kt.AREA_2,r=r>=0?r-ne:r+ne):(i.value=kt.AREA_3,r+=q)),r}function Kr(n,e){var t=n+e;return t<-ne?t+=ka:t>+ne&&(t-=ka),t}var RC=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],PC={init:SC,forward:OC,inverse:IC,names:RC},dl=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],qa=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Vc=.8487,Hc=1.3523,Kc=Ni/5,LC=1/Kc,Zr=18,fs=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},AC=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function bC(n,e,t,i){for(var r=e;i;--i){var a=n(r);if(r-=a,Math.abs(a)<t)break}return r}function NC(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function DC(n){var e=it(n.x-this.long0),t=Math.abs(n.y),i=Math.floor(t*Kc);i<0?i=0:i>=Zr&&(i=Zr-1),t=Ni*(t-LC*i);var r={x:fs(dl[i],t)*e,y:fs(qa[i],t)};return n.y<0&&(r.y=-r.y),r.x=r.x*this.a*Vc+this.x0,r.y=r.y*this.a*Hc+this.y0,r}function FC(n){var e={x:(n.x-this.x0)/(this.a*Vc),y:Math.abs(n.y-this.y0)/(this.a*Hc)};if(e.y>=1)e.x/=dl[Zr][0],e.y=n.y<0?-q:q;else{var t=Math.floor(e.y*Zr);for(t<0?t=0:t>=Zr&&(t=Zr-1);;)if(qa[t][0]>e.y)--t;else if(qa[t+1][0]<=e.y)++t;else break;var i=qa[t],r=5*(e.y-i[0])/(qa[t+1][0]-i[0]);r=bC(function(a){return(fs(i,a)-e.y)/AC(i,a)},r,Q,100),e.x/=fs(dl[t],r),e.y=(5*t+r)*me,n.y<0&&(e.y=-e.y)}return e.x=it(e.x+this.long0),e}var kC=["Robinson","robin"],GC={init:NC,forward:DC,inverse:FC,names:kC};function jC(){this.name="geocent"}function BC(n){var e=Cc(n,this.es,this.a);return e}function UC(n){var e=Mc(n,this.es,this.a,this.b);return e}var zC=["Geocentric","geocentric","geocent","Geocent"],$C={init:jC,forward:BC,inverse:UC,names:zC},we={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Va={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function WC(){if(Object.keys(Va).forEach(function(t){if(typeof this[t]=="undefined")this[t]=Va[t].def;else{if(Va[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Va[t].num&&(this[t]=parseFloat(this[t]))}Va[t].degrees&&(this[t]=this[t]*me)}.bind(this)),Math.abs(Math.abs(this.lat0)-q)<Q?this.mode=this.lat0<0?we.S_POLE:we.N_POLE:Math.abs(this.lat0)<Q?this.mode=we.EQUIT:(this.mode=we.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function XC(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),i=Math.cos(n.x),r,a;switch(this.mode){case we.OBLIQ:a=this.sinph0*e+this.cosph0*t*i;break;case we.EQUIT:a=t*i;break;case we.S_POLE:a=-e;break;case we.N_POLE:a=e;break}switch(a=this.pn1/(this.p-a),r=a*t*Math.sin(n.x),this.mode){case we.OBLIQ:a*=this.cosph0*e-this.sinph0*t*i;break;case we.EQUIT:a*=e;break;case we.N_POLE:a*=-(t*i);break;case we.S_POLE:a*=t*i;break}var o,s;return o=a*this.cg+r*this.sg,s=1/(o*this.sw*this.h1+this.cw),r=(r*this.cg-a*this.sg)*this.cw*s,a=o*s,n.x=r*this.a,n.y=a*this.a,n}function YC(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,i,r;r=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*r,i=this.pn1*n.y*this.cw*r,n.x=t*this.cg+i*this.sg,n.y=i*this.cg-t*this.sg;var a=ss(n.x,n.y);if(Math.abs(a)<Q)e.x=0,e.y=n.y;else{var o,s;switch(s=1-a*a*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/a+a/this.pn1),o=Math.sqrt(1-s*s),this.mode){case we.OBLIQ:e.y=Math.asin(o*this.sinph0+n.y*s*this.cosph0/a),n.y=(o-this.sinph0*Math.sin(e.y))*a,n.x*=s*this.cosph0;break;case we.EQUIT:e.y=Math.asin(n.y*s/a),n.y=o*a,n.x*=s;break;case we.N_POLE:e.y=Math.asin(o),n.y=-n.y;break;case we.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var qC=["Tilted_Perspective","tpers"],VC={init:WC,forward:XC,inverse:YC,names:qC};function HC(n){n.Proj.projections.add(os),n.Proj.projections.add(hs),n.Proj.projections.add(ox),n.Proj.projections.add(gx),n.Proj.projections.add(Tx),n.Proj.projections.add(Ox),n.Proj.projections.add(bx),n.Proj.projections.add(Gx),n.Proj.projections.add($x),n.Proj.projections.add(Vx),n.Proj.projections.add(fT),n.Proj.projections.add(_T),n.Proj.projections.add(TT),n.Proj.projections.add(IT),n.Proj.projections.add(bT),n.Proj.projections.add(GT),n.Proj.projections.add($T),n.Proj.projections.add(VT),n.Proj.projections.add(tC),n.Proj.projections.add(aC),n.Proj.projections.add(uC),n.Proj.projections.add(vC),n.Proj.projections.add(EC),n.Proj.projections.add(wC),n.Proj.projections.add(PC),n.Proj.projections.add(GC),n.Proj.projections.add($C),n.Proj.projections.add(VC)}fi.defaultDatum="WGS84";fi.Proj=Fi;fi.WGS84=new fi.Proj("WGS84");fi.Point=Yr;fi.toPoint=Ic;fi.defs=be;fi.nadgrid=hE;fi.transform=rs;fi.mgrs=ME;fi.version="__VERSION__";HC(fi);var Zc={exports:{}};/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */(function(n){(function(e,t){n.exports=e.document?t(e,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return t(i)}})(typeof window!="undefined"?window:Kf,function(e,t){var i=[],r=Object.getPrototypeOf,a=i.slice,o=i.flat?function(l){return i.flat.call(l)}:function(l){return i.concat.apply([],l)},s=i.push,h=i.indexOf,u={},c=u.toString,p=u.hasOwnProperty,g=p.toString,y=g.call(Object),m={},x=function(f){return typeof f=="function"&&typeof f.nodeType!="number"&&typeof f.item!="function"},C=function(f){return f!=null&&f===f.window},S=e.document,I={type:!0,src:!0,nonce:!0,noModule:!0};function O(l,f,d){d=d||S;var _,E,T=d.createElement("script");if(T.text=l,f)for(_ in I)E=f[_]||f.getAttribute&&f.getAttribute(_),E&&T.setAttribute(_,E);d.head.appendChild(T).parentNode.removeChild(T)}function A(l){return l==null?l+"":typeof l=="object"||typeof l=="function"?u[c.call(l)]||"object":typeof l}var F="3.6.0",v=function(l,f){return new v.fn.init(l,f)};v.fn=v.prototype={jquery:F,constructor:v,length:0,toArray:function(){return a.call(this)},get:function(l){return l==null?a.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var f=v.merge(this.constructor(),l);return f.prevObject=this,f},each:function(l){return v.each(this,l)},map:function(l){return this.pushStack(v.map(this,function(f,d){return l.call(f,d,f)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,function(l,f){return(f+1)%2}))},odd:function(){return this.pushStack(v.grep(this,function(l,f){return f%2}))},eq:function(l){var f=this.length,d=+l+(l<0?f:0);return this.pushStack(d>=0&&d<f?[this[d]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice},v.extend=v.fn.extend=function(){var l,f,d,_,E,T,M=arguments[0]||{},P=1,L=arguments.length,N=!1;for(typeof M=="boolean"&&(N=M,M=arguments[P]||{},P++),typeof M!="object"&&!x(M)&&(M={}),P===L&&(M=this,P--);P<L;P++)if((l=arguments[P])!=null)for(f in l)_=l[f],!(f==="__proto__"||M===_)&&(N&&_&&(v.isPlainObject(_)||(E=Array.isArray(_)))?(d=M[f],E&&!Array.isArray(d)?T=[]:!E&&!v.isPlainObject(d)?T={}:T=d,E=!1,M[f]=v.extend(N,T,_)):_!==void 0&&(M[f]=_));return M},v.extend({expando:"jQuery"+(F+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var f,d;return!l||c.call(l)!=="[object Object]"?!1:(f=r(l),f?(d=p.call(f,"constructor")&&f.constructor,typeof d=="function"&&g.call(d)===y):!0)},isEmptyObject:function(l){var f;for(f in l)return!1;return!0},globalEval:function(l,f,d){O(l,{nonce:f&&f.nonce},d)},each:function(l,f){var d,_=0;if(G(l))for(d=l.length;_<d&&f.call(l[_],_,l[_])!==!1;_++);else for(_ in l)if(f.call(l[_],_,l[_])===!1)break;return l},makeArray:function(l,f){var d=f||[];return l!=null&&(G(Object(l))?v.merge(d,typeof l=="string"?[l]:l):s.call(d,l)),d},inArray:function(l,f,d){return f==null?-1:h.call(f,l,d)},merge:function(l,f){for(var d=+f.length,_=0,E=l.length;_<d;_++)l[E++]=f[_];return l.length=E,l},grep:function(l,f,d){for(var _,E=[],T=0,M=l.length,P=!d;T<M;T++)_=!f(l[T],T),_!==P&&E.push(l[T]);return E},map:function(l,f,d){var _,E,T=0,M=[];if(G(l))for(_=l.length;T<_;T++)E=f(l[T],T,d),E!=null&&M.push(E);else for(T in l)E=f(l[T],T,d),E!=null&&M.push(E);return o(M)},guid:1,support:m}),typeof Symbol=="function"&&(v.fn[Symbol.iterator]=i[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,f){u["[object "+f+"]"]=f.toLowerCase()});function G(l){var f=!!l&&"length"in l&&l.length,d=A(l);return x(l)||C(l)?!1:d==="array"||f===0||typeof f=="number"&&f>0&&f-1 in l}var B=function(l){var f,d,_,E,T,M,P,L,N,j,X,k,U,nt,xt,rt,he,ae,qe,jt="sizzle"+1*new Date,yt=l.document,Ge=0,At=0,Ht=ro(),oa=ro(),eo=ro(),Ve=ro(),Un=function(w,R){return w===R&&(X=!0),0},zn={}.hasOwnProperty,je=[],fn=je.pop,ai=je.push,cn=je.push,bl=je.slice,$n=function(w,R){for(var b=0,z=w.length;b<z;b++)if(w[b]===R)return b;return-1},Ms="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Dt="[\\x20\\t\\r\\n\\f]",Wn="(?:\\\\[\\da-fA-F]{1,6}"+Dt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Nl="\\["+Dt+"*("+Wn+")(?:"+Dt+"*([*^$|!~]?=)"+Dt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Wn+"))|)"+Dt+"*\\]",ws=":("+Wn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Nl+")*)|.*)\\)|)",Md=new RegExp(Dt+"+","g"),io=new RegExp("^"+Dt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Dt+"+$","g"),wd=new RegExp("^"+Dt+"*,"+Dt+"*"),Dl=new RegExp("^"+Dt+"*([>+~]|"+Dt+")"+Dt+"*"),Sd=new RegExp(Dt+"|>"),Od=new RegExp(ws),Id=new RegExp("^"+Wn+"$"),no={ID:new RegExp("^#("+Wn+")"),CLASS:new RegExp("^\\.("+Wn+")"),TAG:new RegExp("^("+Wn+"|[*])"),ATTR:new RegExp("^"+Nl),PSEUDO:new RegExp("^"+ws),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Dt+"*(even|odd|(([+-]|)(\\d*)n|)"+Dt+"*(?:([+-]|)"+Dt+"*(\\d+)|))"+Dt+"*\\)|)","i"),bool:new RegExp("^(?:"+Ms+")$","i"),needsContext:new RegExp("^"+Dt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Dt+"*((?:-\\d)?\\d*)"+Dt+"*\\)|)(?=[^-]|$)","i")},Rd=/HTML$/i,Pd=/^(?:input|select|textarea|button)$/i,Ld=/^h\d$/i,sa=/^[^{]+\{\s*\[native \w/,Ad=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ss=/[+~]/,zi=new RegExp("\\\\[\\da-fA-F]{1,6}"+Dt+"?|\\\\([^\\r\\n\\f])","g"),$i=function(w,R){var b="0x"+w.slice(1)-65536;return R||(b<0?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,b&1023|56320))},Fl=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,kl=function(w,R){return R?w==="\0"?"\uFFFD":w.slice(0,-1)+"\\"+w.charCodeAt(w.length-1).toString(16)+" ":"\\"+w},Gl=function(){k()},bd=oo(function(w){return w.disabled===!0&&w.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{cn.apply(je=bl.call(yt.childNodes),yt.childNodes),je[yt.childNodes.length].nodeType}catch{cn={apply:je.length?function(R,b){ai.apply(R,bl.call(b))}:function(R,b){for(var z=R.length,D=0;R[z++]=b[D++];);R.length=z-1}}}function Bt(w,R,b,z){var D,$,Y,K,J,ft,ht,pt=R&&R.ownerDocument,wt=R?R.nodeType:9;if(b=b||[],typeof w!="string"||!w||wt!==1&&wt!==9&&wt!==11)return b;if(!z&&(k(R),R=R||U,xt)){if(wt!==11&&(J=Ad.exec(w)))if(D=J[1]){if(wt===9)if(Y=R.getElementById(D)){if(Y.id===D)return b.push(Y),b}else return b;else if(pt&&(Y=pt.getElementById(D))&&qe(R,Y)&&Y.id===D)return b.push(Y),b}else{if(J[2])return cn.apply(b,R.getElementsByTagName(w)),b;if((D=J[3])&&d.getElementsByClassName&&R.getElementsByClassName)return cn.apply(b,R.getElementsByClassName(D)),b}if(d.qsa&&!Ve[w+" "]&&(!rt||!rt.test(w))&&(wt!==1||R.nodeName.toLowerCase()!=="object")){if(ht=w,pt=R,wt===1&&(Sd.test(w)||Dl.test(w))){for(pt=Ss.test(w)&&Is(R.parentNode)||R,(pt!==R||!d.scope)&&((K=R.getAttribute("id"))?K=K.replace(Fl,kl):R.setAttribute("id",K=jt)),ft=M(w),$=ft.length;$--;)ft[$]=(K?"#"+K:":scope")+" "+ao(ft[$]);ht=ft.join(",")}try{return cn.apply(b,pt.querySelectorAll(ht)),b}catch{Ve(w,!0)}finally{K===jt&&R.removeAttribute("id")}}}return L(w.replace(io,"$1"),R,b,z)}function ro(){var w=[];function R(b,z){return w.push(b+" ")>_.cacheLength&&delete R[w.shift()],R[b+" "]=z}return R}function gi(w){return w[jt]=!0,w}function _i(w){var R=U.createElement("fieldset");try{return!!w(R)}catch{return!1}finally{R.parentNode&&R.parentNode.removeChild(R),R=null}}function Os(w,R){for(var b=w.split("|"),z=b.length;z--;)_.attrHandle[b[z]]=R}function jl(w,R){var b=R&&w,z=b&&w.nodeType===1&&R.nodeType===1&&w.sourceIndex-R.sourceIndex;if(z)return z;if(b){for(;b=b.nextSibling;)if(b===R)return-1}return w?1:-1}function Nd(w){return function(R){var b=R.nodeName.toLowerCase();return b==="input"&&R.type===w}}function Dd(w){return function(R){var b=R.nodeName.toLowerCase();return(b==="input"||b==="button")&&R.type===w}}function Bl(w){return function(R){return"form"in R?R.parentNode&&R.disabled===!1?"label"in R?"label"in R.parentNode?R.parentNode.disabled===w:R.disabled===w:R.isDisabled===w||R.isDisabled!==!w&&bd(R)===w:R.disabled===w:"label"in R?R.disabled===w:!1}}function Xn(w){return gi(function(R){return R=+R,gi(function(b,z){for(var D,$=w([],b.length,R),Y=$.length;Y--;)b[D=$[Y]]&&(b[D]=!(z[D]=b[D]))})})}function Is(w){return w&&typeof w.getElementsByTagName!="undefined"&&w}d=Bt.support={},T=Bt.isXML=function(w){var R=w&&w.namespaceURI,b=w&&(w.ownerDocument||w).documentElement;return!Rd.test(R||b&&b.nodeName||"HTML")},k=Bt.setDocument=function(w){var R,b,z=w?w.ownerDocument||w:yt;return z==U||z.nodeType!==9||!z.documentElement||(U=z,nt=U.documentElement,xt=!T(U),yt!=U&&(b=U.defaultView)&&b.top!==b&&(b.addEventListener?b.addEventListener("unload",Gl,!1):b.attachEvent&&b.attachEvent("onunload",Gl)),d.scope=_i(function(D){return nt.appendChild(D).appendChild(U.createElement("div")),typeof D.querySelectorAll!="undefined"&&!D.querySelectorAll(":scope fieldset div").length}),d.attributes=_i(function(D){return D.className="i",!D.getAttribute("className")}),d.getElementsByTagName=_i(function(D){return D.appendChild(U.createComment("")),!D.getElementsByTagName("*").length}),d.getElementsByClassName=sa.test(U.getElementsByClassName),d.getById=_i(function(D){return nt.appendChild(D).id=jt,!U.getElementsByName||!U.getElementsByName(jt).length}),d.getById?(_.filter.ID=function(D){var $=D.replace(zi,$i);return function(Y){return Y.getAttribute("id")===$}},_.find.ID=function(D,$){if(typeof $.getElementById!="undefined"&&xt){var Y=$.getElementById(D);return Y?[Y]:[]}}):(_.filter.ID=function(D){var $=D.replace(zi,$i);return function(Y){var K=typeof Y.getAttributeNode!="undefined"&&Y.getAttributeNode("id");return K&&K.value===$}},_.find.ID=function(D,$){if(typeof $.getElementById!="undefined"&&xt){var Y,K,J,ft=$.getElementById(D);if(ft){if(Y=ft.getAttributeNode("id"),Y&&Y.value===D)return[ft];for(J=$.getElementsByName(D),K=0;ft=J[K++];)if(Y=ft.getAttributeNode("id"),Y&&Y.value===D)return[ft]}return[]}}),_.find.TAG=d.getElementsByTagName?function(D,$){if(typeof $.getElementsByTagName!="undefined")return $.getElementsByTagName(D);if(d.qsa)return $.querySelectorAll(D)}:function(D,$){var Y,K=[],J=0,ft=$.getElementsByTagName(D);if(D==="*"){for(;Y=ft[J++];)Y.nodeType===1&&K.push(Y);return K}return ft},_.find.CLASS=d.getElementsByClassName&&function(D,$){if(typeof $.getElementsByClassName!="undefined"&&xt)return $.getElementsByClassName(D)},he=[],rt=[],(d.qsa=sa.test(U.querySelectorAll))&&(_i(function(D){var $;nt.appendChild(D).innerHTML="<a id='"+jt+"'></a><select id='"+jt+"-\r\\' msallowcapture=''><option selected=''></option></select>",D.querySelectorAll("[msallowcapture^='']").length&&rt.push("[*^$]="+Dt+`*(?:''|"")`),D.querySelectorAll("[selected]").length||rt.push("\\["+Dt+"*(?:value|"+Ms+")"),D.querySelectorAll("[id~="+jt+"-]").length||rt.push("~="),$=U.createElement("input"),$.setAttribute("name",""),D.appendChild($),D.querySelectorAll("[name='']").length||rt.push("\\["+Dt+"*name"+Dt+"*="+Dt+`*(?:''|"")`),D.querySelectorAll(":checked").length||rt.push(":checked"),D.querySelectorAll("a#"+jt+"+*").length||rt.push(".#.+[+~]"),D.querySelectorAll("\\\f"),rt.push("[\\r\\n\\f]")}),_i(function(D){D.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var $=U.createElement("input");$.setAttribute("type","hidden"),D.appendChild($).setAttribute("name","D"),D.querySelectorAll("[name=d]").length&&rt.push("name"+Dt+"*[*^$|!~]?="),D.querySelectorAll(":enabled").length!==2&&rt.push(":enabled",":disabled"),nt.appendChild(D).disabled=!0,D.querySelectorAll(":disabled").length!==2&&rt.push(":enabled",":disabled"),D.querySelectorAll("*,:x"),rt.push(",.*:")})),(d.matchesSelector=sa.test(ae=nt.matches||nt.webkitMatchesSelector||nt.mozMatchesSelector||nt.oMatchesSelector||nt.msMatchesSelector))&&_i(function(D){d.disconnectedMatch=ae.call(D,"*"),ae.call(D,"[s!='']:x"),he.push("!=",ws)}),rt=rt.length&&new RegExp(rt.join("|")),he=he.length&&new RegExp(he.join("|")),R=sa.test(nt.compareDocumentPosition),qe=R||sa.test(nt.contains)?function(D,$){var Y=D.nodeType===9?D.documentElement:D,K=$&&$.parentNode;return D===K||!!(K&&K.nodeType===1&&(Y.contains?Y.contains(K):D.compareDocumentPosition&&D.compareDocumentPosition(K)&16))}:function(D,$){if($){for(;$=$.parentNode;)if($===D)return!0}return!1},Un=R?function(D,$){if(D===$)return X=!0,0;var Y=!D.compareDocumentPosition-!$.compareDocumentPosition;return Y||(Y=(D.ownerDocument||D)==($.ownerDocument||$)?D.compareDocumentPosition($):1,Y&1||!d.sortDetached&&$.compareDocumentPosition(D)===Y?D==U||D.ownerDocument==yt&&qe(yt,D)?-1:$==U||$.ownerDocument==yt&&qe(yt,$)?1:j?$n(j,D)-$n(j,$):0:Y&4?-1:1)}:function(D,$){if(D===$)return X=!0,0;var Y,K=0,J=D.parentNode,ft=$.parentNode,ht=[D],pt=[$];if(!J||!ft)return D==U?-1:$==U?1:J?-1:ft?1:j?$n(j,D)-$n(j,$):0;if(J===ft)return jl(D,$);for(Y=D;Y=Y.parentNode;)ht.unshift(Y);for(Y=$;Y=Y.parentNode;)pt.unshift(Y);for(;ht[K]===pt[K];)K++;return K?jl(ht[K],pt[K]):ht[K]==yt?-1:pt[K]==yt?1:0}),U},Bt.matches=function(w,R){return Bt(w,null,null,R)},Bt.matchesSelector=function(w,R){if(k(w),d.matchesSelector&&xt&&!Ve[R+" "]&&(!he||!he.test(R))&&(!rt||!rt.test(R)))try{var b=ae.call(w,R);if(b||d.disconnectedMatch||w.document&&w.document.nodeType!==11)return b}catch{Ve(R,!0)}return Bt(R,U,null,[w]).length>0},Bt.contains=function(w,R){return(w.ownerDocument||w)!=U&&k(w),qe(w,R)},Bt.attr=function(w,R){(w.ownerDocument||w)!=U&&k(w);var b=_.attrHandle[R.toLowerCase()],z=b&&zn.call(_.attrHandle,R.toLowerCase())?b(w,R,!xt):void 0;return z!==void 0?z:d.attributes||!xt?w.getAttribute(R):(z=w.getAttributeNode(R))&&z.specified?z.value:null},Bt.escape=function(w){return(w+"").replace(Fl,kl)},Bt.error=function(w){throw new Error("Syntax error, unrecognized expression: "+w)},Bt.uniqueSort=function(w){var R,b=[],z=0,D=0;if(X=!d.detectDuplicates,j=!d.sortStable&&w.slice(0),w.sort(Un),X){for(;R=w[D++];)R===w[D]&&(z=b.push(D));for(;z--;)w.splice(b[z],1)}return j=null,w},E=Bt.getText=function(w){var R,b="",z=0,D=w.nodeType;if(D){if(D===1||D===9||D===11){if(typeof w.textContent=="string")return w.textContent;for(w=w.firstChild;w;w=w.nextSibling)b+=E(w)}else if(D===3||D===4)return w.nodeValue}else for(;R=w[z++];)b+=E(R);return b},_=Bt.selectors={cacheLength:50,createPseudo:gi,match:no,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(w){return w[1]=w[1].replace(zi,$i),w[3]=(w[3]||w[4]||w[5]||"").replace(zi,$i),w[2]==="~="&&(w[3]=" "+w[3]+" "),w.slice(0,4)},CHILD:function(w){return w[1]=w[1].toLowerCase(),w[1].slice(0,3)==="nth"?(w[3]||Bt.error(w[0]),w[4]=+(w[4]?w[5]+(w[6]||1):2*(w[3]==="even"||w[3]==="odd")),w[5]=+(w[7]+w[8]||w[3]==="odd")):w[3]&&Bt.error(w[0]),w},PSEUDO:function(w){var R,b=!w[6]&&w[2];return no.CHILD.test(w[0])?null:(w[3]?w[2]=w[4]||w[5]||"":b&&Od.test(b)&&(R=M(b,!0))&&(R=b.indexOf(")",b.length-R)-b.length)&&(w[0]=w[0].slice(0,R),w[2]=b.slice(0,R)),w.slice(0,3))}},filter:{TAG:function(w){var R=w.replace(zi,$i).toLowerCase();return w==="*"?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===R}},CLASS:function(w){var R=Ht[w+" "];return R||(R=new RegExp("(^|"+Dt+")"+w+"("+Dt+"|$)"))&&Ht(w,function(b){return R.test(typeof b.className=="string"&&b.className||typeof b.getAttribute!="undefined"&&b.getAttribute("class")||"")})},ATTR:function(w,R,b){return function(z){var D=Bt.attr(z,w);return D==null?R==="!=":R?(D+="",R==="="?D===b:R==="!="?D!==b:R==="^="?b&&D.indexOf(b)===0:R==="*="?b&&D.indexOf(b)>-1:R==="$="?b&&D.slice(-b.length)===b:R==="~="?(" "+D.replace(Md," ")+" ").indexOf(b)>-1:R==="|="?D===b||D.slice(0,b.length+1)===b+"-":!1):!0}},CHILD:function(w,R,b,z,D){var $=w.slice(0,3)!=="nth",Y=w.slice(-4)!=="last",K=R==="of-type";return z===1&&D===0?function(J){return!!J.parentNode}:function(J,ft,ht){var pt,wt,Ut,ct,le,xe,He=$!==Y?"nextSibling":"previousSibling",Yt=J.parentNode,ha=K&&J.nodeName.toLowerCase(),la=!ht&&!K,Ke=!1;if(Yt){if($){for(;He;){for(ct=J;ct=ct[He];)if(K?ct.nodeName.toLowerCase()===ha:ct.nodeType===1)return!1;xe=He=w==="only"&&!xe&&"nextSibling"}return!0}if(xe=[Y?Yt.firstChild:Yt.lastChild],Y&&la){for(ct=Yt,Ut=ct[jt]||(ct[jt]={}),wt=Ut[ct.uniqueID]||(Ut[ct.uniqueID]={}),pt=wt[w]||[],le=pt[0]===Ge&&pt[1],Ke=le&&pt[2],ct=le&&Yt.childNodes[le];ct=++le&&ct&&ct[He]||(Ke=le=0)||xe.pop();)if(ct.nodeType===1&&++Ke&&ct===J){wt[w]=[Ge,le,Ke];break}}else if(la&&(ct=J,Ut=ct[jt]||(ct[jt]={}),wt=Ut[ct.uniqueID]||(Ut[ct.uniqueID]={}),pt=wt[w]||[],le=pt[0]===Ge&&pt[1],Ke=le),Ke===!1)for(;(ct=++le&&ct&&ct[He]||(Ke=le=0)||xe.pop())&&!((K?ct.nodeName.toLowerCase()===ha:ct.nodeType===1)&&++Ke&&(la&&(Ut=ct[jt]||(ct[jt]={}),wt=Ut[ct.uniqueID]||(Ut[ct.uniqueID]={}),wt[w]=[Ge,Ke]),ct===J)););return Ke-=D,Ke===z||Ke%z==0&&Ke/z>=0}}},PSEUDO:function(w,R){var b,z=_.pseudos[w]||_.setFilters[w.toLowerCase()]||Bt.error("unsupported pseudo: "+w);return z[jt]?z(R):z.length>1?(b=[w,w,"",R],_.setFilters.hasOwnProperty(w.toLowerCase())?gi(function(D,$){for(var Y,K=z(D,R),J=K.length;J--;)Y=$n(D,K[J]),D[Y]=!($[Y]=K[J])}):function(D){return z(D,0,b)}):z}},pseudos:{not:gi(function(w){var R=[],b=[],z=P(w.replace(io,"$1"));return z[jt]?gi(function(D,$,Y,K){for(var J,ft=z(D,null,K,[]),ht=D.length;ht--;)(J=ft[ht])&&(D[ht]=!($[ht]=J))}):function(D,$,Y){return R[0]=D,z(R,null,Y,b),R[0]=null,!b.pop()}}),has:gi(function(w){return function(R){return Bt(w,R).length>0}}),contains:gi(function(w){return w=w.replace(zi,$i),function(R){return(R.textContent||E(R)).indexOf(w)>-1}}),lang:gi(function(w){return Id.test(w||"")||Bt.error("unsupported lang: "+w),w=w.replace(zi,$i).toLowerCase(),function(R){var b;do if(b=xt?R.lang:R.getAttribute("xml:lang")||R.getAttribute("lang"))return b=b.toLowerCase(),b===w||b.indexOf(w+"-")===0;while((R=R.parentNode)&&R.nodeType===1);return!1}}),target:function(w){var R=l.location&&l.location.hash;return R&&R.slice(1)===w.id},root:function(w){return w===nt},focus:function(w){return w===U.activeElement&&(!U.hasFocus||U.hasFocus())&&!!(w.type||w.href||~w.tabIndex)},enabled:Bl(!1),disabled:Bl(!0),checked:function(w){var R=w.nodeName.toLowerCase();return R==="input"&&!!w.checked||R==="option"&&!!w.selected},selected:function(w){return w.parentNode&&w.parentNode.selectedIndex,w.selected===!0},empty:function(w){for(w=w.firstChild;w;w=w.nextSibling)if(w.nodeType<6)return!1;return!0},parent:function(w){return!_.pseudos.empty(w)},header:function(w){return Ld.test(w.nodeName)},input:function(w){return Pd.test(w.nodeName)},button:function(w){var R=w.nodeName.toLowerCase();return R==="input"&&w.type==="button"||R==="button"},text:function(w){var R;return w.nodeName.toLowerCase()==="input"&&w.type==="text"&&((R=w.getAttribute("type"))==null||R.toLowerCase()==="text")},first:Xn(function(){return[0]}),last:Xn(function(w,R){return[R-1]}),eq:Xn(function(w,R,b){return[b<0?b+R:b]}),even:Xn(function(w,R){for(var b=0;b<R;b+=2)w.push(b);return w}),odd:Xn(function(w,R){for(var b=1;b<R;b+=2)w.push(b);return w}),lt:Xn(function(w,R,b){for(var z=b<0?b+R:b>R?R:b;--z>=0;)w.push(z);return w}),gt:Xn(function(w,R,b){for(var z=b<0?b+R:b;++z<R;)w.push(z);return w})}},_.pseudos.nth=_.pseudos.eq;for(f in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[f]=Nd(f);for(f in{submit:!0,reset:!0})_.pseudos[f]=Dd(f);function Ul(){}Ul.prototype=_.filters=_.pseudos,_.setFilters=new Ul,M=Bt.tokenize=function(w,R){var b,z,D,$,Y,K,J,ft=oa[w+" "];if(ft)return R?0:ft.slice(0);for(Y=w,K=[],J=_.preFilter;Y;){(!b||(z=wd.exec(Y)))&&(z&&(Y=Y.slice(z[0].length)||Y),K.push(D=[])),b=!1,(z=Dl.exec(Y))&&(b=z.shift(),D.push({value:b,type:z[0].replace(io," ")}),Y=Y.slice(b.length));for($ in _.filter)(z=no[$].exec(Y))&&(!J[$]||(z=J[$](z)))&&(b=z.shift(),D.push({value:b,type:$,matches:z}),Y=Y.slice(b.length));if(!b)break}return R?Y.length:Y?Bt.error(w):oa(w,K).slice(0)};function ao(w){for(var R=0,b=w.length,z="";R<b;R++)z+=w[R].value;return z}function oo(w,R,b){var z=R.dir,D=R.next,$=D||z,Y=b&&$==="parentNode",K=At++;return R.first?function(J,ft,ht){for(;J=J[z];)if(J.nodeType===1||Y)return w(J,ft,ht);return!1}:function(J,ft,ht){var pt,wt,Ut,ct=[Ge,K];if(ht){for(;J=J[z];)if((J.nodeType===1||Y)&&w(J,ft,ht))return!0}else for(;J=J[z];)if(J.nodeType===1||Y)if(Ut=J[jt]||(J[jt]={}),wt=Ut[J.uniqueID]||(Ut[J.uniqueID]={}),D&&D===J.nodeName.toLowerCase())J=J[z]||J;else{if((pt=wt[$])&&pt[0]===Ge&&pt[1]===K)return ct[2]=pt[2];if(wt[$]=ct,ct[2]=w(J,ft,ht))return!0}return!1}}function Rs(w){return w.length>1?function(R,b,z){for(var D=w.length;D--;)if(!w[D](R,b,z))return!1;return!0}:w[0]}function Fd(w,R,b){for(var z=0,D=R.length;z<D;z++)Bt(w,R[z],b);return b}function so(w,R,b,z,D){for(var $,Y=[],K=0,J=w.length,ft=R!=null;K<J;K++)($=w[K])&&(!b||b($,z,D))&&(Y.push($),ft&&R.push(K));return Y}function Ps(w,R,b,z,D,$){return z&&!z[jt]&&(z=Ps(z)),D&&!D[jt]&&(D=Ps(D,$)),gi(function(Y,K,J,ft){var ht,pt,wt,Ut=[],ct=[],le=K.length,xe=Y||Fd(R||"*",J.nodeType?[J]:J,[]),He=w&&(Y||!R)?so(xe,Ut,w,J,ft):xe,Yt=b?D||(Y?w:le||z)?[]:K:He;if(b&&b(He,Yt,J,ft),z)for(ht=so(Yt,ct),z(ht,[],J,ft),pt=ht.length;pt--;)(wt=ht[pt])&&(Yt[ct[pt]]=!(He[ct[pt]]=wt));if(Y){if(D||w){if(D){for(ht=[],pt=Yt.length;pt--;)(wt=Yt[pt])&&ht.push(He[pt]=wt);D(null,Yt=[],ht,ft)}for(pt=Yt.length;pt--;)(wt=Yt[pt])&&(ht=D?$n(Y,wt):Ut[pt])>-1&&(Y[ht]=!(K[ht]=wt))}}else Yt=so(Yt===K?Yt.splice(le,Yt.length):Yt),D?D(null,K,Yt,ft):cn.apply(K,Yt)})}function Ls(w){for(var R,b,z,D=w.length,$=_.relative[w[0].type],Y=$||_.relative[" "],K=$?1:0,J=oo(function(pt){return pt===R},Y,!0),ft=oo(function(pt){return $n(R,pt)>-1},Y,!0),ht=[function(pt,wt,Ut){var ct=!$&&(Ut||wt!==N)||((R=wt).nodeType?J(pt,wt,Ut):ft(pt,wt,Ut));return R=null,ct}];K<D;K++)if(b=_.relative[w[K].type])ht=[oo(Rs(ht),b)];else{if(b=_.filter[w[K].type].apply(null,w[K].matches),b[jt]){for(z=++K;z<D&&!_.relative[w[z].type];z++);return Ps(K>1&&Rs(ht),K>1&&ao(w.slice(0,K-1).concat({value:w[K-2].type===" "?"*":""})).replace(io,"$1"),b,K<z&&Ls(w.slice(K,z)),z<D&&Ls(w=w.slice(z)),z<D&&ao(w))}ht.push(b)}return Rs(ht)}function kd(w,R){var b=R.length>0,z=w.length>0,D=function($,Y,K,J,ft){var ht,pt,wt,Ut=0,ct="0",le=$&&[],xe=[],He=N,Yt=$||z&&_.find.TAG("*",ft),ha=Ge+=He==null?1:Math.random()||.1,la=Yt.length;for(ft&&(N=Y==U||Y||ft);ct!==la&&(ht=Yt[ct])!=null;ct++){if(z&&ht){for(pt=0,!Y&&ht.ownerDocument!=U&&(k(ht),K=!xt);wt=w[pt++];)if(wt(ht,Y||U,K)){J.push(ht);break}ft&&(Ge=ha)}b&&((ht=!wt&&ht)&&Ut--,$&&le.push(ht))}if(Ut+=ct,b&&ct!==Ut){for(pt=0;wt=R[pt++];)wt(le,xe,Y,K);if($){if(Ut>0)for(;ct--;)le[ct]||xe[ct]||(xe[ct]=fn.call(J));xe=so(xe)}cn.apply(J,xe),ft&&!$&&xe.length>0&&Ut+R.length>1&&Bt.uniqueSort(J)}return ft&&(Ge=ha,N=He),le};return b?gi(D):D}return P=Bt.compile=function(w,R){var b,z=[],D=[],$=eo[w+" "];if(!$){for(R||(R=M(w)),b=R.length;b--;)$=Ls(R[b]),$[jt]?z.push($):D.push($);$=eo(w,kd(D,z)),$.selector=w}return $},L=Bt.select=function(w,R,b,z){var D,$,Y,K,J,ft=typeof w=="function"&&w,ht=!z&&M(w=ft.selector||w);if(b=b||[],ht.length===1){if($=ht[0]=ht[0].slice(0),$.length>2&&(Y=$[0]).type==="ID"&&R.nodeType===9&&xt&&_.relative[$[1].type]){if(R=(_.find.ID(Y.matches[0].replace(zi,$i),R)||[])[0],R)ft&&(R=R.parentNode);else return b;w=w.slice($.shift().value.length)}for(D=no.needsContext.test(w)?0:$.length;D--&&(Y=$[D],!_.relative[K=Y.type]);)if((J=_.find[K])&&(z=J(Y.matches[0].replace(zi,$i),Ss.test($[0].type)&&Is(R.parentNode)||R))){if($.splice(D,1),w=z.length&&ao($),!w)return cn.apply(b,z),b;break}}return(ft||P(w,ht))(z,R,!xt,b,!R||Ss.test(w)&&Is(R.parentNode)||R),b},d.sortStable=jt.split("").sort(Un).join("")===jt,d.detectDuplicates=!!X,k(),d.sortDetached=_i(function(w){return w.compareDocumentPosition(U.createElement("fieldset"))&1}),_i(function(w){return w.innerHTML="<a href='#'></a>",w.firstChild.getAttribute("href")==="#"})||Os("type|href|height|width",function(w,R,b){if(!b)return w.getAttribute(R,R.toLowerCase()==="type"?1:2)}),(!d.attributes||!_i(function(w){return w.innerHTML="<input/>",w.firstChild.setAttribute("value",""),w.firstChild.getAttribute("value")===""}))&&Os("value",function(w,R,b){if(!b&&w.nodeName.toLowerCase()==="input")return w.defaultValue}),_i(function(w){return w.getAttribute("disabled")==null})||Os(Ms,function(w,R,b){var z;if(!b)return w[R]===!0?R.toLowerCase():(z=w.getAttributeNode(R))&&z.specified?z.value:null}),Bt}(e);v.find=B,v.expr=B.selectors,v.expr[":"]=v.expr.pseudos,v.uniqueSort=v.unique=B.uniqueSort,v.text=B.getText,v.isXMLDoc=B.isXML,v.contains=B.contains,v.escapeSelector=B.escape;var H=function(l,f,d){for(var _=[],E=d!==void 0;(l=l[f])&&l.nodeType!==9;)if(l.nodeType===1){if(E&&v(l).is(d))break;_.push(l)}return _},tt=function(l,f){for(var d=[];l;l=l.nextSibling)l.nodeType===1&&l!==f&&d.push(l);return d},et=v.expr.match.needsContext;function Z(l,f){return l.nodeName&&l.nodeName.toLowerCase()===f.toLowerCase()}var ut=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Et(l,f,d){return x(f)?v.grep(l,function(_,E){return!!f.call(_,E,_)!==d}):f.nodeType?v.grep(l,function(_){return _===f!==d}):typeof f!="string"?v.grep(l,function(_){return h.call(f,_)>-1!==d}):v.filter(f,l,d)}v.filter=function(l,f,d){var _=f[0];return d&&(l=":not("+l+")"),f.length===1&&_.nodeType===1?v.find.matchesSelector(_,l)?[_]:[]:v.find.matches(l,v.grep(f,function(E){return E.nodeType===1}))},v.fn.extend({find:function(l){var f,d,_=this.length,E=this;if(typeof l!="string")return this.pushStack(v(l).filter(function(){for(f=0;f<_;f++)if(v.contains(E[f],this))return!0}));for(d=this.pushStack([]),f=0;f<_;f++)v.find(l,E[f],d);return _>1?v.uniqueSort(d):d},filter:function(l){return this.pushStack(Et(this,l||[],!1))},not:function(l){return this.pushStack(Et(this,l||[],!0))},is:function(l){return!!Et(this,typeof l=="string"&&et.test(l)?v(l):l||[],!1).length}});var at,_t=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,st=v.fn.init=function(l,f,d){var _,E;if(!l)return this;if(d=d||at,typeof l=="string")if(l[0]==="<"&&l[l.length-1]===">"&&l.length>=3?_=[null,l,null]:_=_t.exec(l),_&&(_[1]||!f))if(_[1]){if(f=f instanceof v?f[0]:f,v.merge(this,v.parseHTML(_[1],f&&f.nodeType?f.ownerDocument||f:S,!0)),ut.test(_[1])&&v.isPlainObject(f))for(_ in f)x(this[_])?this[_](f[_]):this.attr(_,f[_]);return this}else return E=S.getElementById(_[2]),E&&(this[0]=E,this.length=1),this;else return!f||f.jquery?(f||d).find(l):this.constructor(f).find(l);else{if(l.nodeType)return this[0]=l,this.length=1,this;if(x(l))return d.ready!==void 0?d.ready(l):l(v)}return v.makeArray(l,this)};st.prototype=v.fn,at=v(S);var Pt=/^(?:parents|prev(?:Until|All))/,St={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({has:function(l){var f=v(l,this),d=f.length;return this.filter(function(){for(var _=0;_<d;_++)if(v.contains(this,f[_]))return!0})},closest:function(l,f){var d,_=0,E=this.length,T=[],M=typeof l!="string"&&v(l);if(!et.test(l)){for(;_<E;_++)for(d=this[_];d&&d!==f;d=d.parentNode)if(d.nodeType<11&&(M?M.index(d)>-1:d.nodeType===1&&v.find.matchesSelector(d,l))){T.push(d);break}}return this.pushStack(T.length>1?v.uniqueSort(T):T)},index:function(l){return l?typeof l=="string"?h.call(v(l),this[0]):h.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,f){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(l,f))))},addBack:function(l){return this.add(l==null?this.prevObject:this.prevObject.filter(l))}});function Nt(l,f){for(;(l=l[f])&&l.nodeType!==1;);return l}v.each({parent:function(l){var f=l.parentNode;return f&&f.nodeType!==11?f:null},parents:function(l){return H(l,"parentNode")},parentsUntil:function(l,f,d){return H(l,"parentNode",d)},next:function(l){return Nt(l,"nextSibling")},prev:function(l){return Nt(l,"previousSibling")},nextAll:function(l){return H(l,"nextSibling")},prevAll:function(l){return H(l,"previousSibling")},nextUntil:function(l,f,d){return H(l,"nextSibling",d)},prevUntil:function(l,f,d){return H(l,"previousSibling",d)},siblings:function(l){return tt((l.parentNode||{}).firstChild,l)},children:function(l){return tt(l.firstChild)},contents:function(l){return l.contentDocument!=null&&r(l.contentDocument)?l.contentDocument:(Z(l,"template")&&(l=l.content||l),v.merge([],l.childNodes))}},function(l,f){v.fn[l]=function(d,_){var E=v.map(this,f,d);return l.slice(-5)!=="Until"&&(_=d),_&&typeof _=="string"&&(E=v.filter(_,E)),this.length>1&&(St[l]||v.uniqueSort(E),Pt.test(l)&&E.reverse()),this.pushStack(E)}});var It=/[^\x20\t\r\n\f]+/g;function V(l){var f={};return v.each(l.match(It)||[],function(d,_){f[_]=!0}),f}v.Callbacks=function(l){l=typeof l=="string"?V(l):v.extend({},l);var f,d,_,E,T=[],M=[],P=-1,L=function(){for(E=E||l.once,_=f=!0;M.length;P=-1)for(d=M.shift();++P<T.length;)T[P].apply(d[0],d[1])===!1&&l.stopOnFalse&&(P=T.length,d=!1);l.memory||(d=!1),f=!1,E&&(d?T=[]:T="")},N={add:function(){return T&&(d&&!f&&(P=T.length-1,M.push(d)),function j(X){v.each(X,function(k,U){x(U)?(!l.unique||!N.has(U))&&T.push(U):U&&U.length&&A(U)!=="string"&&j(U)})}(arguments),d&&!f&&L()),this},remove:function(){return v.each(arguments,function(j,X){for(var k;(k=v.inArray(X,T,k))>-1;)T.splice(k,1),k<=P&&P--}),this},has:function(j){return j?v.inArray(j,T)>-1:T.length>0},empty:function(){return T&&(T=[]),this},disable:function(){return E=M=[],T=d="",this},disabled:function(){return!T},lock:function(){return E=M=[],!d&&!f&&(T=d=""),this},locked:function(){return!!E},fireWith:function(j,X){return E||(X=X||[],X=[j,X.slice?X.slice():X],M.push(X),f||L()),this},fire:function(){return N.fireWith(this,arguments),this},fired:function(){return!!_}};return N};function Qt(l){return l}function Ct(l){throw l}function te(l,f,d,_){var E;try{l&&x(E=l.promise)?E.call(l).done(f).fail(d):l&&x(E=l.then)?E.call(l,f,d):f.apply(void 0,[l].slice(_))}catch(T){d.apply(void 0,[T])}}v.extend({Deferred:function(l){var f=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],d="pending",_={state:function(){return d},always:function(){return E.done(arguments).fail(arguments),this},catch:function(T){return _.then(null,T)},pipe:function(){var T=arguments;return v.Deferred(function(M){v.each(f,function(P,L){var N=x(T[L[4]])&&T[L[4]];E[L[1]](function(){var j=N&&N.apply(this,arguments);j&&x(j.promise)?j.promise().progress(M.notify).done(M.resolve).fail(M.reject):M[L[0]+"With"](this,N?[j]:arguments)})}),T=null}).promise()},then:function(T,M,P){var L=0;function N(j,X,k,U){return function(){var nt=this,xt=arguments,rt=function(){var ae,qe;if(!(j<L)){if(ae=k.apply(nt,xt),ae===X.promise())throw new TypeError("Thenable self-resolution");qe=ae&&(typeof ae=="object"||typeof ae=="function")&&ae.then,x(qe)?U?qe.call(ae,N(L,X,Qt,U),N(L,X,Ct,U)):(L++,qe.call(ae,N(L,X,Qt,U),N(L,X,Ct,U),N(L,X,Qt,X.notifyWith))):(k!==Qt&&(nt=void 0,xt=[ae]),(U||X.resolveWith)(nt,xt))}},he=U?rt:function(){try{rt()}catch(ae){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(ae,he.stackTrace),j+1>=L&&(k!==Ct&&(nt=void 0,xt=[ae]),X.rejectWith(nt,xt))}};j?he():(v.Deferred.getStackHook&&(he.stackTrace=v.Deferred.getStackHook()),e.setTimeout(he))}}return v.Deferred(function(j){f[0][3].add(N(0,j,x(P)?P:Qt,j.notifyWith)),f[1][3].add(N(0,j,x(T)?T:Qt)),f[2][3].add(N(0,j,x(M)?M:Ct))}).promise()},promise:function(T){return T!=null?v.extend(T,_):_}},E={};return v.each(f,function(T,M){var P=M[2],L=M[5];_[M[1]]=P.add,L&&P.add(function(){d=L},f[3-T][2].disable,f[3-T][3].disable,f[0][2].lock,f[0][3].lock),P.add(M[3].fire),E[M[0]]=function(){return E[M[0]+"With"](this===E?void 0:this,arguments),this},E[M[0]+"With"]=P.fireWith}),_.promise(E),l&&l.call(E,E),E},when:function(l){var f=arguments.length,d=f,_=Array(d),E=a.call(arguments),T=v.Deferred(),M=function(P){return function(L){_[P]=this,E[P]=arguments.length>1?a.call(arguments):L,--f||T.resolveWith(_,E)}};if(f<=1&&(te(l,T.done(M(d)).resolve,T.reject,!f),T.state()==="pending"||x(E[d]&&E[d].then)))return T.then();for(;d--;)te(E[d],M(d),T.reject);return T.promise()}});var Se=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(l,f){e.console&&e.console.warn&&l&&Se.test(l.name)&&e.console.warn("jQuery.Deferred exception: "+l.message,l.stack,f)},v.readyException=function(l){e.setTimeout(function(){throw l})};var ve=v.Deferred();v.fn.ready=function(l){return ve.then(l).catch(function(f){v.readyException(f)}),this},v.extend({isReady:!1,readyWait:1,ready:function(l){(l===!0?--v.readyWait:v.isReady)||(v.isReady=!0,!(l!==!0&&--v.readyWait>0)&&ve.resolveWith(S,[v]))}}),v.ready.then=ve.then;function oe(){S.removeEventListener("DOMContentLoaded",oe),e.removeEventListener("load",oe),v.ready()}S.readyState==="complete"||S.readyState!=="loading"&&!S.documentElement.doScroll?e.setTimeout(v.ready):(S.addEventListener("DOMContentLoaded",oe),e.addEventListener("load",oe));var Vt=function(l,f,d,_,E,T,M){var P=0,L=l.length,N=d==null;if(A(d)==="object"){E=!0;for(P in d)Vt(l,f,P,d[P],!0,T,M)}else if(_!==void 0&&(E=!0,x(_)||(M=!0),N&&(M?(f.call(l,_),f=null):(N=f,f=function(j,X,k){return N.call(v(j),k)})),f))for(;P<L;P++)f(l[P],d,M?_:_.call(l[P],P,f(l[P],d)));return E?l:N?f.call(l):L?f(l[0],d):T},sn=/^-ms-/,ii=/-([a-z])/g;function yr(l,f){return f.toUpperCase()}function Oe(l){return l.replace(sn,"ms-").replace(ii,yr)}var De=function(l){return l.nodeType===1||l.nodeType===9||!+l.nodeType};function ni(){this.expando=v.expando+ni.uid++}ni.uid=1,ni.prototype={cache:function(l){var f=l[this.expando];return f||(f={},De(l)&&(l.nodeType?l[this.expando]=f:Object.defineProperty(l,this.expando,{value:f,configurable:!0}))),f},set:function(l,f,d){var _,E=this.cache(l);if(typeof f=="string")E[Oe(f)]=d;else for(_ in f)E[Oe(_)]=f[_];return E},get:function(l,f){return f===void 0?this.cache(l):l[this.expando]&&l[this.expando][Oe(f)]},access:function(l,f,d){return f===void 0||f&&typeof f=="string"&&d===void 0?this.get(l,f):(this.set(l,f,d),d!==void 0?d:f)},remove:function(l,f){var d,_=l[this.expando];if(_!==void 0){if(f!==void 0)for(Array.isArray(f)?f=f.map(Oe):(f=Oe(f),f=f in _?[f]:f.match(It)||[]),d=f.length;d--;)delete _[f[d]];(f===void 0||v.isEmptyObject(_))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var f=l[this.expando];return f!==void 0&&!v.isEmptyObject(f)}};var ot=new ni,re=new ni,mr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ki=/[A-Z]/g;function Pn(l){return l==="true"?!0:l==="false"?!1:l==="null"?null:l===+l+""?+l:mr.test(l)?JSON.parse(l):l}function Ln(l,f,d){var _;if(d===void 0&&l.nodeType===1)if(_="data-"+f.replace(ki,"-$&").toLowerCase(),d=l.getAttribute(_),typeof d=="string"){try{d=Pn(d)}catch{}re.set(l,f,d)}else d=void 0;return d}v.extend({hasData:function(l){return re.hasData(l)||ot.hasData(l)},data:function(l,f,d){return re.access(l,f,d)},removeData:function(l,f){re.remove(l,f)},_data:function(l,f,d){return ot.access(l,f,d)},_removeData:function(l,f){ot.remove(l,f)}}),v.fn.extend({data:function(l,f){var d,_,E,T=this[0],M=T&&T.attributes;if(l===void 0){if(this.length&&(E=re.get(T),T.nodeType===1&&!ot.get(T,"hasDataAttrs"))){for(d=M.length;d--;)M[d]&&(_=M[d].name,_.indexOf("data-")===0&&(_=Oe(_.slice(5)),Ln(T,_,E[_])));ot.set(T,"hasDataAttrs",!0)}return E}return typeof l=="object"?this.each(function(){re.set(this,l)}):Vt(this,function(P){var L;if(T&&P===void 0)return L=re.get(T,l),L!==void 0||(L=Ln(T,l),L!==void 0)?L:void 0;this.each(function(){re.set(this,l,P)})},null,f,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){re.remove(this,l)})}}),v.extend({queue:function(l,f,d){var _;if(l)return f=(f||"fx")+"queue",_=ot.get(l,f),d&&(!_||Array.isArray(d)?_=ot.access(l,f,v.makeArray(d)):_.push(d)),_||[]},dequeue:function(l,f){f=f||"fx";var d=v.queue(l,f),_=d.length,E=d.shift(),T=v._queueHooks(l,f),M=function(){v.dequeue(l,f)};E==="inprogress"&&(E=d.shift(),_--),E&&(f==="fx"&&d.unshift("inprogress"),delete T.stop,E.call(l,M,T)),!_&&T&&T.empty.fire()},_queueHooks:function(l,f){var d=f+"queueHooks";return ot.get(l,d)||ot.access(l,d,{empty:v.Callbacks("once memory").add(function(){ot.remove(l,[f+"queue",d])})})}}),v.fn.extend({queue:function(l,f){var d=2;return typeof l!="string"&&(f=l,l="fx",d--),arguments.length<d?v.queue(this[0],l):f===void 0?this:this.each(function(){var _=v.queue(this,l,f);v._queueHooks(this,l),l==="fx"&&_[0]!=="inprogress"&&v.dequeue(this,l)})},dequeue:function(l){return this.each(function(){v.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,f){var d,_=1,E=v.Deferred(),T=this,M=this.length,P=function(){--_||E.resolveWith(T,[T])};for(typeof l!="string"&&(f=l,l=void 0),l=l||"fx";M--;)d=ot.get(T[M],l+"queueHooks"),d&&d.empty&&(_++,d.empty.add(P));return P(),E.promise(f)}});var Gi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Fe=new RegExp("^(?:([+-])=|)("+Gi+")([a-z%]*)$","i"),Ee=["Top","Right","Bottom","Left"],di=S.documentElement,pi=function(l){return v.contains(l.ownerDocument,l)},An={composed:!0};di.getRootNode&&(pi=function(l){return v.contains(l.ownerDocument,l)||l.getRootNode(An)===l.ownerDocument});var Ye=function(l,f){return l=f||l,l.style.display==="none"||l.style.display===""&&pi(l)&&v.css(l,"display")==="none"};function ri(l,f,d,_){var E,T,M=20,P=_?function(){return _.cur()}:function(){return v.css(l,f,"")},L=P(),N=d&&d[3]||(v.cssNumber[f]?"":"px"),j=l.nodeType&&(v.cssNumber[f]||N!=="px"&&+L)&&Fe.exec(v.css(l,f));if(j&&j[3]!==N){for(L=L/2,N=N||j[3],j=+L||1;M--;)v.style(l,f,j+N),(1-T)*(1-(T=P()/L||.5))<=0&&(M=0),j=j/T;j=j*2,v.style(l,f,j+N),d=d||[]}return d&&(j=+j||+L||0,E=d[1]?j+(d[1]+1)*d[2]:+d[2],_&&(_.unit=N,_.start=j,_.end=E)),E}var wi={};function hn(l){var f,d=l.ownerDocument,_=l.nodeName,E=wi[_];return E||(f=d.body.appendChild(d.createElement(_)),E=v.css(f,"display"),f.parentNode.removeChild(f),E==="none"&&(E="block"),wi[_]=E,E)}function fe(l,f){for(var d,_,E=[],T=0,M=l.length;T<M;T++)_=l[T],!!_.style&&(d=_.style.display,f?(d==="none"&&(E[T]=ot.get(_,"display")||null,E[T]||(_.style.display="")),_.style.display===""&&Ye(_)&&(E[T]=hn(_))):d!=="none"&&(E[T]="none",ot.set(_,"display",d)));for(T=0;T<M;T++)E[T]!=null&&(l[T].style.display=E[T]);return l}v.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(l){return typeof l=="boolean"?l?this.show():this.hide():this.each(function(){Ye(this)?v(this).show():v(this).hide()})}});var ge=/^(?:checkbox|radio)$/i,Si=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ji=/^$|^module$|\/(?:java|ecma)script/i;(function(){var l=S.createDocumentFragment(),f=l.appendChild(S.createElement("div")),d=S.createElement("input");d.setAttribute("type","radio"),d.setAttribute("checked","checked"),d.setAttribute("name","t"),f.appendChild(d),m.checkClone=f.cloneNode(!0).cloneNode(!0).lastChild.checked,f.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!f.cloneNode(!0).lastChild.defaultValue,f.innerHTML="<option></option>",m.option=!!f.lastChild})();var _e={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};_e.tbody=_e.tfoot=_e.colgroup=_e.caption=_e.thead,_e.th=_e.td,m.option||(_e.optgroup=_e.option=[1,"<select multiple='multiple'>","</select>"]);function ye(l,f){var d;return typeof l.getElementsByTagName!="undefined"?d=l.getElementsByTagName(f||"*"):typeof l.querySelectorAll!="undefined"?d=l.querySelectorAll(f||"*"):d=[],f===void 0||f&&Z(l,f)?v.merge([l],d):d}function Er(l,f){for(var d=0,_=l.length;d<_;d++)ot.set(l[d],"globalEval",!f||ot.get(f[d],"globalEval"))}var Jr=/<|&#?\w+;/;function Ha(l,f,d,_,E){for(var T,M,P,L,N,j,X=f.createDocumentFragment(),k=[],U=0,nt=l.length;U<nt;U++)if(T=l[U],T||T===0)if(A(T)==="object")v.merge(k,T.nodeType?[T]:T);else if(!Jr.test(T))k.push(f.createTextNode(T));else{for(M=M||X.appendChild(f.createElement("div")),P=(Si.exec(T)||["",""])[1].toLowerCase(),L=_e[P]||_e._default,M.innerHTML=L[1]+v.htmlPrefilter(T)+L[2],j=L[0];j--;)M=M.lastChild;v.merge(k,M.childNodes),M=X.firstChild,M.textContent=""}for(X.textContent="",U=0;T=k[U++];){if(_&&v.inArray(T,_)>-1){E&&E.push(T);continue}if(N=pi(T),M=ye(X.appendChild(T),"script"),N&&Er(M),d)for(j=0;T=M[j++];)ji.test(T.type||"")&&d.push(T)}return X}var Ka=/^([^.]*)(?:\.(.+)|)/;function Bi(){return!0}function Ui(){return!1}function Qr(l,f){return l===Za()==(f==="focus")}function Za(){try{return S.activeElement}catch{}}function bn(l,f,d,_,E,T){var M,P;if(typeof f=="object"){typeof d!="string"&&(_=_||d,d=void 0);for(P in f)bn(l,P,d,_,f[P],T);return l}if(_==null&&E==null?(E=d,_=d=void 0):E==null&&(typeof d=="string"?(E=_,_=void 0):(E=_,_=d,d=void 0)),E===!1)E=Ui;else if(!E)return l;return T===1&&(M=E,E=function(L){return v().off(L),M.apply(this,arguments)},E.guid=M.guid||(M.guid=v.guid++)),l.each(function(){v.event.add(this,f,E,_,d)})}v.event={global:{},add:function(l,f,d,_,E){var T,M,P,L,N,j,X,k,U,nt,xt,rt=ot.get(l);if(!!De(l))for(d.handler&&(T=d,d=T.handler,E=T.selector),E&&v.find.matchesSelector(di,E),d.guid||(d.guid=v.guid++),(L=rt.events)||(L=rt.events=Object.create(null)),(M=rt.handle)||(M=rt.handle=function(he){return typeof v!="undefined"&&v.event.triggered!==he.type?v.event.dispatch.apply(l,arguments):void 0}),f=(f||"").match(It)||[""],N=f.length;N--;)P=Ka.exec(f[N])||[],U=xt=P[1],nt=(P[2]||"").split(".").sort(),!!U&&(X=v.event.special[U]||{},U=(E?X.delegateType:X.bindType)||U,X=v.event.special[U]||{},j=v.extend({type:U,origType:xt,data:_,handler:d,guid:d.guid,selector:E,needsContext:E&&v.expr.match.needsContext.test(E),namespace:nt.join(".")},T),(k=L[U])||(k=L[U]=[],k.delegateCount=0,(!X.setup||X.setup.call(l,_,nt,M)===!1)&&l.addEventListener&&l.addEventListener(U,M)),X.add&&(X.add.call(l,j),j.handler.guid||(j.handler.guid=d.guid)),E?k.splice(k.delegateCount++,0,j):k.push(j),v.event.global[U]=!0)},remove:function(l,f,d,_,E){var T,M,P,L,N,j,X,k,U,nt,xt,rt=ot.hasData(l)&&ot.get(l);if(!(!rt||!(L=rt.events))){for(f=(f||"").match(It)||[""],N=f.length;N--;){if(P=Ka.exec(f[N])||[],U=xt=P[1],nt=(P[2]||"").split(".").sort(),!U){for(U in L)v.event.remove(l,U+f[N],d,_,!0);continue}for(X=v.event.special[U]||{},U=(_?X.delegateType:X.bindType)||U,k=L[U]||[],P=P[2]&&new RegExp("(^|\\.)"+nt.join("\\.(?:.*\\.|)")+"(\\.|$)"),M=T=k.length;T--;)j=k[T],(E||xt===j.origType)&&(!d||d.guid===j.guid)&&(!P||P.test(j.namespace))&&(!_||_===j.selector||_==="**"&&j.selector)&&(k.splice(T,1),j.selector&&k.delegateCount--,X.remove&&X.remove.call(l,j));M&&!k.length&&((!X.teardown||X.teardown.call(l,nt,rt.handle)===!1)&&v.removeEvent(l,U,rt.handle),delete L[U])}v.isEmptyObject(L)&&ot.remove(l,"handle events")}},dispatch:function(l){var f,d,_,E,T,M,P=new Array(arguments.length),L=v.event.fix(l),N=(ot.get(this,"events")||Object.create(null))[L.type]||[],j=v.event.special[L.type]||{};for(P[0]=L,f=1;f<arguments.length;f++)P[f]=arguments[f];if(L.delegateTarget=this,!(j.preDispatch&&j.preDispatch.call(this,L)===!1)){for(M=v.event.handlers.call(this,L,N),f=0;(E=M[f++])&&!L.isPropagationStopped();)for(L.currentTarget=E.elem,d=0;(T=E.handlers[d++])&&!L.isImmediatePropagationStopped();)(!L.rnamespace||T.namespace===!1||L.rnamespace.test(T.namespace))&&(L.handleObj=T,L.data=T.data,_=((v.event.special[T.origType]||{}).handle||T.handler).apply(E.elem,P),_!==void 0&&(L.result=_)===!1&&(L.preventDefault(),L.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,L),L.result}},handlers:function(l,f){var d,_,E,T,M,P=[],L=f.delegateCount,N=l.target;if(L&&N.nodeType&&!(l.type==="click"&&l.button>=1)){for(;N!==this;N=N.parentNode||this)if(N.nodeType===1&&!(l.type==="click"&&N.disabled===!0)){for(T=[],M={},d=0;d<L;d++)_=f[d],E=_.selector+" ",M[E]===void 0&&(M[E]=_.needsContext?v(E,this).index(N)>-1:v.find(E,this,null,[N]).length),M[E]&&T.push(_);T.length&&P.push({elem:N,handlers:T})}}return N=this,L<f.length&&P.push({elem:N,handlers:f.slice(L)}),P},addProp:function(l,f){Object.defineProperty(v.Event.prototype,l,{enumerable:!0,configurable:!0,get:x(f)?function(){if(this.originalEvent)return f(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(d){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:d})}})},fix:function(l){return l[v.expando]?l:new v.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var f=this||l;return ge.test(f.type)&&f.click&&Z(f,"input")&&Oi(f,"click",Bi),!1},trigger:function(l){var f=this||l;return ge.test(f.type)&&f.click&&Z(f,"input")&&Oi(f,"click"),!0},_default:function(l){var f=l.target;return ge.test(f.type)&&f.click&&Z(f,"input")&&ot.get(f,"click")||Z(f,"a")}},beforeunload:{postDispatch:function(l){l.result!==void 0&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}};function Oi(l,f,d){if(!d){ot.get(l,f)===void 0&&v.event.add(l,f,Bi);return}ot.set(l,f,!1),v.event.add(l,f,{namespace:!1,handler:function(_){var E,T,M=ot.get(this,f);if(_.isTrigger&1&&this[f]){if(M.length)(v.event.special[f]||{}).delegateType&&_.stopPropagation();else if(M=a.call(arguments),ot.set(this,f,M),E=d(this,f),this[f](),T=ot.get(this,f),M!==T||E?ot.set(this,f,!1):T={},M!==T)return _.stopImmediatePropagation(),_.preventDefault(),T&&T.value}else M.length&&(ot.set(this,f,{value:v.event.trigger(v.extend(M[0],v.Event.prototype),M.slice(1),this)}),_.stopImmediatePropagation())}})}v.removeEvent=function(l,f,d){l.removeEventListener&&l.removeEventListener(f,d)},v.Event=function(l,f){if(!(this instanceof v.Event))return new v.Event(l,f);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||l.defaultPrevented===void 0&&l.returnValue===!1?Bi:Ui,this.target=l.target&&l.target.nodeType===3?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,f&&v.extend(this,f),this.timeStamp=l&&l.timeStamp||Date.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:Ui,isPropagationStopped:Ui,isImmediatePropagationStopped:Ui,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=Bi,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=Bi,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=Bi,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp),v.each({focus:"focusin",blur:"focusout"},function(l,f){v.event.special[l]={setup:function(){return Oi(this,l,Qr),!1},trigger:function(){return Oi(this,l),!0},_default:function(){return!0},delegateType:f}}),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,f){v.event.special[l]={delegateType:f,bindType:f,handle:function(d){var _,E=this,T=d.relatedTarget,M=d.handleObj;return(!T||T!==E&&!v.contains(E,T))&&(d.type=M.origType,_=M.handler.apply(this,arguments),d.type=f),_}}}),v.fn.extend({on:function(l,f,d,_){return bn(this,l,f,d,_)},one:function(l,f,d,_){return bn(this,l,f,d,_,1)},off:function(l,f,d){var _,E;if(l&&l.preventDefault&&l.handleObj)return _=l.handleObj,v(l.delegateTarget).off(_.namespace?_.origType+"."+_.namespace:_.origType,_.selector,_.handler),this;if(typeof l=="object"){for(E in l)this.off(E,f,l[E]);return this}return(f===!1||typeof f=="function")&&(d=f,f=void 0),d===!1&&(d=Ui),this.each(function(){v.event.remove(this,l,d,f)})}});var Nn=/<script|<style|<link/i,Dn=/checked\s*(?:[^=]|=\s*.checked.)/i,Ja=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ta(l,f){return Z(l,"table")&&Z(f.nodeType!==11?f:f.firstChild,"tr")&&v(l).children("tbody")[0]||l}function cs(l){return l.type=(l.getAttribute("type")!==null)+"/"+l.type,l}function ds(l){return(l.type||"").slice(0,5)==="true/"?l.type=l.type.slice(5):l.removeAttribute("type"),l}function ln(l,f){var d,_,E,T,M,P,L;if(f.nodeType===1){if(ot.hasData(l)&&(T=ot.get(l),L=T.events,L)){ot.remove(f,"handle events");for(E in L)for(d=0,_=L[E].length;d<_;d++)v.event.add(f,E,L[E][d])}re.hasData(l)&&(M=re.access(l),P=v.extend({},M),re.set(f,P))}}function Fn(l,f){var d=f.nodeName.toLowerCase();d==="input"&&ge.test(l.type)?f.checked=l.checked:(d==="input"||d==="textarea")&&(f.defaultValue=l.defaultValue)}function Ie(l,f,d,_){f=o(f);var E,T,M,P,L,N,j=0,X=l.length,k=X-1,U=f[0],nt=x(U);if(nt||X>1&&typeof U=="string"&&!m.checkClone&&Dn.test(U))return l.each(function(xt){var rt=l.eq(xt);nt&&(f[0]=U.call(this,xt,rt.html())),Ie(rt,f,d,_)});if(X&&(E=Ha(f,l[0].ownerDocument,!1,l,_),T=E.firstChild,E.childNodes.length===1&&(E=T),T||_)){for(M=v.map(ye(E,"script"),cs),P=M.length;j<X;j++)L=E,j!==k&&(L=v.clone(L,!0,!0),P&&v.merge(M,ye(L,"script"))),d.call(l[j],L,j);if(P)for(N=M[M.length-1].ownerDocument,v.map(M,ds),j=0;j<P;j++)L=M[j],ji.test(L.type||"")&&!ot.access(L,"globalEval")&&v.contains(N,L)&&(L.src&&(L.type||"").toLowerCase()!=="module"?v._evalUrl&&!L.noModule&&v._evalUrl(L.src,{nonce:L.nonce||L.getAttribute("nonce")},N):O(L.textContent.replace(Ja,""),L,N))}return l}function kn(l,f,d){for(var _,E=f?v.filter(f,l):l,T=0;(_=E[T])!=null;T++)!d&&_.nodeType===1&&v.cleanData(ye(_)),_.parentNode&&(d&&pi(_)&&Er(ye(_,"script")),_.parentNode.removeChild(_));return l}v.extend({htmlPrefilter:function(l){return l},clone:function(l,f,d){var _,E,T,M,P=l.cloneNode(!0),L=pi(l);if(!m.noCloneChecked&&(l.nodeType===1||l.nodeType===11)&&!v.isXMLDoc(l))for(M=ye(P),T=ye(l),_=0,E=T.length;_<E;_++)Fn(T[_],M[_]);if(f)if(d)for(T=T||ye(l),M=M||ye(P),_=0,E=T.length;_<E;_++)ln(T[_],M[_]);else ln(l,P);return M=ye(P,"script"),M.length>0&&Er(M,!L&&ye(l,"script")),P},cleanData:function(l){for(var f,d,_,E=v.event.special,T=0;(d=l[T])!==void 0;T++)if(De(d)){if(f=d[ot.expando]){if(f.events)for(_ in f.events)E[_]?v.event.remove(d,_):v.removeEvent(d,_,f.handle);d[ot.expando]=void 0}d[re.expando]&&(d[re.expando]=void 0)}}}),v.fn.extend({detach:function(l){return kn(this,l,!0)},remove:function(l){return kn(this,l)},text:function(l){return Vt(this,function(f){return f===void 0?v.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=f)})},null,l,arguments.length)},append:function(){return Ie(this,arguments,function(l){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var f=ta(this,l);f.appendChild(l)}})},prepend:function(){return Ie(this,arguments,function(l){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var f=ta(this,l);f.insertBefore(l,f.firstChild)}})},before:function(){return Ie(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Ie(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,f=0;(l=this[f])!=null;f++)l.nodeType===1&&(v.cleanData(ye(l,!1)),l.textContent="");return this},clone:function(l,f){return l=l==null?!1:l,f=f==null?l:f,this.map(function(){return v.clone(this,l,f)})},html:function(l){return Vt(this,function(f){var d=this[0]||{},_=0,E=this.length;if(f===void 0&&d.nodeType===1)return d.innerHTML;if(typeof f=="string"&&!Nn.test(f)&&!_e[(Si.exec(f)||["",""])[1].toLowerCase()]){f=v.htmlPrefilter(f);try{for(;_<E;_++)d=this[_]||{},d.nodeType===1&&(v.cleanData(ye(d,!1)),d.innerHTML=f);d=0}catch{}}d&&this.empty().append(f)},null,l,arguments.length)},replaceWith:function(){var l=[];return Ie(this,arguments,function(f){var d=this.parentNode;v.inArray(this,l)<0&&(v.cleanData(ye(this)),d&&d.replaceChild(f,this))},l)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,f){v.fn[l]=function(d){for(var _,E=[],T=v(d),M=T.length-1,P=0;P<=M;P++)_=P===M?this:this.clone(!0),v(T[P])[f](_),s.apply(E,_.get());return this.pushStack(E)}});var un=new RegExp("^("+Gi+")(?!px)[a-z%]+$","i"),se=function(l){var f=l.ownerDocument.defaultView;return(!f||!f.opener)&&(f=e),f.getComputedStyle(l)},Re=function(l,f,d){var _,E,T={};for(E in f)T[E]=l.style[E],l.style[E]=f[E];_=d.call(l);for(E in f)l.style[E]=T[E];return _},ea=new RegExp(Ee.join("|"),"i");(function(){function l(){if(!!N){L.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",N.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",di.appendChild(L).appendChild(N);var j=e.getComputedStyle(N);d=j.top!=="1%",P=f(j.marginLeft)===12,N.style.right="60%",T=f(j.right)===36,_=f(j.width)===36,N.style.position="absolute",E=f(N.offsetWidth/3)===12,di.removeChild(L),N=null}}function f(j){return Math.round(parseFloat(j))}var d,_,E,T,M,P,L=S.createElement("div"),N=S.createElement("div");!N.style||(N.style.backgroundClip="content-box",N.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=N.style.backgroundClip==="content-box",v.extend(m,{boxSizingReliable:function(){return l(),_},pixelBoxStyles:function(){return l(),T},pixelPosition:function(){return l(),d},reliableMarginLeft:function(){return l(),P},scrollboxSize:function(){return l(),E},reliableTrDimensions:function(){var j,X,k,U;return M==null&&(j=S.createElement("table"),X=S.createElement("tr"),k=S.createElement("div"),j.style.cssText="position:absolute;left:-11111px;border-collapse:separate",X.style.cssText="border:1px solid",X.style.height="1px",k.style.height="9px",k.style.display="block",di.appendChild(j).appendChild(X).appendChild(k),U=e.getComputedStyle(X),M=parseInt(U.height,10)+parseInt(U.borderTopWidth,10)+parseInt(U.borderBottomWidth,10)===X.offsetHeight,di.removeChild(j)),M}}))})();function Gn(l,f,d){var _,E,T,M,P=l.style;return d=d||se(l),d&&(M=d.getPropertyValue(f)||d[f],M===""&&!pi(l)&&(M=v.style(l,f)),!m.pixelBoxStyles()&&un.test(M)&&ea.test(f)&&(_=P.width,E=P.minWidth,T=P.maxWidth,P.minWidth=P.maxWidth=P.width=M,M=d.width,P.width=_,P.minWidth=E,P.maxWidth=T)),M!==void 0?M+"":M}function ia(l,f){return{get:function(){if(l()){delete this.get;return}return(this.get=f).apply(this,arguments)}}}var pl=["Webkit","Moz","ms"],vl=S.createElement("div").style,gl={};function Jc(l){for(var f=l[0].toUpperCase()+l.slice(1),d=pl.length;d--;)if(l=pl[d]+f,l in vl)return l}function ps(l){var f=v.cssProps[l]||gl[l];return f||(l in vl?l:gl[l]=Jc(l)||l)}var Qc=/^(none|table(?!-c[ea]).+)/,_l=/^--/,td={position:"absolute",visibility:"hidden",display:"block"},yl={letterSpacing:"0",fontWeight:"400"};function ml(l,f,d){var _=Fe.exec(f);return _?Math.max(0,_[2]-(d||0))+(_[3]||"px"):f}function vs(l,f,d,_,E,T){var M=f==="width"?1:0,P=0,L=0;if(d===(_?"border":"content"))return 0;for(;M<4;M+=2)d==="margin"&&(L+=v.css(l,d+Ee[M],!0,E)),_?(d==="content"&&(L-=v.css(l,"padding"+Ee[M],!0,E)),d!=="margin"&&(L-=v.css(l,"border"+Ee[M]+"Width",!0,E))):(L+=v.css(l,"padding"+Ee[M],!0,E),d!=="padding"?L+=v.css(l,"border"+Ee[M]+"Width",!0,E):P+=v.css(l,"border"+Ee[M]+"Width",!0,E));return!_&&T>=0&&(L+=Math.max(0,Math.ceil(l["offset"+f[0].toUpperCase()+f.slice(1)]-T-L-P-.5))||0),L}function El(l,f,d){var _=se(l),E=!m.boxSizingReliable()||d,T=E&&v.css(l,"boxSizing",!1,_)==="border-box",M=T,P=Gn(l,f,_),L="offset"+f[0].toUpperCase()+f.slice(1);if(un.test(P)){if(!d)return P;P="auto"}return(!m.boxSizingReliable()&&T||!m.reliableTrDimensions()&&Z(l,"tr")||P==="auto"||!parseFloat(P)&&v.css(l,"display",!1,_)==="inline")&&l.getClientRects().length&&(T=v.css(l,"boxSizing",!1,_)==="border-box",M=L in l,M&&(P=l[L])),P=parseFloat(P)||0,P+vs(l,f,d||(T?"border":"content"),M,_,P)+"px"}v.extend({cssHooks:{opacity:{get:function(l,f){if(f){var d=Gn(l,"opacity");return d===""?"1":d}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(l,f,d,_){if(!(!l||l.nodeType===3||l.nodeType===8||!l.style)){var E,T,M,P=Oe(f),L=_l.test(f),N=l.style;if(L||(f=ps(P)),M=v.cssHooks[f]||v.cssHooks[P],d!==void 0){if(T=typeof d,T==="string"&&(E=Fe.exec(d))&&E[1]&&(d=ri(l,f,E),T="number"),d==null||d!==d)return;T==="number"&&!L&&(d+=E&&E[3]||(v.cssNumber[P]?"":"px")),!m.clearCloneStyle&&d===""&&f.indexOf("background")===0&&(N[f]="inherit"),(!M||!("set"in M)||(d=M.set(l,d,_))!==void 0)&&(L?N.setProperty(f,d):N[f]=d)}else return M&&"get"in M&&(E=M.get(l,!1,_))!==void 0?E:N[f]}},css:function(l,f,d,_){var E,T,M,P=Oe(f),L=_l.test(f);return L||(f=ps(P)),M=v.cssHooks[f]||v.cssHooks[P],M&&"get"in M&&(E=M.get(l,!0,d)),E===void 0&&(E=Gn(l,f,_)),E==="normal"&&f in yl&&(E=yl[f]),d===""||d?(T=parseFloat(E),d===!0||isFinite(T)?T||0:E):E}}),v.each(["height","width"],function(l,f){v.cssHooks[f]={get:function(d,_,E){if(_)return Qc.test(v.css(d,"display"))&&(!d.getClientRects().length||!d.getBoundingClientRect().width)?Re(d,td,function(){return El(d,f,E)}):El(d,f,E)},set:function(d,_,E){var T,M=se(d),P=!m.scrollboxSize()&&M.position==="absolute",L=P||E,N=L&&v.css(d,"boxSizing",!1,M)==="border-box",j=E?vs(d,f,E,N,M):0;return N&&P&&(j-=Math.ceil(d["offset"+f[0].toUpperCase()+f.slice(1)]-parseFloat(M[f])-vs(d,f,"border",!1,M)-.5)),j&&(T=Fe.exec(_))&&(T[3]||"px")!=="px"&&(d.style[f]=_,_=v.css(d,f)),ml(d,_,j)}}}),v.cssHooks.marginLeft=ia(m.reliableMarginLeft,function(l,f){if(f)return(parseFloat(Gn(l,"marginLeft"))||l.getBoundingClientRect().left-Re(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),v.each({margin:"",padding:"",border:"Width"},function(l,f){v.cssHooks[l+f]={expand:function(d){for(var _=0,E={},T=typeof d=="string"?d.split(" "):[d];_<4;_++)E[l+Ee[_]+f]=T[_]||T[_-2]||T[0];return E}},l!=="margin"&&(v.cssHooks[l+f].set=ml)}),v.fn.extend({css:function(l,f){return Vt(this,function(d,_,E){var T,M,P={},L=0;if(Array.isArray(_)){for(T=se(d),M=_.length;L<M;L++)P[_[L]]=v.css(d,_[L],!1,T);return P}return E!==void 0?v.style(d,_,E):v.css(d,_)},l,f,arguments.length>1)}});function ke(l,f,d,_,E){return new ke.prototype.init(l,f,d,_,E)}v.Tween=ke,ke.prototype={constructor:ke,init:function(l,f,d,_,E,T){this.elem=l,this.prop=d,this.easing=E||v.easing._default,this.options=f,this.start=this.now=this.cur(),this.end=_,this.unit=T||(v.cssNumber[d]?"":"px")},cur:function(){var l=ke.propHooks[this.prop];return l&&l.get?l.get(this):ke.propHooks._default.get(this)},run:function(l){var f,d=ke.propHooks[this.prop];return this.options.duration?this.pos=f=v.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):this.pos=f=l,this.now=(this.end-this.start)*f+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),d&&d.set?d.set(this):ke.propHooks._default.set(this),this}},ke.prototype.init.prototype=ke.prototype,ke.propHooks={_default:{get:function(l){var f;return l.elem.nodeType!==1||l.elem[l.prop]!=null&&l.elem.style[l.prop]==null?l.elem[l.prop]:(f=v.css(l.elem,l.prop,""),!f||f==="auto"?0:f)},set:function(l){v.fx.step[l.prop]?v.fx.step[l.prop](l):l.elem.nodeType===1&&(v.cssHooks[l.prop]||l.elem.style[ps(l.prop)]!=null)?v.style(l.elem,l.prop,l.now+l.unit):l.elem[l.prop]=l.now}}},ke.propHooks.scrollTop=ke.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},v.easing={linear:function(l){return l},swing:function(l){return .5-Math.cos(l*Math.PI)/2},_default:"swing"},v.fx=ke.prototype.init,v.fx.step={};var xr,Qa,ed=/^(?:toggle|show|hide)$/,id=/queueHooks$/;function gs(){Qa&&(S.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(gs):e.setTimeout(gs,v.fx.interval),v.fx.tick())}function xl(){return e.setTimeout(function(){xr=void 0}),xr=Date.now()}function to(l,f){var d,_=0,E={height:l};for(f=f?1:0;_<4;_+=2-f)d=Ee[_],E["margin"+d]=E["padding"+d]=l;return f&&(E.opacity=E.width=l),E}function Tl(l,f,d){for(var _,E=(vi.tweeners[f]||[]).concat(vi.tweeners["*"]),T=0,M=E.length;T<M;T++)if(_=E[T].call(d,f,l))return _}function nd(l,f,d){var _,E,T,M,P,L,N,j,X="width"in f||"height"in f,k=this,U={},nt=l.style,xt=l.nodeType&&Ye(l),rt=ot.get(l,"fxshow");d.queue||(M=v._queueHooks(l,"fx"),M.unqueued==null&&(M.unqueued=0,P=M.empty.fire,M.empty.fire=function(){M.unqueued||P()}),M.unqueued++,k.always(function(){k.always(function(){M.unqueued--,v.queue(l,"fx").length||M.empty.fire()})}));for(_ in f)if(E=f[_],ed.test(E)){if(delete f[_],T=T||E==="toggle",E===(xt?"hide":"show"))if(E==="show"&&rt&&rt[_]!==void 0)xt=!0;else continue;U[_]=rt&&rt[_]||v.style(l,_)}if(L=!v.isEmptyObject(f),!(!L&&v.isEmptyObject(U))){X&&l.nodeType===1&&(d.overflow=[nt.overflow,nt.overflowX,nt.overflowY],N=rt&&rt.display,N==null&&(N=ot.get(l,"display")),j=v.css(l,"display"),j==="none"&&(N?j=N:(fe([l],!0),N=l.style.display||N,j=v.css(l,"display"),fe([l]))),(j==="inline"||j==="inline-block"&&N!=null)&&v.css(l,"float")==="none"&&(L||(k.done(function(){nt.display=N}),N==null&&(j=nt.display,N=j==="none"?"":j)),nt.display="inline-block")),d.overflow&&(nt.overflow="hidden",k.always(function(){nt.overflow=d.overflow[0],nt.overflowX=d.overflow[1],nt.overflowY=d.overflow[2]})),L=!1;for(_ in U)L||(rt?"hidden"in rt&&(xt=rt.hidden):rt=ot.access(l,"fxshow",{display:N}),T&&(rt.hidden=!xt),xt&&fe([l],!0),k.done(function(){xt||fe([l]),ot.remove(l,"fxshow");for(_ in U)v.style(l,_,U[_])})),L=Tl(xt?rt[_]:0,_,k),_ in rt||(rt[_]=L.start,xt&&(L.end=L.start,L.start=0))}}function rd(l,f){var d,_,E,T,M;for(d in l)if(_=Oe(d),E=f[_],T=l[d],Array.isArray(T)&&(E=T[1],T=l[d]=T[0]),d!==_&&(l[_]=T,delete l[d]),M=v.cssHooks[_],M&&"expand"in M){T=M.expand(T),delete l[_];for(d in T)d in l||(l[d]=T[d],f[d]=E)}else f[_]=E}function vi(l,f,d){var _,E,T=0,M=vi.prefilters.length,P=v.Deferred().always(function(){delete L.elem}),L=function(){if(E)return!1;for(var X=xr||xl(),k=Math.max(0,N.startTime+N.duration-X),U=k/N.duration||0,nt=1-U,xt=0,rt=N.tweens.length;xt<rt;xt++)N.tweens[xt].run(nt);return P.notifyWith(l,[N,nt,k]),nt<1&&rt?k:(rt||P.notifyWith(l,[N,1,0]),P.resolveWith(l,[N]),!1)},N=P.promise({elem:l,props:v.extend({},f),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},d),originalProperties:f,originalOptions:d,startTime:xr||xl(),duration:d.duration,tweens:[],createTween:function(X,k){var U=v.Tween(l,N.opts,X,k,N.opts.specialEasing[X]||N.opts.easing);return N.tweens.push(U),U},stop:function(X){var k=0,U=X?N.tweens.length:0;if(E)return this;for(E=!0;k<U;k++)N.tweens[k].run(1);return X?(P.notifyWith(l,[N,1,0]),P.resolveWith(l,[N,X])):P.rejectWith(l,[N,X]),this}}),j=N.props;for(rd(j,N.opts.specialEasing);T<M;T++)if(_=vi.prefilters[T].call(N,l,j,N.opts),_)return x(_.stop)&&(v._queueHooks(N.elem,N.opts.queue).stop=_.stop.bind(_)),_;return v.map(j,Tl,N),x(N.opts.start)&&N.opts.start.call(l,N),N.progress(N.opts.progress).done(N.opts.done,N.opts.complete).fail(N.opts.fail).always(N.opts.always),v.fx.timer(v.extend(L,{elem:l,anim:N,queue:N.opts.queue})),N}v.Animation=v.extend(vi,{tweeners:{"*":[function(l,f){var d=this.createTween(l,f);return ri(d.elem,l,Fe.exec(f),d),d}]},tweener:function(l,f){x(l)?(f=l,l=["*"]):l=l.match(It);for(var d,_=0,E=l.length;_<E;_++)d=l[_],vi.tweeners[d]=vi.tweeners[d]||[],vi.tweeners[d].unshift(f)},prefilters:[nd],prefilter:function(l,f){f?vi.prefilters.unshift(l):vi.prefilters.push(l)}}),v.speed=function(l,f,d){var _=l&&typeof l=="object"?v.extend({},l):{complete:d||!d&&f||x(l)&&l,duration:l,easing:d&&f||f&&!x(f)&&f};return v.fx.off?_.duration=0:typeof _.duration!="number"&&(_.duration in v.fx.speeds?_.duration=v.fx.speeds[_.duration]:_.duration=v.fx.speeds._default),(_.queue==null||_.queue===!0)&&(_.queue="fx"),_.old=_.complete,_.complete=function(){x(_.old)&&_.old.call(this),_.queue&&v.dequeue(this,_.queue)},_},v.fn.extend({fadeTo:function(l,f,d,_){return this.filter(Ye).css("opacity",0).show().end().animate({opacity:f},l,d,_)},animate:function(l,f,d,_){var E=v.isEmptyObject(l),T=v.speed(f,d,_),M=function(){var P=vi(this,v.extend({},l),T);(E||ot.get(this,"finish"))&&P.stop(!0)};return M.finish=M,E||T.queue===!1?this.each(M):this.queue(T.queue,M)},stop:function(l,f,d){var _=function(E){var T=E.stop;delete E.stop,T(d)};return typeof l!="string"&&(d=f,f=l,l=void 0),f&&this.queue(l||"fx",[]),this.each(function(){var E=!0,T=l!=null&&l+"queueHooks",M=v.timers,P=ot.get(this);if(T)P[T]&&P[T].stop&&_(P[T]);else for(T in P)P[T]&&P[T].stop&&id.test(T)&&_(P[T]);for(T=M.length;T--;)M[T].elem===this&&(l==null||M[T].queue===l)&&(M[T].anim.stop(d),E=!1,M.splice(T,1));(E||!d)&&v.dequeue(this,l)})},finish:function(l){return l!==!1&&(l=l||"fx"),this.each(function(){var f,d=ot.get(this),_=d[l+"queue"],E=d[l+"queueHooks"],T=v.timers,M=_?_.length:0;for(d.finish=!0,v.queue(this,l,[]),E&&E.stop&&E.stop.call(this,!0),f=T.length;f--;)T[f].elem===this&&T[f].queue===l&&(T[f].anim.stop(!0),T.splice(f,1));for(f=0;f<M;f++)_[f]&&_[f].finish&&_[f].finish.call(this);delete d.finish})}}),v.each(["toggle","show","hide"],function(l,f){var d=v.fn[f];v.fn[f]=function(_,E,T){return _==null||typeof _=="boolean"?d.apply(this,arguments):this.animate(to(f,!0),_,E,T)}}),v.each({slideDown:to("show"),slideUp:to("hide"),slideToggle:to("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,f){v.fn[l]=function(d,_,E){return this.animate(f,d,_,E)}}),v.timers=[],v.fx.tick=function(){var l,f=0,d=v.timers;for(xr=Date.now();f<d.length;f++)l=d[f],!l()&&d[f]===l&&d.splice(f--,1);d.length||v.fx.stop(),xr=void 0},v.fx.timer=function(l){v.timers.push(l),v.fx.start()},v.fx.interval=13,v.fx.start=function(){Qa||(Qa=!0,gs())},v.fx.stop=function(){Qa=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(l,f){return l=v.fx&&v.fx.speeds[l]||l,f=f||"fx",this.queue(f,function(d,_){var E=e.setTimeout(d,l);_.stop=function(){e.clearTimeout(E)}})},function(){var l=S.createElement("input"),f=S.createElement("select"),d=f.appendChild(S.createElement("option"));l.type="checkbox",m.checkOn=l.value!=="",m.optSelected=d.selected,l=S.createElement("input"),l.value="t",l.type="radio",m.radioValue=l.value==="t"}();var Cl,na=v.expr.attrHandle;v.fn.extend({attr:function(l,f){return Vt(this,v.attr,l,f,arguments.length>1)},removeAttr:function(l){return this.each(function(){v.removeAttr(this,l)})}}),v.extend({attr:function(l,f,d){var _,E,T=l.nodeType;if(!(T===3||T===8||T===2)){if(typeof l.getAttribute=="undefined")return v.prop(l,f,d);if((T!==1||!v.isXMLDoc(l))&&(E=v.attrHooks[f.toLowerCase()]||(v.expr.match.bool.test(f)?Cl:void 0)),d!==void 0){if(d===null){v.removeAttr(l,f);return}return E&&"set"in E&&(_=E.set(l,d,f))!==void 0?_:(l.setAttribute(f,d+""),d)}return E&&"get"in E&&(_=E.get(l,f))!==null?_:(_=v.find.attr(l,f),_==null?void 0:_)}},attrHooks:{type:{set:function(l,f){if(!m.radioValue&&f==="radio"&&Z(l,"input")){var d=l.value;return l.setAttribute("type",f),d&&(l.value=d),f}}}},removeAttr:function(l,f){var d,_=0,E=f&&f.match(It);if(E&&l.nodeType===1)for(;d=E[_++];)l.removeAttribute(d)}}),Cl={set:function(l,f,d){return f===!1?v.removeAttr(l,d):l.setAttribute(d,d),d}},v.each(v.expr.match.bool.source.match(/\w+/g),function(l,f){var d=na[f]||v.find.attr;na[f]=function(_,E,T){var M,P,L=E.toLowerCase();return T||(P=na[L],na[L]=M,M=d(_,E,T)!=null?L:null,na[L]=P),M}});var ad=/^(?:input|select|textarea|button)$/i,od=/^(?:a|area)$/i;v.fn.extend({prop:function(l,f){return Vt(this,v.prop,l,f,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[v.propFix[l]||l]})}}),v.extend({prop:function(l,f,d){var _,E,T=l.nodeType;if(!(T===3||T===8||T===2))return(T!==1||!v.isXMLDoc(l))&&(f=v.propFix[f]||f,E=v.propHooks[f]),d!==void 0?E&&"set"in E&&(_=E.set(l,d,f))!==void 0?_:l[f]=d:E&&"get"in E&&(_=E.get(l,f))!==null?_:l[f]},propHooks:{tabIndex:{get:function(l){var f=v.find.attr(l,"tabindex");return f?parseInt(f,10):ad.test(l.nodeName)||od.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(v.propHooks.selected={get:function(l){var f=l.parentNode;return f&&f.parentNode&&f.parentNode.selectedIndex,null},set:function(l){var f=l.parentNode;f&&(f.selectedIndex,f.parentNode&&f.parentNode.selectedIndex)}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){v.propFix[this.toLowerCase()]=this});function jn(l){var f=l.match(It)||[];return f.join(" ")}function Bn(l){return l.getAttribute&&l.getAttribute("class")||""}function _s(l){return Array.isArray(l)?l:typeof l=="string"?l.match(It)||[]:[]}v.fn.extend({addClass:function(l){var f,d,_,E,T,M,P,L=0;if(x(l))return this.each(function(N){v(this).addClass(l.call(this,N,Bn(this)))});if(f=_s(l),f.length){for(;d=this[L++];)if(E=Bn(d),_=d.nodeType===1&&" "+jn(E)+" ",_){for(M=0;T=f[M++];)_.indexOf(" "+T+" ")<0&&(_+=T+" ");P=jn(_),E!==P&&d.setAttribute("class",P)}}return this},removeClass:function(l){var f,d,_,E,T,M,P,L=0;if(x(l))return this.each(function(N){v(this).removeClass(l.call(this,N,Bn(this)))});if(!arguments.length)return this.attr("class","");if(f=_s(l),f.length){for(;d=this[L++];)if(E=Bn(d),_=d.nodeType===1&&" "+jn(E)+" ",_){for(M=0;T=f[M++];)for(;_.indexOf(" "+T+" ")>-1;)_=_.replace(" "+T+" "," ");P=jn(_),E!==P&&d.setAttribute("class",P)}}return this},toggleClass:function(l,f){var d=typeof l,_=d==="string"||Array.isArray(l);return typeof f=="boolean"&&_?f?this.addClass(l):this.removeClass(l):x(l)?this.each(function(E){v(this).toggleClass(l.call(this,E,Bn(this),f),f)}):this.each(function(){var E,T,M,P;if(_)for(T=0,M=v(this),P=_s(l);E=P[T++];)M.hasClass(E)?M.removeClass(E):M.addClass(E);else(l===void 0||d==="boolean")&&(E=Bn(this),E&&ot.set(this,"__className__",E),this.setAttribute&&this.setAttribute("class",E||l===!1?"":ot.get(this,"__className__")||""))})},hasClass:function(l){var f,d,_=0;for(f=" "+l+" ";d=this[_++];)if(d.nodeType===1&&(" "+jn(Bn(d))+" ").indexOf(f)>-1)return!0;return!1}});var sd=/\r/g;v.fn.extend({val:function(l){var f,d,_,E=this[0];return arguments.length?(_=x(l),this.each(function(T){var M;this.nodeType===1&&(_?M=l.call(this,T,v(this).val()):M=l,M==null?M="":typeof M=="number"?M+="":Array.isArray(M)&&(M=v.map(M,function(P){return P==null?"":P+""})),f=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()],(!f||!("set"in f)||f.set(this,M,"value")===void 0)&&(this.value=M))})):E?(f=v.valHooks[E.type]||v.valHooks[E.nodeName.toLowerCase()],f&&"get"in f&&(d=f.get(E,"value"))!==void 0?d:(d=E.value,typeof d=="string"?d.replace(sd,""):d==null?"":d)):void 0}}),v.extend({valHooks:{option:{get:function(l){var f=v.find.attr(l,"value");return f!=null?f:jn(v.text(l))}},select:{get:function(l){var f,d,_,E=l.options,T=l.selectedIndex,M=l.type==="select-one",P=M?null:[],L=M?T+1:E.length;for(T<0?_=L:_=M?T:0;_<L;_++)if(d=E[_],(d.selected||_===T)&&!d.disabled&&(!d.parentNode.disabled||!Z(d.parentNode,"optgroup"))){if(f=v(d).val(),M)return f;P.push(f)}return P},set:function(l,f){for(var d,_,E=l.options,T=v.makeArray(f),M=E.length;M--;)_=E[M],(_.selected=v.inArray(v.valHooks.option.get(_),T)>-1)&&(d=!0);return d||(l.selectedIndex=-1),T}}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]={set:function(l,f){if(Array.isArray(f))return l.checked=v.inArray(v(l).val(),f)>-1}},m.checkOn||(v.valHooks[this].get=function(l){return l.getAttribute("value")===null?"on":l.value})}),m.focusin="onfocusin"in e;var Ml=/^(?:focusinfocus|focusoutblur)$/,wl=function(l){l.stopPropagation()};v.extend(v.event,{trigger:function(l,f,d,_){var E,T,M,P,L,N,j,X,k=[d||S],U=p.call(l,"type")?l.type:l,nt=p.call(l,"namespace")?l.namespace.split("."):[];if(T=X=M=d=d||S,!(d.nodeType===3||d.nodeType===8)&&!Ml.test(U+v.event.triggered)&&(U.indexOf(".")>-1&&(nt=U.split("."),U=nt.shift(),nt.sort()),L=U.indexOf(":")<0&&"on"+U,l=l[v.expando]?l:new v.Event(U,typeof l=="object"&&l),l.isTrigger=_?2:3,l.namespace=nt.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+nt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=d),f=f==null?[l]:v.makeArray(f,[l]),j=v.event.special[U]||{},!(!_&&j.trigger&&j.trigger.apply(d,f)===!1))){if(!_&&!j.noBubble&&!C(d)){for(P=j.delegateType||U,Ml.test(P+U)||(T=T.parentNode);T;T=T.parentNode)k.push(T),M=T;M===(d.ownerDocument||S)&&k.push(M.defaultView||M.parentWindow||e)}for(E=0;(T=k[E++])&&!l.isPropagationStopped();)X=T,l.type=E>1?P:j.bindType||U,N=(ot.get(T,"events")||Object.create(null))[l.type]&&ot.get(T,"handle"),N&&N.apply(T,f),N=L&&T[L],N&&N.apply&&De(T)&&(l.result=N.apply(T,f),l.result===!1&&l.preventDefault());return l.type=U,!_&&!l.isDefaultPrevented()&&(!j._default||j._default.apply(k.pop(),f)===!1)&&De(d)&&L&&x(d[U])&&!C(d)&&(M=d[L],M&&(d[L]=null),v.event.triggered=U,l.isPropagationStopped()&&X.addEventListener(U,wl),d[U](),l.isPropagationStopped()&&X.removeEventListener(U,wl),v.event.triggered=void 0,M&&(d[L]=M)),l.result}},simulate:function(l,f,d){var _=v.extend(new v.Event,d,{type:l,isSimulated:!0});v.event.trigger(_,null,f)}}),v.fn.extend({trigger:function(l,f){return this.each(function(){v.event.trigger(l,f,this)})},triggerHandler:function(l,f){var d=this[0];if(d)return v.event.trigger(l,f,d,!0)}}),m.focusin||v.each({focus:"focusin",blur:"focusout"},function(l,f){var d=function(_){v.event.simulate(f,_.target,v.event.fix(_))};v.event.special[f]={setup:function(){var _=this.ownerDocument||this.document||this,E=ot.access(_,f);E||_.addEventListener(l,d,!0),ot.access(_,f,(E||0)+1)},teardown:function(){var _=this.ownerDocument||this.document||this,E=ot.access(_,f)-1;E?ot.access(_,f,E):(_.removeEventListener(l,d,!0),ot.remove(_,f))}}});var ra=e.location,Sl={guid:Date.now()},ys=/\?/;v.parseXML=function(l){var f,d;if(!l||typeof l!="string")return null;try{f=new e.DOMParser().parseFromString(l,"text/xml")}catch{}return d=f&&f.getElementsByTagName("parsererror")[0],(!f||d)&&v.error("Invalid XML: "+(d?v.map(d.childNodes,function(_){return _.textContent}).join(`
`):l)),f};var hd=/\[\]$/,Ol=/\r?\n/g,ld=/^(?:submit|button|image|reset|file)$/i,ud=/^(?:input|select|textarea|keygen)/i;function ms(l,f,d,_){var E;if(Array.isArray(f))v.each(f,function(T,M){d||hd.test(l)?_(l,M):ms(l+"["+(typeof M=="object"&&M!=null?T:"")+"]",M,d,_)});else if(!d&&A(f)==="object")for(E in f)ms(l+"["+E+"]",f[E],d,_);else _(l,f)}v.param=function(l,f){var d,_=[],E=function(T,M){var P=x(M)?M():M;_[_.length]=encodeURIComponent(T)+"="+encodeURIComponent(P==null?"":P)};if(l==null)return"";if(Array.isArray(l)||l.jquery&&!v.isPlainObject(l))v.each(l,function(){E(this.name,this.value)});else for(d in l)ms(d,l[d],f,E);return _.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=v.prop(this,"elements");return l?v.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!v(this).is(":disabled")&&ud.test(this.nodeName)&&!ld.test(l)&&(this.checked||!ge.test(l))}).map(function(l,f){var d=v(this).val();return d==null?null:Array.isArray(d)?v.map(d,function(_){return{name:f.name,value:_.replace(Ol,`\r
`)}}):{name:f.name,value:d.replace(Ol,`\r
`)}}).get()}});var fd=/%20/g,cd=/#.*$/,dd=/([?&])_=[^&]*/,pd=/^(.*?):[ \t]*([^\r\n]*)$/mg,vd=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gd=/^(?:GET|HEAD)$/,_d=/^\/\//,Il={},Es={},Rl="*/".concat("*"),xs=S.createElement("a");xs.href=ra.href;function Pl(l){return function(f,d){typeof f!="string"&&(d=f,f="*");var _,E=0,T=f.toLowerCase().match(It)||[];if(x(d))for(;_=T[E++];)_[0]==="+"?(_=_.slice(1)||"*",(l[_]=l[_]||[]).unshift(d)):(l[_]=l[_]||[]).push(d)}}function Ll(l,f,d,_){var E={},T=l===Es;function M(P){var L;return E[P]=!0,v.each(l[P]||[],function(N,j){var X=j(f,d,_);if(typeof X=="string"&&!T&&!E[X])return f.dataTypes.unshift(X),M(X),!1;if(T)return!(L=X)}),L}return M(f.dataTypes[0])||!E["*"]&&M("*")}function Ts(l,f){var d,_,E=v.ajaxSettings.flatOptions||{};for(d in f)f[d]!==void 0&&((E[d]?l:_||(_={}))[d]=f[d]);return _&&v.extend(!0,l,_),l}function yd(l,f,d){for(var _,E,T,M,P=l.contents,L=l.dataTypes;L[0]==="*";)L.shift(),_===void 0&&(_=l.mimeType||f.getResponseHeader("Content-Type"));if(_){for(E in P)if(P[E]&&P[E].test(_)){L.unshift(E);break}}if(L[0]in d)T=L[0];else{for(E in d){if(!L[0]||l.converters[E+" "+L[0]]){T=E;break}M||(M=E)}T=T||M}if(T)return T!==L[0]&&L.unshift(T),d[T]}function md(l,f,d,_){var E,T,M,P,L,N={},j=l.dataTypes.slice();if(j[1])for(M in l.converters)N[M.toLowerCase()]=l.converters[M];for(T=j.shift();T;)if(l.responseFields[T]&&(d[l.responseFields[T]]=f),!L&&_&&l.dataFilter&&(f=l.dataFilter(f,l.dataType)),L=T,T=j.shift(),T){if(T==="*")T=L;else if(L!=="*"&&L!==T){if(M=N[L+" "+T]||N["* "+T],!M){for(E in N)if(P=E.split(" "),P[1]===T&&(M=N[L+" "+P[0]]||N["* "+P[0]],M)){M===!0?M=N[E]:N[E]!==!0&&(T=P[0],j.unshift(P[1]));break}}if(M!==!0)if(M&&l.throws)f=M(f);else try{f=M(f)}catch(X){return{state:"parsererror",error:M?X:"No conversion from "+L+" to "+T}}}}return{state:"success",data:f}}v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ra.href,type:"GET",isLocal:vd.test(ra.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rl,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,f){return f?Ts(Ts(l,v.ajaxSettings),f):Ts(v.ajaxSettings,l)},ajaxPrefilter:Pl(Il),ajaxTransport:Pl(Es),ajax:function(l,f){typeof l=="object"&&(f=l,l=void 0),f=f||{};var d,_,E,T,M,P,L,N,j,X,k=v.ajaxSetup({},f),U=k.context||k,nt=k.context&&(U.nodeType||U.jquery)?v(U):v.event,xt=v.Deferred(),rt=v.Callbacks("once memory"),he=k.statusCode||{},ae={},qe={},jt="canceled",yt={readyState:0,getResponseHeader:function(At){var Ht;if(L){if(!T)for(T={};Ht=pd.exec(E);)T[Ht[1].toLowerCase()+" "]=(T[Ht[1].toLowerCase()+" "]||[]).concat(Ht[2]);Ht=T[At.toLowerCase()+" "]}return Ht==null?null:Ht.join(", ")},getAllResponseHeaders:function(){return L?E:null},setRequestHeader:function(At,Ht){return L==null&&(At=qe[At.toLowerCase()]=qe[At.toLowerCase()]||At,ae[At]=Ht),this},overrideMimeType:function(At){return L==null&&(k.mimeType=At),this},statusCode:function(At){var Ht;if(At)if(L)yt.always(At[yt.status]);else for(Ht in At)he[Ht]=[he[Ht],At[Ht]];return this},abort:function(At){var Ht=At||jt;return d&&d.abort(Ht),Ge(0,Ht),this}};if(xt.promise(yt),k.url=((l||k.url||ra.href)+"").replace(_d,ra.protocol+"//"),k.type=f.method||f.type||k.method||k.type,k.dataTypes=(k.dataType||"*").toLowerCase().match(It)||[""],k.crossDomain==null){P=S.createElement("a");try{P.href=k.url,P.href=P.href,k.crossDomain=xs.protocol+"//"+xs.host!=P.protocol+"//"+P.host}catch{k.crossDomain=!0}}if(k.data&&k.processData&&typeof k.data!="string"&&(k.data=v.param(k.data,k.traditional)),Ll(Il,k,f,yt),L)return yt;N=v.event&&k.global,N&&v.active++==0&&v.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!gd.test(k.type),_=k.url.replace(cd,""),k.hasContent?k.data&&k.processData&&(k.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(k.data=k.data.replace(fd,"+")):(X=k.url.slice(_.length),k.data&&(k.processData||typeof k.data=="string")&&(_+=(ys.test(_)?"&":"?")+k.data,delete k.data),k.cache===!1&&(_=_.replace(dd,"$1"),X=(ys.test(_)?"&":"?")+"_="+Sl.guid+++X),k.url=_+X),k.ifModified&&(v.lastModified[_]&&yt.setRequestHeader("If-Modified-Since",v.lastModified[_]),v.etag[_]&&yt.setRequestHeader("If-None-Match",v.etag[_])),(k.data&&k.hasContent&&k.contentType!==!1||f.contentType)&&yt.setRequestHeader("Content-Type",k.contentType),yt.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+(k.dataTypes[0]!=="*"?", "+Rl+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)yt.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(U,yt,k)===!1||L))return yt.abort();if(jt="abort",rt.add(k.complete),yt.done(k.success),yt.fail(k.error),d=Ll(Es,k,f,yt),!d)Ge(-1,"No Transport");else{if(yt.readyState=1,N&&nt.trigger("ajaxSend",[yt,k]),L)return yt;k.async&&k.timeout>0&&(M=e.setTimeout(function(){yt.abort("timeout")},k.timeout));try{L=!1,d.send(ae,Ge)}catch(At){if(L)throw At;Ge(-1,At)}}function Ge(At,Ht,oa,eo){var Ve,Un,zn,je,fn,ai=Ht;L||(L=!0,M&&e.clearTimeout(M),d=void 0,E=eo||"",yt.readyState=At>0?4:0,Ve=At>=200&&At<300||At===304,oa&&(je=yd(k,yt,oa)),!Ve&&v.inArray("script",k.dataTypes)>-1&&v.inArray("json",k.dataTypes)<0&&(k.converters["text script"]=function(){}),je=md(k,je,yt,Ve),Ve?(k.ifModified&&(fn=yt.getResponseHeader("Last-Modified"),fn&&(v.lastModified[_]=fn),fn=yt.getResponseHeader("etag"),fn&&(v.etag[_]=fn)),At===204||k.type==="HEAD"?ai="nocontent":At===304?ai="notmodified":(ai=je.state,Un=je.data,zn=je.error,Ve=!zn)):(zn=ai,(At||!ai)&&(ai="error",At<0&&(At=0))),yt.status=At,yt.statusText=(Ht||ai)+"",Ve?xt.resolveWith(U,[Un,ai,yt]):xt.rejectWith(U,[yt,ai,zn]),yt.statusCode(he),he=void 0,N&&nt.trigger(Ve?"ajaxSuccess":"ajaxError",[yt,k,Ve?Un:zn]),rt.fireWith(U,[yt,ai]),N&&(nt.trigger("ajaxComplete",[yt,k]),--v.active||v.event.trigger("ajaxStop")))}return yt},getJSON:function(l,f,d){return v.get(l,f,d,"json")},getScript:function(l,f){return v.get(l,void 0,f,"script")}}),v.each(["get","post"],function(l,f){v[f]=function(d,_,E,T){return x(_)&&(T=T||E,E=_,_=void 0),v.ajax(v.extend({url:d,type:f,dataType:T,data:_,success:E},v.isPlainObject(d)&&d))}}),v.ajaxPrefilter(function(l){var f;for(f in l.headers)f.toLowerCase()==="content-type"&&(l.contentType=l.headers[f]||"")}),v._evalUrl=function(l,f,d){return v.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(_){v.globalEval(_,f,d)}})},v.fn.extend({wrapAll:function(l){var f;return this[0]&&(x(l)&&(l=l.call(this[0])),f=v(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&f.insertBefore(this[0]),f.map(function(){for(var d=this;d.firstElementChild;)d=d.firstElementChild;return d}).append(this)),this},wrapInner:function(l){return x(l)?this.each(function(f){v(this).wrapInner(l.call(this,f))}):this.each(function(){var f=v(this),d=f.contents();d.length?d.wrapAll(l):f.append(l)})},wrap:function(l){var f=x(l);return this.each(function(d){v(this).wrapAll(f?l.call(this,d):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){v(this).replaceWith(this.childNodes)}),this}}),v.expr.pseudos.hidden=function(l){return!v.expr.pseudos.visible(l)},v.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Ed={0:200,1223:204},aa=v.ajaxSettings.xhr();m.cors=!!aa&&"withCredentials"in aa,m.ajax=aa=!!aa,v.ajaxTransport(function(l){var f,d;if(m.cors||aa&&!l.crossDomain)return{send:function(_,E){var T,M=l.xhr();if(M.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(T in l.xhrFields)M[T]=l.xhrFields[T];l.mimeType&&M.overrideMimeType&&M.overrideMimeType(l.mimeType),!l.crossDomain&&!_["X-Requested-With"]&&(_["X-Requested-With"]="XMLHttpRequest");for(T in _)M.setRequestHeader(T,_[T]);f=function(P){return function(){f&&(f=d=M.onload=M.onerror=M.onabort=M.ontimeout=M.onreadystatechange=null,P==="abort"?M.abort():P==="error"?typeof M.status!="number"?E(0,"error"):E(M.status,M.statusText):E(Ed[M.status]||M.status,M.statusText,(M.responseType||"text")!=="text"||typeof M.responseText!="string"?{binary:M.response}:{text:M.responseText},M.getAllResponseHeaders()))}},M.onload=f(),d=M.onerror=M.ontimeout=f("error"),M.onabort!==void 0?M.onabort=d:M.onreadystatechange=function(){M.readyState===4&&e.setTimeout(function(){f&&d()})},f=f("abort");try{M.send(l.hasContent&&l.data||null)}catch(P){if(f)throw P}},abort:function(){f&&f()}}}),v.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return v.globalEval(l),l}}}),v.ajaxPrefilter("script",function(l){l.cache===void 0&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),v.ajaxTransport("script",function(l){if(l.crossDomain||l.scriptAttrs){var f,d;return{send:function(_,E){f=v("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",d=function(T){f.remove(),d=null,T&&E(T.type==="error"?404:200,T.type)}),S.head.appendChild(f[0])},abort:function(){d&&d()}}}});var Al=[],Cs=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=Al.pop()||v.expando+"_"+Sl.guid++;return this[l]=!0,l}}),v.ajaxPrefilter("json jsonp",function(l,f,d){var _,E,T,M=l.jsonp!==!1&&(Cs.test(l.url)?"url":typeof l.data=="string"&&(l.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Cs.test(l.data)&&"data");if(M||l.dataTypes[0]==="jsonp")return _=l.jsonpCallback=x(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,M?l[M]=l[M].replace(Cs,"$1"+_):l.jsonp!==!1&&(l.url+=(ys.test(l.url)?"&":"?")+l.jsonp+"="+_),l.converters["script json"]=function(){return T||v.error(_+" was not called"),T[0]},l.dataTypes[0]="json",E=e[_],e[_]=function(){T=arguments},d.always(function(){E===void 0?v(e).removeProp(_):e[_]=E,l[_]&&(l.jsonpCallback=f.jsonpCallback,Al.push(_)),T&&x(E)&&E(T[0]),T=E=void 0}),"script"}),m.createHTMLDocument=function(){var l=S.implementation.createHTMLDocument("").body;return l.innerHTML="<form></form><form></form>",l.childNodes.length===2}(),v.parseHTML=function(l,f,d){if(typeof l!="string")return[];typeof f=="boolean"&&(d=f,f=!1);var _,E,T;return f||(m.createHTMLDocument?(f=S.implementation.createHTMLDocument(""),_=f.createElement("base"),_.href=S.location.href,f.head.appendChild(_)):f=S),E=ut.exec(l),T=!d&&[],E?[f.createElement(E[1])]:(E=Ha([l],f,T),T&&T.length&&v(T).remove(),v.merge([],E.childNodes))},v.fn.load=function(l,f,d){var _,E,T,M=this,P=l.indexOf(" ");return P>-1&&(_=jn(l.slice(P)),l=l.slice(0,P)),x(f)?(d=f,f=void 0):f&&typeof f=="object"&&(E="POST"),M.length>0&&v.ajax({url:l,type:E||"GET",dataType:"html",data:f}).done(function(L){T=arguments,M.html(_?v("<div>").append(v.parseHTML(L)).find(_):L)}).always(d&&function(L,N){M.each(function(){d.apply(this,T||[L.responseText,N,L])})}),this},v.expr.pseudos.animated=function(l){return v.grep(v.timers,function(f){return l===f.elem}).length},v.offset={setOffset:function(l,f,d){var _,E,T,M,P,L,N,j=v.css(l,"position"),X=v(l),k={};j==="static"&&(l.style.position="relative"),P=X.offset(),T=v.css(l,"top"),L=v.css(l,"left"),N=(j==="absolute"||j==="fixed")&&(T+L).indexOf("auto")>-1,N?(_=X.position(),M=_.top,E=_.left):(M=parseFloat(T)||0,E=parseFloat(L)||0),x(f)&&(f=f.call(l,d,v.extend({},P))),f.top!=null&&(k.top=f.top-P.top+M),f.left!=null&&(k.left=f.left-P.left+E),"using"in f?f.using.call(l,k):X.css(k)}},v.fn.extend({offset:function(l){if(arguments.length)return l===void 0?this:this.each(function(E){v.offset.setOffset(this,l,E)});var f,d,_=this[0];if(!!_)return _.getClientRects().length?(f=_.getBoundingClientRect(),d=_.ownerDocument.defaultView,{top:f.top+d.pageYOffset,left:f.left+d.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var l,f,d,_=this[0],E={top:0,left:0};if(v.css(_,"position")==="fixed")f=_.getBoundingClientRect();else{for(f=this.offset(),d=_.ownerDocument,l=_.offsetParent||d.documentElement;l&&(l===d.body||l===d.documentElement)&&v.css(l,"position")==="static";)l=l.parentNode;l&&l!==_&&l.nodeType===1&&(E=v(l).offset(),E.top+=v.css(l,"borderTopWidth",!0),E.left+=v.css(l,"borderLeftWidth",!0))}return{top:f.top-E.top-v.css(_,"marginTop",!0),left:f.left-E.left-v.css(_,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&v.css(l,"position")==="static";)l=l.offsetParent;return l||di})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,f){var d=f==="pageYOffset";v.fn[l]=function(_){return Vt(this,function(E,T,M){var P;if(C(E)?P=E:E.nodeType===9&&(P=E.defaultView),M===void 0)return P?P[f]:E[T];P?P.scrollTo(d?P.pageXOffset:M,d?M:P.pageYOffset):E[T]=M},l,_,arguments.length)}}),v.each(["top","left"],function(l,f){v.cssHooks[f]=ia(m.pixelPosition,function(d,_){if(_)return _=Gn(d,f),un.test(_)?v(d).position()[f]+"px":_})}),v.each({Height:"height",Width:"width"},function(l,f){v.each({padding:"inner"+l,content:f,"":"outer"+l},function(d,_){v.fn[_]=function(E,T){var M=arguments.length&&(d||typeof E!="boolean"),P=d||(E===!0||T===!0?"margin":"border");return Vt(this,function(L,N,j){var X;return C(L)?_.indexOf("outer")===0?L["inner"+l]:L.document.documentElement["client"+l]:L.nodeType===9?(X=L.documentElement,Math.max(L.body["scroll"+l],X["scroll"+l],L.body["offset"+l],X["offset"+l],X["client"+l])):j===void 0?v.css(L,N,P):v.style(L,N,j,P)},f,M?E:void 0,M)}})}),v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,f){v.fn[f]=function(d){return this.on(f,d)}}),v.fn.extend({bind:function(l,f,d){return this.on(l,null,f,d)},unbind:function(l,f){return this.off(l,null,f)},delegate:function(l,f,d,_){return this.on(f,l,d,_)},undelegate:function(l,f,d){return arguments.length===1?this.off(l,"**"):this.off(f,l||"**",d)},hover:function(l,f){return this.mouseenter(l).mouseleave(f||l)}}),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,f){v.fn[f]=function(d,_){return arguments.length>0?this.on(f,null,d,_):this.trigger(f)}});var xd=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;v.proxy=function(l,f){var d,_,E;if(typeof f=="string"&&(d=l[f],f=l,l=d),!!x(l))return _=a.call(arguments,2),E=function(){return l.apply(f||this,_.concat(a.call(arguments)))},E.guid=l.guid=l.guid||v.guid++,E},v.holdReady=function(l){l?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=Z,v.isFunction=x,v.isWindow=C,v.camelCase=Oe,v.type=A,v.now=Date.now,v.isNumeric=function(l){var f=v.type(l);return(f==="number"||f==="string")&&!isNaN(l-parseFloat(l))},v.trim=function(l){return l==null?"":(l+"").replace(xd,"")};var Td=e.jQuery,Cd=e.$;return v.noConflict=function(l){return e.$===v&&(e.$=Cd),l&&e.jQuery===v&&(e.jQuery=Td),v},typeof t=="undefined"&&(e.jQuery=e.$=v),v})})(Zc);var lM=Zc.exports;export{lM as $,Vi as A,Xi as B,dh as C,QC as D,ZC as E,Hi as F,Na as G,hM as L,eM as M,rM as O,ar as P,Oa as S,nM as T,xh as V,aM as a,oM as b,Cf as c,iM as d,yn as e,KC as f,$y as g,JC as h,ur as i,ui as j,wn as k,ei as l,Le as m,T1 as n,Sn as o,fi as p,Ci as q,sM as r,_n as s,Ph as t,lo as u,Np as v,Dp as w,tM as x,pn as y,zt as z};
//# sourceMappingURL=vendor.e56febc6.js.map
