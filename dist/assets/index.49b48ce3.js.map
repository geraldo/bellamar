{"version":3,"file":"index.49b48ce3.js","sources":["../../vite/modulepreload-polyfill","../../main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import './style.css';\n\nimport {Map, View} from 'ol';\nimport {Tile as TileLayer, Vector as VectorLayer, Group as GroupLayer} from 'ol/layer';\nimport {OSM, TileWMS, TileArcGISRest, Vector as VectorSource} from 'ol/source';\nimport {transform,fromLonLat,toLonLat} from 'ol/proj';\nimport {ScaleLine, defaults as defaultControls} from 'ol/control';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport Select from 'ol/interaction/Select';\n\nimport $ from 'jquery';\nimport LayerSwitcher from 'ol-layerswitcher';\nimport Permalink from 'ol-ext/control/Permalink';\nimport Bar from 'ol-ext/control/Bar';\nimport Button from 'ol-ext/control/Button';\nimport Toggle from 'ol-ext/control/Toggle';\nimport Overlay from 'ol-ext/control/Overlay';\nimport GeolocationButton from 'ol-ext/control/GeolocationButton';\nimport Popup from 'ol-ext/overlay/Popup';\n\nconst zoomInit = 16,\n      coordsInit = fromLonLat([ 1.957, 41.271 ]);\n\n/*\n * Layers\n *****************************************/\nlet baseLayers = new GroupLayer({\n  title: 'Mapes base',\n  //fold: 'close',\n  layers: [\n\n    new TileLayer({\n      title: 'OpenStreetMap',\n      type: 'base',\n      source: new OSM()\n    }),\n\n    new TileLayer({\n      title: 'Ningú',\n      type: 'base',\n      source: null,\n      visible: false,\n    }),\n\n    new TileLayer({\n      title: 'Ortofoto (IGCG)',\n      type: 'base',\n      visible: false,\n      source: new TileWMS({\n        url: 'http://geoserveis.icc.cat/icc_mapesmultibase/utm/wms/service?',\n        params: {\n          'LAYERS': 'orto', \n          'VERSION': '1.1.1'\n        },\n        attributions: ['Ortofoto 1:1.000 de l’<a target=\"_blank\" href=\"http://www.icgc.cat/\">Institut Cartogràfic i Geològic de Catalunya (ICGC)</a>, sota una llicència <a target=\"_blank\" href=\"https://creativecommons.org/licenses/by/4.0/deed.ca\">CC BY 4.0</a>'],\n      })\n    }),\n\n    new TileLayer({\n      name: 'baseLayerTopoAMB',\n      title: 'Topogràfic (AMB)',\n      qgistitle: '@ Capes topografiques AMB',\n      type: 'base',\n      visible: false,\n      source: new TileArcGISRest({\n        url: 'http://geoportal.amb.cat/geoserveis/rest/services/topografia_1000_3857/MapServer',\n        projection: 'EPSG:3857',\n        params: {\n          'LAYERS': 'Nivell 1M'\n        },\n        attributions: ['© <a target=\"_blank\" href=\"https://www.amb.cat/\">AMB</a>'],\n      })\n    }),\n\n    new TileLayer({\n      title: 'Topográfic (IGCG)',\n      type: 'base',\n      visible: false,\n      source: new TileWMS({\n        url: 'http://geoserveis.icc.cat/icc_mapesmultibase/utm/wms/service?',\n        params: {\n          'LAYERS': 'topogris', \n          'VERSION': '1.1.1'\n        },\n        attributions: ['Cartografia topogràfica 1:1.000 de l’<a target=\"_blank\" href=\"http://www.icgc.cat/\">Institut Cartogràfic i Geològic de Catalunya (ICGC)</a>, sota una llicència <a target=\"_blank\" href=\"https://creativecommons.org/licenses/by/4.0/deed.ca\">CC BY 4.0</a>'],\n       })\n    }),\n  ]\n});\n\nlet bellamarLayer = new VectorLayer({\n  title: 'Bellamar',\n  visible: true,\n  source: new VectorSource({\n    format: new GeoJSON(),\n    url: 'bellamar.geojson',\n  })\n});\n\n/*\n * Map\n *****************************************/\nconst map = new Map({\n  target: 'map',\n  controls: defaultControls().extend([new ScaleLine()]),\n  layers: new GroupLayer({\n    title: 'Mapes base',\n    fold: 'close',\n    layers: [\n      baseLayers,\n      bellamarLayer\n    ]\n  }),\n  view: new View({\n    //center: fromLonLat([1.982, 41.286]),\n    center: coordsInit,\n    zoom: zoomInit\n  })\n});\n\n/*\n * Controles\n *****************************************/\nlet layerSwitcher = new LayerSwitcher({\n  startActive: true,\n  activationMode: 'click',\n});\nmap.addControl(layerSwitcher);\n\nlet infoWindowDocs = new Overlay({ \n  closeBox : true, \n  className: \"slide-left menu\", \n  content: $(\"#infoWindowDocs\").get(0)\n});\nmap.addControl(infoWindowDocs);\n\nlet infoWindowLayers = new Overlay({ \n  closeBox : true, \n  className: \"slide-left menu\", \n  content: $(\"#infoWindowLayers\").get(0)\n});\nmap.addControl(infoWindowLayers);\n\nlet infoWindowSearch = new Overlay({ \n  closeBox : true, \n  className: \"slide-left menu\", \n  content: $(\"#infoWindowSearch\").get(0)\n});\nmap.addControl(infoWindowSearch);\n\nlet infoWindowFeature = new Overlay({ \n  closeBox : true, \n  className: \"slide-right info\", \n  content: $(\"#infoWindowFeature\").get(0)\n});\nmap.addControl(infoWindowFeature);\n\nlet mainBar = new Bar();\nmap.addControl(mainBar);\nmainBar.setPosition(\"top-left\");\n\nlet nestedBar = new Bar({ toggleOne: true, group:true });\nmainBar.addControl(nestedBar);\n\nlet logoBtn = new Button({ \n  html: '<img src=\"LogoAjuntament49_2016.C4.png\" />',\n  className: \"logo\",\n  title: \"Castelldefels\",\n  handleClick: function() { \n    map.getView().setCenter(coordsInit);\n    map.getView().setZoom(zoomInit);\n  }\n});\nnestedBar.addControl(logoBtn);\n\nlet docsToggle = new Toggle({ \n  html: '<i class=\"fa fa-file-text-o\"></i>',\n  className: \"docs\",\n  title: \"Documents\",\n  onToggle: function() {\n    hideWindows(\"docs\");\n    infoWindowDocs.toggle();\n  }\n});\nnestedBar.addControl(docsToggle);\n\nlet layersToggle = new Toggle({ \n  html: '<i class=\"fa fa-align-justify\"></i>',\n  className: \"layers\",\n  title: \"Capas\",\n  onToggle: function() {\n    hideWindows(\"layers\");\n    infoWindowLayers.toggle();\n  }\n});\nnestedBar.addControl(layersToggle);\n\nlet searchToggle = new Toggle({ \n  html: '<i class=\"fa fa-search\"></i>',\n  className: \"search\",\n  title: \"Buscar\",\n  onToggle: function() {\n    hideWindows(\"search\");\n    infoWindowSearch.toggle();\n  }\n});\nnestedBar.addControl(searchToggle);\n\nfunction hideWindows(activeToggle) {\n  infoWindowDocs.hide();\n  infoWindowLayers.hide();\n  infoWindowSearch.hide();\n\n  if (activeToggle !== \"docs\")\n    docsToggle.setActive(false);\n  else if (activeToggle !== \"layers\")\n    layersToggle.setActive(false);\n  else if (activeToggle !== \"search\")\n    searchToggle.setActive(false);\n}\n\nlet whatsappBtn = new Button({ \n  html: '<i class=\"fa fa-whatsapp\" aria-hidden=\"true\"></i>',\n  className: \"whatsapp\",\n  title: \"Whatsapp\",\n  handleClick: function() { \n    \n  }\n});\nnestedBar.addControl(whatsappBtn);\n\nlet telegramBtn = new Button({ \n  html: '<i class=\"fa fa-telegram\" aria-hidden=\"true\"></i>',\n  className: \"telegram\",\n  title: \"Whatsapp\",\n  handleClick: function() { \n    \n  }\n});\nnestedBar.addControl(telegramBtn);\n\nlet urlControl = new Permalink({ \n  urlReplace: true,\n  //localStorage: true,\n});\nmap.addControl(urlControl);\n\nlet geoloc = new GeolocationButton({\n  title: 'On estic?',\n  delay: 5000\n});\nmap.addControl(geoloc);\n\nlet here = new Popup({ positioning: 'bottom-center' });\nmap.addOverlay(here);\ngeoloc.on('position', function(e) {\n  if (e.coordinate) here.show(e.coordinate, \"Ets aquí!\");\n  else here.hide();\n});\n\nlet select = new Select({});\nmap.addInteraction(select);\n\n// On selected => show/hide popup\nselect.getFeatures().on('add', function(e) { \n  // let feature = e.element;\n  // let img = $(\"<img>\").attr(\"src\", feature.get(\"img\"));\n  // let info = $(\"<div>\").append( $(\"<p>\").text(feature.get(\"text\")));\n  // let content = $(\"<div>\")\n  //     .append( img )\n  //     .append(info);\n  // $(\"#infoWindowFeature .content\").html(content);\n  infoWindowFeature.toggle();\n});\nselect.getFeatures().on('remove', function(e) { \n  $(\"#infoWindowFeature .content\").html(\"\");\n});\n\nmap.on('click', function(evt) {\n  console.log(toLonLat(evt.coordinate));\n});"],"names":["defaultControls","Overlay","Bar","Button","Toggle","Permalink","GeolocationButton","Popup"],"mappings":"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"}