function dt(){return function(){throw new Error("Unimplemented abstract method.")}()}var Lp=0;function It(n){return n.ol_uid||(n.ol_uid=String(++Lp))}var Ap="6.12.0",Np=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Dp=function(n){Np(e,n);function e(t){var i=this,r="v"+Ap.split("-")[0],a="Assertion failed. See https://openlayers.org/en/"+r+"/doc/errors/#"+t+" for details.";return i=n.call(this,a)||this,i.code=t,i.name="AssertionError",i.message=a,i}return e}(Error),vh=Dp,Fp=function(){function n(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return n.prototype.preventDefault=function(){this.defaultPrevented=!0},n.prototype.stopPropagation=function(){this.propagationStopped=!0},n}(),ui=Fp,Dr={PROPERTYCHANGE:"propertychange"},kp=function(){function n(){this.disposed=!1}return n.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},n.prototype.disposeInternal=function(){},n}(),el=kp;function Gp(n,e,t){for(var i,r,a=t||or,o=0,s=n.length,l=!1;o<s;)i=o+(s-o>>1),r=+a(n[i],e),r<0?o=i+1:(s=i,l=!r);return l?o:~o}function or(n,e){return n>e?1:n<e?-1:0}function il(n,e){return n.indexOf(e)>=0}function nl(n,e,t){var i=n.length;if(n[0]<=e)return 0;if(e<=n[i-1])return i-1;var r=void 0;if(t>0){for(r=1;r<i;++r)if(n[r]<e)return r-1}else if(t<0){for(r=1;r<i;++r)if(n[r]<=e)return r}else for(r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return typeof t=="function"?t(e,n[r-1],n[r])>0?r-1:r:n[r-1]-e<e-n[r]?r-1:r}return i-1}function jp(n,e,t){for(;e<t;){var i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function hi(n,e){for(var t=Array.isArray(e)?e:[e],i=t.length,r=0;r<i;r++)n[n.length]=t[r]}function sr(n,e){var t=n.length;if(t!==e.length)return!1;for(var i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function Bp(n,e,t){var i=e||or;return n.every(function(r,a){if(a===0)return!0;var o=i(n[a-1],r);return!(o>0||t&&o===0)})}function tn(){return!0}function Fr(){return!1}function lr(){}function Up(n){var e=!1,t,i,r;return function(){var a=Array.prototype.slice.call(arguments);return(!e||this!==r||!sr(a,i))&&(e=!0,r=this,i=a,t=n.apply(this,arguments)),t}}var Wt=typeof Object.assign=="function"?Object.assign:function(n,e){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(n),i=1,r=arguments.length;i<r;++i){var a=arguments[i];if(a!=null)for(var o in a)a.hasOwnProperty(o)&&(t[o]=a[o])}return t};function kr(n){for(var e in n)delete n[e]}var gh=typeof Object.values=="function"?Object.values:function(n){var e=[];for(var t in n)e.push(n[t]);return e};function Gr(n){var e;for(e in n)return!1;return!e}var $p=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),zp=function(n){$p(e,n);function e(t){var i=n.call(this)||this;return i.eventTarget_=t,i.pendingRemovals_=null,i.dispatching_=null,i.listeners_=null,i}return e.prototype.addEventListener=function(t,i){if(!(!t||!i)){var r=this.listeners_||(this.listeners_={}),a=r[t]||(r[t]=[]);a.indexOf(i)===-1&&a.push(i)}},e.prototype.dispatchEvent=function(t){var i=typeof t=="string"?new ui(t):t,r=i.type;i.target||(i.target=this.eventTarget_||this);var a=this.listeners_&&this.listeners_[r],o;if(a){var s=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});r in s||(s[r]=0,l[r]=0),++s[r];for(var h=0,f=a.length;h<f;++h)if("handleEvent"in a[h]?o=a[h].handleEvent(i):o=a[h].call(this,i),o===!1||i.propagationStopped){o=!1;break}if(--s[r],s[r]===0){var d=l[r];for(delete l[r];d--;)this.removeEventListener(r,lr);delete s[r]}return o}},e.prototype.disposeInternal=function(){this.listeners_&&kr(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},e.prototype.removeEventListener=function(t,i){var r=this.listeners_&&this.listeners_[t];if(r){var a=r.indexOf(i);a!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[a]=lr,++this.pendingRemovals_[t]):(r.splice(a,1),r.length===0&&delete this.listeners_[t]))}},e}(el),jr=zp,Et={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Pt(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){var a=t;t=function(){n.removeEventListener(e,t),a.apply(this,arguments)}}var o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function Mo(n,e,t,i){return Pt(n,e,t,i,!0)}function Yt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),kr(n))}var Vp=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Br=function(n){Vp(e,n);function e(){var t=n.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Et.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,i){if(Array.isArray(t)){for(var r=t.length,a=new Array(r),o=0;o<r;++o)a[o]=Pt(this,t[o],i);return a}else return Pt(this,t,i)},e.prototype.onceInternal=function(t,i){var r;if(Array.isArray(t)){var a=t.length;r=new Array(a);for(var o=0;o<a;++o)r[o]=Mo(this,t[o],i)}else r=Mo(this,t,i);return i.ol_key=r,r},e.prototype.unInternal=function(t,i){var r=i.ol_key;if(r)Oo(r);else if(Array.isArray(t))for(var a=0,o=t.length;a<o;++a)this.removeEventListener(t[a],i);else this.removeEventListener(t,i)},e}(jr);Br.prototype.on;Br.prototype.once;Br.prototype.un;function Oo(n){if(Array.isArray(n))for(var e=0,t=n.length;e<t;++e)Yt(n[e]);else Yt(n)}var Wp=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",unByKey:Oo,default:Br}),yh=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_h=function(n){yh(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.key=i,a.oldValue=r,a}return e}(ui),Yp=function(n){yh(e,n);function e(t){var i=n.call(this)||this;return i.on,i.once,i.un,It(i),i.values_=null,t!==void 0&&i.setProperties(t),i}return e.prototype.get=function(t){var i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Wt({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,i){var r;r="change:"+t,this.dispatchEvent(new _h(r,t,i)),r=Dr.PROPERTYCHANGE,this.dispatchEvent(new _h(r,t,i))},e.prototype.addChangeListener=function(t,i){this.addEventListener("change:"+t,i)},e.prototype.removeChangeListener=function(t,i){this.removeEventListener("change:"+t,i)},e.prototype.set=function(t,i,r){var a=this.values_||(this.values_={});if(r)a[t]=i;else{var o=a[t];a[t]=i,o!==i&&this.notify(t,o)}},e.prototype.setProperties=function(t,i){for(var r in t)this.set(r,t[r],i)},e.prototype.applyProperties=function(t){!t.values_||Wt(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,i){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],Gr(this.values_)&&(this.values_=null),i||this.notify(t,r)}},e}(Br),Ue=Yp,pe={ADD:"add",REMOVE:"remove"},mh=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xh={LENGTH:"length"},So=function(n){mh(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.element=i,a.index=r,a}return e}(ui),Hp=function(n){mh(e,n);function e(t,i){var r=n.call(this)||this;r.on,r.once,r.un;var a=i||{};if(r.unique_=!!a.unique,r.array_=t||[],r.unique_)for(var o=0,s=r.array_.length;o<s;++o)r.assertUnique_(r.array_[o],o);return r.updateLength_(),r}return e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var i=0,r=t.length;i<r;++i)this.push(t[i]);return this},e.prototype.forEach=function(t){for(var i=this.array_,r=0,a=i.length;r<a;++r)t(i[r],r,i)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(xh.LENGTH)},e.prototype.insertAt=function(t,i){this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new So(pe.ADD,i,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var i=this.getLength();return this.insertAt(i,t),this.getLength()},e.prototype.remove=function(t){for(var i=this.array_,r=0,a=i.length;r<a;++r)if(i[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new So(pe.REMOVE,i,t)),i},e.prototype.setAt=function(t,i){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(i,t);var a=this.array_[t];this.array_[t]=i,this.dispatchEvent(new So(pe.REMOVE,a,t)),this.dispatchEvent(new So(pe.ADD,i,t))}else{for(var o=r;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,i)}},e.prototype.updateLength_=function(){this.set(xh.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,i){for(var r=0,a=this.array_.length;r<a;++r)if(this.array_[r]===t&&r!==i)throw new vh(58)},e}(Ue),Qe=Hp;function Mt(n,e){if(!n)throw new vh(e)}var Xp=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),qp=function(n){Xp(e,n);function e(t){var i=n.call(this)||this;if(i.on,i.once,i.un,i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addChangeListener(i.geometryName_,i.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){var r=t;i.setGeometry(r)}else{var a=t;i.setProperties(a)}return i}return e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Yt(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Pt(t,Et.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?Kp(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(Ue);function Kp(n){if(typeof n=="function")return n;var e;if(Array.isArray(n))e=n;else{Mt(typeof n.getZIndex=="function",41);var t=n;e=[t]}return function(){return e}}var en=qp,ie={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},V={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ur={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Ei={};Ei[Ur.RADIANS]=6370997/(2*Math.PI);Ei[Ur.DEGREES]=2*Math.PI*6370997/360;Ei[Ur.FEET]=.3048;Ei[Ur.METERS]=1;Ei[Ur.USFEET]=1200/3937;var $e=Ur,$r=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",Zp=$r.indexOf("firefox")!==-1;$r.indexOf("safari")!==-1&&$r.indexOf("chrom")==-1;var Jp=$r.indexOf("webkit")!==-1&&$r.indexOf("edge")==-1,Qp=$r.indexOf("macintosh")!==-1,Eh=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,Ro=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,tv=typeof Image!="undefined"&&Image.prototype.decode,Th=function(){var n=!1;try{var e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();new Array(6);function Li(){return[1,0,0,1,0,0]}function ev(n,e,t,i,r,a,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=a,n[5]=o,n}function iv(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function ce(n,e){var t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function nv(n,e,t){return ev(n,e,0,0,t,0,0)}function nn(n,e,t,i,r,a,o,s){var l=Math.sin(a),h=Math.cos(a);return n[0]=i*h,n[1]=r*l,n[2]=-i*l,n[3]=r*h,n[4]=o*i*h-s*i*l+e,n[5]=o*r*l+s*r*h+t,n}function rl(n,e){var t=rv(e);Mt(t!==0,32);var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-a/t,n[3]=i/t,n[4]=(a*l-o*s)/t,n[5]=-(i*l-r*s)/t,n}function rv(n){return n[0]*n[3]-n[1]*n[2]}var Ch;function wh(n){var e="matrix("+n.join(", ")+")";if(Ro)return e;var t=Ch||(Ch=document.createElement("div"));return t.style.transform=e,t.style.transform}var wa={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},ve={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Mh(n){for(var e=ze(),t=0,i=n.length;t<i;++t)Ia(e,n[t]);return e}function av(n,e,t){var i=Math.min.apply(null,n),r=Math.min.apply(null,e),a=Math.max.apply(null,n),o=Math.max.apply(null,e);return Ti(i,r,a,o,t)}function Ma(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function Oh(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function ur(n,e,t){var i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function Oa(n,e){return al(n,e[0],e[1])}function Tn(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function al(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function sl(n,e){var t=n[0],i=n[1],r=n[2],a=n[3],o=e[0],s=e[1],l=ve.UNKNOWN;return o<t?l=l|ve.LEFT:o>r&&(l=l|ve.RIGHT),s<i?l=l|ve.BELOW:s>a&&(l=l|ve.ABOVE),l===ve.UNKNOWN&&(l=ve.INTERSECTING),l}function ze(){return[1/0,1/0,-1/0,-1/0]}function Ti(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Sa(n){return Ti(1/0,1/0,-1/0,-1/0,n)}function ov(n,e){var t=n[0],i=n[1];return Ti(t,i,t,i,e)}function Sh(n,e,t,i,r){var a=Sa(r);return Ih(a,n,e,t,i)}function Ra(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function Rh(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function Ia(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function Ih(n,e,t,i,r){for(;t<i;t+=r)sv(n,e[t],e[t+1]);return n}function sv(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function ll(n,e){var t;return t=e(Io(n)),t||(t=e(Po(n)),t)||(t=e(bo(n)),t)||(t=e(fr(n)),t)?t:!1}function ul(n){var e=0;return fl(n)||(e=Kt(n)*Ci(n)),e}function Io(n){return[n[0],n[1]]}function Po(n){return[n[2],n[1]]}function hr(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function lv(n,e){var t;return e===wa.BOTTOM_LEFT?t=Io(n):e===wa.BOTTOM_RIGHT?t=Po(n):e===wa.TOP_LEFT?t=fr(n):e===wa.TOP_RIGHT?t=bo(n):Mt(!1,13),t}function hl(n,e,t,i,r){var a=e*i[0]/2,o=e*i[1]/2,s=Math.cos(t),l=Math.sin(t),h=a*s,f=a*l,d=o*s,p=o*l,y=n[0],m=n[1],x=y-h+p,C=y-h-p,w=y+h-p,S=y+h+p,R=m-f-d,I=m-f+d,F=m+f+d,g=m+f-d;return Ti(Math.min(x,C,w,S),Math.min(R,I,F,g),Math.max(x,C,w,S),Math.max(R,I,F,g),r)}function Ci(n){return n[3]-n[1]}function Pa(n,e,t){var i=t||ze();return Ve(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Sa(i),i}function fr(n){return[n[0],n[3]]}function bo(n){return[n[2],n[3]]}function Kt(n){return n[2]-n[0]}function Ve(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function fl(n){return n[2]<n[0]||n[3]<n[1]}function uv(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function hv(n,e,t){var i=!1,r=sl(n,e),a=sl(n,t);if(r===ve.INTERSECTING||a===ve.INTERSECTING)i=!0;else{var o=n[0],s=n[1],l=n[2],h=n[3],f=e[0],d=e[1],p=t[0],y=t[1],m=(y-d)/(p-f),x=void 0,C=void 0;!!(a&ve.ABOVE)&&!(r&ve.ABOVE)&&(x=p-(y-h)/m,i=x>=o&&x<=l),!i&&!!(a&ve.RIGHT)&&!(r&ve.RIGHT)&&(C=y-(p-l)*m,i=C>=s&&C<=h),!i&&!!(a&ve.BELOW)&&!(r&ve.BELOW)&&(x=p-(y-s)/m,i=x>=o&&x<=l),!i&&!!(a&ve.LEFT)&&!(r&ve.LEFT)&&(C=y-(p-o)*m,i=C>=s&&C<=h)}return i}function fv(n,e,t,i){var r=[];if(i>1)for(var a=n[2]-n[0],o=n[3]-n[1],s=0;s<i;++s)r.push(n[0]+a*s/i,n[1],n[2],n[1]+o*s/i,n[2]-a*s/i,n[3],n[0],n[3]-o*s/i);else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];e(r,r,2);for(var l=[],h=[],s=0,f=r.length;s<f;s+=2)l.push(r[s]),h.push(r[s+1]);return av(l,h,t)}function cv(n,e){var t=e.getExtent(),i=hr(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){var r=Kt(t),a=Math.floor((i[0]-t[0])/r),o=a*r;n[0]-=o,n[2]-=o}return n}var dv=function(){function n(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return n.prototype.canWrapX=function(){return this.canWrapX_},n.prototype.getCode=function(){return this.code_},n.prototype.getExtent=function(){return this.extent_},n.prototype.getUnits=function(){return this.units_},n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Ei[this.units_]},n.prototype.getWorldExtent=function(){return this.worldExtent_},n.prototype.getAxisOrientation=function(){return this.axisOrientation_},n.prototype.isGlobal=function(){return this.global_},n.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)},n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},n.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},n.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)},n.prototype.setWorldExtent=function(e){this.worldExtent_=e},n.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},n}(),cl=dv;function ne(n,e,t){return Math.min(Math.max(n,e),t)}var pv=function(){var n;return"cosh"in Math?n=Math.cosh:n=function(e){var t=Math.exp(e);return(t+1/t)/2},n}(),vv=function(){var n;return"log2"in Math?n=Math.log2:n=function(e){return Math.log(e)*Math.LOG2E},n}();function gv(n,e,t,i,r,a){var o=r-t,s=a-i;if(o!==0||s!==0){var l=((n-t)*o+(e-i)*s)/(o*o+s*s);l>1?(t=r,i=a):l>0&&(t+=o*l,i+=s*l)}return cr(n,e,t,i)}function cr(n,e,t,i){var r=t-n,a=i-e;return r*r+a*a}function yv(n){for(var e=n.length,t=0;t<e;t++){for(var i=t,r=Math.abs(n[t][t]),a=t+1;a<e;a++){var o=Math.abs(n[a][t]);o>r&&(r=o,i=a)}if(r===0)return null;var s=n[i];n[i]=n[t],n[t]=s;for(var l=t+1;l<e;l++)for(var h=-n[l][t]/n[t][t],f=t;f<e+1;f++)t==f?n[l][f]=0:n[l][f]+=h*n[t][f]}for(var d=new Array(e),p=e-1;p>=0;p--){d[p]=n[p][e]/n[p][p];for(var y=p-1;y>=0;y--)n[y][e]-=n[y][p]*d[p]}return d}function Ph(n){return n*180/Math.PI}function Ai(n){return n*Math.PI/180}function Ni(n,e){var t=n%e;return t*e<0?t+e:t}function rn(n,e,t){return n+t*(e-n)}function bh(n,e){var t=Math.pow(10,e);return Math.round(n*t)/t}function Lo(n,e){return Math.floor(bh(n,e))}function Ao(n,e){return Math.ceil(bh(n,e))}var _v=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ba=6378137,zr=Math.PI*ba,mv=[-zr,-zr,zr,zr],xv=[-180,-85,180,85],No=ba*Math.log(Math.tan(Math.PI/2)),Vr=function(n){_v(e,n);function e(t){return n.call(this,{code:t,units:$e.METERS,extent:mv,global:!0,worldExtent:xv,getPointResolution:function(i,r){return i/pv(r[1]/ba)}})||this}return e}(cl),Lh=[new Vr("EPSG:3857"),new Vr("EPSG:102100"),new Vr("EPSG:102113"),new Vr("EPSG:900913"),new Vr("http://www.opengis.net/def/crs/EPSG/0/3857"),new Vr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ev(n,e,t){var i=n.length,r=t>1?t:2,a=e;a===void 0&&(r>2?a=n.slice():a=new Array(i));for(var o=0;o<i;o+=r){a[o]=zr*n[o]/180;var s=ba*Math.log(Math.tan(Math.PI*(+n[o+1]+90)/360));s>No?s=No:s<-No&&(s=-No),a[o+1]=s}return a}function Tv(n,e,t){var i=n.length,r=t>1?t:2,a=e;a===void 0&&(r>2?a=n.slice():a=new Array(i));for(var o=0;o<i;o+=r)a[o]=180*n[o]/zr,a[o+1]=360*Math.atan(Math.exp(n[o+1]/ba))/Math.PI-90;return a}var Cv=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),wv=6378137,Ah=[-180,-90,180,90],Mv=Math.PI*wv/180,dr=function(n){Cv(e,n);function e(t,i){return n.call(this,{code:t,units:$e.DEGREES,extent:Ah,axisOrientation:i,global:!0,metersPerUnit:Mv,worldExtent:Ah})||this}return e}(cl),Nh=[new dr("CRS:84"),new dr("EPSG:4326","neu"),new dr("urn:ogc:def:crs:OGC:1.3:CRS84"),new dr("urn:ogc:def:crs:OGC:2:84"),new dr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new dr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new dr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],dl={};function Ov(n){return dl[n]||dl[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Sv(n,e){dl[n]=e}var Wr={};function Yr(n,e,t){var i=n.getCode(),r=e.getCode();i in Wr||(Wr[i]={}),Wr[i][r]=t}function Dh(n,e){var t;return n in Wr&&e in Wr[n]&&(t=Wr[n][e]),t}var Do=63710088e-1;function Fo(n,e,t){var i=t||Do,r=Ai(n[1]),a=Ai(e[1]),o=(a-r)/2,s=Ai(e[0]-n[0])/2,l=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(a);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function pl(n,e){for(var t=0,i=0,r=n.length;i<r-1;++i)t+=Fo(n[i],n[i+1],e);return t}function Rv(n,e){var t=e||{},i=t.radius||Do,r=t.projection||"EPSG:3857",a=n.getType();a!==V.GEOMETRY_COLLECTION&&(n=n.clone().transform(r,"EPSG:4326"));var o=0,s,l,h,f,d,p;switch(a){case V.POINT:case V.MULTI_POINT:break;case V.LINE_STRING:case V.LINEAR_RING:{s=n.getCoordinates(),o=pl(s,i);break}case V.MULTI_LINE_STRING:case V.POLYGON:{for(s=n.getCoordinates(),h=0,f=s.length;h<f;++h)o+=pl(s[h],i);break}case V.MULTI_POLYGON:{for(s=n.getCoordinates(),h=0,f=s.length;h<f;++h)for(l=s[h],d=0,p=l.length;d<p;++d)o+=pl(l[d],i);break}case V.GEOMETRY_COLLECTION:{var y=n.getGeometries();for(h=0,f=y.length;h<f;++h)o+=Rv(y[h],e);break}default:throw new Error("Unsupported geometry type: "+a)}return o}function ko(n,e){for(var t=0,i=n.length,r=n[i-1][0],a=n[i-1][1],o=0;o<i;o++){var s=n[o][0],l=n[o][1];t+=Ai(s-r)*(2+Math.sin(Ai(a))+Math.sin(Ai(l))),r=s,a=l}return t*e*e/2}function Iv(n,e){var t=e||{},i=t.radius||Do,r=t.projection||"EPSG:3857",a=n.getType();a!==V.GEOMETRY_COLLECTION&&(n=n.clone().transform(r,"EPSG:4326"));var o=0,s,l,h,f,d,p;switch(a){case V.POINT:case V.MULTI_POINT:case V.LINE_STRING:case V.MULTI_LINE_STRING:case V.LINEAR_RING:break;case V.POLYGON:{for(s=n.getCoordinates(),o=Math.abs(ko(s[0],i)),h=1,f=s.length;h<f;++h)o-=Math.abs(ko(s[h],i));break}case V.MULTI_POLYGON:{for(s=n.getCoordinates(),h=0,f=s.length;h<f;++h)for(l=s[h],o+=Math.abs(ko(l[0],i)),d=1,p=l.length;d<p;++d)o-=Math.abs(ko(l[d],i));break}case V.GEOMETRY_COLLECTION:{var y=n.getGeometries();for(h=0,f=y.length;h<f;++h)o+=Iv(y[h],e);break}default:throw new Error("Unsupported geometry type: "+a)}return o}function Pv(n,e,t,i){var r=i||Do,a=Ai(n[1]),o=Ai(n[0]),s=e/r,l=Math.asin(Math.sin(a)*Math.cos(s)+Math.cos(a)*Math.sin(s)*Math.cos(t)),h=o+Math.atan2(Math.sin(t)*Math.sin(s)*Math.cos(a),Math.cos(s)-Math.sin(a)*Math.sin(l));return[Ph(h),Ph(l)]}function bv(n,e){for(var t=(""+n).split("."),i=(""+e).split("."),r=0;r<Math.max(t.length,i.length);r++){var a=parseInt(t[r]||"0",10),o=parseInt(i[r]||"0",10);if(a>o)return 1;if(o>a)return-1}return 0}function Lv(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function vl(n,e){for(var t=!0,i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function gl(n,e){var t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,a=n[1]*t+n[0]*i;return n[0]=r,n[1]=a,n}function Av(n,e){return n[0]*=e,n[1]*=e,n}function Nv(n,e){var t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function Fh(n,e){if(e.canWrapX()){var t=Kt(e.getExtent()),i=kh(n,e,t);i&&(n[0]-=i*t)}return n}function kh(n,e,t){var i=e.getExtent(),r=0;if(e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])){var a=t||Kt(i);r=Math.floor((n[0]-i[0])/a)}return r}function yl(n,e,t){var i;if(e!==void 0){for(var r=0,a=n.length;r<a;++r)e[r]=n[r];i=e}else i=n.slice();return i}function _l(n,e,t){if(e!==void 0&&n!==e){for(var i=0,r=n.length;i<r;++i)e[i]=n[i];n=e}return n}function Gh(n){Sv(n.getCode(),n),Yr(n,n,yl)}function Dv(n){n.forEach(Gh)}function Vt(n){return typeof n=="string"?Ov(n):n||null}function Go(n,e,t,i){n=Vt(n);var r,a=n.getPointResolutionFunc();if(a){if(r=a(e,t),i&&i!==n.getUnits()){var o=n.getMetersPerUnit();o&&(r=r*o/Ei[i])}}else{var s=n.getUnits();if(s==$e.DEGREES&&!i||i==$e.DEGREES)r=e;else{var l=jo(n,Vt("EPSG:4326"));if(l===_l&&s!==$e.DEGREES)r=e*n.getMetersPerUnit();else{var h=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];h=l(h,h,2);var f=Fo(h.slice(0,2),h.slice(2,4)),d=Fo(h.slice(4,6),h.slice(6,8));r=(f+d)/2}var o=i?Ei[i]:n.getMetersPerUnit();o!==void 0&&(r/=o)}}return r}function ml(n){Dv(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Yr(e,t,yl)})})}function Fv(n,e,t,i){n.forEach(function(r){e.forEach(function(a){Yr(r,a,t),Yr(a,r,i)})})}function xl(n,e){return n?typeof n=="string"?Vt(n):n:Vt(e)}function jh(n){return function(e,t,i){for(var r=e.length,a=i!==void 0?i:2,o=t!==void 0?t:new Array(r),s=0;s<r;s+=a){var l=n([e[s],e[s+1]]);o[s]=l[0],o[s+1]=l[1];for(var h=a-1;h>=2;--h)o[s+h]=e[s+h]}return o}}function kv(n,e,t,i){var r=Vt(n),a=Vt(e);Yr(r,a,jh(t)),Yr(a,r,jh(i))}function OM(n,e){return Cn(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function SM(n,e){var t=Cn(n,e!==void 0?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Ni(i+180,360)-180),t}function pr(n,e){if(n===e)return!0;var t=n.getUnits()===e.getUnits();if(n.getCode()===e.getCode())return t;var i=jo(n,e);return i===yl&&t}function jo(n,e){var t=n.getCode(),i=e.getCode(),r=Dh(t,i);return r||(r=_l),r}function La(n,e){var t=Vt(n),i=Vt(e);return jo(t,i)}function Cn(n,e,t){var i=La(e,t);return i(n,void 0,n.length)}function Gv(n,e,t,i){var r=La(e,t);return fv(n,r,void 0,i)}var jv=null;function Bv(){return jv}function El(n,e){return n}function wi(n,e){return n}function Bh(n,e){return n}function vr(n,e){return n}function Uh(n,e,t){return function(i){var r=i[0],a=i[1],o,s;if(n.canWrapX()){var l=n.getExtent(),h=Kt(l);s=kh(i,n,h),s&&(r=r-s*h),r=ne(r,l[0],l[2]),a=ne(a,l[1],l[3]),o=t([r,a])}else o=t(i);return s&&e.canWrapX()&&(o[0]+=s*Kt(e.getExtent())),o}}function Uv(){ml(Lh),ml(Nh),Fv(Nh,Lh,Ev,Tv)}Uv();function gr(n,e,t,i,r,a){for(var o=a||[],s=0,l=e;l<t;l+=i){var h=n[l],f=n[l+1];o[s++]=r[0]*h+r[2]*f+r[4],o[s++]=r[1]*h+r[3]*f+r[5]}return a&&o.length!=s&&(o.length=s),o}function Tl(n,e,t,i,r,a,o){for(var s=o||[],l=Math.cos(r),h=Math.sin(r),f=a[0],d=a[1],p=0,y=e;y<t;y+=i){var m=n[y]-f,x=n[y+1]-d;s[p++]=f+m*l-x*h,s[p++]=d+m*h+x*l;for(var C=y+2;C<y+i;++C)s[p++]=n[C]}return o&&s.length!=p&&(s.length=p),s}function $v(n,e,t,i,r,a,o,s){for(var l=s||[],h=o[0],f=o[1],d=0,p=e;p<t;p+=i){var y=n[p]-h,m=n[p+1]-f;l[d++]=h+r*y,l[d++]=f+a*m;for(var x=p+2;x<p+i;++x)l[d++]=n[x]}return s&&l.length!=d&&(l.length=d),l}function $h(n,e,t,i,r,a,o){for(var s=o||[],l=0,h=e;h<t;h+=i){s[l++]=n[h]+r,s[l++]=n[h+1]+a;for(var f=h+2;f<h+i;++f)s[l++]=n[f]}return o&&s.length!=l&&(s.length=l),s}var zv=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),zh=Li(),Vv=function(n){zv(e,n);function e(){var t=n.call(this)||this;return t.extent_=ze(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=Up(function(i,r,a){if(!a)return this.getSimplifiedGeometry(r);var o=this.clone();return o.applyTransform(a),o.getSimplifiedGeometry(r)}),t}return e.prototype.simplifyTransformed=function(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)},e.prototype.clone=function(){return dt()},e.prototype.closestPointXY=function(t,i,r,a){return dt()},e.prototype.containsXY=function(t,i){var r=this.getClosestPoint([t,i]);return r[0]===t&&r[1]===i},e.prototype.getClosestPoint=function(t,i){var r=i||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return dt()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&Sa(i),this.extentRevision_=this.getRevision()}return uv(this.extent_,t)},e.prototype.rotate=function(t,i){dt()},e.prototype.scale=function(t,i,r){dt()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return dt()},e.prototype.getType=function(){return dt()},e.prototype.applyTransform=function(t){dt()},e.prototype.intersectsExtent=function(t){return dt()},e.prototype.translate=function(t,i){dt()},e.prototype.transform=function(t,i){var r=Vt(t),a=r.getUnits()==$e.TILE_PIXELS?function(o,s,l){var h=r.getExtent(),f=r.getWorldExtent(),d=Ci(f)/Ci(h);return nn(zh,f[0],f[3],d,-d,0,0,0),gr(o,0,o.length,l,zh,s),La(r,i)(o,s,l)}:La(r,i);return this.applyTransform(a),this},e}(Ue),Vh=Vv,Wv=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Yv=function(n){Wv(e,n);function e(){var t=n.call(this)||this;return t.layout=ie.XY,t.stride=2,t.flatCoordinates=null,t}return e.prototype.computeExtent=function(t){return Sh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return dt()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=this.getSimplifiedGeometryInternal(t),r=i.getFlatCoordinates();return r.length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,i){this.stride=Wh(t),this.layout=t,this.flatCoordinates=i},e.prototype.setCoordinates=function(t,i){dt()},e.prototype.setLayout=function(t,i,r){var a;if(t)a=Wh(t);else{for(var o=0;o<r;++o)if(i.length===0){this.layout=ie.XY,this.stride=2;return}else i=i[0];a=i.length,t=Hv(a)}this.layout=t,this.stride=a},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,i){var r=this.getFlatCoordinates();if(r){var a=this.getStride();Tl(r,0,r.length,a,t,i,r),this.changed()}},e.prototype.scale=function(t,i,r){var a=i;a===void 0&&(a=t);var o=r;o||(o=hr(this.getExtent()));var s=this.getFlatCoordinates();if(s){var l=this.getStride();$v(s,0,s.length,l,t,a,o,s),this.changed()}},e.prototype.translate=function(t,i){var r=this.getFlatCoordinates();if(r){var a=this.getStride();$h(r,0,r.length,a,t,i,r),this.changed()}},e}(Vh);function Hv(n){var e;return n==2?e=ie.XY:n==3?e=ie.XYZ:n==4&&(e=ie.XYZM),e}function Wh(n){var e;return n==ie.XY?e=2:n==ie.XYZ||n==ie.XYM?e=3:n==ie.XYZM&&(e=4),e}function Xv(n,e,t){var i=n.getFlatCoordinates();if(i){var r=n.getStride();return gr(i,0,i.length,r,e,t)}else return null}var wn=Yv;function Yh(n,e,t,i,r,a,o){var s=n[e],l=n[e+1],h=n[t]-s,f=n[t+1]-l,d;if(h===0&&f===0)d=e;else{var p=((r-s)*h+(a-l)*f)/(h*h+f*f);if(p>1)d=t;else if(p>0){for(var y=0;y<i;++y)o[y]=rn(n[e+y],n[t+y],p);o.length=i;return}else d=e}for(var y=0;y<i;++y)o[y]=n[d+y];o.length=i}function Cl(n,e,t,i,r){var a=n[e],o=n[e+1];for(e+=i;e<t;e+=i){var s=n[e],l=n[e+1],h=cr(a,o,s,l);h>r&&(r=h),a=s,o=l}return r}function wl(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a){var s=t[a];r=Cl(n,e,s,i,r),e=s}return r}function qv(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a){var s=t[a];r=wl(n,e,s,i,r),e=s[s.length-1]}return r}function Ml(n,e,t,i,r,a,o,s,l,h,f){if(e==t)return h;var d,p;if(r===0)if(p=cr(o,s,n[e],n[e+1]),p<h){for(d=0;d<i;++d)l[d]=n[e+d];return l.length=i,p}else return h;for(var y=f||[NaN,NaN],m=e+i;m<t;)if(Yh(n,m-i,m,i,o,s,y),p=cr(o,s,y[0],y[1]),p<h){for(h=p,d=0;d<i;++d)l[d]=y[d];l.length=i,m+=i}else m+=i*Math.max((Math.sqrt(p)-Math.sqrt(h))/r|0,1);if(a&&(Yh(n,t-i,e,i,o,s,y),p=cr(o,s,y[0],y[1]),p<h)){for(h=p,d=0;d<i;++d)l[d]=y[d];l.length=i}return h}function Ol(n,e,t,i,r,a,o,s,l,h,f){for(var d=f||[NaN,NaN],p=0,y=t.length;p<y;++p){var m=t[p];h=Ml(n,e,m,i,r,a,o,s,l,h,d),e=m}return h}function Kv(n,e,t,i,r,a,o,s,l,h,f){for(var d=f||[NaN,NaN],p=0,y=t.length;p<y;++p){var m=t[p];h=Ol(n,e,m,i,r,a,o,s,l,h,d),e=m[m.length-1]}return h}function Hh(n,e,t,i){for(var r=0,a=t.length;r<a;++r)n[e++]=t[r];return e}function Bo(n,e,t,i){for(var r=0,a=t.length;r<a;++r)for(var o=t[r],s=0;s<i;++s)n[e++]=o[s];return e}function Sl(n,e,t,i,r){for(var a=r||[],o=0,s=0,l=t.length;s<l;++s){var h=Bo(n,e,t[s],i);a[o++]=h,e=h}return a.length=o,a}function Zv(n,e,t,i,r){for(var a=r||[],o=0,s=0,l=t.length;s<l;++s){var h=Sl(n,e,t[s],i,a[o]);a[o++]=h,e=h[h.length-1]}return a.length=o,a}function Rl(n,e,t,i,r,a,o){var s=(t-e)/i;if(s<3){for(;e<t;e+=i)a[o++]=n[e],a[o++]=n[e+1];return o}var l=new Array(s);l[0]=1,l[s-1]=1;for(var h=[e,t-i],f=0;h.length>0;){for(var d=h.pop(),p=h.pop(),y=0,m=n[p],x=n[p+1],C=n[d],w=n[d+1],S=p+i;S<d;S+=i){var R=n[S],I=n[S+1],F=gv(R,I,m,x,C,w);F>y&&(f=S,y=F)}y>r&&(l[(f-e)/i]=1,p+i<f&&h.push(p,f),f+i<d&&h.push(f,d))}for(var S=0;S<s;++S)l[S]&&(a[o++]=n[e+S*i],a[o++]=n[e+S*i+1]);return o}function Jv(n,e,t,i,r,a,o,s){for(var l=0,h=t.length;l<h;++l){var f=t[l];o=Rl(n,e,f,i,r,a,o),s.push(o),e=f}return o}function yr(n,e){return e*Math.round(n/e)}function Qv(n,e,t,i,r,a,o){if(e==t)return o;var s=yr(n[e],r),l=yr(n[e+1],r);e+=i,a[o++]=s,a[o++]=l;var h,f;do if(h=yr(n[e],r),f=yr(n[e+1],r),e+=i,e==t)return a[o++]=h,a[o++]=f,o;while(h==s&&f==l);for(;e<t;){var d=yr(n[e],r),p=yr(n[e+1],r);if(e+=i,!(d==h&&p==f)){var y=h-s,m=f-l,x=d-s,C=p-l;if(y*C==m*x&&(y<0&&x<y||y==x||y>0&&x>y)&&(m<0&&C<m||m==C||m>0&&C>m)){h=d,f=p;continue}a[o++]=h,a[o++]=f,s=h,l=f,h=d,f=p}}return a[o++]=h,a[o++]=f,o}function Xh(n,e,t,i,r,a,o,s){for(var l=0,h=t.length;l<h;++l){var f=t[l];o=Qv(n,e,f,i,r,a,o),s.push(o),e=f}return o}function tg(n,e,t,i,r,a,o,s){for(var l=0,h=t.length;l<h;++l){var f=t[l],d=[];o=Xh(n,e,f,i,r,a,o,d),s.push(d),e=f[f.length-1]}return o}function Mn(n,e,t,i,r){for(var a=r!==void 0?r:[],o=0,s=e;s<t;s+=i)a[o++]=n.slice(s,s+i);return a.length=o,a}function Aa(n,e,t,i,r){for(var a=r!==void 0?r:[],o=0,s=0,l=t.length;s<l;++s){var h=t[s];a[o++]=Mn(n,e,h,i,a[o]),e=h}return a.length=o,a}function Il(n,e,t,i,r){for(var a=r!==void 0?r:[],o=0,s=0,l=t.length;s<l;++s){var h=t[s];a[o++]=Aa(n,e,h,i,a[o]),e=h[h.length-1]}return a.length=o,a}function qh(n,e,t,i){for(var r=0,a=n[t-i],o=n[t-i+1];e<t;e+=i){var s=n[e],l=n[e+1];r+=o*s-a*l,a=s,o=l}return r/2}function Kh(n,e,t,i){for(var r=0,a=0,o=t.length;a<o;++a){var s=t[a];r+=qh(n,e,s,i),e=s}return r}function eg(n,e,t,i){for(var r=0,a=0,o=t.length;a<o;++a){var s=t[a];r+=Kh(n,e,s,i),e=s[s.length-1]}return r}var ig=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ng=function(n){ig(e,n);function e(t,i){var r=n.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?r.setFlatCoordinates(i,t):r.setCoordinates(t,i),r}return e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,i,r,a){return a<ur(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Cl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ml(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,r,a))},e.prototype.getArea=function(){return qh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Mn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Rl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,ie.XY)},e.prototype.getType=function(){return V.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(wn),Zh=ng,rg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ag=function(n){rg(e,n);function e(t,i){var r=n.call(this)||this;return r.setCoordinates(t,i),r}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){var o=this.flatCoordinates,s=cr(t,i,o[0],o[1]);if(s<a){for(var l=this.stride,h=0;h<l;++h)r[h]=o[h];return r.length=l,s}else return a},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return ov(this.flatCoordinates,t)},e.prototype.getType=function(){return V.POINT},e.prototype.intersectsExtent=function(t){return al(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Hh(this.flatCoordinates,0,t,this.stride),this.changed()},e}(wn),an=ag;function og(n,e,t,i,r){var a=ll(r,function(o){return!_r(n,e,t,i,o[0],o[1])});return!a}function _r(n,e,t,i,r,a){for(var o=0,s=n[t-i],l=n[t-i+1];e<t;e+=i){var h=n[e],f=n[e+1];l<=a?f>a&&(h-s)*(a-l)-(r-s)*(f-l)>0&&o++:f<=a&&(h-s)*(a-l)-(r-s)*(f-l)<0&&o--,s=h,l=f}return o!==0}function Pl(n,e,t,i,r,a){if(t.length===0||!_r(n,e,t[0],i,r,a))return!1;for(var o=1,s=t.length;o<s;++o)if(_r(n,t[o-1],t[o],i,r,a))return!1;return!0}function sg(n,e,t,i,r,a){if(t.length===0)return!1;for(var o=0,s=t.length;o<s;++o){var l=t[o];if(Pl(n,e,l,i,r,a))return!0;e=l[l.length-1]}return!1}function Jh(n,e,t,i,r,a,o){for(var s,l,h,f,d,p,y,m=r[a+1],x=[],C=0,w=t.length;C<w;++C){var S=t[C];for(f=n[S-i],p=n[S-i+1],s=e;s<S;s+=i)d=n[s],y=n[s+1],(m<=p&&y<=m||p<=m&&m<=y)&&(h=(m-p)/(y-p)*(d-f)+f,x.push(h)),f=d,p=y}var R=NaN,I=-1/0;for(x.sort(or),f=x[0],s=1,l=x.length;s<l;++s){d=x[s];var F=Math.abs(d-f);F>I&&(h=(f+d)/2,Pl(n,e,t,i,h,m)&&(R=h,I=F)),f=d}return isNaN(R)&&(R=r[a]),o?(o.push(R,m,I),o):[R,m,I]}function lg(n,e,t,i,r){for(var a=[],o=0,s=t.length;o<s;++o){var l=t[o];a=Jh(n,e,l,i,r,2*o,a),e=l[l.length-1]}return a}function Qh(n,e,t,i,r){var a;for(e+=i;e<t;e+=i)if(a=r(n.slice(e-i,e),n.slice(e,e+i)),a)return a;return!1}function Uo(n,e,t,i,r){var a=Ih(ze(),n,e,t,i);return Ve(r,a)?Tn(r,a)||a[0]>=r[0]&&a[2]<=r[2]||a[1]>=r[1]&&a[3]<=r[3]?!0:Qh(n,e,t,i,function(o,s){return hv(r,o,s)}):!1}function ug(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a){if(Uo(n,e,t[a],i,r))return!0;e=t[a]}return!1}function hg(n,e,t,i,r){return!!(Uo(n,e,t,i,r)||_r(n,e,t,i,r[0],r[1])||_r(n,e,t,i,r[0],r[3])||_r(n,e,t,i,r[2],r[1])||_r(n,e,t,i,r[2],r[3]))}function tf(n,e,t,i,r){if(!hg(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(var a=1,o=t.length;a<o;++a)if(og(n,t[a-1],t[a],i,r)&&!Uo(n,t[a-1],t[a],i,r))return!1;return!0}function fg(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a){var s=t[a];if(tf(n,e,s,i,r))return!0;e=s[s.length-1]}return!1}function cg(n,e,t,i){for(;e<t-i;){for(var r=0;r<i;++r){var a=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=a}e+=i,t-=i}}function ef(n,e,t,i){for(var r=0,a=n[t-i],o=n[t-i+1];e<t;e+=i){var s=n[e],l=n[e+1];r+=(s-a)*(l+o),a=s,o=l}return r===0?void 0:r>0}function nf(n,e,t,i,r){for(var a=r!==void 0?r:!1,o=0,s=t.length;o<s;++o){var l=t[o],h=ef(n,e,l,i);if(o===0){if(a&&h||!a&&!h)return!1}else if(a&&!h||!a&&h)return!1;e=l}return!0}function dg(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a){var s=t[a];if(!nf(n,e,s,i,r))return!1;s.length&&(e=s[s.length-1])}return!0}function bl(n,e,t,i,r){for(var a=r!==void 0?r:!1,o=0,s=t.length;o<s;++o){var l=t[o],h=ef(n,e,l,i),f=o===0?a&&h||!a&&!h:a&&!h||!a&&h;f&&cg(n,e,l,i),e=l}return e}function rf(n,e,t,i,r){for(var a=0,o=t.length;a<o;++a)e=bl(n,e,t[a],i,r);return e}var pg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$o=function(n){pg(e,n);function e(t,i,r){var a=n.call(this)||this;return a.ends_=[],a.flatInteriorPointRevision_=-1,a.flatInteriorPoint_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,i!==void 0&&r?(a.setFlatCoordinates(i,t),a.ends_=r):a.setCoordinates(t,i),a}return e.prototype.appendLinearRing=function(t){this.flatCoordinates?hi(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){return a<ur(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wl(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ol(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,r,a))},e.prototype.containsXY=function(t,i){return Pl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)},e.prototype.getArea=function(){return Kh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),bl(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,Aa(i,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=hr(this.getExtent());this.flatInteriorPoint_=Jh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new an(this.getFlatInteriorPoint(),ie.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Zh(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,i=this.flatCoordinates,r=this.ends_,a=[],o=0,s=0,l=r.length;s<l;++s){var h=r[s],f=new Zh(i.slice(o,h),t);a.push(f),o=h}return a},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;nf(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=bl(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Xh(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,r),new e(i,ie.XY,r)},e.prototype.getType=function(){return V.POLYGON},e.prototype.intersectsExtent=function(t){return tf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Sl(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()},e}(wn),mr=$o;function vg(n,e,t,i){for(var r=t||32,a=[],o=0;o<r;++o)hi(a,Pv(n,e,2*Math.PI*o/r,i));return a.push(a[0],a[1]),new $o(a,ie.XY,[a.length])}function af(n){var e=n[0],t=n[1],i=n[2],r=n[3],a=[e,t,e,r,i,r,i,t,e,t];return new $o(a,ie.XY,[a.length])}function gg(n,e,t){for(var i=e||32,r=n.getStride(),a=n.getLayout(),o=n.getCenter(),s=r*(i+1),l=new Array(s),h=0;h<s;h+=r){l[h]=0,l[h+1]=0;for(var f=2;f<r;f++)l[h+f]=o[f]}var d=[l.length],p=new $o(l,a,d);return yg(p,o,n.getRadius(),t),p}function yg(n,e,t,i){for(var r=n.getFlatCoordinates(),a=n.getStride(),o=r.length/a-1,s=i||0,l=0;l<=o;++l){var h=l*a,f=s+Ni(l,o)*2*Math.PI/o;r[h]=e[0]+t*Math.cos(f),r[h+1]=e[1]+t*Math.sin(f)}n.changed()}var of=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Qt={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},_g=function(n){of(e,n);function e(t){var i=n.call(this,Et.ERROR)||this;return i.code=t.code,i.message=t.message,i}return e}(ui),mg=function(n){of(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=t||{};return i.position_=null,i.transform_=_l,i.watchId_=void 0,i.addChangeListener(Qt.PROJECTION,i.handleProjectionChanged_),i.addChangeListener(Qt.TRACKING,i.handleTrackingChanged_),r.projection!==void 0&&i.setProjection(r.projection),r.trackingOptions!==void 0&&i.setTrackingOptions(r.trackingOptions),i.setTracking(r.tracking!==void 0?r.tracking:!1),i}return e.prototype.disposeInternal=function(){this.setTracking(!1),n.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=jo(Vt("EPSG:4326"),t),this.position_&&this.set(Qt.POSITION,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!t&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var i=t.coords;this.set(Qt.ACCURACY,i.accuracy),this.set(Qt.ALTITUDE,i.altitude===null?void 0:i.altitude),this.set(Qt.ALTITUDE_ACCURACY,i.altitudeAccuracy===null?void 0:i.altitudeAccuracy),this.set(Qt.HEADING,i.heading===null?void 0:Ai(i.heading)),this.position_?(this.position_[0]=i.longitude,this.position_[1]=i.latitude):this.position_=[i.longitude,i.latitude];var r=this.transform_(this.position_);this.set(Qt.POSITION,r),this.set(Qt.SPEED,i.speed===null?void 0:i.speed);var a=vg(this.position_,i.accuracy);a.applyTransform(this.transform_),this.set(Qt.ACCURACY_GEOMETRY,a),this.changed()},e.prototype.positionError_=function(t){this.dispatchEvent(new _g(t))},e.prototype.getAccuracy=function(){return this.get(Qt.ACCURACY)},e.prototype.getAccuracyGeometry=function(){return this.get(Qt.ACCURACY_GEOMETRY)||null},e.prototype.getAltitude=function(){return this.get(Qt.ALTITUDE)},e.prototype.getAltitudeAccuracy=function(){return this.get(Qt.ALTITUDE_ACCURACY)},e.prototype.getHeading=function(){return this.get(Qt.HEADING)},e.prototype.getPosition=function(){return this.get(Qt.POSITION)},e.prototype.getProjection=function(){return this.get(Qt.PROJECTION)},e.prototype.getSpeed=function(){return this.get(Qt.SPEED)},e.prototype.getTracking=function(){return this.get(Qt.TRACKING)},e.prototype.getTrackingOptions=function(){return this.get(Qt.TRACKING_OPTIONS)},e.prototype.setProjection=function(t){this.set(Qt.PROJECTION,Vt(t))},e.prototype.setTracking=function(t){this.set(Qt.TRACKING,t)},e.prototype.setTrackingOptions=function(t){this.set(Qt.TRACKING_OPTIONS,t)},e}(Ue),xg=mg,xr={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Eg=function(){function n(e){var t=e||{};this.color_=t.color!==void 0?t.color:null}return n.prototype.clone=function(){var e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0})},n.prototype.getColor=function(){return this.color_},n.prototype.setColor=function(e){this.color_=e},n}(),on=Eg;function sf(n,e,t,i,r,a,o){var s,l,h=(t-e)/i;if(h===1)s=e;else if(h===2)s=e,l=r;else if(h!==0){for(var f=n[e],d=n[e+1],p=0,y=[0],m=e+i;m<t;m+=i){var x=n[m],C=n[m+1];p+=Math.sqrt((x-f)*(x-f)+(C-d)*(C-d)),y.push(p),f=x,d=C}var w=r*p,S=Gp(y,w);S<0?(l=(w-y[-S-2])/(y[-S-1]-y[-S-2]),s=e+(-S-2)*i):s=e+S*i}for(var R=o>1?o:2,I=a||new Array(R),m=0;m<R;++m)I[m]=s===void 0?NaN:l===void 0?n[s+m]:rn(n[s+m],n[s+i+m],l);return I}function Ll(n,e,t,i,r,a){if(t==e)return null;var o;if(r<n[e+i-1])return a?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return a?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);for(var s=e/i,l=t/i;s<l;){var h=s+l>>1;r<n[(h+1)*i-1]?l=h:s=h+1}var f=n[s*i-1];if(r==f)return n.slice((s-1)*i,(s-1)*i+i);var d=n[(s+1)*i-1],p=(r-f)/(d-f);o=[];for(var y=0;y<i-1;++y)o.push(rn(n[(s-1)*i+y],n[s*i+y],p));return o.push(r),o}function Tg(n,e,t,i,r,a,o){if(o)return Ll(n,e,t[t.length-1],i,r,a);var s;if(r<n[i-1])return a?(s=n.slice(0,i),s[i-1]=r,s):null;if(n[n.length-1]<r)return a?(s=n.slice(n.length-i),s[i-1]=r,s):null;for(var l=0,h=t.length;l<h;++l){var f=t[l];if(e!=f){if(r<n[e+i-1])return null;if(r<=n[f-1])return Ll(n,e,f,i,r,!1);e=f}}return null}function lf(n,e,t,i){for(var r=n[e],a=n[e+1],o=0,s=e+i;s<t;s+=i){var l=n[s],h=n[s+1];o+=Math.sqrt((l-r)*(l-r)+(h-a)*(h-a)),r=l,a=h}return o}var Cg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),wg=function(n){Cg(e,n);function e(t,i){var r=n.call(this)||this;return r.flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,i!==void 0&&!Array.isArray(t[0])?r.setFlatCoordinates(i,t):r.setCoordinates(t,i),r}return e.prototype.appendCoordinate=function(t){this.flatCoordinates?hi(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){return a<ur(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Cl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ml(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,r,a))},e.prototype.forEachSegment=function(t){return Qh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,i){if(this.layout!=ie.XYM&&this.layout!=ie.XYZM)return null;var r=i!==void 0?i:!1;return Ll(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return Mn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,i){return sf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,this.stride)},e.prototype.getLength=function(){return lf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Rl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,ie.XY)},e.prototype.getType=function(){return V.LINE_STRING},e.prototype.intersectsExtent=function(t){return Uo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(wn),On=wg,Mg=function(){function n(e){var t=e||{};this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return n.prototype.clone=function(){var e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},n.prototype.getColor=function(){return this.color_},n.prototype.getLineCap=function(){return this.lineCap_},n.prototype.getLineDash=function(){return this.lineDash_},n.prototype.getLineDashOffset=function(){return this.lineDashOffset_},n.prototype.getLineJoin=function(){return this.lineJoin_},n.prototype.getMiterLimit=function(){return this.miterLimit_},n.prototype.getWidth=function(){return this.width_},n.prototype.setColor=function(e){this.color_=e},n.prototype.setLineCap=function(e){this.lineCap_=e},n.prototype.setLineDash=function(e){this.lineDash_=e},n.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e},n.prototype.setLineJoin=function(e){this.lineJoin_=e},n.prototype.setMiterLimit=function(e){this.miterLimit_=e},n.prototype.setWidth=function(e){this.width_=e},n}(),Sn=Mg,Ht={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function uf(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]+2*e,t[1]=n[1]+2*e,t}function hf(n){return n[0]>0&&n[1]>0}function Al(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function ti(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}var Og=function(){function n(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ti(e.scale),this.displacement_=e.displacement}return n.prototype.clone=function(){var e=this.getScale();return new n({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},n.prototype.getOpacity=function(){return this.opacity_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getScaleArray=function(){return this.scaleArray_},n.prototype.getDisplacement=function(){return this.displacement_},n.prototype.getAnchor=function(){return dt()},n.prototype.getImage=function(e){return dt()},n.prototype.getHitDetectionImage=function(){return dt()},n.prototype.getPixelRatio=function(e){return 1},n.prototype.getImageState=function(){return dt()},n.prototype.getImageSize=function(){return dt()},n.prototype.getOrigin=function(){return dt()},n.prototype.getSize=function(){return dt()},n.prototype.setDisplacement=function(e){this.displacement_=e},n.prototype.setOpacity=function(e){this.opacity_=e},n.prototype.setRotateWithView=function(e){this.rotateWithView_=e},n.prototype.setRotation=function(e){this.rotation_=e},n.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=ti(e)},n.prototype.listenImageChange=function(e){dt()},n.prototype.load=function(){dt()},n.prototype.unlistenImageChange=function(e){dt()},n}(),ff=Og,Sg=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Rg=/^([a-z]*)$|^hsla?\(.*\)$/i;function cf(n){return typeof n=="string"?n:pf(n)}function Ig(n){var e=document.createElement("div");if(e.style.color=n,e.style.color!==""){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}else return""}var Pg=function(){var n=1024,e={},t=0;return function(i){var r;if(e.hasOwnProperty(i))r=e[i];else{if(t>=n){var a=0;for(var o in e)(a++&3)==0&&(delete e[o],--t)}r=bg(i),e[i]=r,++t}return r}}();function zo(n){return Array.isArray(n)?n:Pg(n)}function bg(n){var e,t,i,r,a;if(Rg.exec(n)&&(n=Ig(n)),Sg.exec(n)){var o=n.length-1,s=void 0;o<=4?s=1:s=2;var l=o===4||o===8;e=parseInt(n.substr(1+0*s,s),16),t=parseInt(n.substr(1+1*s,s),16),i=parseInt(n.substr(1+2*s,s),16),l?r=parseInt(n.substr(1+3*s,s),16):r=255,s==1&&(e=(e<<4)+e,t=(t<<4)+t,i=(i<<4)+i,l&&(r=(r<<4)+r)),a=[e,t,i,r/255]}else n.indexOf("rgba(")==0?(a=n.slice(5,-1).split(",").map(Number),df(a)):n.indexOf("rgb(")==0?(a=n.slice(4,-1).split(",").map(Number),a.push(1),df(a)):Mt(!1,14);return a}function df(n){return n[0]=ne(n[0]+.5|0,0,255),n[1]=ne(n[1]+.5|0,0,255),n[2]=ne(n[2]+.5|0,0,255),n[3]=ne(n[3],0,1),n}function pf(n){var e=n[0];e!=(e|0)&&(e=e+.5|0);var t=n[1];t!=(t|0)&&(t=t+.5|0);var i=n[2];i!=(i|0)&&(i=i+.5|0);var r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+e+","+t+","+i+","+r+")"}function Di(n){return Array.isArray(n)?pf(n):n}function fi(n,e,t,i){var r;return t&&t.length?r=t.shift():Ro?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function Lg(n){var e=n.offsetWidth,t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function Ag(n){var e=n.offsetHeight,t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function vf(n,e){var t=e.parentNode;t&&t.replaceChild(n,e)}function Vo(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function gf(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function Ng(n,e){for(var t=n.childNodes,i=0;;++i){var r=t[i],a=e[i];if(!r&&!a)break;if(r!==a){if(!r){n.appendChild(a);continue}if(!a){n.removeChild(r),--i;continue}n.insertBefore(a,r)}}}var Wo="ol-hidden",Dg="ol-selectable",Na="ol-unselectable",Nl="ol-control",yf="ol-collapsed",Fg=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),_f=["style","variant","weight","size","lineHeight","family"],mf=function(n){var e=n.match(Fg);if(!e)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},i=0,r=_f.length;i<r;++i){var a=e[i+1];a!==void 0&&(t[_f[i]]=a)}return t.families=t.family.split(/,\s?/),t};function xf(n){return n===1?"":String(Math.round(n*100)/100)}var Ef="10px sans-serif",sn="#000",Yo="round",Da=[],Fa=0,Hr="round",ka=10,Ga="#000",ja="center",Ho="middle",Er=[0,0,0,0],Ba=1,ln=new Ue,kg=new jr;kg.setSize=function(){console.warn("labelCache is deprecated.")};var Xr=null,Dl,Fl={},Gg=function(){var n=100,e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uF013",a,o;function s(h,f,d){for(var p=!0,y=0;y<i;++y){var m=t[y];if(o=Xo(h+" "+f+" "+e+m,r),d!=m){var x=Xo(h+" "+f+" "+e+d+","+m,r);p=p&&x!=o}}return!!p}function l(){for(var h=!0,f=ln.getKeys(),d=0,p=f.length;d<p;++d){var y=f[d];ln.get(y)<n&&(s.apply(this,y.split(`
`))?(kr(Fl),Xr=null,Dl=void 0,ln.set(y,n)):(ln.set(y,ln.get(y)+1,!0),h=!1))}h&&(clearInterval(a),a=void 0)}return function(h){var f=mf(h);if(!!f)for(var d=f.families,p=0,y=d.length;p<y;++p){var m=d[p],x=f.style+`
`+f.weight+`
`+m;ln.get(x)===void 0&&(ln.set(x,n,!0),s(f.style,f.weight,m)||(ln.set(x,0,!0),a===void 0&&(a=setInterval(l,32))))}}}(),jg=function(){var n;return function(e){var t=Fl[e];if(t==null){if(Ro){var i=mf(e),r=Tf(e,"\u017Dg"),a=isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight);t=a*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);Fl[e]=t}return t}}();function Tf(n,e){return Xr||(Xr=fi(1,1)),n!=Dl&&(Xr.font=n,Dl=Xr.font),Xr.measureText(e)}function Xo(n,e){return Tf(n,e).width}function Cf(n,e,t){if(e in t)return t[e];var i=Xo(n,e);return t[e]=i,i}function Bg(n,e,t){for(var i=e.length,r=0,a=0;a<i;++a){var o=Xo(n,e[a]);r=Math.max(r,o),t.push(o)}return r}function Ug(n,e,t,i,r,a,o,s,l,h,f){n.save(),t!==1&&(n.globalAlpha*=t),e&&n.setTransform.apply(n,e),i.contextInstructions?(n.translate(l,h),n.scale(f[0],f[1]),$g(i,n)):f[0]<0||f[1]<0?(n.translate(l,h),n.scale(f[0],f[1]),n.drawImage(i,r,a,o,s,0,0,o,s)):n.drawImage(i,r,a,o,s,l,h,o*f[0],s*f[1]),n.restore()}function $g(n,e){for(var t=n.contextInstructions,i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}var zg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Vg=function(n){zg(e,n);function e(t){var i=this,r=t.rotateWithView!==void 0?t.rotateWithView:!1;return i=n.call(this,{opacity:1,rotateWithView:r,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0]})||this,i.canvas_=void 0,i.hitDetectionCanvas_=null,i.fill_=t.fill!==void 0?t.fill:null,i.origin_=[0,0],i.points_=t.points,i.radius_=t.radius!==void 0?t.radius:t.radius1,i.radius2_=t.radius2,i.angle_=t.angle!==void 0?t.angle:0,i.stroke_=t.stroke!==void 0?t.stroke:null,i.size_=null,i.renderOptions_=null,i.render(),i}return e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var i=this.getDisplacement();return[t[0]/2-i[0],t[1]/2+i[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var i=this.canvas_[t];if(!i){var r=this.renderOptions_,a=fi(r.size*t,r.size*t);this.draw_(r,a,t),i=a.canvas,this.canvas_[t]=i}return i},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return Ht.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,i,r){if(i===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return i;var a=this.radius_,o=this.radius2_===void 0?a:this.radius2_;if(a<o){var s=a;a=o,o=s}var l=this.radius2_===void 0?this.points_:this.points_*2,h=2*Math.PI/l,f=o*Math.sin(h),d=Math.sqrt(o*o-f*f),p=a-d,y=Math.sqrt(f*f+p*p),m=y/f;if(t==="miter"&&m<=r)return m*i;var x=i/2/m,C=i/2*(p/y),w=Math.sqrt((a+x)*(a+x)+C*C),S=w-a;if(this.radius2_===void 0||t==="bevel")return S*2;var R=a*Math.sin(h),I=Math.sqrt(a*a-R*R),F=o-I,g=Math.sqrt(R*R+F*F),G=g/R;if(G<=r){var B=G*i/2-o-a;return 2*Math.max(S,B)}return S*2},e.prototype.createRenderOptions=function(){var t=Hr,i=0,r=null,a=0,o,s=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=Ga),o=Di(o),s=this.stroke_.getWidth(),s===void 0&&(s=Ba),r=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=Hr),i=this.stroke_.getMiterLimit(),i===void 0&&(i=ka));var l=this.calculateLineJoinSize_(t,s,i),h=Math.max(this.radius_,this.radius2_||0),f=Math.ceil(2*h+l);return{strokeStyle:o,strokeWidth:s,size:f,lineDash:r,lineDashOffset:a,lineJoin:t,miterLimit:i}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},e.prototype.draw_=function(t,i,r){if(i.scale(r,r),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){var a=this.fill_.getColor();a===null&&(a=sn),i.fillStyle=Di(a),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.setLineDash&&t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var i=this.fill_.getColor(),r=0;if(typeof i=="string"&&(i=zo(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0){var a=fi(t.size,t.size);this.hitDetectionCanvas_=a.canvas,this.drawHitDetectionCanvas_(t,a)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var i=this.points_,r=this.radius_;if(i===1/0)t.arc(0,0,r,0,2*Math.PI);else{var a=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(i*=2);for(var o=this.angle_-Math.PI/2,s=2*Math.PI/i,l=0;l<i;l++){var h=o+l*s,f=l%2==0?r:a;t.lineTo(f*Math.cos(h),f*Math.sin(h))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=sn,i.fill(),this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())},e}(ff),wf=Vg,Wg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Yg=function(n){Wg(e,n);function e(t){var i=this,r=t||{};return i=n.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,scale:r.scale!==void 0?r.scale:1,rotation:r.rotation!==void 0?r.rotation:0,rotateWithView:r.rotateWithView!==void 0?r.rotateWithView:!1,displacement:r.displacement!==void 0?r.displacement:[0,0]})||this,i}return e.prototype.clone=function(){var t=this.getScale(),i=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return i.setOpacity(this.getOpacity()),i},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(wf),kl=Yg,qr=function(){function n(e){var t=e||{};this.geometry_=null,this.geometryFunction_=Of,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}return n.prototype.clone=function(){var e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new n({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},n.prototype.getRenderer=function(){return this.renderer_},n.prototype.setRenderer=function(e){this.renderer_=e},n.prototype.setHitDetectionRenderer=function(e){this.hitDetectionRenderer_=e},n.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},n.prototype.getGeometry=function(){return this.geometry_},n.prototype.getGeometryFunction=function(){return this.geometryFunction_},n.prototype.getFill=function(){return this.fill_},n.prototype.setFill=function(e){this.fill_=e},n.prototype.getImage=function(){return this.image_},n.prototype.setImage=function(e){this.image_=e},n.prototype.getStroke=function(){return this.stroke_},n.prototype.setStroke=function(e){this.stroke_=e},n.prototype.getText=function(){return this.text_},n.prototype.setText=function(e){this.text_=e},n.prototype.getZIndex=function(){return this.zIndex_},n.prototype.setGeometry=function(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Of,this.geometry_=e},n.prototype.setZIndex=function(e){this.zIndex_=e},n}();function Hg(n){var e;if(typeof n=="function")e=n;else{var t;if(Array.isArray(n))t=n;else{Mt(typeof n.getZIndex=="function",41);var i=n;t=[i]}e=function(){return t}}return e}var Gl=null;function Xg(n,e){if(!Gl){var t=new on({color:"rgba(255,255,255,0.4)"}),i=new Sn({color:"#3399CC",width:1.25});Gl=[new qr({image:new kl({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return Gl}function Mf(){var n={},e=[255,255,255,1],t=[0,153,255,1],i=3;return n[V.POLYGON]=[new qr({fill:new on({color:[255,255,255,.5]})})],n[V.MULTI_POLYGON]=n[V.POLYGON],n[V.LINE_STRING]=[new qr({stroke:new Sn({color:e,width:i+2})}),new qr({stroke:new Sn({color:t,width:i})})],n[V.MULTI_LINE_STRING]=n[V.LINE_STRING],n[V.CIRCLE]=n[V.POLYGON].concat(n[V.LINE_STRING]),n[V.POINT]=[new qr({image:new kl({radius:i*2,fill:new on({color:t}),stroke:new Sn({color:e,width:i/2})}),zIndex:1/0})],n[V.MULTI_POINT]=n[V.POINT],n[V.GEOMETRY_COLLECTION]=n[V.POLYGON].concat(n[V.LINE_STRING],n[V.POINT]),n}function Of(n){return n.getGeometry()}var Ua=qr,qg={POINT:"point",LINE:"line"},jt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"},Kg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zg=function(n){Kg(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un,i.background_=t.background;var r=Wt({},t);return typeof t.properties=="object"&&(delete r.properties,Wt(r,t.properties)),r[jt.OPACITY]=t.opacity!==void 0?t.opacity:1,Mt(typeof r[jt.OPACITY]=="number",64),r[jt.VISIBLE]=t.visible!==void 0?t.visible:!0,r[jt.Z_INDEX]=t.zIndex,r[jt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,r[jt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,r[jt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,r[jt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,i.className_=r.className!==void 0?t.className:"ol-layer",delete r.className,i.setProperties(r),i.state_=null,i}return e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var i=this.state_||{layer:this,managed:t===void 0?!0:t},r=this.getZIndex();return i.opacity=ne(Math.round(this.getOpacity()*100)/100,0,1),i.sourceState=this.getSourceState(),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=r===void 0&&!i.managed?1/0:r,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i},e.prototype.getLayersArray=function(t){return dt()},e.prototype.getLayerStatesArray=function(t){return dt()},e.prototype.getExtent=function(){return this.get(jt.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(jt.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(jt.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(jt.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(jt.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(jt.OPACITY)},e.prototype.getSourceState=function(){return dt()},e.prototype.getVisible=function(){return this.get(jt.VISIBLE)},e.prototype.getZIndex=function(){return this.get(jt.Z_INDEX)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(jt.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(jt.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(jt.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(jt.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(jt.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){Mt(typeof t=="number",64),this.set(jt.OPACITY,t)},e.prototype.setVisible=function(t){this.set(jt.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(jt.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),n.prototype.disposeInternal.call(this)},e}(Ue),Sf=Zg,Tr={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},Jg=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Qg=function(n){Jg(e,n);function e(t){var i=this,r=Wt({},t);delete r.source,i=n.call(this,r)||this,i.on,i.once,i.un,i.mapPrecomposeKey_=null,i.mapRenderKey_=null,i.sourceChangeKey_=null,i.renderer_=null,t.render&&(i.render=t.render),t.map&&i.setMap(t.map),i.addChangeListener(jt.SOURCE,i.handleSourcePropertyChange_);var a=t.source?t.source:null;return i.setSource(a),i}return e.prototype.getLayersArray=function(t){var i=t||[];return i.push(this),i},e.prototype.getLayerStatesArray=function(t){var i=t||[];return i.push(this.getLayerState()),i},e.prototype.getSource=function(){return this.get(jt.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():Tr.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Yt(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Pt(t,Et.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(i){return i([])})},e.prototype.render=function(t,i){var r=this.getRenderer();if(r.prepareFrame(t))return r.renderFrame(t,i)},e.prototype.setMapInternal=function(t){this.set(jt.MAP,t)},e.prototype.getMapInternal=function(){return this.get(jt.MAP)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Yt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Yt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Pt(t,xr.PRECOMPOSE,function(i){var r=i,a=r.frameState.layerStatesArray,o=this.getLayerState(!1);Mt(!a.some(function(s){return s.layer===o.layer}),67),a.push(o)},this),this.mapRenderKey_=Pt(this,Et.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(jt.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),n.prototype.disposeInternal.call(this)},e}(Sf);function qo(n,e){if(!n.visible)return!1;var t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;var i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}var Ko=Qg;function ty(n,e,t,i,r){Rf(n,e,t||0,i||n.length-1,r||ey)}function Rf(n,e,t,i,r){for(;i>t;){if(i-t>600){var a=i-t+1,o=e-t+1,s=Math.log(a),l=.5*Math.exp(2*s/3),h=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1),f=Math.max(t,Math.floor(e-o*l/a+h)),d=Math.min(i,Math.floor(e+(a-o)*l/a+h));Rf(n,e,f,d,r)}var p=n[e],y=t,m=i;for($a(n,t,e),r(n[i],p)>0&&$a(n,t,i);y<m;){for($a(n,y,m),y++,m--;r(n[y],p)<0;)y++;for(;r(n[m],p)>0;)m--}r(n[t],p)===0?$a(n,t,m):(m++,$a(n,m,i)),m<=e&&(t=m+1),e<=m&&(i=m-1)}}function $a(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function ey(n,e){return n<e?-1:n>e?1:0}class If{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Jo(e,t))return i;const r=this.toBBox,a=[];for(;t;){for(let o=0;o<t.children.length;o++){const s=t.children[o],l=t.leaf?r(s):s;Jo(e,l)&&(t.leaf?i.push(s):Bl(e,l)?this._all(s,i):a.push(s))}t=a.pop()}return i}collides(e){let t=this.data;if(!Jo(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const a=t.children[r],o=t.leaf?this.toBBox(a):a;if(Jo(e,o)){if(t.leaf||Bl(e,o))return!0;i.push(a)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Zr([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),a=[],o=[];let s,l,h;for(;i||a.length;){if(i||(i=a.pop(),l=a[a.length-1],s=o.pop(),h=!0),i.leaf){const f=iy(e,i.children,t);if(f!==-1)return i.children.splice(f,1),a.push(i),this._condense(a),this}!h&&!i.leaf&&Bl(i,r)?(a.push(i),o.push(s),s=0,l=i,i=i.children[0]):l?(s++,i=l.children[s],h=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const a=i-t+1;let o=this._maxEntries,s;if(a<=o)return s=Zr(e.slice(t,i+1)),Kr(s,this.toBBox),s;r||(r=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,r-1))),s=Zr([]),s.leaf=!1,s.height=r;const l=Math.ceil(a/o),h=l*Math.ceil(Math.sqrt(o));Pf(e,t,i,h,this.compareMinX);for(let f=t;f<=i;f+=h){const d=Math.min(f+h-1,i);Pf(e,f,d,l,this.compareMinY);for(let p=f;p<=d;p+=l){const y=Math.min(p+l-1,d);s.children.push(this._build(e,p,y,r-1))}}return Kr(s,this.toBBox),s}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let a=1/0,o=1/0,s;for(let l=0;l<t.children.length;l++){const h=t.children[l],f=jl(h),d=ay(e,h)-f;d<o?(o=d,a=f<a?f:a,s=h):d===o&&f<a&&(a=f,s=h)}t=s||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),a=[],o=this._chooseSubtree(r,this.data,t,a);for(o.children.push(e),Va(o,r);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(r,a,t)}_split(e,t){const i=e[t],r=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,r);const o=this._chooseSplitIndex(i,a,r),s=Zr(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,Kr(i,this.toBBox),Kr(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(i,s)}_splitRoot(e,t){this.data=Zr([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Kr(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,a=1/0,o=1/0;for(let s=t;s<=i-t;s++){const l=za(e,0,s,this.toBBox),h=za(e,s,i,this.toBBox),f=oy(l,h),d=jl(l)+jl(h);f<a?(a=f,r=s,o=d<o?d:o):f===a&&d<o&&(o=d,r=s)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:ny,a=e.leaf?this.compareMinY:ry,o=this._allDistMargin(e,t,i,r),s=this._allDistMargin(e,t,i,a);o<s&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const a=this.toBBox,o=za(e,0,t,a),s=za(e,i-t,i,a);let l=Zo(o)+Zo(s);for(let h=t;h<i-t;h++){const f=e.children[h];Va(o,e.leaf?a(f):f),l+=Zo(o)}for(let h=i-t-1;h>=t;h--){const f=e.children[h];Va(s,e.leaf?a(f):f),l+=Zo(s)}return l}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)Va(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Kr(e[t],this.toBBox)}}function iy(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function Kr(n,e){za(n,0,n.children.length,e,n)}function za(n,e,t,i,r){r||(r=Zr(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let a=e;a<t;a++){const o=n.children[a];Va(r,n.leaf?i(o):o)}return r}function Va(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function ny(n,e){return n.minX-e.minX}function ry(n,e){return n.minY-e.minY}function jl(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Zo(n){return n.maxX-n.minX+(n.maxY-n.minY)}function ay(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function oy(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),a=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,a-i)}function Bl(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Jo(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function Zr(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Pf(n,e,t,i,r){const a=[e,t];for(;a.length;){if(t=a.pop(),e=a.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;ty(n,o,e,t,r),a.push(e,o,o,t)}}var sy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),bf={RENDER_ORDER:"renderOrder"},ly=function(n){sy(e,n);function e(t){var i=this,r=t||{},a=Wt({},r);return delete a.style,delete a.renderBuffer,delete a.updateWhileAnimating,delete a.updateWhileInteracting,i=n.call(this,a)||this,i.declutter_=r.declutter!==void 0?r.declutter:!1,i.renderBuffer_=r.renderBuffer!==void 0?r.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(r.style),i.updateWhileAnimating_=r.updateWhileAnimating!==void 0?r.updateWhileAnimating:!1,i.updateWhileInteracting_=r.updateWhileInteracting!==void 0?r.updateWhileInteracting:!1,i}return e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(t){return n.prototype.getFeatures.call(this,t)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(bf.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new If(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(bf.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=t!==void 0?t:Xg,this.styleFunction_=t===null?void 0:Hg(this.style_),this.changed()},e}(Ko),uy=ly,Wa={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Qo=[Wa.FILL],Rn=[Wa.STROKE],Cr=[Wa.BEGIN_PATH],Lf=[Wa.CLOSE_PATH],gt=Wa,hy=function(){function n(){}return n.prototype.drawCustom=function(e,t,i,r){},n.prototype.drawGeometry=function(e){},n.prototype.setStyle=function(e){},n.prototype.drawCircle=function(e,t){},n.prototype.drawFeature=function(e,t){},n.prototype.drawGeometryCollection=function(e,t){},n.prototype.drawLineString=function(e,t){},n.prototype.drawMultiLineString=function(e,t){},n.prototype.drawMultiPoint=function(e,t){},n.prototype.drawMultiPolygon=function(e,t){},n.prototype.drawPoint=function(e,t){},n.prototype.drawPolygon=function(e,t){},n.prototype.drawText=function(e,t){},n.prototype.setFillStrokeStyle=function(e,t){},n.prototype.setImageStyle=function(e,t){},n.prototype.setTextStyle=function(e,t){},n}(),Af=hy,fy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),cy=function(n){fy(e,n);function e(t,i,r,a){var o=n.call(this)||this;return o.tolerance=t,o.maxExtent=i,o.pixelRatio=a,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return e.prototype.applyPixelRatio=function(t){var i=this.pixelRatio;return i==1?t:t.map(function(r){return r*i})},e.prototype.appendFlatPointCoordinates=function(t,i){for(var r=this.getBufferedMaxExtent(),a=this.tmpCoordinate_,o=this.coordinates,s=o.length,l=0,h=t.length;l<h;l+=i)a[0]=t[l],a[1]=t[l+1],Oa(r,a)&&(o[s++]=a[0],o[s++]=a[1]);return s},e.prototype.appendFlatLineCoordinates=function(t,i,r,a,o,s){var l=this.coordinates,h=l.length,f=this.getBufferedMaxExtent();s&&(i+=a);var d=t[i],p=t[i+1],y=this.tmpCoordinate_,m=!0,x,C,w;for(x=i+a;x<r;x+=a)y[0]=t[x],y[1]=t[x+1],w=sl(f,y),w!==C?(m&&(l[h++]=d,l[h++]=p,m=!1),l[h++]=y[0],l[h++]=y[1]):w===ve.INTERSECTING?(l[h++]=y[0],l[h++]=y[1],m=!1):m=!0,d=y[0],p=y[1],C=w;return(o&&m||x===i+a)&&(l[h++]=d,l[h++]=p),h},e.prototype.drawCustomCoordinates_=function(t,i,r,a,o){for(var s=0,l=r.length;s<l;++s){var h=r[s],f=this.appendFlatLineCoordinates(t,i,h,a,!1,!1);o.push(f),i=h}return i},e.prototype.drawCustom=function(t,i,r,a){this.beginGeometry(t,i);var o=t.getType(),s=t.getStride(),l=this.coordinates.length,h,f,d,p,y;switch(o){case V.MULTI_POLYGON:h=t.getOrientedFlatCoordinates(),p=[];var m=t.getEndss();y=0;for(var x=0,C=m.length;x<C;++x){var w=[];y=this.drawCustomCoordinates_(h,y,m[x],s,w),p.push(w)}this.instructions.push([gt.CUSTOM,l,p,t,r,Il]),this.hitDetectionInstructions.push([gt.CUSTOM,l,p,t,a||r,Il]);break;case V.POLYGON:case V.MULTI_LINE_STRING:d=[],h=o==V.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),y=this.drawCustomCoordinates_(h,0,t.getEnds(),s,d),this.instructions.push([gt.CUSTOM,l,d,t,r,Aa]),this.hitDetectionInstructions.push([gt.CUSTOM,l,d,t,a||r,Aa]);break;case V.LINE_STRING:case V.CIRCLE:h=t.getFlatCoordinates(),f=this.appendFlatLineCoordinates(h,0,h.length,s,!1,!1),this.instructions.push([gt.CUSTOM,l,f,t,r,Mn]),this.hitDetectionInstructions.push([gt.CUSTOM,l,f,t,a||r,Mn]);break;case V.MULTI_POINT:h=t.getFlatCoordinates(),f=this.appendFlatPointCoordinates(h,s),f>l&&(this.instructions.push([gt.CUSTOM,l,f,t,r,Mn]),this.hitDetectionInstructions.push([gt.CUSTOM,l,f,t,a||r,Mn]));break;case V.POINT:h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),f=this.coordinates.length,this.instructions.push([gt.CUSTOM,l,f,t,r]),this.hitDetectionInstructions.push([gt.CUSTOM,l,f,t,a||r]);break}this.endGeometry(i)},e.prototype.beginGeometry=function(t,i){this.beginGeometryInstruction1_=[gt.BEGIN_GEOMETRY,i,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[gt.BEGIN_GEOMETRY,i,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var i,r=t.length,a,o,s=-1;for(i=0;i<r;++i)a=t[i],o=a[0],o==gt.END_GEOMETRY?s=i:o==gt.BEGIN_GEOMETRY&&(a[2]=i,jp(this.hitDetectionInstructions,s,i),s=-1)},e.prototype.setFillStrokeStyle=function(t,i){var r=this.state;if(t){var a=t.getColor();r.fillStyle=Di(a||sn)}else r.fillStyle=void 0;if(i){var o=i.getColor();r.strokeStyle=Di(o||Ga);var s=i.getLineCap();r.lineCap=s!==void 0?s:Yo;var l=i.getLineDash();r.lineDash=l?l.slice():Da;var h=i.getLineDashOffset();r.lineDashOffset=h||Fa;var f=i.getLineJoin();r.lineJoin=f!==void 0?f:Hr;var d=i.getWidth();r.lineWidth=d!==void 0?d:Ba;var p=i.getMiterLimit();r.miterLimit=p!==void 0?p:ka,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},e.prototype.createFill=function(t){var i=t.fillStyle,r=[gt.SET_FILL_STYLE,i];return typeof i!="string"&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[gt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,i){var r=t.fillStyle;(typeof r!="string"||t.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(i.call(this,t)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,i){var r=t.strokeStyle,a=t.lineCap,o=t.lineDash,s=t.lineDashOffset,l=t.lineJoin,h=t.lineWidth,f=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=a||o!=t.currentLineDash&&!sr(t.currentLineDash,o)||t.currentLineDashOffset!=s||t.currentLineJoin!=l||t.currentLineWidth!=h||t.currentMiterLimit!=f)&&(r!==void 0&&i.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=a,t.currentLineDash=o,t.currentLineDashOffset=s,t.currentLineJoin=l,t.currentLineWidth=h,t.currentMiterLimit=f)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[gt.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Oh(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Ma(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Af),Ya=cy,dy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),py=function(n){dy(e,n);function e(t,i,r,a){var o=n.call(this,t,i,r,a)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterImageWithText_=void 0,o}return e.prototype.drawPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var r=t.getFlatCoordinates(),a=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(r,a);this.instructions.push([gt.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([gt.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},e.prototype.drawMultiPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var r=t.getFlatCoordinates(),a=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(r,a);this.instructions.push([gt.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([gt.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,n.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,i){var r=t.getAnchor(),a=t.getSize(),o=t.getHitDetectionImage(),s=t.getImage(this.pixelRatio),l=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=o,this.image_=s,this.height_=a[1],this.opacity_=t.getOpacity(),this.originX_=l[0]*this.imagePixelRatio_,this.originY_=l[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=a[0],this.declutterImageWithText_=i},e}(Ya),vy=py,gy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yy=function(n){gy(e,n);function e(t,i,r,a){return n.call(this,t,i,r,a)||this}return e.prototype.drawFlatCoordinates_=function(t,i,r,a){var o=this.coordinates.length,s=this.appendFlatLineCoordinates(t,i,r,a,!1,!1),l=[gt.MOVE_TO_LINE_TO,o,s];return this.instructions.push(l),this.hitDetectionInstructions.push(l),r},e.prototype.drawLineString=function(t,i){var r=this.state,a=r.strokeStyle,o=r.lineWidth;if(!(a===void 0||o===void 0)){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([gt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Da,Fa],Cr);var s=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(s,0,s.length,l),this.hitDetectionInstructions.push(Rn),this.endGeometry(i)}},e.prototype.drawMultiLineString=function(t,i){var r=this.state,a=r.strokeStyle,o=r.lineWidth;if(!(a===void 0||o===void 0)){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([gt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],Cr);for(var s=t.getEnds(),l=t.getFlatCoordinates(),h=t.getStride(),f=0,d=0,p=s.length;d<p;++d)f=this.drawFlatCoordinates_(l,f,s[d],h);this.hitDetectionInstructions.push(Rn),this.endGeometry(i)}},e.prototype.finish=function(){var t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Rn),this.reverseHitDetectionInstructions(),this.state=null,n.prototype.finish.call(this)},e.prototype.applyStroke=function(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Rn),t.lastStroke=this.coordinates.length),t.lastStroke=0,n.prototype.applyStroke.call(this,t),this.instructions.push(Cr)},e}(Ya),_y=yy,my=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xy=function(n){my(e,n);function e(t,i,r,a){return n.call(this,t,i,r,a)||this}return e.prototype.drawFlatCoordinatess_=function(t,i,r,a){var o=this.state,s=o.fillStyle!==void 0,l=o.strokeStyle!==void 0,h=r.length;this.instructions.push(Cr),this.hitDetectionInstructions.push(Cr);for(var f=0;f<h;++f){var d=r[f],p=this.coordinates.length,y=this.appendFlatLineCoordinates(t,i,d,a,!0,!l),m=[gt.MOVE_TO_LINE_TO,p,y];this.instructions.push(m),this.hitDetectionInstructions.push(m),l&&(this.instructions.push(Lf),this.hitDetectionInstructions.push(Lf)),i=d}return s&&(this.instructions.push(Qo),this.hitDetectionInstructions.push(Qo)),l&&(this.instructions.push(Rn),this.hitDetectionInstructions.push(Rn)),i},e.prototype.drawCircle=function(t,i){var r=this.state,a=r.fillStyle,o=r.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_FILL_STYLE,sn]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var s=t.getFlatCoordinates(),l=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,l,!1,!1);var f=[gt.CIRCLE,h];this.instructions.push(Cr,f),this.hitDetectionInstructions.push(Cr,f),r.fillStyle!==void 0&&(this.instructions.push(Qo),this.hitDetectionInstructions.push(Qo)),r.strokeStyle!==void 0&&(this.instructions.push(Rn),this.hitDetectionInstructions.push(Rn)),this.endGeometry(i)}},e.prototype.drawPolygon=function(t,i){var r=this.state,a=r.fillStyle,o=r.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_FILL_STYLE,sn]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var s=t.getEnds(),l=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(l,0,s,h),this.endGeometry(i)}},e.prototype.drawMultiPolygon=function(t,i){var r=this.state,a=r.fillStyle,o=r.strokeStyle;if(!(a===void 0&&o===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_FILL_STYLE,sn]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([gt.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var s=t.getEndss(),l=t.getOrientedFlatCoordinates(),h=t.getStride(),f=0,d=0,p=s.length;d<p;++d)f=this.drawFlatCoordinatess_(l,f,s[d],h);this.endGeometry(i)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(t!==0)for(var i=this.coordinates,r=0,a=i.length;r<a;++r)i[r]=yr(i[r],t);return n.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state,i=t.fillStyle;i!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)},e}(Ya),Nf=xy;function Ey(n,e,t,i,r){var a=t,o=t,s=0,l=0,h=t,f,d,p,y,m,x,C,w,S,R;for(d=t;d<i;d+=r){var I=e[d],F=e[d+1];m!==void 0&&(S=I-m,R=F-x,y=Math.sqrt(S*S+R*R),C!==void 0&&(l+=p,f=Math.acos((C*S+w*R)/(p*y)),f>n&&(l>s&&(s=l,a=h,o=d),l=0,h=d-r)),p=y,C=S,w=R),m=I,x=F}return l+=y,l>s?[h,d]:[a,o]}var Ty=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ts={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Cy=function(n){Ty(e,n);function e(t,i,r,a){var o=n.call(this,t,i,r,a)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return e.prototype.finish=function(){var t=n.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},e.prototype.drawText=function(t,i){var r=this.textFillState_,a=this.textStrokeState_,o=this.textState_;if(!(this.text_===""||!o||!r&&!a)){var s=this.coordinates,l=s.length,h=t.getType(),f=null,d=t.getStride();if(o.placement===qg.LINE&&(h==V.LINE_STRING||h==V.MULTI_LINE_STRING||h==V.POLYGON||h==V.MULTI_POLYGON)){if(!Ve(this.getBufferedMaxExtent(),t.getExtent()))return;var p=void 0;if(f=t.getFlatCoordinates(),h==V.LINE_STRING)p=[f.length];else if(h==V.MULTI_LINE_STRING)p=t.getEnds();else if(h==V.POLYGON)p=t.getEnds().slice(0,1);else if(h==V.MULTI_POLYGON){var y=t.getEndss();p=[];for(var m=0,x=y.length;m<x;++m)p.push(y[m][0])}this.beginGeometry(t,i);for(var C=o.textAlign,w=0,S=void 0,R=0,I=p.length;R<I;++R){if(C==null){var F=Ey(o.maxAngle,f,w,p[R],d);w=F[0],S=F[1]}else S=p[R];for(var m=w;m<S;m+=d)s.push(f[m],f[m+1]);var g=s.length;w=p[R],this.drawChars_(l,g),l=g}this.endGeometry(i)}else{var G=o.overflow?null:[];switch(h){case V.POINT:case V.MULTI_POINT:f=t.getFlatCoordinates();break;case V.LINE_STRING:f=t.getFlatMidpoint();break;case V.CIRCLE:f=t.getCenter();break;case V.MULTI_LINE_STRING:f=t.getFlatMidpoints(),d=2;break;case V.POLYGON:f=t.getFlatInteriorPoint(),o.overflow||G.push(f[2]/this.resolution),d=3;break;case V.MULTI_POLYGON:var B=t.getFlatInteriorPoints();f=[];for(var m=0,x=B.length;m<x;m+=3)o.overflow||G.push(B[m+2]/this.resolution),f.push(B[m],B[m+1]);if(f.length===0)return;d=2;break}var g=this.appendFlatPointCoordinates(f,d);if(g===l)return;if(G&&(g-l)/2!=f.length/d){var X=l/2;G=G.filter(function(Rt,wt){var Lt=s[(X+wt)*2]===f[wt*d]&&s[(X+wt)*2+1]===f[wt*d+1];return Lt||--X,Lt})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);var Z=o.padding;if(Z!=Er&&(o.scale[0]<0||o.scale[1]<0)){var et=o.padding[0],K=o.padding[1],lt=o.padding[2],vt=o.padding[3];o.scale[0]<0&&(K=-K,vt=-vt),o.scale[1]<0&&(et=-et,lt=-lt),Z=[et,K,lt,vt]}var nt=this.pixelRatio;this.instructions.push([gt.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,Z==Er?Er:Z.map(function(Rt){return Rt*nt}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,G]);var yt=1/nt;this.hitDetectionInstructions.push([gt.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[yt,yt],NaN,this.declutterImageWithText_,Z,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,G]),this.endGeometry(i)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,i=this.textState_,r=this.textFillState_,a=this.strokeKey_;t&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var o=this.textKey_;o in this.textStates||(this.textStates[o]={font:i.font,textAlign:i.textAlign||ja,textBaseline:i.textBaseline||Ho,scale:i.scale});var s=this.fillKey_;r&&(s in this.fillStates||(this.fillStates[s]={fillStyle:r.fillStyle}))},e.prototype.drawChars_=function(t,i){var r=this.textStrokeState_,a=this.textState_,o=this.strokeKey_,s=this.textKey_,l=this.fillKey_;this.saveTextStates_();var h=this.pixelRatio,f=ts[a.textBaseline],d=this.textOffsetY_*h,p=this.text_,y=r?r.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([gt.DRAW_CHARS,t,i,f,a.overflow,l,a.maxAngle,h,d,o,y*h,p,s,1]),this.hitDetectionInstructions.push([gt.DRAW_CHARS,t,i,f,a.overflow,l,a.maxAngle,1,d,o,y,p,s,1/h])},e.prototype.setTextStyle=function(t,i){var r,a,o;if(!t)this.text_="";else{var s=t.getFill();s?(a=this.textFillState_,a||(a={},this.textFillState_=a),a.fillStyle=Di(s.getColor()||sn)):(a=null,this.textFillState_=a);var l=t.getStroke();if(!l)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);var h=l.getLineDash(),f=l.getLineDashOffset(),d=l.getWidth(),p=l.getMiterLimit();o.lineCap=l.getLineCap()||Yo,o.lineDash=h?h.slice():Da,o.lineDashOffset=f===void 0?Fa:f,o.lineJoin=l.getLineJoin()||Hr,o.lineWidth=d===void 0?Ba:d,o.miterLimit=p===void 0?ka:p,o.strokeStyle=Di(l.getColor()||Ga)}r=this.textState_;var y=t.getFont()||Ef;Gg(y);var m=t.getScaleArray();r.overflow=t.getOverflow(),r.font=y,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||Ho,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||Er,r.scale=m===void 0?[1,1]:m;var x=t.getOffsetX(),C=t.getOffsetY(),w=t.getRotateWithView(),S=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=x===void 0?0:x,this.textOffsetY_=C===void 0?0:C,this.textRotateWithView_=w===void 0?!1:w,this.textRotation_=S===void 0?0:S,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:It(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.textBaseline||"?"),this.fillKey_=a?typeof a.fillStyle=="string"?a.fillStyle:"|"+It(a.fillStyle):""}this.declutterImageWithText_=i},e}(Ya),wy=Cy,My={Circle:Nf,Default:Ya,Image:vy,LineString:_y,Polygon:Nf,Text:wy},Oy=function(){function n(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}return n.prototype.finish=function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var i=this.buildersByZIndex_[t];for(var r in i){var a=i[r].finish();e[t][r]=a}}return e},n.prototype.getBuilder=function(e,t){var i=e!==void 0?e.toString():"0",r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);var a=r[t];if(a===void 0){var o=My[t];a=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=a}return a},n}(),Df=Oy,Sy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ry=function(n){Sy(e,n);function e(t){var i=n.call(this)||this;return i.boundHandleImageChange_=i.handleImageChange_.bind(i),i.layer_=t,i.declutterExecutorGroup=null,i}return e.prototype.getFeatures=function(t){return dt()},e.prototype.prepareFrame=function(t){return dt()},e.prototype.renderFrame=function(t,i){return dt()},e.prototype.loadedTileCallback=function(t,i,r){t[i]||(t[i]={}),t[i][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,i,r){return function(a,o){var s=this.loadedTileCallback.bind(this,r,a);return t.forEachLoadedTile(i,a,o,s)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,i,r,a,o){},e.prototype.getDataAtPixel=function(t,i,r){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){var i=t.target;i.getState()===Ht.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var i=t.getState();return i!=Ht.LOADED&&i!=Ht.ERROR&&t.addEventListener(Et.CHANGE,this.boundHandleImageChange_),i==Ht.IDLE&&(t.load(),i=t.getState()),i==Ht.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Tr.READY&&t.changed()},e}(Br),Iy=Ry,Py=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),by=function(n){Py(e,n);function e(t,i,r,a){var o=n.call(this,t)||this;return o.inversePixelTransform=i,o.frameState=r,o.context=a,o}return e}(ui),Ff=by,Ly=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ay=function(n){Ly(e,n);function e(t){var i=n.call(this,t)||this;return i.container=null,i.renderedResolution,i.tempTransform=Li(),i.pixelTransform=Li(),i.inversePixelTransform=Li(),i.context=null,i.containerReused=!1,i.pixelContext_=null,i}return e.prototype.getBackground=function(t){var i=this.getLayer(),r=i.getBackground();return typeof r=="function"&&(r=r(t.viewState.resolution)),r||void 0},e.prototype.useContainer=function(t,i,r,a){var o=this.getLayer().getClassName(),s,l;if(t&&t.className===o&&t.style.opacity===""&&r===1&&(!a||t.style.backgroundColor&&sr(zo(t.style.backgroundColor),zo(a)))){var h=t.firstElementChild;h instanceof HTMLCanvasElement&&(l=h.getContext("2d"))}if(l&&l.canvas.style.transform===i?(this.container=t,this.context=l,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=o;var f=s.style;f.position="absolute",f.width="100%",f.height="100%",a&&(f.backgroundColor=a),l=fi();var h=l.canvas;s.appendChild(h),f=h.style,f.position="absolute",f.left="0",f.transformOrigin="top left",this.container=s,this.context=l}},e.prototype.clipUnrotated=function(t,i,r){var a=fr(r),o=bo(r),s=Po(r),l=Io(r);ce(i.coordinateToPixelTransform,a),ce(i.coordinateToPixelTransform,o),ce(i.coordinateToPixelTransform,s),ce(i.coordinateToPixelTransform,l);var h=this.inversePixelTransform;ce(h,a),ce(h,o),ce(h,s),ce(h,l),t.save(),t.beginPath(),t.moveTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,i,r){var a=this.getLayer();if(a.hasListener(t)){var o=new Ff(t,this.inversePixelTransform,r,i);a.dispatchEvent(o)}},e.prototype.preRender=function(t,i){this.dispatchRenderEvent_(xr.PRERENDER,t,i)},e.prototype.postRender=function(t,i){this.dispatchRenderEvent_(xr.POSTRENDER,t,i)},e.prototype.getRenderTransform=function(t,i,r,a,o,s,l){var h=o/2,f=s/2,d=a/i,p=-d,y=-t[0]+l,m=-t[1];return nn(this.tempTransform,h,f,d,p,-r,y,m)},e.prototype.getDataAtPixel=function(t,i,r){var a=ce(this.inversePixelTransform,t.slice()),o=this.context,s=this.getLayer(),l=s.getExtent();if(l){var h=ce(i.pixelToCoordinateTransform,t.slice());if(!Oa(l,h))return null}var f=Math.round(a[0]),d=Math.round(a[1]),p=this.pixelContext_;if(!p){var y=document.createElement("canvas");y.width=1,y.height=1,p=y.getContext("2d"),this.pixelContext_=p}p.clearRect(0,0,1,1);var m;try{p.drawImage(o.canvas,f,d,1,1,0,0,1,1),m=p.getImageData(0,0,1,1).data}catch(x){return x.name==="SecurityError"?(this.pixelContext_=null,new Uint8Array):m}return m[3]===0?null:m},e}(Iy),kf=Ay,te={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function Ny(n,e,t,i,r,a,o,s,l,h,f,d){var p=n[e],y=n[e+1],m=0,x=0,C=0,w=0;function S(){m=p,x=y,e+=i,p=n[e],y=n[e+1],w+=C,C=Math.sqrt((p-m)*(p-m)+(y-x)*(y-x))}do S();while(e<t-i&&w+C<a);for(var R=C===0?0:(a-w)/C,I=rn(m,p,R),F=rn(x,y,R),g=e-i,G=w,B=a+s*l(h,r,f);e<t-i&&w+C<B;)S();R=C===0?0:(B-w)/C;var X=rn(m,p,R),Z=rn(x,y,R),et;if(d){var K=[I,F,X,Z];Tl(K,0,4,2,d,K,K),et=K[0]>K[2]}else et=I>X;var lt=Math.PI,vt=[],nt=g+i===e;e=g,C=0,w=G,p=n[e],y=n[e+1];var yt;if(nt){S(),yt=Math.atan2(y-x,p-m),et&&(yt+=yt>0?-lt:lt);var rt=(X+I)/2,Rt=(Z+F)/2;return vt[0]=[rt,Rt,(B-a)/2,yt,r],vt}for(var wt=0,Lt=r.length;wt<Lt;){S();var St=Math.atan2(y-x,p-m);if(et&&(St+=St>0?-lt:lt),yt!==void 0){var H=St-yt;if(H+=H>lt?-2*lt:H<-lt?2*lt:0,Math.abs(H)>o)return null}yt=St;for(var Xt=wt,_t=0;wt<Lt;++wt){var Ut=et?Lt-wt-1:wt,le=s*l(h,r[Ut],f);if(e+i<t&&w+C<a+_t+le/2)break;_t+=le}if(wt!==Xt){var ae=et?r.substring(Lt-Xt,Lt-wt):r.substring(Xt,wt);R=C===0?0:(a+_t/2-w)/C;var rt=rn(m,p,R),Rt=rn(x,y,R);vt.push([rt,Rt,_t/2,St,ae]),a+=_t}}return vt}var Jr=ze(),In=[],un=[],hn=[],Pn=[];function Gf(n){return n[3].declutterBox}var Dy=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function jf(n,e){return(e==="start"||e==="end")&&!Dy.test(n)&&(e=e==="start"?"left":"right"),ts[e]}var Fy=function(){function n(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Li(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return n.prototype.createLabel=function(e,t,i,r){var a=e+t+i+r;if(this.labels_[a])return this.labels_[a];var o=r?this.strokeStates[r]:null,s=i?this.fillStates[i]:null,l=this.textStates[t],h=this.pixelRatio,f=[l.scale[0]*h,l.scale[1]*h],d=jf(e,l.textAlign||ja),p=r&&o.lineWidth?o.lineWidth:0,y=e.split(`
`),m=y.length,x=[],C=Bg(l.font,y,x),w=jg(l.font),S=w*m,R=C+p,I=[],F=(R+2)*f[0],g=(S+p)*f[1],G={width:F<0?Math.floor(F):Math.ceil(F),height:g<0?Math.floor(g):Math.ceil(g),contextInstructions:I};if((f[0]!=1||f[1]!=1)&&I.push("scale",f),I.push("font",l.font),r){I.push("strokeStyle",o.strokeStyle),I.push("lineWidth",p),I.push("lineCap",o.lineCap),I.push("lineJoin",o.lineJoin),I.push("miterLimit",o.miterLimit);var B=Ro?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;B.prototype.setLineDash&&(I.push("setLineDash",[o.lineDash]),I.push("lineDashOffset",o.lineDashOffset))}i&&I.push("fillStyle",s.fillStyle),I.push("textBaseline","middle"),I.push("textAlign","center");var X=.5-d,Z=d*R+X*p,et;if(r)for(et=0;et<m;++et)I.push("strokeText",[y[et],Z+X*x[et],.5*(p+w)+et*w]);if(i)for(et=0;et<m;++et)I.push("fillText",[y[et],Z+X*x[et],.5*(p+w)+et*w]);return this.labels_[a]=G,G},n.prototype.replayTextBackground_=function(e,t,i,r,a,o,s){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,a),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),s&&(this.setStrokeStyle_(e,s),e.stroke())},n.prototype.calculateImageOrLabelDimensions_=function(e,t,i,r,a,o,s,l,h,f,d,p,y,m,x,C){s*=p[0],l*=p[1];var w=i-s,S=r-l,R=a+h>e?e-h:a,I=o+f>t?t-f:o,F=m[3]+R*p[0]+m[1],g=m[0]+I*p[1]+m[2],G=w-m[3],B=S-m[0];(x||d!==0)&&(In[0]=G,Pn[0]=G,In[1]=B,un[1]=B,un[0]=G+F,hn[0]=un[0],hn[1]=B+g,Pn[1]=hn[1]);var X;return d!==0?(X=nn(Li(),i,r,1,1,d,-i,-r),ce(X,In),ce(X,un),ce(X,hn),ce(X,Pn),Ti(Math.min(In[0],un[0],hn[0],Pn[0]),Math.min(In[1],un[1],hn[1],Pn[1]),Math.max(In[0],un[0],hn[0],Pn[0]),Math.max(In[1],un[1],hn[1],Pn[1]),Jr)):Ti(Math.min(G,G+F),Math.min(B,B+g),Math.max(G,G+F),Math.max(B,B+g),Jr),y&&(w=Math.round(w),S=Math.round(S)),{drawImageX:w,drawImageY:S,drawImageW:R,drawImageH:I,originX:h,originY:f,declutterBox:{minX:Jr[0],minY:Jr[1],maxX:Jr[2],maxY:Jr[3],value:C},canvasTransform:X,scale:p}},n.prototype.replayImageOrLabel_=function(e,t,i,r,a,o,s){var l=!!(o||s),h=r.declutterBox,f=e.canvas,d=s?s[2]*r.scale[0]/2:0,p=h.minX-d<=f.width/t&&h.maxX+d>=0&&h.minY-d<=f.height/t&&h.maxY+d>=0;return p&&(l&&this.replayTextBackground_(e,In,un,hn,Pn,o,s),Ug(e,r.canvasTransform,a,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},n.prototype.fill_=function(e){if(this.alignFill_){var t=ce(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()},n.prototype.setStrokeStyle_=function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.setLineDash&&(e.lineDashOffset=t[7],e.setLineDash(t[6]))},n.prototype.drawLabelWithPointPlacement_=function(e,t,i,r){var a=this.textStates[t],o=this.createLabel(e,t,r,i),s=this.strokeStates[i],l=this.pixelRatio,h=jf(e,a.textAlign||ja),f=ts[a.textBaseline||Ho],d=s&&s.lineWidth?s.lineWidth:0,p=o.width/l-2*a.scale[0],y=h*p+2*(.5-h)*d,m=f*o.height/l+2*(.5-f)*d;return{label:o,anchorX:y,anchorY:m}},n.prototype.execute_=function(e,t,i,r,a,o,s,l){var h;this.pixelCoordinates_&&sr(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=gr(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),iv(this.renderedTransform_,i));for(var f=0,d=r.length,p=0,y,m,x,C,w,S,R,I,F,g,G,B,X=0,Z=0,et=null,K=null,lt=this.coordinateCache_,vt=this.viewRotation_,nt=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,yt={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:vt},rt=this.instructions!=r||this.overlaps?0:200,Rt,wt,Lt,St;f<d;){var H=r[f],Xt=H[0];switch(Xt){case gt.BEGIN_GEOMETRY:Rt=H[1],St=H[3],Rt.getGeometry()?s!==void 0&&!Ve(s,St.getExtent())?f=H[2]+1:++f:f=H[2];break;case gt.BEGIN_PATH:X>rt&&(this.fill_(e),X=0),Z>rt&&(e.stroke(),Z=0),!X&&!Z&&(e.beginPath(),C=NaN,w=NaN),++f;break;case gt.CIRCLE:p=H[1];var _t=h[p],Ut=h[p+1],le=h[p+2],ae=h[p+3],Zt=le-_t,Dt=ae-Ut,ai=Math.sqrt(Zt*Zt+Dt*Dt);e.moveTo(_t+ai,Ut),e.arc(_t,Ut,ai,0,2*Math.PI,!0),++f;break;case gt.CLOSE_PATH:e.closePath(),++f;break;case gt.CUSTOM:p=H[1],y=H[2];var Se=H[3],Yi=H[4],Re=H.length==6?H[5]:void 0;yt.geometry=Se,yt.feature=Rt,f in lt||(lt[f]=[]);var Fe=lt[f];Re?Re(h,p,y,2,Fe):(Fe[0]=h[p],Fe[1]=h[p+1],Fe.length=2),Yi(Fe,yt),++f;break;case gt.DRAW_IMAGE:p=H[1],y=H[2],I=H[3],m=H[4],x=H[5];var oi=H[6],st=H[7],oe=H[8],Lr=H[9],Hi=H[10],Vn=H[11],Wn=H[12],Xi=H[13],ke=H[14];if(!I&&H.length>=19){F=H[18],g=H[19],G=H[20],B=H[21];var Ee=this.drawLabelWithPointPlacement_(F,g,G,B);I=Ee.label,H[3]=I;var gi=H[22];m=(Ee.anchorX-gi)*this.pixelRatio,H[4]=m;var yi=H[23];x=(Ee.anchorY-yi)*this.pixelRatio,H[5]=x,oi=I.height,H[6]=oi,Xi=I.width,H[13]=Xi}var Yn=void 0;H.length>24&&(Yn=H[24]);var Xe=void 0,si=void 0,Ii=void 0;H.length>16?(Xe=H[15],si=H[16],Ii=H[17]):(Xe=Er,si=!1,Ii=!1),Hi&&nt?Vn+=vt:!Hi&&!nt&&(Vn-=vt);for(var yn=0;p<y;p+=2)if(!(Yn&&Yn[yn++]<Xi/this.pixelRatio)){var de=this.calculateImageOrLabelDimensions_(I.width,I.height,h[p],h[p+1],Xi,oi,m,x,oe,Lr,Vn,Wn,a,Xe,si||Ii,Rt),ye=[e,t,I,de,st,si?et:null,Ii?K:null],Pi=void 0,qi=void 0;if(l&&ke){var _e=y-p;if(!ke[_e]){ke[_e]=ye;continue}if(Pi=ke[_e],delete ke[_e],qi=Gf(Pi),l.collides(qi))continue}l&&l.collides(de.declutterBox)||(Pi&&(l&&l.insert(qi),this.replayImageOrLabel_.apply(this,Pi)),l&&l.insert(de.declutterBox),this.replayImageOrLabel_.apply(this,ye))}++f;break;case gt.DRAW_CHARS:var me=H[1],Ar=H[2],ca=H[3],fo=H[4];B=H[5];var co=H[6],Ki=H[7],Zi=H[8];G=H[9];var da=H[10];F=H[11],g=H[12];var po=[H[13],H[13]],Hn=this.textStates[g],bi=Hn.font,Xn=[Hn.scale[0]*Ki,Hn.scale[1]*Ki],qn=void 0;bi in this.widths_?qn=this.widths_[bi]:(qn={},this.widths_[bi]=qn);var vo=lf(h,me,Ar,2),pa=Math.abs(Xn[0])*Cf(bi,F,qn);if(fo||pa<=vo){var Ds=this.textStates[g].textAlign,Fs=(vo-pa)*ts[Ds],_n=Ny(h,me,Ar,2,F,Fs,co,Math.abs(Xn[0]),Cf,bi,qn,nt?0:this.viewRotation_);t:if(_n){var Kn=[],Ie=void 0,Zn=void 0,mn=void 0,ue=void 0,Pe=void 0;if(G)for(Ie=0,Zn=_n.length;Ie<Zn;++Ie){Pe=_n[Ie],mn=Pe[4],ue=this.createLabel(mn,g,"",G),m=Pe[2]+(Xn[0]<0?-da:da),x=ca*ue.height+(.5-ca)*2*da*Xn[1]/Xn[0]-Zi;var de=this.calculateImageOrLabelDimensions_(ue.width,ue.height,Pe[0],Pe[1],ue.width,ue.height,m,x,0,0,Pe[3],po,!1,Er,!1,Rt);if(l&&l.collides(de.declutterBox))break t;Kn.push([e,t,ue,de,1,null,null])}if(B)for(Ie=0,Zn=_n.length;Ie<Zn;++Ie){Pe=_n[Ie],mn=Pe[4],ue=this.createLabel(mn,g,B,""),m=Pe[2],x=ca*ue.height-Zi;var de=this.calculateImageOrLabelDimensions_(ue.width,ue.height,Pe[0],Pe[1],ue.width,ue.height,m,x,0,0,Pe[3],po,!1,Er,!1,Rt);if(l&&l.collides(de.declutterBox))break t;Kn.push([e,t,ue,de,1,null,null])}l&&l.load(Kn.map(Gf));for(var va=0,Jn=Kn.length;va<Jn;++va)this.replayImageOrLabel_.apply(this,Kn[va])}}++f;break;case gt.END_GEOMETRY:if(o!==void 0){Rt=H[1];var ga=o(Rt,St);if(ga)return ga}++f;break;case gt.FILL:rt?X++:this.fill_(e),++f;break;case gt.MOVE_TO_LINE_TO:for(p=H[1],y=H[2],wt=h[p],Lt=h[p+1],S=wt+.5|0,R=Lt+.5|0,(S!==C||R!==w)&&(e.moveTo(wt,Lt),C=S,w=R),p+=2;p<y;p+=2)wt=h[p],Lt=h[p+1],S=wt+.5|0,R=Lt+.5|0,(p==y-2||S!==C||R!==w)&&(e.lineTo(wt,Lt),C=S,w=R);++f;break;case gt.SET_FILL_STYLE:et=H,this.alignFill_=H[2],X&&(this.fill_(e),X=0,Z&&(e.stroke(),Z=0)),e.fillStyle=H[1],++f;break;case gt.SET_STROKE_STYLE:K=H,Z&&(e.stroke(),Z=0),this.setStrokeStyle_(e,H),++f;break;case gt.STROKE:rt?Z++:e.stroke(),++f;break;default:++f;break}}X&&this.fill_(e),Z&&e.stroke()},n.prototype.execute=function(e,t,i,r,a,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,a,void 0,void 0,o)},n.prototype.executeHitDetection=function(e,t,i,r,a){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,a)},n}(),ky=Fy,Ul=[te.POLYGON,te.CIRCLE,te.LINE_STRING,te.IMAGE,te.TEXT,te.DEFAULT],Gy=function(){function n(e,t,i,r,a,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Li(),this.createExecutors_(a)}return n.prototype.clip=function(e,t){var i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()},n.prototype.createExecutors_=function(e){for(var t in e){var i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);var r=e[t];for(var a in r){var o=r[a];i[a]=new ky(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},n.prototype.hasExecutors=function(e){for(var t in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[t],r=0,a=e.length;r<a;++r)if(e[r]in i)return!0;return!1},n.prototype.forEachFeatureAtCoordinate=function(e,t,i,r,a,o){r=Math.round(r);var s=r*2+1,l=nn(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=fi(s,s));var f=this.hitDetectionContext_;f.canvas.width!==s||f.canvas.height!==s?(f.canvas.width=s,f.canvas.height=s):h||f.clearRect(0,0,s,s);var d;this.renderBuffer_!==void 0&&(d=ze(),Ia(d,e),Ma(d,t*(this.renderBuffer_+r),d));var p=jy(r),y;function m(g,G){for(var B=f.getImageData(0,0,s,s).data,X=0,Z=p.length;X<Z;X++)if(B[p[X]]>0){if(!o||y!==te.IMAGE&&y!==te.TEXT||o.indexOf(g)!==-1){var et=(p[X]-3)/4,K=r-et%s,lt=r-(et/s|0),vt=a(g,G,K*K+lt*lt);if(vt)return vt}f.clearRect(0,0,s,s);break}}var x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(or);var C,w,S,R,I;for(C=x.length-1;C>=0;--C){var F=x[C].toString();for(S=this.executorsByZIndex_[F],w=Ul.length-1;w>=0;--w)if(y=Ul[w],R=S[y],R!==void 0&&(I=R.executeHitDetection(f,l,i,m,d),I))return I}},n.prototype.getClipCoords=function(e){var t=this.maxExtent_;if(!t)return null;var i=t[0],r=t[1],a=t[2],o=t[3],s=[i,r,i,o,a,o,a,r];return gr(s,0,8,2,e,s),s},n.prototype.isEmpty=function(){return Gr(this.executorsByZIndex_)},n.prototype.execute=function(e,t,i,r,a,o,s){var l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(or),this.maxExtent_&&(e.save(),this.clip(e,i));var h=o||Ul,f,d,p,y,m,x;for(s&&l.reverse(),f=0,d=l.length;f<d;++f){var C=l[f].toString();for(m=this.executorsByZIndex_[C],p=0,y=h.length;p<y;++p){var w=h[p];x=m[w],x!==void 0&&x.execute(e,t,i,r,a,s)}}this.maxExtent_&&e.restore()},n}(),$l={};function jy(n){if($l[n]!==void 0)return $l[n];for(var e=n*2+1,t=n*n,i=new Array(t+1),r=0;r<=n;++r)for(var a=0;a<=n;++a){var o=r*r+a*a;if(o>t)break;var s=i[o];s||(s=[],i[o]=s),s.push(((n+r)*e+(n+a))*4+3),r>0&&s.push(((n-r)*e+(n+a))*4+3),a>0&&(s.push(((n+r)*e+(n-a))*4+3),r>0&&s.push(((n-r)*e+(n-a))*4+3))}for(var l=[],r=0,h=i.length;r<h;++r)i[r]&&l.push.apply(l,i[r]);return $l[n]=l,l}var Bf=Gy,Ce={ANIMATING:0,INTERACTING:1},By=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Uy=function(n){By(e,n);function e(t,i,r,a,o,s,l){var h=n.call(this)||this;return h.context_=t,h.pixelRatio_=i,h.extent_=r,h.transform_=a,h.viewRotation_=o,h.squaredTolerance_=s,h.userTransform_=l,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=Li(),h}return e.prototype.drawImages_=function(t,i,r,a){if(!!this.image_){var o=gr(t,i,r,a,this.transform_,this.pixelCoordinates_),s=this.context_,l=this.tmpLocalTransform_,h=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=h*this.imageOpacity_);var f=this.imageRotation_;this.imageRotateWithView_&&(f+=this.viewRotation_);for(var d=0,p=o.length;d<p;d+=2){var y=o[d]-this.imageAnchorX_,m=o[d+1]-this.imageAnchorY_;if(f!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var x=y+this.imageAnchorX_,C=m+this.imageAnchorY_;nn(l,x,C,1,1,f,-x,-C),s.setTransform.apply(s,l),s.translate(x,C),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,m,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=h)}},e.prototype.drawText_=function(t,i,r,a){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=gr(t,i,r,a,this.transform_,this.pixelCoordinates_),s=this.context_,l=this.textRotation_;for(this.textRotateWithView_&&(l+=this.viewRotation_);i<r;i+=a){var h=o[i]+this.textOffsetX_,f=o[i+1]+this.textOffsetY_;if(l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var d=nn(this.tmpLocalTransform_,h,f,1,1,l,-h,-f);s.setTransform.apply(s,d),s.translate(h,f),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&s.strokeText(this.text_,h,f),this.textFillState_&&s.fillText(this.text_,h,f)}}},e.prototype.moveToLineTo_=function(t,i,r,a,o){var s=this.context_,l=gr(t,i,r,a,this.transform_,this.pixelCoordinates_);s.moveTo(l[0],l[1]);var h=l.length;o&&(h-=2);for(var f=2;f<h;f+=2)s.lineTo(l[f],l[f+1]);return o&&s.closePath(),r},e.prototype.drawRings_=function(t,i,r,a){for(var o=0,s=r.length;o<s;++o)i=this.moveToLineTo_(t,i,r[o],a,!0);return i},e.prototype.drawCircle=function(t){if(!!Ve(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=Xv(t,this.transform_,this.pixelCoordinates_),r=i[2]-i[0],a=i[3]-i[1],o=Math.sqrt(r*r+a*a),s=this.context_;s.beginPath(),s.arc(i[0],i[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){var i=t.getType();switch(i){case V.POINT:this.drawPoint(t);break;case V.LINE_STRING:this.drawLineString(t);break;case V.POLYGON:this.drawPolygon(t);break;case V.MULTI_POINT:this.drawMultiPoint(t);break;case V.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case V.MULTI_POLYGON:this.drawMultiPolygon(t);break;case V.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case V.CIRCLE:this.drawCircle(t);break}},e.prototype.drawFeature=function(t,i){var r=i.getGeometryFunction()(t);!r||!Ve(this.extent_,r.getExtent())||(this.setStyle(i),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t){for(var i=t.getGeometriesArray(),r=0,a=i.length;r<a;++r)this.drawGeometry(i[r])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(i,0,i.length,r),this.text_!==""&&this.drawText_(i,0,i.length,r)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(i,0,i.length,r),this.text_!==""&&this.drawText_(i,0,i.length,r)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ve(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),i.stroke()}if(this.text_!==""){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getExtent();if(!!Ve(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,a=t.getFlatCoordinates(),o=0,s=t.getEnds(),l=t.getStride();r.beginPath();for(var h=0,f=s.length;h<f;++h)o=this.moveToLineTo_(a,o,s[h],l,!1);r.stroke()}if(this.text_!==""){var d=t.getFlatMidpoints();this.drawText_(d,0,d.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ve(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ve(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getOrientedFlatCoordinates(),a=0,o=t.getEndss(),s=t.getStride();i.beginPath();for(var l=0,h=o.length;l<h;++l){var f=o[l];a=this.drawRings_(r,a,f,s)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var d=t.getFlatInteriorPoints();this.drawText_(d,0,d.length,2)}}},e.prototype.setContextFillState_=function(t){var i=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var i=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,i.lineCap=t.lineCap),i.setLineDash&&(sr(r.lineDash,t.lineDash)||i.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var i=this.context_,r=this.contextTextState_,a=t.textAlign?t.textAlign:ja;r?(r.font!=t.font&&(r.font=t.font,i.font=t.font),r.textAlign!=a&&(r.textAlign=a,i.textAlign=a),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=a,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:a,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,i){var r=this;if(!t)this.fillState_=null;else{var a=t.getColor();this.fillState_={fillStyle:Di(a||sn)}}if(!i)this.strokeState_=null;else{var o=i.getColor(),s=i.getLineCap(),l=i.getLineDash(),h=i.getLineDashOffset(),f=i.getLineJoin(),d=i.getWidth(),p=i.getMiterLimit(),y=l||Da;this.strokeState_={lineCap:s!==void 0?s:Yo,lineDash:this.pixelRatio_===1?y:y.map(function(m){return m*r.pixelRatio_}),lineDashOffset:(h||Fa)*this.pixelRatio_,lineJoin:f!==void 0?f:Hr,lineWidth:(d!==void 0?d:Ba)*this.pixelRatio_,miterLimit:p!==void 0?p:ka,strokeStyle:Di(o||Ga)}}},e.prototype.setImageStyle=function(t){var i;if(!t||!(i=t.getSize())){this.image_=null;return}var r=t.getAnchor(),a=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*this.pixelRatio_,this.imageAnchorY_=r[1]*this.pixelRatio_,this.imageHeight_=i[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=i[0]*this.pixelRatio_},e.prototype.setTextStyle=function(t){if(!t)this.text_="";else{var i=t.getFill();if(!i)this.textFillState_=null;else{var r=i.getColor();this.textFillState_={fillStyle:Di(r||sn)}}var a=t.getStroke();if(!a)this.textStrokeState_=null;else{var o=a.getColor(),s=a.getLineCap(),l=a.getLineDash(),h=a.getLineDashOffset(),f=a.getLineJoin(),d=a.getWidth(),p=a.getMiterLimit();this.textStrokeState_={lineCap:s!==void 0?s:Yo,lineDash:l||Da,lineDashOffset:h||Fa,lineJoin:f!==void 0?f:Hr,lineWidth:d!==void 0?d:Ba,miterLimit:p!==void 0?p:ka,strokeStyle:Di(o||Ga)}}var y=t.getFont(),m=t.getOffsetX(),x=t.getOffsetY(),C=t.getRotateWithView(),w=t.getRotation(),S=t.getScaleArray(),R=t.getText(),I=t.getTextAlign(),F=t.getTextBaseline();this.textState_={font:y!==void 0?y:Ef,textAlign:I!==void 0?I:ja,textBaseline:F!==void 0?F:Ho},this.text_=R!==void 0?R:"",this.textOffsetX_=m!==void 0?this.pixelRatio_*m:0,this.textOffsetY_=x!==void 0?this.pixelRatio_*x:0,this.textRotateWithView_=C!==void 0?C:!1,this.textRotation_=w!==void 0?w:0,this.textScale_=[this.pixelRatio_*S[0],this.pixelRatio_*S[1]]}},e}(Af),$y=Uy,bn={FRACTION:"fraction",PIXELS:"pixels"},ci={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},zy=function(){function n(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return n.prototype.clear=function(){this.cache_={},this.cacheSize_=0},n.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},n.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var i=this.cache_[t];(e++&3)==0&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}},n.prototype.get=function(e,t,i){var r=Uf(e,t,i);return r in this.cache_?this.cache_[r]:null},n.prototype.set=function(e,t,i,r){var a=Uf(e,t,i);this.cache_[a]=r,++this.cacheSize_},n.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},n}();function Uf(n,e,t){var i=t?cf(t):"null";return e+":"+n+":"+i}var es=new zy,Vy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Wy=function(n){Vy(e,n);function e(t,i,r,a){var o=n.call(this)||this;return o.extent=t,o.pixelRatio_=r,o.resolution=i,o.state=a,o}return e.prototype.changed=function(){this.dispatchEvent(Et.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return dt()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){dt()},e}(jr),Yy=Wy,Hy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();(function(n){Hy(e,n);function e(t,i,r,a,o,s){var l=n.call(this,t,i,r,Ht.IDLE)||this;return l.src_=a,l.image_=new Image,o!==null&&(l.image_.crossOrigin=o),l.unlisten_=null,l.state=Ht.IDLE,l.imageLoadFunction_=s,l}return e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=Ht.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=Ci(this.extent)/this.image_.height),this.state=Ht.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){(this.state==Ht.IDLE||this.state==Ht.ERROR)&&(this.state=Ht.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=zl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=Ci(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e})(Yy);function zl(n,e,t){var i=n,r=!0,a=!1,o=!1,s=[Mo(i,Et.LOAD,function(){o=!0,a||e()})];return i.src&&tv?(a=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):s.push(Mo(i,Et.ERROR,t)),function(){r=!1,s.forEach(Yt)}}var Xy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ha=null,qy=function(n){Xy(e,n);function e(t,i,r,a,o,s){var l=n.call(this)||this;return l.hitDetectionImage_=null,l.image_=t||new Image,a!==null&&(l.image_.crossOrigin=a),l.canvas_={},l.color_=s,l.unlisten_=null,l.imageState_=o,l.size_=r,l.src_=i,l.tainted_,l}return e.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===Ht.LOADED){Ha||(Ha=fi(1,1)),Ha.drawImage(this.image_,0,0);try{Ha.getImageData(0,0,1,1),this.tainted_=!1}catch{Ha=null,this.tainted_=!0}}return this.tainted_===!0},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Et.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=Ht.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=Ht.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],i=this.size_[1],r=fi(t,i);r.fillRect(0,0,t,i),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==Ht.IDLE){this.imageState_=Ht.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=zl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(!(!this.color_||this.canvas_[t]||this.imageState_!==Ht.LOADED)){var i=document.createElement("canvas");this.canvas_[t]=i,i.width=Math.ceil(this.image_.width*t),i.height=Math.ceil(this.image_.height*t);var r=i.getContext("2d");if(r.scale(t,t),r.drawImage(this.image_,0,0),r.globalCompositeOperation="multiply",r.globalCompositeOperation==="multiply"||this.isTainted_())r.fillStyle=cf(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(this.image_,0,0);else{for(var a=r.getImageData(0,0,i.width,i.height),o=a.data,s=this.color_[0]/255,l=this.color_[1]/255,h=this.color_[2]/255,f=this.color_[3],d=0,p=o.length;d<p;d+=4)o[d]*=s,o[d+1]*=l,o[d+2]*=h,o[d+3]*=f;r.putImageData(a,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(jr);function Ky(n,e,t,i,r,a){var o=es.get(e,i,a);return o||(o=new qy(n,e,t,i,r,a),es.set(e,i,a,o)),o}var Zy=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jy=function(n){Zy(e,n);function e(t){var i=this,r=t||{},a=r.opacity!==void 0?r.opacity:1,o=r.rotation!==void 0?r.rotation:0,s=r.scale!==void 0?r.scale:1,l=r.rotateWithView!==void 0?r.rotateWithView:!1;i=n.call(this,{opacity:a,rotation:o,scale:s,displacement:r.displacement!==void 0?r.displacement:[0,0],rotateWithView:l})||this,i.anchor_=r.anchor!==void 0?r.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=r.anchorOrigin!==void 0?r.anchorOrigin:ci.TOP_LEFT,i.anchorXUnits_=r.anchorXUnits!==void 0?r.anchorXUnits:bn.FRACTION,i.anchorYUnits_=r.anchorYUnits!==void 0?r.anchorYUnits:bn.FRACTION,i.crossOrigin_=r.crossOrigin!==void 0?r.crossOrigin:null;var h=r.img!==void 0?r.img:null,f=r.imgSize!==void 0?r.imgSize:null,d=r.src;Mt(!(d!==void 0&&h),4),Mt(!h||h&&f,5),(d===void 0||d.length===0)&&h&&(d=h.src||It(h)),Mt(d!==void 0&&d.length>0,6);var p=r.src!==void 0?Ht.IDLE:Ht.LOADED;return i.color_=r.color!==void 0?zo(r.color):null,i.iconImage_=Ky(h,d,f,i.crossOrigin_,p,i.color_),i.offset_=r.offset!==void 0?r.offset:[0,0],i.offsetOrigin_=r.offsetOrigin!==void 0?r.offsetOrigin:ci.TOP_LEFT,i.origin_=null,i.size_=r.size!==void 0?r.size:null,i}return e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:this.size_!==null?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var i=this.getSize();if(this.anchorXUnits_==bn.FRACTION||this.anchorYUnits_==bn.FRACTION){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_==bn.FRACTION&&(t[0]*=i[0]),this.anchorYUnits_==bn.FRACTION&&(t[1]*=i[1])}if(this.anchorOrigin_!=ci.TOP_LEFT){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_==ci.TOP_RIGHT||this.anchorOrigin_==ci.BOTTOM_RIGHT)&&(t[0]=-t[0]+i[0]),(this.anchorOrigin_==ci.BOTTOM_LEFT||this.anchorOrigin_==ci.BOTTOM_RIGHT)&&(t[1]=-t[1]+i[1])}this.normalizedAnchor_=t}var r=this.getDisplacement();return[t[0]-r[0],t[1]+r[1]]},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=ci.TOP_LEFT){var i=this.getSize(),r=this.iconImage_.getSize();if(!i||!r)return null;t=t.slice(),(this.offsetOrigin_==ci.TOP_RIGHT||this.offsetOrigin_==ci.BOTTOM_RIGHT)&&(t[0]=r[0]-i[0]-t[0]),(this.offsetOrigin_==ci.BOTTOM_LEFT||this.offsetOrigin_==ci.BOTTOM_RIGHT)&&(t[1]=r[1]-i[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Et.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Et.CHANGE,t)},e}(ff),Qy=Jy,Fi=.5;function t_(n,e,t,i,r,a,o){var s=n[0]*Fi,l=n[1]*Fi,h=fi(s,l);h.imageSmoothingEnabled=!1;for(var f=h.canvas,d=new $y(h,Fi,r,null,o),p=t.length,y=Math.floor((256*256*256-1)/p),m={},x=1;x<=p;++x){var C=t[x-1],w=C.getStyleFunction()||i;if(!!i){var S=w(C,a);if(!!S){Array.isArray(S)||(S=[S]);for(var R=x*y,I="#"+("000000"+R.toString(16)).slice(-6),F=0,g=S.length;F<g;++F){var G=S[F],B=G.getGeometryFunction()(C);if(!(!B||!Ve(r,B.getExtent()))){var X=G.clone(),Z=X.getFill();Z&&Z.setColor(I);var et=X.getStroke();et&&(et.setColor(I),et.setLineDash(null)),X.setText(void 0);var K=G.getImage();if(K&&K.getOpacity()!==0){var lt=K.getImageSize();if(!lt)continue;var vt=fi(lt[0],lt[1],void 0,{alpha:!1}),nt=vt.canvas;vt.fillStyle=I,vt.fillRect(0,0,nt.width,nt.height),X.setImage(new Qy({img:nt,imgSize:lt,anchor:K.getAnchor(),anchorXUnits:bn.PIXELS,anchorYUnits:bn.PIXELS,offset:K.getOrigin(),opacity:1,size:K.getSize(),scale:K.getScale(),rotation:K.getRotation(),rotateWithView:K.getRotateWithView()}))}var yt=X.getZIndex()||0,rt=m[yt];rt||(rt={},m[yt]=rt,rt[V.POLYGON]=[],rt[V.CIRCLE]=[],rt[V.LINE_STRING]=[],rt[V.POINT]=[]),rt[B.getType().replace("Multi","")].push(B,X)}}}}}for(var Rt=Object.keys(m).map(Number).sort(or),x=0,wt=Rt.length;x<wt;++x){var rt=m[Rt[x]];for(var Lt in rt)for(var St=rt[Lt],F=0,g=St.length;F<g;F+=2){d.setStyle(St[F+1]);for(var H=0,Xt=e.length;H<Xt;++H)d.setTransform(e[H]),d.drawGeometry(St[F])}}return h.getImageData(0,0,f.width,f.height)}function e_(n,e,t){var i=[];if(t){var r=Math.floor(Math.round(n[0])*Fi),a=Math.floor(Math.round(n[1])*Fi),o=(ne(r,0,t.width-1)+ne(a,0,t.height-1)*t.width)*4,s=t.data[o],l=t.data[o+1],h=t.data[o+2],f=h+256*(l+256*s),d=Math.floor((256*256*256-1)/e.length);f&&f%d==0&&i.push(e[f/d-1])}return i}var i_=.5,$f={Point:f_,LineString:l_,Polygon:d_,MultiPoint:c_,MultiLineString:u_,MultiPolygon:h_,GeometryCollection:s_,Circle:a_};function n_(n,e){return parseInt(It(n),10)-parseInt(It(e),10)}function r_(n,e){var t=Vl(n,e);return t*t}function Vl(n,e){return i_*n/e}function a_(n,e,t,i,r){var a=t.getFill(),o=t.getStroke();if(a||o){var s=n.getBuilder(t.getZIndex(),te.CIRCLE);s.setFillStrokeStyle(a,o),s.drawCircle(e,i)}var l=t.getText();if(l&&l.getText()){var h=(r||n).getBuilder(t.getZIndex(),te.TEXT);h.setTextStyle(l),h.drawText(e,i)}}function zf(n,e,t,i,r,a,o){var s=!1,l=t.getImage();if(l){var h=l.getImageState();h==Ht.LOADED||h==Ht.ERROR?l.unlistenImageChange(r):(h==Ht.IDLE&&l.load(),h=l.getImageState(),l.listenImageChange(r),s=!0)}return o_(n,e,t,i,a,o),s}function o_(n,e,t,i,r,a){var o=t.getGeometryFunction()(e);if(!!o){var s=o.simplifyTransformed(i,r),l=t.getRenderer();if(l)Vf(n,s,t,e);else{var h=$f[s.getType()];h(n,s,t,e,a)}}}function Vf(n,e,t,i){if(e.getType()==V.GEOMETRY_COLLECTION){for(var r=e.getGeometries(),a=0,o=r.length;a<o;++a)Vf(n,r[a],t,i);return}var s=n.getBuilder(t.getZIndex(),te.DEFAULT);s.drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function s_(n,e,t,i,r){var a=e.getGeometriesArray(),o,s;for(o=0,s=a.length;o<s;++o){var l=$f[a[o].getType()];l(n,a[o],t,i,r)}}function l_(n,e,t,i,r){var a=t.getStroke();if(a){var o=n.getBuilder(t.getZIndex(),te.LINE_STRING);o.setFillStrokeStyle(null,a),o.drawLineString(e,i)}var s=t.getText();if(s&&s.getText()){var l=(r||n).getBuilder(t.getZIndex(),te.TEXT);l.setTextStyle(s),l.drawText(e,i)}}function u_(n,e,t,i,r){var a=t.getStroke();if(a){var o=n.getBuilder(t.getZIndex(),te.LINE_STRING);o.setFillStrokeStyle(null,a),o.drawMultiLineString(e,i)}var s=t.getText();if(s&&s.getText()){var l=(r||n).getBuilder(t.getZIndex(),te.TEXT);l.setTextStyle(s),l.drawText(e,i)}}function h_(n,e,t,i,r){var a=t.getFill(),o=t.getStroke();if(o||a){var s=n.getBuilder(t.getZIndex(),te.POLYGON);s.setFillStrokeStyle(a,o),s.drawMultiPolygon(e,i)}var l=t.getText();if(l&&l.getText()){var h=(r||n).getBuilder(t.getZIndex(),te.TEXT);h.setTextStyle(l),h.drawText(e,i)}}function f_(n,e,t,i,r){var a=t.getImage(),o=t.getText(),s;if(r&&(n=r,s=a&&o&&o.getText()?{}:void 0),a){if(a.getImageState()!=Ht.LOADED)return;var l=n.getBuilder(t.getZIndex(),te.IMAGE);l.setImageStyle(a,s),l.drawPoint(e,i)}if(o&&o.getText()){var h=n.getBuilder(t.getZIndex(),te.TEXT);h.setTextStyle(o,s),h.drawText(e,i)}}function c_(n,e,t,i,r){var a=t.getImage(),o=t.getText(),s;if(r&&(n=r,s=a&&o&&o.getText()?{}:void 0),a){if(a.getImageState()!=Ht.LOADED)return;var l=n.getBuilder(t.getZIndex(),te.IMAGE);l.setImageStyle(a,s),l.drawMultiPoint(e,i)}if(o&&o.getText()){var h=(r||n).getBuilder(t.getZIndex(),te.TEXT);h.setTextStyle(o,s),h.drawText(e,i)}}function d_(n,e,t,i,r){var a=t.getFill(),o=t.getStroke();if(a||o){var s=n.getBuilder(t.getZIndex(),te.POLYGON);s.setFillStrokeStyle(a,o),s.drawPolygon(e,i)}var l=t.getText();if(l&&l.getText()){var h=(r||n).getBuilder(t.getZIndex(),te.TEXT);h.setTextStyle(l),h.drawText(e,i)}}var p_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),v_=function(n){p_(e,n);function e(t){var i=n.call(this,t)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=ze(),i.wrappedRenderedExtent_=ze(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return e.prototype.renderWorlds=function(t,i,r){var a=i.extent,o=i.viewState,s=o.center,l=o.resolution,h=o.projection,f=o.rotation,d=h.getExtent(),p=this.getLayer().getSource(),y=i.pixelRatio,m=i.viewHints,x=!(m[Ce.ANIMATING]||m[Ce.INTERACTING]),C=this.context,w=Math.round(i.size[0]*y),S=Math.round(i.size[1]*y),R=p.getWrapX()&&h.canWrapX(),I=R?Kt(d):null,F=R?Math.ceil((a[2]-d[2])/I)+1:1,g=R?Math.floor((a[0]-d[0])/I):0;do{var G=this.getRenderTransform(s,l,f,y,w,S,g*I);t.execute(C,1,G,f,x,void 0,r)}while(++g<F)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,i){var r=t.pixelRatio,a=t.layerStatesArray[t.layerIndex];nv(this.pixelTransform,1/r,1/r),rl(this.inversePixelTransform,this.pixelTransform);var o=wh(this.pixelTransform);this.useContainer(i,o,a.opacity,this.getBackground(t));var s=this.context,l=s.canvas,h=this.replayGroup_,f=this.declutterExecutorGroup;if((!h||h.isEmpty())&&(!f||f.isEmpty()))return null;var d=Math.round(t.size[0]*r),p=Math.round(t.size[1]*r);l.width!=d||l.height!=p?(l.width=d,l.height=p,l.style.transform!==o&&(l.style.transform=o)):this.containerReused||s.clearRect(0,0,d,p),this.preRender(s,t);var y=t.viewState;y.projection;var m=!1,x=!0;if(a.extent&&this.clipping){var C=vr(a.extent);x=Ve(C,t.extent),m=x&&!Tn(C,t.extent),m&&this.clipUnrotated(s,t,C)}x&&this.renderWorlds(h,t),m&&s.restore(),this.postRender(s,t);var w=xf(a.opacity),S=this.container;return w!==S.style.opacity&&(S.style.opacity=w),this.renderedRotation_!==y.rotation&&(this.renderedRotation_=y.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];ce(this.pixelTransform,r);var a=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,l=this.renderedProjection_,h=this.wrappedRenderedExtent_,f=this.getLayer(),d=[],p=r[0]*Fi,y=r[1]*Fi;d.push(this.getRenderTransform(a,o,s,Fi,p,y,0).slice());var m=f.getSource(),x=l.getExtent();if(m.getWrapX()&&l.canWrapX()&&!Tn(x,h)){for(var C=h[0],w=Kt(x),S=0,R=void 0;C<x[0];)--S,R=w*S,d.push(this.getRenderTransform(a,o,s,Fi,p,y,R).slice()),C+=w;for(S=0,C=h[2];C>x[2];)++S,R=w*S,d.push(this.getRenderTransform(a,o,s,Fi,p,y,R).slice()),C-=w}this.hitDetectionImageData_=t_(r,d,this.renderedFeatures_,f.getStyleFunction(),h,o,s)}i(e_(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,i,r,a,o){var s=this;if(!!this.replayGroup_){var l=i.viewState.resolution,h=i.viewState.rotation,f=this.getLayer(),d={},p=function(x,C,w){var S=It(x),R=d[S];if(R){if(R!==!0&&w<R.distanceSq){if(w===0)return d[S]=!0,o.splice(o.lastIndexOf(R),1),a(x,f,C);R.geometry=C,R.distanceSq=w}}else{if(w===0)return d[S]=!0,a(x,f,C);o.push(d[S]={feature:x,layer:f,geometry:C,distanceSq:w,callback:a})}},y,m=[this.replayGroup_];return this.declutterExecutorGroup&&m.push(this.declutterExecutorGroup),m.some(function(x){return y=x.forEachFeatureAtCoordinate(t,l,h,r,p,x===s.declutterExecutorGroup&&i.declutterTree?i.declutterTree.all().map(function(C){return C.value}):null)}),y}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var i=this.getLayer(),r=i.getSource();if(!r)return!1;var a=t.viewHints[Ce.ANIMATING],o=t.viewHints[Ce.INTERACTING],s=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&a||!l&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var h=t.extent,f=t.viewState,d=f.projection,p=f.resolution,y=t.pixelRatio,m=i.getRevision(),x=i.getRenderBuffer(),C=i.getRenderOrder();C===void 0&&(C=n_);var w=f.center.slice(),S=Ma(h,x*p),R=S.slice(),I=[S.slice()],F=d.getExtent();if(r.getWrapX()&&d.canWrapX()&&!Tn(F,t.extent)){var g=Kt(F),G=Math.max(Kt(S)/2,g);S[0]=F[0]-G,S[2]=F[2]+G,Fh(w,d);var B=cv(I[0],d);B[0]<F[0]&&B[2]<F[2]?I.push([B[0]+g,B[1],B[2]+g,B[3]]):B[0]>F[0]&&B[2]>F[2]&&I.push([B[0]-g,B[1],B[2]-g,B[3]])}if(!this.dirty_&&this.renderedResolution_==p&&this.renderedRevision_==m&&this.renderedRenderOrder_==C&&Tn(this.wrappedRenderedExtent_,S))return sr(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var X=new Df(Vl(p,y),S,p,y),Z;this.getLayer().getDeclutter()&&(Z=new Df(Vl(p,y),S,p,y));for(var et,K,lt,K=0,lt=I.length;K<lt;++K)r.loadFeatures(I[K],p,d);var vt=r_(p,y),nt=function(Lt){var St,H=Lt.getStyleFunction()||i.getStyleFunction();if(H&&(St=H(Lt,p)),St){var Xt=this.renderFeature(Lt,vt,St,X,et,Z);this.dirty_=this.dirty_||Xt}}.bind(this),yt=Bh(S),rt=r.getFeaturesInExtent(yt);C&&rt.sort(C);for(var K=0,lt=rt.length;K<lt;++K)nt(rt[K]);this.renderedFeatures_=rt;var Rt=X.finish(),wt=new Bf(S,p,y,r.getOverlaps(),Rt,i.getRenderBuffer());return Z&&(this.declutterExecutorGroup=new Bf(S,p,y,r.getOverlaps(),Z.finish(),i.getRenderBuffer())),this.renderedResolution_=p,this.renderedRevision_=m,this.renderedRenderOrder_=C,this.renderedExtent_=R,this.wrappedRenderedExtent_=S,this.renderedCenter_=w,this.renderedProjection_=d,this.replayGroup_=wt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,i,r,a,o,s){if(!r)return!1;var l=!1;if(Array.isArray(r))for(var h=0,f=r.length;h<f;++h)l=zf(a,t,r[h],i,this.boundHandleStyleImageChange_,o,s)||l;else l=zf(a,t,r,i,this.boundHandleStyleImageChange_,o,s);return l},e}(kf),g_=v_,y_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),__=function(n){y_(e,n);function e(t){return n.call(this,t)||this}return e.prototype.createRenderer=function(){return new g_(this)},e}(uy),Wl=__,m_=function(){function n(e){this.rbush_=new If(e),this.items_={}}return n.prototype.insert=function(e,t){var i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[It(t)]=i},n.prototype.load=function(e,t){for(var i=new Array(t.length),r=0,a=t.length;r<a;r++){var o=e[r],s=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[r]=l,this.items_[It(s)]=l}this.rbush_.load(i)},n.prototype.remove=function(e){var t=It(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null},n.prototype.update=function(e,t){var i=this.items_[It(t)],r=[i.minX,i.minY,i.maxX,i.maxY];Ra(r,e)||(this.remove(t),this.insert(e,t))},n.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(t){return t.value})},n.prototype.getInExtent=function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},i=this.rbush_.search(t);return i.map(function(r){return r.value})},n.prototype.forEach=function(e){return this.forEach_(this.getAll(),e)},n.prototype.forEachInExtent=function(e,t){return this.forEach_(this.getInExtent(e),t)},n.prototype.forEach_=function(e,t){for(var i,r=0,a=e.length;r<a;r++)if(i=t(e[r]),i)return i;return i},n.prototype.isEmpty=function(){return Gr(this.items_)},n.prototype.clear=function(){this.rbush_.clear(),this.items_={}},n.prototype.getExtent=function(e){var t=this.rbush_.toJSON();return Ti(t.minX,t.minY,t.maxX,t.maxY,e)},n.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var t in e.items_)this.items_[t]=e.items_[t]},n}(),Wf=m_,x_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),E_=function(n){x_(e,n);function e(t){var i=n.call(this)||this;i.projection=Vt(t.projection),i.attributions_=Yf(t.attributions),i.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,i.loading=!1,i.state_=t.state!==void 0?t.state:Tr.READY,i.wrapX_=t.wrapX!==void 0?t.wrapX:!1,i.interpolate_=!!t.interpolate,i.viewResolver=null,i.viewRejector=null;var r=i;return i.viewPromise_=new Promise(function(a,o){r.viewResolver=a,r.viewRejector=o}),i}return e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return dt()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Yf(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Ue);function Yf(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}var Hf=E_,ki={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function T_(n,e){return[[-1/0,-1/0,1/0,1/0]]}var Qr={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"},C_=!1;function w_(n,e,t,i,r,a,o){var s=new XMLHttpRequest;s.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()==Qr.ARRAY_BUFFER&&(s.responseType="arraybuffer"),s.withCredentials=C_,s.onload=function(l){if(!s.status||s.status>=200&&s.status<300){var h=e.getType(),f=void 0;h==Qr.JSON||h==Qr.TEXT?f=s.responseText:h==Qr.XML?(f=s.responseXML,f||(f=new DOMParser().parseFromString(s.responseText,"application/xml"))):h==Qr.ARRAY_BUFFER&&(f=s.response),f?a(e.readFeatures(f,{extent:t,featureProjection:r}),e.readProjection(f)):o()}else o()},s.onerror=o,s.send()}function Xf(n,e){return function(t,i,r,a,o){var s=this;w_(n,e,t,i,r,function(l,h){s.addFeatures(l),a!==void 0&&a(l)},o||lr)}}var qf=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ln=function(n){qf(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.feature=i,a.features=r,a}return e}(ui),M_=function(n){qf(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:Tr.READY,wrapX:r.wrapX!==void 0?r.wrapX:!0})||this,i.on,i.once,i.un,i.loader_=lr,i.format_=r.format,i.overlaps_=r.overlaps===void 0?!0:r.overlaps,i.url_=r.url,r.loader!==void 0?i.loader_=r.loader:i.url_!==void 0&&(Mt(i.format_,7),i.loader_=Xf(i.url_,i.format_)),i.strategy_=r.strategy!==void 0?r.strategy:T_;var a=r.useSpatialIndex!==void 0?r.useSpatialIndex:!0;i.featuresRtree_=a?new Wf:null,i.loadedExtentsRtree_=new Wf,i.loadingExtentsCount_=0,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null;var o,s;return Array.isArray(r.features)?s=r.features:r.features&&(o=r.features,s=o.getArray()),!a&&o===void 0&&(o=new Qe(s)),s!==void 0&&i.addFeaturesInternal(s),o!==void 0&&i.bindFeaturesCollection_(o),i}return e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var i=It(t);if(!this.addToIndex_(i,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(i,t);var r=t.getGeometry();if(r){var a=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(a,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new Ln(ki.ADDFEATURE,t))},e.prototype.setupChangeEvents_=function(t,i){this.featureChangeKeys_[t]=[Pt(i,Et.CHANGE,this.handleFeatureChange_,this),Pt(i,Dr.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,i){var r=!0,a=i.getId();return a!==void 0&&(a.toString()in this.idIndex_?r=!1:this.idIndex_[a.toString()]=i),r&&(Mt(!(t in this.uidIndex_),30),this.uidIndex_[t]=i),r},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var i=[],r=[],a=[],o=0,s=t.length;o<s;o++){var l=t[o],h=It(l);this.addToIndex_(h,l)&&r.push(l)}for(var o=0,f=r.length;o<f;o++){var l=r[o],h=It(l);this.setupChangeEvents_(h,l);var d=l.getGeometry();if(d){var p=d.getExtent();i.push(p),a.push(l)}else this.nullGeometryFeatures_[h]=l}this.featuresRtree_&&this.featuresRtree_.load(i,a);for(var o=0,y=r.length;o<y;o++)this.dispatchEvent(new Ln(ki.ADDFEATURE,r[o]))},e.prototype.bindFeaturesCollection_=function(t){var i=!1;this.addEventListener(ki.ADDFEATURE,function(r){i||(i=!0,t.push(r.feature),i=!1)}),this.addEventListener(ki.REMOVEFEATURE,function(r){i||(i=!0,t.remove(r.feature),i=!1)}),t.addEventListener(pe.ADD,function(r){i||(i=!0,this.addFeature(r.element),i=!1)}.bind(this)),t.addEventListener(pe.REMOVE,function(r){i||(i=!0,this.removeFeature(r.element),i=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var i in this.featureChangeKeys_){var r=this.featureChangeKeys_[i];r.forEach(Yt)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var a=function(l){this.removeFeatureInternal(l)}.bind(this);this.featuresRtree_.forEach(a);for(var o in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var s=new Ln(ki.CLEAR);this.dispatchEvent(s),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,i){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,function(a){var o=a.getGeometry();if(o.intersectsCoordinate(t))return i(a)})},e.prototype.forEachFeatureInExtent=function(t,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)},e.prototype.forEachFeatureIntersectingExtent=function(t,i){return this.forEachFeatureInExtent(t,function(r){var a=r.getGeometry();if(a.intersectsExtent(t)){var o=i(r);if(o)return o}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Gr(this.nullGeometryFeatures_)||hi(t,gh(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var i=[];return this.forEachFeatureAtCoordinateDirect(t,function(r){i.push(r)}),i},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,i){var r=t[0],a=t[1],o=null,s=[NaN,NaN],l=1/0,h=[-1/0,-1/0,1/0,1/0],f=i||tn;return this.featuresRtree_.forEachInExtent(h,function(d){if(f(d)){var p=d.getGeometry(),y=l;if(l=p.closestPointXY(r,a,s,l),l<y){o=d;var m=Math.sqrt(l);h[0]=r-m,h[1]=a-m,h[2]=r+m,h[3]=a+m}}}),o},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var i=this.idIndex_[t.toString()];return i!==void 0?i:null},e.prototype.getFeatureByUid=function(t){var i=this.uidIndex_[t];return i!==void 0?i:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var i=t.target,r=It(i),a=i.getGeometry();if(!a)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[r]=i);else{var o=a.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,i)):this.featuresRtree_&&this.featuresRtree_.update(o,i)}var s=i.getId();if(s!==void 0){var l=s.toString();this.idIndex_[l]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[l]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[r]=i;this.changed(),this.dispatchEvent(new Ln(ki.CHANGEFEATURE,i))},e.prototype.hasFeature=function(t){var i=t.getId();return i!==void 0?i in this.idIndex_:It(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Gr(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,i,r){for(var a=this.loadedExtentsRtree_,o=this.strategy_(t,i,r),s=function(d,p){var y=o[d],m=a.forEachInExtent(y,function(x){return Tn(x.extent,y)});m||(++l.loadingExtentsCount_,l.dispatchEvent(new Ln(ki.FEATURESLOADSTART)),l.loader_.call(l,y,i,r,function(x){--this.loadingExtentsCount_,this.dispatchEvent(new Ln(ki.FEATURESLOADEND,void 0,x))}.bind(l),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Ln(ki.FEATURESLOADERROR))}.bind(l)),a.insert(y,{extent:y.slice()}))},l=this,h=0,f=o.length;h<f;++h)s(h);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),n.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var i=this.loadedExtentsRtree_,r;i.forEachInExtent(t,function(a){if(Ra(a.extent,t))return r=a,!0}),r&&i.remove(r)},e.prototype.removeFeature=function(t){if(!!t){var i=It(t);i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t);var r=this.removeFeatureInternal(t);r&&this.changed()}},e.prototype.removeFeatureInternal=function(t){var i=It(t),r=this.featureChangeKeys_[i];if(!!r){r.forEach(Yt),delete this.featureChangeKeys_[i];var a=t.getId();return a!==void 0&&delete this.idIndex_[a.toString()],delete this.uidIndex_[i],this.dispatchEvent(new Ln(ki.REMOVEFEATURE,t)),t}},e.prototype.removeFromIdIndex_=function(t){var i=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],i=!0;break}return i},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Mt(this.format_,7),this.url_=t,this.setLoader(Xf(t,this.format_))},e}(Hf),Kf=M_,mt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Zf(n){return Math.pow(n,3)}function ta(n){return 1-Zf(1-n)}function O_(n){return 3*n*n-2*n*n*n}function S_(n){return n}var R_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),I_=function(n){R_(e,n);function e(t,i,r){var a=n.call(this)||this,o=r||{};return a.tileCoord=t,a.state=i,a.interimTile=null,a.key="",a.transition_=o.transition===void 0?250:o.transition,a.transitionStarts_={},a.interpolate=!!o.interpolate,a}return e.prototype.changed=function(){this.dispatchEvent(Et.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==mt.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(!!this.interimTile){var t=this.interimTile,i=this;do{if(t.getState()==mt.LOADED){t.interimTile=null;break}else t.getState()==mt.LOADING?i=t:t.getState()==mt.IDLE?i.interimTile=t.interimTile:i=t;t=i.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==mt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){dt()},e.prototype.getAlpha=function(t,i){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(!r)r=i,this.transitionStarts_[t]=r;else if(r===-1)return 1;var a=i-r+1e3/60;return a>=this.transition_?1:Zf(a/this.transition_)},e.prototype.inTransition=function(t){return this.transition_?this.transitionStarts_[t]!==-1:!1},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(jr),Jf=I_,P_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),b_=function(n){P_(e,n);function e(t,i,r,a,o,s){var l=n.call(this,t,i,s)||this;return l.crossOrigin_=a,l.src_=r,l.key=r,l.image_=new Image,a!==null&&(l.image_.crossOrigin=a),l.unlisten_=null,l.tileLoadFunction_=o,l}return e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=mt.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=mt.ERROR,this.unlistenImage_(),this.image_=L_(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=mt.LOADED:this.state=mt.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==mt.ERROR&&(this.state=mt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==mt.IDLE&&(this.state=mt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=zl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Jf);function L_(){var n=fi(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var A_=b_,N_=function(){function n(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}return n.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},n.prototype.update=function(e,t){this.points_.push(e,t,Date.now())},n.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var i=t-3;i>0&&this.points_[i+2]>e;)i-=3;var r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;var a=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,a),this.initialVelocity_=Math.sqrt(a*a+o*o)/r,this.initialVelocity_>this.minVelocity_},n.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},n.prototype.getAngle=function(){return this.angle_},n}(),D_=N_,F_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),k_=function(n){F_(e,n);function e(t){var i=n.call(this)||this;return i.map_=t,i}return e.prototype.dispatchRenderEvent=function(t,i){dt()},e.prototype.calculateMatrices2D=function(t){var i=t.viewState,r=t.coordinateToPixelTransform,a=t.pixelToCoordinateTransform;nn(r,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),rl(a,r)},e.prototype.forEachFeatureAtCoordinate=function(t,i,r,a,o,s,l,h){var f,d=i.viewState;function p(nt,yt,rt,Rt){return o.call(s,yt,nt?rt:null,Rt)}var y=d.projection,m=Fh(t.slice(),y),x=[[0,0]];if(y.canWrapX()&&a){var C=y.getExtent(),w=Kt(C);x.push([-w,0],[w,0])}for(var S=i.layerStatesArray,R=S.length,I=[],F=[],g=0;g<x.length;g++)for(var G=R-1;G>=0;--G){var B=S[G],X=B.layer;if(X.hasRenderer()&&qo(B,d)&&l.call(h,X)){var Z=X.getRenderer(),et=X.getSource();if(Z&&et){var K=et.getWrapX()?m:t,lt=p.bind(null,B.managed);F[0]=K[0]+x[g][0],F[1]=K[1]+x[g][1],f=Z.forEachFeatureAtCoordinate(F,i,r,lt,I)}if(f)return f}}if(I.length!==0){var vt=1/I.length;return I.forEach(function(nt,yt){return nt.distanceSq+=yt*vt}),I.sort(function(nt,yt){return nt.distanceSq-yt.distanceSq}),I.some(function(nt){return f=nt.callback(nt.feature,nt.layer,nt.geometry)}),f}},e.prototype.forEachLayerAtPixel=function(t,i,r,a,o){return dt()},e.prototype.hasFeatureAtCoordinate=function(t,i,r,a,o,s){var l=this.forEachFeatureAtCoordinate(t,i,r,a,tn,this,o,s);return l!==void 0},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){dt()},e.prototype.scheduleExpireIconCache=function(t){es.canExpireCache()&&t.postRenderFunctions.push(G_)},e}(el);function G_(n,e){es.expire()}var j_=k_,B_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),U_=function(n){B_(e,n);function e(t){var i=n.call(this,t)||this;i.fontChangeListenerKey_=Pt(ln,Dr.PROPERTYCHANGE,t.redrawText.bind(t)),i.element_=document.createElement("div");var r=i.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",i.element_.className=Na+" ol-layers";var a=t.getViewport();return a.insertBefore(i.element_,a.firstChild||null),i.children_=[],i.renderedVisible_=!0,i}return e.prototype.dispatchRenderEvent=function(t,i){var r=this.getMap();if(r.hasListener(t)){var a=new Ff(t,void 0,i);r.dispatchEvent(a)}},e.prototype.disposeInternal=function(){Yt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),n.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(xr.PRECOMPOSE,t);var i=t.layerStatesArray.sort(function(p,y){return p.zIndex-y.zIndex}),r=t.viewState;this.children_.length=0;for(var a=[],o=null,s=0,l=i.length;s<l;++s){var h=i[s];if(t.layerIndex=s,!(!qo(h,r)||h.sourceState!=Tr.READY&&h.sourceState!=Tr.UNDEFINED)){var f=h.layer,d=f.render(t,o);!d||(d!==o&&(this.children_.push(d),o=d),"getDeclutter"in f&&a.push(f))}}for(var s=a.length-1;s>=0;--s)a[s].renderDeclutter(t);Ng(this.element_,this.children_),this.dispatchRenderEvent(xr.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)},e.prototype.forEachLayerAtPixel=function(t,i,r,a,o){for(var s=i.viewState,l=i.layerStatesArray,h=l.length,f=h-1;f>=0;--f){var d=l[f],p=d.layer;if(p.hasRenderer()&&qo(d,s)&&o(p)){var y=p.getRenderer(),m=y.getDataAtPixel(t,i,r);if(m){var x=a(p,m);if(x)return x}}}},e}(j_),$_=U_,Qf=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fn=function(n){Qf(e,n);function e(t,i){var r=n.call(this,t)||this;return r.layer=i,r}return e}(ui),Yl={LAYERS:"layers"},z_=function(n){Qf(e,n);function e(t){var i=this,r=t||{},a=Wt({},r);delete a.layers;var o=r.layers;return i=n.call(this,a)||this,i.on,i.once,i.un,i.layersListenerKeys_=[],i.listenerKeys_={},i.addChangeListener(Yl.LAYERS,i.handleLayersChanged_),o?Array.isArray(o)?o=new Qe(o.slice(),{unique:!0}):Mt(typeof o.getArray=="function",43):o=new Qe(void 0,{unique:!0}),i.setLayers(o),i}return e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Yt),this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(Pt(t,pe.ADD,this.handleLayersAdd_,this),Pt(t,pe.REMOVE,this.handleLayersRemove_,this));for(var i in this.listenerKeys_)this.listenerKeys_[i].forEach(Yt);kr(this.listenerKeys_);for(var r=t.getArray(),a=0,o=r.length;a<o;a++){var s=r[a];this.registerLayerListeners_(s),this.dispatchEvent(new fn("addlayer",s))}this.changed()},e.prototype.registerLayerListeners_=function(t){var i=[Pt(t,Dr.PROPERTYCHANGE,this.handleLayerChange_,this),Pt(t,Et.CHANGE,this.handleLayerChange_,this)];t instanceof e&&i.push(Pt(t,"addlayer",this.handleLayerGroupAdd_,this),Pt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[It(t)]=i},e.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new fn("addlayer",t.layer))},e.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new fn("removelayer",t.layer))},e.prototype.handleLayersAdd_=function(t){var i=t.element;this.registerLayerListeners_(i),this.dispatchEvent(new fn("addlayer",i)),this.changed()},e.prototype.handleLayersRemove_=function(t){var i=t.element,r=It(i);this.listenerKeys_[r].forEach(Yt),delete this.listenerKeys_[r],this.dispatchEvent(new fn("removelayer",i)),this.changed()},e.prototype.getLayers=function(){return this.get(Yl.LAYERS)},e.prototype.setLayers=function(t){var i=this.getLayers();if(i)for(var r=i.getArray(),a=0,o=r.length;a<o;++a)this.dispatchEvent(new fn("removelayer",r[a]));this.set(Yl.LAYERS,t)},e.prototype.getLayersArray=function(t){var i=t!==void 0?t:[];return this.getLayers().forEach(function(r){r.getLayersArray(i)}),i},e.prototype.getLayerStatesArray=function(t){var i=t!==void 0?t:[],r=i.length;this.getLayers().forEach(function(f){f.getLayerStatesArray(i)});var a=this.getLayerState(),o=a.zIndex;!t&&a.zIndex===void 0&&(o=0);for(var s=r,l=i.length;s<l;s++){var h=i[s];h.opacity*=a.opacity,h.visible=h.visible&&a.visible,h.maxResolution=Math.min(h.maxResolution,a.maxResolution),h.minResolution=Math.max(h.minResolution,a.minResolution),h.minZoom=Math.max(h.minZoom,a.minZoom),h.maxZoom=Math.min(h.maxZoom,a.maxZoom),a.extent!==void 0&&(h.extent!==void 0?h.extent=Pa(h.extent,a.extent):h.extent=a.extent),h.zIndex===void 0&&(h.zIndex=o)}return i},e.prototype.getSourceState=function(){return Tr.READY},e}(Sf),Xa=z_,V_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",GroupEvent:fn,default:Xa}),W_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Y_=function(n){W_(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.map=i,a.frameState=r!==void 0?r:null,a}return e}(ui),is=Y_,H_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),X_=function(n){H_(e,n);function e(t,i,r,a,o){var s=n.call(this,t,i,o)||this;return s.originalEvent=r,s.pixel_=null,s.coordinate_=null,s.dragging=a!==void 0?a:!1,s}return Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){n.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){n.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(is),cn=X_,bt={SINGLECLICK:"singleclick",CLICK:Et.CLICK,DBLCLICK:Et.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Hl={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},q_=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),K_=function(n){q_(e,n);function e(t,i){var r=n.call(this,t)||this;r.map_=t,r.clickTimeoutId_,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=i===void 0?1:i,r.down_=null;var a=r.map_.getViewport();return r.activePointers_=0,r.trackedTouches_={},r.element_=a,r.pointerdownListenerKey_=Pt(a,Hl.POINTERDOWN,r.handlePointerDown_,r),r.originalPointerMoveEvent_,r.relayedListenerKey_=Pt(a,Hl.POINTERMOVE,r.relayEvent_,r),r.boundHandleTouchMove_=r.handleTouchMove_.bind(r),r.element_.addEventListener(Et.TOUCHMOVE,r.boundHandleTouchMove_,Th?{passive:!1}:!1),r}return e.prototype.emulateClick_=function(t){var i=new cn(bt.CLICK,this.map_,t);this.dispatchEvent(i),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new cn(bt.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var r=new cn(bt.SINGLECLICK,this.map_,t);this.dispatchEvent(r)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var i=t;i.type==bt.POINTERUP||i.type==bt.POINTERCANCEL?delete this.trackedTouches_[i.pointerId]:i.type==bt.POINTERDOWN&&(this.trackedTouches_[i.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var i=new cn(bt.POINTERUP,this.map_,t);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_===0&&(this.dragListenerKeys_.forEach(Yt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return t.button===0},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=this.activePointers_===0,this.updateActivePointers_(t);var i=new cn(bt.POINTERDOWN,this.map_,t);this.dispatchEvent(i),this.down_={};for(var r in t){var a=t[r];this.down_[r]=typeof a=="function"?lr:a}if(this.dragListenerKeys_.length===0){var o=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Pt(o,bt.POINTERMOVE,this.handlePointerMove_,this),Pt(o,bt.POINTERUP,this.handlePointerUp_,this),Pt(this.element_,bt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==o&&this.dragListenerKeys_.push(Pt(this.element_.getRootNode(),bt.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var i=new cn(bt.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(i)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new cn(t.type,this.map_,t,i))},e.prototype.handleTouchMove_=function(t){var i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Yt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Et.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Yt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Yt),this.dragListenerKeys_.length=0,this.element_=null,n.prototype.disposeInternal.call(this)},e}(jr),Z_=K_,qa={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},we={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ns=1/0,J_=function(){function n(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return n.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,kr(this.queuedElements_)},n.prototype.dequeue=function(){var e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var r=this.keyFunction_(i);return delete this.queuedElements_[r],i},n.prototype.enqueue=function(e){Mt(!(this.keyFunction_(e)in this.queuedElements_),31);var t=this.priorityFunction_(e);return t!=ns?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},n.prototype.getCount=function(){return this.elements_.length},n.prototype.getLeftChildIndex_=function(e){return e*2+1},n.prototype.getRightChildIndex_=function(e){return e*2+2},n.prototype.getParentIndex_=function(e){return e-1>>1},n.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},n.prototype.isEmpty=function(){return this.elements_.length===0},n.prototype.isKeyQueued=function(e){return e in this.queuedElements_},n.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},n.prototype.siftUp_=function(e){for(var t=this.elements_,i=this.priorities_,r=t.length,a=t[e],o=i[e],s=e;e<r>>1;){var l=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),f=h<r&&i[h]<i[l]?h:l;t[e]=t[f],i[e]=i[f],e=f}t[e]=a,i[e]=o,this.siftDown_(s,e)},n.prototype.siftDown_=function(e,t){for(var i=this.elements_,r=this.priorities_,a=i[t],o=r[t];t>e;){var s=this.getParentIndex_(t);if(r[s]>o)i[t]=i[s],r[t]=r[s],t=s;else break}i[t]=a,r[t]=o},n.prototype.reprioritize=function(){var e=this.priorityFunction_,t=this.elements_,i=this.priorities_,r=0,a=t.length,o,s,l;for(s=0;s<a;++s)o=t[s],l=e(o),l==ns?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,t[r++]=o);t.length=r,i.length=r,this.heapify_()},n}(),Q_=J_,t0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),e0=function(n){t0(e,n);function e(t,i){var r=n.call(this,function(a){return t.apply(null,a)},function(a){return a[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=i,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return e.prototype.enqueue=function(t){var i=n.prototype.enqueue.call(this,t);if(i){var r=t[0];r.addEventListener(Et.CHANGE,this.boundHandleTileChange_)}return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var i=t.target,r=i.getState();if(r===mt.LOADED||r===mt.ERROR||r===mt.EMPTY){i.removeEventListener(Et.CHANGE,this.boundHandleTileChange_);var a=i.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,i){for(var r=0,a,o,s;this.tilesLoading_<t&&r<i&&this.getCount()>0;)o=this.dequeue()[0],s=o.getKey(),a=o.getState(),a===mt.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,o.load())},e}(Q_),i0=e0;function n0(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return ns;var a=n.viewState.center,o=i[0]-a[0],s=i[1]-a[1];return 65536*Math.log(r)+Math.sqrt(o*o+s*s)/r}var Mi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},r0=42,Xl=256;function tc(n,e,t){return function(i,r,a,o,s){if(i){var l=e?0:a[0]*r,h=e?0:a[1]*r,f=s?s[0]:0,d=s?s[1]:0,p=n[0]+l/2+f,y=n[2]-l/2+f,m=n[1]+h/2+d,x=n[3]-h/2+d;p>y&&(p=(y+p)/2,y=p),m>x&&(m=(x+m)/2,x=m);var C=ne(i[0],p,y),w=ne(i[1],m,x),S=30*r;return o&&t&&(C+=-S*Math.log(1+Math.max(0,p-i[0])/S)+S*Math.log(1+Math.max(0,i[0]-y)/S),w+=-S*Math.log(1+Math.max(0,m-i[1])/S)+S*Math.log(1+Math.max(0,i[1]-x)/S)),[C,w]}else return}}function a0(n){return n}function ql(n,e,t,i){var r=Kt(e)/t[0],a=Ci(e)/t[1];return i?Math.min(n,Math.max(r,a)):Math.min(n,Math.min(r,a))}function Kl(n,e,t){var i=Math.min(n,e),r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),ne(i,t/2,e*2)}function o0(n,e,t,i){return function(r,a,o,s){if(r!==void 0){var l=n[0],h=n[n.length-1],f=t?ql(l,t,o,i):l;if(s){var d=e!==void 0?e:!0;return d?Kl(r,f,h):ne(r,h,f)}var p=Math.min(f,r),y=Math.floor(nl(n,p,a));return n[y]>f&&y<n.length-1?n[y+1]:n[y]}else return}}function s0(n,e,t,i,r,a){return function(o,s,l,h){if(o!==void 0){var f=r?ql(e,r,l,a):e,d=t!==void 0?t:0;if(h){var p=i!==void 0?i:!0;return p?Kl(o,f,d):ne(o,d,f)}var y=1e-9,m=Math.ceil(Math.log(e/f)/Math.log(n)-y),x=-s*(.5-y)+.5,C=Math.min(f,o),w=Math.floor(Math.log(e/C)/Math.log(n)+x),S=Math.max(m,w),R=e/Math.pow(n,S);return ne(R,d,f)}else return}}function ec(n,e,t,i,r){return function(a,o,s,l){if(a!==void 0){var h=i?ql(n,i,s,r):n,f=t!==void 0?t:!0;return!f||!l?ne(a,e,h):Kl(a,h,e)}else return}}function Zl(n){if(n!==void 0)return 0}function ic(n){if(n!==void 0)return n}function l0(n){var e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function u0(n){var e=n||Ai(5);return function(t,i){if(i)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}var h0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jl=0,f0=function(n){h0(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=Wt({},t);return i.hints_=[0,0],i.animations_=[],i.updateAnimationKey_,i.projection_=xl(r.projection,"EPSG:3857"),i.viewportSize_=[100,100],i.targetCenter_=null,i.targetResolution_,i.targetRotation_,i.nextCenter_=null,i.nextResolution_,i.nextRotation_,i.cancelAnchor_=void 0,r.center&&(r.center=wi(r.center,i.projection_)),r.extent&&(r.extent=vr(r.extent,i.projection_)),i.applyOptions_(r),i}return e.prototype.applyOptions_=function(t){var i=Wt({},t);for(var r in Mi)delete i[r];this.setProperties(i,!0);var a=d0(t);this.maxResolution_=a.maxResolution,this.minResolution_=a.minResolution,this.zoomFactor_=a.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=a.minZoom;var o=c0(t),s=a.constraint,l=p0(t);this.constraints_={center:o,resolution:s,rotation:l},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var i=this.padding_;this.padding_=t;var r=this.getCenter();if(r){var a=t||[0,0,0,0];i=i||[0,0,0,0];var o=this.getResolution(),s=o/2*(a[3]-i[3]+i[1]-a[1]),l=o/2*(a[0]-i[0]+i[2]-a[2]);this.setCenterInternal([r[0]+s,r[1]-l])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var i=this.getProperties();return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),Wt({},i,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var i=new Array(arguments.length),r=0;r<i.length;++r){var a=arguments[r];a.center&&(a=Wt({},a),a.center=wi(a.center,this.getProjection())),a.anchor&&(a=Wt({},a),a.anchor=wi(a.anchor,this.getProjection())),i[r]=a}this.animateInternal.apply(this,i)},e.prototype.animateInternal=function(t){var i=arguments.length,r;i>1&&typeof arguments[i-1]=="function"&&(r=arguments[i-1],--i);for(var a=0;a<i&&!this.isDef();++a){var o=arguments[a];o.center&&this.setCenterInternal(o.center),o.zoom!==void 0?this.setZoom(o.zoom):o.resolution&&this.setResolution(o.resolution),o.rotation!==void 0&&this.setRotation(o.rotation)}if(a===i){r&&rs(r,!0);return}for(var s=Date.now(),l=this.targetCenter_.slice(),h=this.targetResolution_,f=this.targetRotation_,d=[];a<i;++a){var p=arguments[a],y={start:s,complete:!1,anchor:p.anchor,duration:p.duration!==void 0?p.duration:1e3,easing:p.easing||O_,callback:r};if(p.center&&(y.sourceCenter=l,y.targetCenter=p.center.slice(),l=y.targetCenter),p.zoom!==void 0?(y.sourceResolution=h,y.targetResolution=this.getResolutionForZoom(p.zoom),h=y.targetResolution):p.resolution&&(y.sourceResolution=h,y.targetResolution=p.resolution,h=y.targetResolution),p.rotation!==void 0){y.sourceRotation=f;var m=Ni(p.rotation-f+Math.PI,2*Math.PI)-Math.PI;y.targetRotation=f+m,f=y.targetRotation}v0(y)?y.complete=!0:s+=y.duration,d.push(y)}this.animations_.push(d),this.setHint(Ce.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[Ce.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[Ce.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(Ce.ANIMATING,-this.hints_[Ce.ANIMATING]);for(var t,i=0,r=this.animations_.length;i<r;++i){var a=this.animations_[i];if(a[0].callback&&rs(a[0].callback,!1),!t)for(var o=0,s=a.length;o<s;++o){var l=a[o];if(!l.complete){t=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var t=Date.now(),i=!1,r=this.animations_.length-1;r>=0;--r){for(var a=this.animations_[r],o=!0,s=0,l=a.length;s<l;++s){var h=a[s];if(!h.complete){var f=t-h.start,d=h.duration>0?f/h.duration:1;d>=1?(h.complete=!0,d=1):o=!1;var p=h.easing(d);if(h.sourceCenter){var y=h.sourceCenter[0],m=h.sourceCenter[1],x=h.targetCenter[0],C=h.targetCenter[1];this.nextCenter_=h.targetCenter;var w=y+p*(x-y),S=m+p*(C-m);this.targetCenter_=[w,S]}if(h.sourceResolution&&h.targetResolution){var R=p===1?h.targetResolution:h.sourceResolution+p*(h.targetResolution-h.sourceResolution);if(h.anchor){var I=this.getViewportSize_(this.getRotation()),F=this.constraints_.resolution(R,0,I,!0);this.targetCenter_=this.calculateCenterZoom(F,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=R,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){var g=p===1?Ni(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+p*(h.targetRotation-h.sourceRotation);if(h.anchor){var G=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(G,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),i=!0,!h.complete)break}}if(o){this.animations_[r]=null,this.setHint(Ce.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var B=a[0].callback;B&&rs(B,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,i){var r,a=this.getCenterInternal();return a!==void 0&&(r=[a[0]-i[0],a[1]-i[1]],gl(r,t-this.getRotation()),Lv(r,i)),r},e.prototype.calculateCenterZoom=function(t,i){var r,a=this.getCenterInternal(),o=this.getResolution();if(a!==void 0&&o!==void 0){var s=i[0]-t*(i[0]-a[0])/o,l=i[1]-t*(i[1]-a[1])/o;r=[s,l]}return r},e.prototype.getViewportSize_=function(t){var i=this.viewportSize_;if(t){var r=i[0],a=i[1];return[Math.abs(r*Math.cos(t))+Math.abs(a*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(a*Math.cos(t))]}else return i},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&El(t,this.getProjection())},e.prototype.getCenterInternal=function(){return this.get(Mi.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var i=this.calculateExtentInternal(t);return Bh(i,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var i=t||this.getViewportSizeMinusPadding_(),r=this.getCenterInternal();Mt(r,1);var a=this.getResolution();Mt(a!==void 0,2);var o=this.getRotation();return Mt(o!==void 0,3),hl(r,a,o,i)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(Mi.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,i){return this.getResolutionForExtentInternal(vr(t,this.getProjection()),i)},e.prototype.getResolutionForExtentInternal=function(t,i){var r=i||this.getViewportSizeMinusPadding_(),a=Kt(t)/r[0],o=Ci(t)/r[1];return Math.max(a,o)},e.prototype.getResolutionForValueFunction=function(t){var i=t||2,r=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(r/a)/Math.log(i);return function(s){var l=r/Math.pow(i,s*o);return l}},e.prototype.getRotation=function(){return this.get(Mi.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var i=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(r/a)/i;return function(s){var l=Math.log(r/s)/i/o;return l}},e.prototype.getViewportSizeMinusPadding_=function(t){var i=this.getViewportSize_(t),r=this.padding_;return r&&(i=[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]),i},e.prototype.getState=function(){var t=this.getProjection(),i=this.getResolution(),r=this.getRotation(),a=this.getCenterInternal(),o=this.padding_;if(o){var s=this.getViewportSizeMinusPadding_();a=Ql(a,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],i,r)}return{center:a.slice(0),projection:t!==void 0?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t},e.prototype.getZoomForResolution=function(t){var i=this.minZoom_||0,r,a;if(this.resolutions_){var o=nl(this.resolutions_,t,1);i=o,r=this.resolutions_[o],o==this.resolutions_.length-1?a=2:a=r/this.resolutions_[o+1]}else r=this.maxResolution_,a=this.zoomFactor_;return i+Math.log(r/t)/Math.log(a)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var i=ne(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(r,ne(t-i,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,i){var r;if(Mt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){Mt(!fl(t),25);var a=vr(t,this.getProjection());r=af(a)}else if(t.getType()===V.CIRCLE){var a=vr(t.getExtent(),this.getProjection());r=af(a),r.rotate(this.getRotation(),hr(a))}else{var o=Bv();o?r=t.clone().transform(o,this.getProjection()):r=t}this.fitInternal(r,i)},e.prototype.rotatedExtentForGeometry=function(t){for(var i=this.getRotation(),r=Math.cos(i),a=Math.sin(-i),o=t.getFlatCoordinates(),s=t.getStride(),l=1/0,h=1/0,f=-1/0,d=-1/0,p=0,y=o.length;p<y;p+=s){var m=o[p]*r-o[p+1]*a,x=o[p]*a+o[p+1]*r;l=Math.min(l,m),h=Math.min(h,x),f=Math.max(f,m),d=Math.max(d,x)}return[l,h,f,d]},e.prototype.fitInternal=function(t,i){var r=i||{},a=r.size;a||(a=this.getViewportSizeMinusPadding_());var o=r.padding!==void 0?r.padding:[0,0,0,0],s=r.nearest!==void 0?r.nearest:!1,l;r.minResolution!==void 0?l=r.minResolution:r.maxZoom!==void 0?l=this.getResolutionForZoom(r.maxZoom):l=0;var h=this.rotatedExtentForGeometry(t),f=this.getResolutionForExtentInternal(h,[a[0]-o[1]-o[3],a[1]-o[0]-o[2]]);f=isNaN(f)?l:Math.max(f,l),f=this.getConstrainedResolution(f,s?0:1);var d=this.getRotation(),p=Math.sin(d),y=Math.cos(d),m=hr(h);m[0]+=(o[1]-o[3])/2*f,m[1]+=(o[0]-o[2])/2*f;var x=m[0]*y-m[1]*p,C=m[1]*y+m[0]*p,w=this.getConstrainedCenter([x,C],f),S=r.callback?r.callback:lr;r.duration!==void 0?this.animateInternal({resolution:f,center:w,duration:r.duration,easing:r.easing},S):(this.targetResolution_=f,this.targetCenter_=w,this.applyTargetState_(!1,!0),rs(S,!0))},e.prototype.centerOn=function(t,i,r){this.centerOnInternal(wi(t,this.getProjection()),i,r)},e.prototype.centerOnInternal=function(t,i,r){this.setCenterInternal(Ql(t,i,r,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,i,r,a){var o,s=this.padding_;if(s&&t){var l=this.getViewportSizeMinusPadding_(-r),h=Ql(t,a,[l[0]/2+s[3],l[1]/2+s[0]],i,r);o=[t[0]-h[0],t[1]-h[1]]}return o},e.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},e.prototype.adjustCenter=function(t){var i=El(this.targetCenter_,this.getProjection());this.setCenter([i[0]+t[0],i[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])},e.prototype.adjustResolution=function(t,i){var r=i&&wi(i,this.getProjection());this.adjustResolutionInternal(t,r)},e.prototype.adjustResolutionInternal=function(t,i){var r=this.getAnimating()||this.getInteracting(),a=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,a,r);i&&(this.targetCenter_=this.calculateCenterZoom(o,i)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)},e.prototype.adjustRotation=function(t,i){i&&(i=wi(i,this.getProjection())),this.adjustRotationInternal(t,i)},e.prototype.adjustRotationInternal=function(t,i){var r=this.getAnimating()||this.getInteracting(),a=this.constraints_.rotation(this.targetRotation_+t,r);i&&(this.targetCenter_=this.calculateCenterRotate(a,i)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(wi(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,i){var r=this.getAnimating()||this.getInteracting()||i,a=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(a),s=this.constraints_.resolution(this.targetResolution_,0,o,r),l=this.constraints_.center(this.targetCenter_,s,o,r,this.calculateCenterShift(this.targetCenter_,s,a,o));this.get(Mi.ROTATION)!==a&&this.set(Mi.ROTATION,a),this.get(Mi.RESOLUTION)!==s&&(this.set(Mi.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(Mi.CENTER)||!vl(this.get(Mi.CENTER),l))&&this.set(Mi.CENTER,l),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,i,r){var a=t!==void 0?t:200,o=i||0,s=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(s),h=this.constraints_.resolution(this.targetResolution_,o,l),f=this.constraints_.center(this.targetCenter_,h,l,!1,this.calculateCenterShift(this.targetCenter_,h,s,l));if(a===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=s,this.targetCenter_=f,this.applyTargetState_();return}var d=r||(a===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==s||!this.getCenterInternal()||!vl(this.getCenterInternal(),f))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:f,resolution:h,duration:a,easing:ta,anchor:d}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Ce.INTERACTING,1)},e.prototype.endInteraction=function(t,i,r){var a=r&&wi(r,this.getProjection());this.endInteractionInternal(t,i,a)},e.prototype.endInteractionInternal=function(t,i,r){this.setHint(Ce.INTERACTING,-1),this.resolveConstraints(t,i,r)},e.prototype.getConstrainedCenter=function(t,i){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),r)},e.prototype.getConstrainedZoom=function(t,i){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,i))},e.prototype.getConstrainedResolution=function(t,i){var r=i||0,a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,r,a)},e}(Ue);function rs(n,e){setTimeout(function(){n(e)},0)}function c0(n){if(n.extent!==void 0){var e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return tc(n.extent,n.constrainOnlyCenter,e)}var t=xl(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){var i=t.getExtent().slice();return i[0]=-1/0,i[2]=1/0,tc(i,!1,!1)}return a0}function d0(n){var e,t,i,r=28,a=2,o=n.minZoom!==void 0?n.minZoom:Jl,s=n.maxZoom!==void 0?n.maxZoom:r,l=n.zoomFactor!==void 0?n.zoomFactor:a,h=n.multiWorld!==void 0?n.multiWorld:!1,f=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,p=xl(n.projection,"EPSG:3857"),y=p.getExtent(),m=n.constrainOnlyCenter,x=n.extent;if(!h&&!x&&p.isGlobal()&&(m=!1,x=y),n.resolutions!==void 0){var C=n.resolutions;t=C[o],i=C[s]!==void 0?C[s]:C[C.length-1],n.constrainResolution?e=o0(C,f,!m&&x,d):e=ec(t,i,f,!m&&x,d)}else{var w=y?Math.max(Kt(y),Ci(y)):360*Ei[$e.DEGREES]/p.getMetersPerUnit(),S=w/Xl/Math.pow(a,Jl),R=S/Math.pow(a,r-Jl);t=n.maxResolution,t!==void 0?o=0:t=S/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(l,s):i=S/Math.pow(l,s):i=R),s=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,s-o),n.constrainResolution?e=s0(l,t,i,f,!m&&x,d):e=ec(t,i,f,!m&&x,d)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}function p0(n){var e=n.enableRotation!==void 0?n.enableRotation:!0;if(e){var t=n.constrainRotation;return t===void 0||t===!0?u0():t===!1?ic:typeof t=="number"?l0(t):ic}else return Zl}function v0(n){return!(n.sourceCenter&&n.targetCenter&&!vl(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Ql(n,e,t,i,r){var a=Math.cos(-r),o=Math.sin(-r),s=n[0]*a-n[1]*o,l=n[1]*a+n[0]*o;s+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,o=-o;var h=s*a-l*o,f=l*a+s*o;return[h,f]}var wr=f0,g0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();function nc(n){if(n instanceof Ko){n.setMapInternal(null);return}n instanceof Xa&&n.getLayers().forEach(nc)}function rc(n,e){if(n instanceof Ko){n.setMapInternal(e);return}if(n instanceof Xa)for(var t=n.getLayers().getArray(),i=0,r=t.length;i<r;++i)rc(t[i],e)}var y0=function(n){g0(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=_0(t);i.renderComplete_,i.boundHandleBrowserEvent_=i.handleBrowserEvent.bind(i),i.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,i.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:Eh,i.postRenderTimeoutHandle_,i.animationDelayKey_,i.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(i),i.coordinateToPixelTransform_=Li(),i.pixelToCoordinateTransform_=Li(),i.frameIndex_=0,i.frameState_=null,i.previousExtent_=null,i.viewPropertyListenerKey_=null,i.viewChangeListenerKey_=null,i.layerGroupPropertyListenerKeys_=null,i.viewport_=document.createElement("div"),i.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),i.viewport_.style.position="relative",i.viewport_.style.overflow="hidden",i.viewport_.style.width="100%",i.viewport_.style.height="100%",i.overlayContainer_=document.createElement("div"),i.overlayContainer_.style.position="absolute",i.overlayContainer_.style.zIndex="0",i.overlayContainer_.style.width="100%",i.overlayContainer_.style.height="100%",i.overlayContainer_.style.pointerEvents="none",i.overlayContainer_.className="ol-overlaycontainer",i.viewport_.appendChild(i.overlayContainer_),i.overlayContainerStopEvent_=document.createElement("div"),i.overlayContainerStopEvent_.style.position="absolute",i.overlayContainerStopEvent_.style.zIndex="0",i.overlayContainerStopEvent_.style.width="100%",i.overlayContainerStopEvent_.style.height="100%",i.overlayContainerStopEvent_.style.pointerEvents="none",i.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",i.viewport_.appendChild(i.overlayContainerStopEvent_),i.mapBrowserEventHandler_=null,i.moveTolerance_=t.moveTolerance,i.keyboardEventTarget_=r.keyboardEventTarget,i.targetChangeHandlerKeys_=null,i.controls=r.controls||new Qe,i.interactions=r.interactions||new Qe,i.overlays_=r.overlays,i.overlayIdIndex_={},i.renderer_=null,i.postRenderFunctions_=[],i.tileQueue_=new i0(i.getTilePriority.bind(i),i.handleTileChange_.bind(i)),i.addChangeListener(we.LAYERGROUP,i.handleLayerGroupChanged_),i.addChangeListener(we.VIEW,i.handleViewChanged_),i.addChangeListener(we.SIZE,i.handleSizeChanged_),i.addChangeListener(we.TARGET,i.handleTargetChanged_),i.setProperties(r.values);var a=i;return t.view&&!(t.view instanceof wr)&&t.view.then(function(o){a.setView(new wr(o))}),i.controls.addEventListener(pe.ADD,function(o){o.element.setMap(this)}.bind(i)),i.controls.addEventListener(pe.REMOVE,function(o){o.element.setMap(null)}.bind(i)),i.interactions.addEventListener(pe.ADD,function(o){o.element.setMap(this)}.bind(i)),i.interactions.addEventListener(pe.REMOVE,function(o){o.element.setMap(null)}.bind(i)),i.overlays_.addEventListener(pe.ADD,function(o){this.addOverlayInternal_(o.element)}.bind(i)),i.overlays_.addEventListener(pe.REMOVE,function(o){var s=o.element,l=s.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],o.element.setMap(null)}.bind(i)),i.controls.forEach(function(o){o.setMap(this)}.bind(i)),i.interactions.forEach(function(o){o.setMap(this)}.bind(i)),i.overlays_.forEach(i.addOverlayInternal_.bind(i)),i}return e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){var i=this.getLayerGroup().getLayers();i.push(t)},e.prototype.handleLayerAdd_=function(t){rc(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var i=t.getId();i!==void 0&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),n.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,i,r){if(!!this.frameState_){var a=this.getCoordinateFromPixelInternal(t);r=r!==void 0?r:{};var o=r.hitTolerance!==void 0?r.hitTolerance:0,s=r.layerFilter!==void 0?r.layerFilter:tn,l=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(a,this.frameState_,o,l,i,null,s,null)}},e.prototype.getFeaturesAtPixel=function(t,i){var r=[];return this.forEachFeatureAtPixel(t,function(a){r.push(a)},i),r},e.prototype.getAllLayers=function(){var t=[];function i(r){r.forEach(function(a){a instanceof Xa?i(a.getLayers()):t.push(a)})}return i(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,i,r){if(!!this.frameState_){var a=r||{},o=a.hitTolerance!==void 0?a.hitTolerance:0,s=a.layerFilter||tn;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,o,i,s)}},e.prototype.hasFeatureAtPixel=function(t,i){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};var a=i.layerFilter!==void 0?i.layerFilter:tn,o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,o,s,a,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var i=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-i.left,r.clientY-i.top]},e.prototype.getTarget=function(){return this.get(we.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return El(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var i=this.frameState_;return i?ce(i.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var i=this.overlayIdIndex_[t.toString()];return i!==void 0?i:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(we.LAYERGROUP)},e.prototype.setLayers=function(t){var i=this.getLayerGroup();if(t instanceof Qe){i.setLayers(t);return}var r=i.getLayers();r.clear(),r.extend(t)},e.prototype.getLayers=function(){var t=this.getLayerGroup().getLayers();return t},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),i=0,r=t.length;i<r;++i){var a=t[i].layer,o=a.getSource();if(o&&o.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var i=wi(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)},e.prototype.getPixelFromCoordinateInternal=function(t){var i=this.frameState_;return i?ce(i.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(we.SIZE)},e.prototype.getView=function(){return this.get(we.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,i,r,a){return n0(this.frameState_,t,i,r,a)},e.prototype.handleBrowserEvent=function(t,i){var r=i||t.type,a=new cn(r,this,t);this.handleMapBrowserEvent(a)},e.prototype.handleMapBrowserEvent=function(t){if(!!this.frameState_){var i=t.originalEvent,r=i.type;if(r===Hl.POINTERDOWN||r===Et.WHEEL||r===Et.KEYDOWN){var a=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():a,s=i.target;if(this.overlayContainerStopEvent_.contains(s)||!(o===a?a.documentElement:o).contains(s))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1)for(var l=this.getInteractions().getArray().slice(),h=l.length-1;h>=0;h--){var f=l[h];if(!(f.getMap()!==this||!f.getActive()||!this.getTargetElement())){var d=f.handleEvent(t);if(!d||t.propagationStopped)break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){var r=this.maxTilesLoading_,a=r;if(t){var o=t.viewHints;if(o[Ce.ANIMATING]||o[Ce.INTERACTING]){var s=Date.now()-t.time>8;r=s?0:8,a=s?0:2}}i.getTilesLoading()<r&&(i.reprioritize(),i.loadMoreTiles(r,a))}t&&this.hasListener(xr.RENDERCOMPLETE)&&!t.animate&&this.renderComplete_&&this.renderer_.dispatchRenderEvent(xr.RENDERCOMPLETE,t);for(var l=this.postRenderFunctions_,h=0,f=l.length;h<f;++h)l[h](this,t);l.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,i=this.targetChangeHandlerKeys_.length;t<i;++t)Yt(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Et.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Et.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Vo(this.viewport_)}var r=this.getTargetElement();if(!r)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{r.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Z_(this,this.moveTolerance_);for(var a in bt)this.mapBrowserEventHandler_.addEventListener(bt[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Et.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Et.WHEEL,this.boundHandleBrowserEvent_,Th?{passive:!1}:!1);var o=this.getOwnerDocument().defaultView,s=this.keyboardEventTarget_?this.keyboardEventTarget_:r;this.targetChangeHandlerKeys_=[Pt(s,Et.KEYDOWN,this.handleBrowserEvent,this),Pt(s,Et.KEYPRESS,this.handleBrowserEvent,this),Pt(o,Et.RESIZE,this.updateSize,this)]}this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Yt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Yt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Pt(t,Dr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Pt(t,Et.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Yt),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new fn("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Pt(t,Dr.PROPERTYCHANGE,this.render,this),Pt(t,Et.CHANGE,this.render,this),Pt(t,"addlayer",this.handleLayerAdd_,this),Pt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),i=0,r=t.length;i<r;++i){var a=t[i].layer;a.hasRenderer()&&a.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){var i=this.getLayerGroup().getLayers();return i.remove(t)},e.prototype.handleLayerRemove_=function(t){nc(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var i=this,r=this.getSize(),a=this.getView(),o=this.frameState_,s=null;if(r!==void 0&&hf(r)&&a&&a.isDef()){var l=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=a.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:hl(h.center,h.resolution,h.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:h,viewHints:l,wantedTiles:{},mapId:It(this),renderTargets:{}},h.nextCenter&&h.nextResolution){var f=isNaN(h.nextRotation)?h.rotation:h.nextRotation;s.nextExtent=hl(h.nextCenter,h.nextResolution,f,r)}}if(this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),o){var d=!this.previousExtent_||!fl(this.previousExtent_)&&!Ra(s.extent,this.previousExtent_);d&&(this.dispatchEvent(new is(qa.MOVESTART,this,o)),this.previousExtent_=Sa(this.previousExtent_))}var p=this.previousExtent_&&!s.viewHints[Ce.ANIMATING]&&!s.viewHints[Ce.INTERACTING]&&!Ra(s.extent,this.previousExtent_);p&&(this.dispatchEvent(new is(qa.MOVEEND,this,s)),Oh(s.extent,this.previousExtent_))}this.dispatchEvent(new is(qa.POSTRENDER,this,s)),this.renderComplete_=!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoading(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){i.postRenderTimeoutHandle_=void 0,i.handlePostRender()},0))},e.prototype.setLayerGroup=function(t){var i=this.getLayerGroup();i&&this.handleLayerRemove_(new fn("removelayer",i)),this.set(we.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(we.SIZE,t)},e.prototype.setTarget=function(t){this.set(we.TARGET,t)},e.prototype.setView=function(t){if(!t||t instanceof wr){this.set(we.VIEW,t);return}this.set(we.VIEW,new wr);var i=this;t.then(function(r){i.setView(new wr(r))})},e.prototype.updateSize=function(){var t=this.getTargetElement(),i=void 0;if(t){var r=getComputedStyle(t),a=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(a)&&!isNaN(o)&&(i=[a,o],!hf(i)&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(i),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var i=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(i=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(i)}},e}(Ue);function _0(n){var e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);var t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Xa({layers:n.layers});t[we.LAYERGROUP]=i,t[we.TARGET]=n.target,t[we.VIEW]=n.view instanceof wr?n.view:new wr;var r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Qe(n.controls.slice()):(Mt(typeof n.controls.getArray=="function",47),r=n.controls));var a;n.interactions!==void 0&&(Array.isArray(n.interactions)?a=new Qe(n.interactions.slice()):(Mt(typeof n.interactions.getArray=="function",48),a=n.interactions));var o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Qe(n.overlays.slice()):(Mt(typeof n.overlays.getArray=="function",49),o=n.overlays):o=new Qe,{controls:r,interactions:a,keyboardEventTarget:e,overlays:o,values:t}}var m0=y0,x0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),E0=function(n){x0(e,n);function e(t){var i=n.call(this)||this,r=t.element;return r&&!t.target&&!r.style.pointerEvents&&(r.style.pointerEvents="auto"),i.element=r||null,i.target_=null,i.map_=null,i.listenerKeys=[],t.render&&(i.render=t.render),t.target&&i.setTarget(t.target),i}return e.prototype.disposeInternal=function(){Vo(this.element),n.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Vo(this.element);for(var i=0,r=this.listenerKeys.length;i<r;++i)Yt(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=t,this.map_){var a=this.target_?this.target_:t.getOverlayContainerStopEvent();a.appendChild(this.element),this.render!==lr&&this.listenerKeys.push(Pt(t,qa.POSTRENDER,this.render,this)),t.render()}},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_=typeof t=="string"?document.getElementById(t):t},e}(Ue),be=E0,T0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:be}),C0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),w0=function(n){C0(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this,i.ulElement_=document.createElement("ul"),i.collapsed_=r.collapsed!==void 0?r.collapsed:!0,i.userCollapsed_=i.collapsed_,i.overrideCollapsible_=r.collapsible!==void 0,i.collapsible_=r.collapsible!==void 0?r.collapsible:!0,i.collapsible_||(i.collapsed_=!1);var a=r.className!==void 0?r.className:"ol-attribution",o=r.tipLabel!==void 0?r.tipLabel:"Attributions",s=r.expandClassName!==void 0?r.expandClassName:a+"-expand",l=r.collapseLabel!==void 0?r.collapseLabel:"\u203A",h=r.collapseClassName!==void 0?r.collapseClassName:a+"-collpase";typeof l=="string"?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=l,i.collapseLabel_.className=h):i.collapseLabel_=l;var f=r.label!==void 0?r.label:"i";typeof f=="string"?(i.label_=document.createElement("span"),i.label_.textContent=f,i.label_.className=s):i.label_=f;var d=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_;i.toggleButton_=document.createElement("button"),i.toggleButton_.setAttribute("type","button"),i.toggleButton_.setAttribute("aria-expanded",String(!i.collapsed_)),i.toggleButton_.title=o,i.toggleButton_.appendChild(d),i.toggleButton_.addEventListener(Et.CLICK,i.handleClick_.bind(i),!1);var p=a+" "+Na+" "+Nl+(i.collapsed_&&i.collapsible_?" "+yf:"")+(i.collapsible_?"":" ol-uncollapsible"),y=i.element;return y.className=p,y.appendChild(i.toggleButton_),y.appendChild(i.ulElement_),i.renderedAttributions_=[],i.renderedVisible_=!0,i}return e.prototype.collectSourceAttributions_=function(t){for(var i={},r=[],a=!0,o=t.layerStatesArray,s=0,l=o.length;s<l;++s){var h=o[s];if(!!qo(h,t.viewState)){var f=h.layer.getSource();if(!!f){var d=f.getAttributions();if(!!d){var p=d(t);if(!!p)if(a=a&&f.getAttributionsCollapsible()!==!1,Array.isArray(p))for(var y=0,m=p.length;y<m;++y)p[y]in i||(r.push(p[y]),i[p[y]]=!0);else p in i||(r.push(p),i[p]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(a),r},e.prototype.updateElement_=function(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var i=this.collectSourceAttributions_(t),r=i.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!sr(i,this.renderedAttributions_)){gf(this.ulElement_);for(var a=0,o=i.length;a<o;++a){var s=document.createElement("li");s.innerHTML=i[a],this.ulElement_.appendChild(s)}this.renderedAttributions_=i}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(yf),this.collapsed_?vf(this.collapseLabel_,this.label_):vf(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(be),M0=w0,O0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),S0=function(n){O0(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var a=r.className!==void 0?r.className:"ol-rotate",o=r.label!==void 0?r.label:"\u21E7",s=r.compassClassName!==void 0?r.compassClassName:"ol-compass";i.label_=null,typeof o=="string"?(i.label_=document.createElement("span"),i.label_.className=s,i.label_.textContent=o):(i.label_=o,i.label_.classList.add(s));var l=r.tipLabel?r.tipLabel:"Reset rotation",h=document.createElement("button");h.className=a+"-reset",h.setAttribute("type","button"),h.title=l,h.appendChild(i.label_),h.addEventListener(Et.CLICK,i.handleClick_.bind(i),!1);var f=a+" "+Na+" "+Nl,d=i.element;return d.className=f,d.appendChild(h),i.callResetNorth_=r.resetNorth?r.resetNorth:void 0,i.duration_=r.duration!==void 0?r.duration:250,i.autoHide_=r.autoHide!==void 0?r.autoHide:!0,i.rotation_=void 0,i.autoHide_&&i.element.classList.add(Wo),i}return e.prototype.handleClick_=function(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap(),i=t.getView();if(!!i){var r=i.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!=0?i.animate({rotation:0,duration:this.duration_,easing:ta}):i.setRotation(0))}},e.prototype.render=function(t){var i=t.frameState;if(!!i){var r=i.viewState.rotation;if(r!=this.rotation_){var a="rotate("+r+"rad)";if(this.autoHide_){var o=this.element.classList.contains(Wo);!o&&r===0?this.element.classList.add(Wo):o&&r!==0&&this.element.classList.remove(Wo)}this.label_.style.transform=a}this.rotation_=r}},e}(be),R0=S0,I0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),P0=function(n){I0(e,n);function e(t){var i=this,r=t||{};i=n.call(this,{element:document.createElement("div"),target:r.target})||this;var a=r.className!==void 0?r.className:"ol-zoom",o=r.delta!==void 0?r.delta:1,s=r.zoomInClassName!==void 0?r.zoomInClassName:a+"-in",l=r.zoomOutClassName!==void 0?r.zoomOutClassName:a+"-out",h=r.zoomInLabel!==void 0?r.zoomInLabel:"+",f=r.zoomOutLabel!==void 0?r.zoomOutLabel:"\u2013",d=r.zoomInTipLabel!==void 0?r.zoomInTipLabel:"Zoom in",p=r.zoomOutTipLabel!==void 0?r.zoomOutTipLabel:"Zoom out",y=document.createElement("button");y.className=s,y.setAttribute("type","button"),y.title=d,y.appendChild(typeof h=="string"?document.createTextNode(h):h),y.addEventListener(Et.CLICK,i.handleClick_.bind(i,o),!1);var m=document.createElement("button");m.className=l,m.setAttribute("type","button"),m.title=p,m.appendChild(typeof f=="string"?document.createTextNode(f):f),m.addEventListener(Et.CLICK,i.handleClick_.bind(i,-o),!1);var x=a+" "+Na+" "+Nl,C=i.element;return C.className=x,C.appendChild(y),C.appendChild(m),i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleClick_=function(t,i){i.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var i=this.getMap(),r=i.getView();if(!!r){var a=r.getZoom();if(a!==void 0){var o=r.getConstrainedZoom(a+t);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:o,duration:this.duration_,easing:ta})):r.setZoom(o)}}},e}(be),b0=P0,ei={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},L0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Me={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},A0=function(n){L0(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un,i.options=t,i.id=t.id,i.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,i.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,i.element=document.createElement("div"),i.element.className=t.className!==void 0?t.className:"ol-overlay-container "+Dg,i.element.style.position="absolute",i.element.style.pointerEvents="auto";var r=t.autoPan;return r&&typeof r!="object"&&(r={animation:t.autoPanAnimation,margin:t.autoPanMargin}),i.autoPan=r||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(Me.ELEMENT,i.handleElementChanged),i.addChangeListener(Me.MAP,i.handleMapChanged),i.addChangeListener(Me.OFFSET,i.handleOffsetChanged),i.addChangeListener(Me.POSITION,i.handlePositionChanged),i.addChangeListener(Me.POSITIONING,i.handlePositioningChanged),t.element!==void 0&&i.setElement(t.element),i.setOffset(t.offset!==void 0?t.offset:[0,0]),i.setPositioning(t.positioning!==void 0?t.positioning:ei.TOP_LEFT),t.position!==void 0&&i.setPosition(t.position),i}return e.prototype.getElement=function(){return this.get(Me.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(Me.MAP)},e.prototype.getOffset=function(){return this.get(Me.OFFSET)},e.prototype.getPosition=function(){return this.get(Me.POSITION)},e.prototype.getPositioning=function(){return this.get(Me.POSITIONING)},e.prototype.handleElementChanged=function(){gf(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Vo(this.element),Yt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Pt(t,qa.POSTRENDER,this.render,this),this.updatePixelPosition();var i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(Me.ELEMENT,t)},e.prototype.setMap=function(t){this.set(Me.MAP,t)},e.prototype.setOffset=function(t){this.set(Me.OFFSET,t)},e.prototype.setPosition=function(t){this.set(Me.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var i=this.getMap();if(!(!i||!i.getTargetElement()||!this.get(Me.POSITION))){var r=this.getRect(i.getTargetElement(),i.getSize()),a=this.getElement(),o=this.getRect(a,[Lg(a),Ag(a)]),s=t||{},l=s.margin===void 0?20:s.margin;if(!Tn(r,o)){var h=o[0]-r[0],f=r[2]-o[2],d=o[1]-r[1],p=r[3]-o[3],y=[0,0];if(h<0?y[0]=h-l:f<0&&(y[0]=Math.abs(f)+l),d<0?y[1]=d-l:p<0&&(y[1]=Math.abs(p)+l),y[0]!==0||y[1]!==0){var m=i.getView().getCenterInternal(),x=i.getPixelFromCoordinateInternal(m);if(!x)return;var C=[x[0]+y[0],x[1]+y[1]],w=s.animation||{};i.getView().animateInternal({center:i.getCoordinateFromPixelInternal(C),duration:w.duration,easing:w.easing})}}}},e.prototype.getRect=function(t,i){var r=t.getBoundingClientRect(),a=r.left+window.pageXOffset,o=r.top+window.pageYOffset;return[a,o,a+i[0],o+i[1]]},e.prototype.setPositioning=function(t){this.set(Me.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),i=this.getPosition();if(!t||!t.isRendered()||!i){this.setVisible(!1);return}var r=t.getPixelFromCoordinate(i),a=t.getSize();this.updateRenderedPosition(r,a)},e.prototype.updateRenderedPosition=function(t,i){var r=this.element.style,a=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var s=Math.round(t[0]+a[0])+"px",l=Math.round(t[1]+a[1])+"px",h="0%",f="0%";o==ei.BOTTOM_RIGHT||o==ei.CENTER_RIGHT||o==ei.TOP_RIGHT?h="-100%":(o==ei.BOTTOM_CENTER||o==ei.CENTER_CENTER||o==ei.TOP_CENTER)&&(h="-50%"),o==ei.BOTTOM_LEFT||o==ei.BOTTOM_CENTER||o==ei.BOTTOM_RIGHT?f="-100%":(o==ei.CENTER_LEFT||o==ei.CENTER_CENTER||o==ei.CENTER_RIGHT)&&(f="-50%");var d="translate("+h+", "+f+") translate("+s+", "+l+")";this.rendered.transform_!=d&&(this.rendered.transform_=d,r.transform=d,r.msTransform=d)},e.prototype.getOptions=function(){return this.options},e}(Ue),tu=A0,N0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),eu="units",Mr={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},D0=[1,2,5],iu=25.4/.28,F0=function(n){N0(e,n);function e(t){var i=this,r=t||{},a=r.className!==void 0?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return i=n.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this,i.on,i.once,i.un,i.innerElement_=document.createElement("div"),i.innerElement_.className=a+"-inner",i.element.className=a+" "+Na,i.element.appendChild(i.innerElement_),i.viewState_=null,i.minWidth_=r.minWidth!==void 0?r.minWidth:64,i.renderedVisible_=!1,i.renderedWidth_=void 0,i.renderedHTML_="",i.addChangeListener(eu,i.handleUnitsChanged_),i.setUnits(r.units||Mr.METRIC),i.scaleBar_=r.bar||!1,i.scaleBarSteps_=r.steps||4,i.scaleBarText_=r.text||!1,i.dpi_=r.dpi||void 0,i}return e.prototype.getUnits=function(){return this.get(eu)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(eu,t)},e.prototype.setDpi=function(t){this.dpi_=t},e.prototype.updateElement_=function(){var t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var i=t.center,r=t.projection,a=this.getUnits(),o=a==Mr.DEGREES?$e.DEGREES:$e.METERS,s=Go(r,t.resolution,i,o),l=this.minWidth_*(this.dpi_||iu)/iu,h=l*s,f="";if(a==Mr.DEGREES){var d=Ei[$e.DEGREES];h*=d,h<d/60?(f="\u2033",s*=3600):h<d?(f="\u2032",s*=60):f="\xB0"}else a==Mr.IMPERIAL?h<.9144?(f="in",s/=.0254):h<1609.344?(f="ft",s/=.3048):(f="mi",s/=1609.344):a==Mr.NAUTICAL?(s/=1852,f="nm"):a==Mr.METRIC?h<.001?(f="\u03BCm",s*=1e6):h<1?(f="mm",s*=1e3):h<1e3?f="m":(f="km",s/=1e3):a==Mr.US?h<.9144?(f="in",s*=39.37):h<1609.344?(f="ft",s/=.30480061):(f="mi",s/=1609.3472):Mt(!1,33);for(var p=3*Math.floor(Math.log(l*s)/Math.log(10)),y,m,x;;){x=Math.floor(p/3);var C=Math.pow(10,x);if(y=D0[(p%3+3)%3]*C,m=Math.round(y/s),isNaN(m)){this.element.style.display="none",this.renderedVisible_=!1;return}else if(m>=l)break;++p}var w;this.scaleBar_?w=this.createScaleBar(m,y,f):w=y.toFixed(x<0?-x:0)+" "+f,this.renderedHTML_!=w&&(this.innerElement_.innerHTML=w,this.renderedHTML_=w),this.renderedWidth_!=m&&(this.innerElement_.style.width=m+"px",this.renderedWidth_=m),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)},e.prototype.createScaleBar=function(t,i,r){for(var a="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),o=[],s=t/this.scaleBarSteps_,l="#ffffff",h=0;h<this.scaleBarSteps_;h++)h===0&&o.push(this.createMarker("absolute",h)),o.push('<div><div class="ol-scale-singlebar" style="width: '+s+"px;background-color: "+l+';"></div>'+this.createMarker("relative",h)+(h%2==0||this.scaleBarSteps_===2?this.createStepText(h,t,!1,i,r):"")+"</div>"),h===this.scaleBarSteps_-1&&o.push(this.createStepText(h+1,t,!0,i,r)),l==="#ffffff"?l="#000000":l="#ffffff";var f;this.scaleBarText_?f='<div class="ol-scale-text" style="width: '+t+'px;">'+a+"</div>":f="";var d='<div style="display: flex;">'+f+o.join("")+"</div>";return d},e.prototype.createMarker=function(t,i){var r=t==="absolute"?3:-10;return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+r+'px;"></div>'},e.prototype.createStepText=function(t,i,r,a,o){var s=t===0?0:Math.round(a/this.scaleBarSteps_*t*100)/100,l=s+(t===0?"":" "+o),h=t===0?-3:i/this.scaleBarSteps_*-1,f=t===0?0:i/this.scaleBarSteps_*2;return'<div class="ol-scale-step-text" style="margin-left: '+h+"px;text-align: "+(t===0?"left":"center")+"; min-width: "+f+"px;left: "+(r?i+"px":"unset")+';">'+l+"</div>"},e.prototype.getScaleForResolution=function(){var t=Go(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,$e.METERS),i=this.dpi_||iu,r=1e3/25.4;return parseFloat(t.toString())*r*i},e.prototype.render=function(t){var i=t.frameState;i?this.viewState_=i.viewState:this.viewState_=null,this.updateElement_()},e}(be),RM=F0;function k0(n){var e=n||{},t=new Qe,i=e.zoom!==void 0?e.zoom:!0;i&&t.push(new b0(e.zoomOptions));var r=e.rotate!==void 0?e.rotate:!0;r&&t.push(new R0(e.rotateOptions));var a=e.attribution!==void 0?e.attribution:!0;return a&&t.push(new M0(e.attributionOptions)),t}var nu={ACTIVE:"active"},G0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),j0=function(n){G0(e,n);function e(t){var i=n.call(this)||this;return i.on,i.once,i.un,t&&t.handleEvent&&(i.handleEvent=t.handleEvent),i.map_=null,i.setActive(!0),i}return e.prototype.getActive=function(){return this.get(nu.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(nu.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(Ue);function B0(n,e,t){var i=n.getCenterInternal();if(i){var r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:S_,center:n.getConstrainedCenter(r)})}}function ru(n,e,t,i){var r=n.getZoom();if(r!==void 0){var a=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(a);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:ta})}}var dn=j0,U0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$0=function(n){U0(e,n);function e(t){var i=n.call(this)||this,r=t||{};return i.delta_=r.delta?r.delta:1,i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleEvent=function(t){var i=!1;if(t.type==bt.DBLCLICK){var r=t.originalEvent,a=t.map,o=t.coordinate,s=r.shiftKey?-this.delta_:this.delta_,l=a.getView();ru(l,s,o,this.duration_),r.preventDefault(),i=!0}return!i},e}(dn),z0=$0,V0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),W0=function(n){V0(e,n);function e(t){var i=this,r=t||{};return i=n.call(this,r)||this,r.handleDownEvent&&(i.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(i.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(i.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(i.handleUpEvent=r.handleUpEvent),r.stopDown&&(i.stopDown=r.stopDown),i.handlingDownUpSequence=!1,i.trackedPointers_={},i.targetPointers=[],i}return e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==bt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==bt.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==bt.POINTERDOWN){var a=this.handleDownEvent(t);this.handlingDownUpSequence=a,i=this.stopDown(a)}else t.type==bt.POINTERMOVE&&this.handleMoveEvent(t);return!i},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(Y0(t)){var i=t.originalEvent,r=i.pointerId.toString();t.type==bt.POINTERUP?delete this.trackedPointers_[r]:t.type==bt.POINTERDOWN?this.trackedPointers_[r]=i:r in this.trackedPointers_&&(this.trackedPointers_[r]=i),this.targetPointers=gh(this.trackedPointers_)}},e}(dn);function au(n){for(var e=n.length,t=0,i=0,r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return[t/e,i/e]}function Y0(n){var e=n.type;return e===bt.POINTERDOWN||e===bt.POINTERDRAG||e===bt.POINTERUP}var Or=W0;function ou(n){var e=arguments;return function(t){for(var i=!0,r=0,a=e.length;r<a&&(i=i&&e[r](t),!!i);++r);return i}}var H0=function(n){var e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},X0=function(n){var e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)},ac=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?X0(n):!0},oc=tn,sc=function(n){var e=n.originalEvent;return e.button==0&&!(Jp&&Qp&&e.ctrlKey)},lc=Fr,q0=function(n){return n.type==bt.SINGLECLICK},su=function(n){var e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},lu=function(n){var e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},uc=function(n){var e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"},uu=function(n){var e=n.originalEvent;return Mt(e!==void 0,56),e.pointerType=="mouse"},K0=function(n){var e=n.originalEvent;return Mt(e!==void 0,56),e.isPrimary&&e.button===0},Z0=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),J0=function(n){Z0(e,n);function e(t){var i=n.call(this,{stopDown:Fr})||this,r=t||{};i.kinetic_=r.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1;var a=r.condition?r.condition:ou(su,K0);return i.condition_=r.onFocusOnly?ou(ac,a):a,i.noKinetic_=!1,i}return e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var i=this.targetPointers,r=au(i);if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var a=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],o=t.map,s=o.getView();Av(a,s.getResolution()),gl(a,s.getRotation()),s.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var i=t.map,r=i.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var a=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=r.getCenterInternal(),l=i.getPixelFromCoordinateInternal(s),h=i.getCoordinateFromPixelInternal([l[0]-a*Math.cos(o),l[1]-a*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(h),duration:500,easing:ta})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var i=t.map,r=i.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},e}(Or),Q0=J0,tm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),em=function(n){tm(e,n);function e(t){var i=this,r=t||{};return i=n.call(this,{stopDown:Fr})||this,i.condition_=r.condition?r.condition:H0,i.lastAngle_=void 0,i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleDragEvent=function(t){if(!!uu(t)){var i=t.map,r=i.getView();if(r.getConstraints().rotation!==Zl){var a=i.getSize(),o=t.pixel,s=Math.atan2(a[1]/2-o[1],o[0]-a[0]/2);if(this.lastAngle_!==void 0){var l=s-this.lastAngle_;r.adjustRotationInternal(-l)}this.lastAngle_=s}}},e.prototype.handleUpEvent=function(t){if(!uu(t))return!0;var i=t.map,r=i.getView();return r.endInteraction(this.duration_),!1},e.prototype.handleDownEvent=function(t){if(!uu(t))return!1;if(sc(t)&&this.condition_(t)){var i=t.map;return i.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},e}(Or),im=em,nm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rm=function(n){nm(e,n);function e(t){var i=n.call(this)||this;return i.geometry_=null,i.element_=document.createElement("div"),i.element_.style.position="absolute",i.element_.style.pointerEvents="auto",i.element_.className="ol-box "+t,i.map_=null,i.startPixel_=null,i.endPixel_=null,i}return e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,i=this.endPixel_,r="px",a=this.element_.style;a.left=Math.min(t[0],i[0])+r,a.top=Math.min(t[1],i[1])+r,a.width=Math.abs(i[0]-t[0])+r,a.height=Math.abs(i[1]-t[1])+r},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var i=this.element_.style;i.left="inherit",i.top="inherit",i.width="inherit",i.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,i=this.endPixel_,r=[t,[t[0],i[1]],i,[i[0],t[1]]],a=r.map(this.map_.getCoordinateFromPixelInternal,this.map_);a[4]=a[0].slice(),this.geometry_?this.geometry_.setCoordinates([a]):this.geometry_=new mr([a])},e.prototype.getGeometry=function(){return this.geometry_},e}(el),am=rm,hc=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),as={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},hu=function(n){hc(e,n);function e(t,i,r){var a=n.call(this,t)||this;return a.coordinate=i,a.mapBrowserEvent=r,a}return e}(ui),om=function(n){hc(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=t||{};return i.box_=new am(r.className||"ol-dragbox"),i.minArea_=r.minArea!==void 0?r.minArea:64,r.onBoxEnd&&(i.onBoxEnd=r.onBoxEnd),i.startPixel_=null,i.condition_=r.condition?r.condition:sc,i.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:i.defaultBoxEndCondition,i}return e.prototype.defaultBoxEndCondition=function(t,i,r){var a=r[0]-i[0],o=r[1]-i[1];return a*a+o*o>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new hu(as.BOXDRAG,t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new hu(i?as.BOXEND:as.BOXCANCEL,t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new hu(as.BOXSTART,t.coordinate,t)),!0):!1},e.prototype.onBoxEnd=function(t){},e}(Or),sm=om,lm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),um=function(n){lm(e,n);function e(t){var i=this,r=t||{},a=r.condition?r.condition:lu;return i=n.call(this,{condition:a,className:r.className||"ol-dragzoom",minArea:r.minArea})||this,i.duration_=r.duration!==void 0?r.duration:200,i.out_=r.out!==void 0?r.out:!1,i}return e.prototype.onBoxEnd=function(t){var i=this.getMap(),r=i.getView(),a=this.getGeometry();if(this.out_){var o=r.rotatedExtentForGeometry(a),s=r.getResolutionForExtentInternal(o),l=r.getResolution()/s;a=a.clone(),a.scale(l*l)}r.fitInternal(a,{duration:this.duration_,easing:ta})},e}(sm),hm=um,Sr={LEFT:37,UP:38,RIGHT:39,DOWN:40},fm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),cm=function(n){fm(e,n);function e(t){var i=n.call(this)||this,r=t||{};return i.defaultCondition_=function(a){return su(a)&&uc(a)},i.condition_=r.condition!==void 0?r.condition:i.defaultCondition_,i.duration_=r.duration!==void 0?r.duration:100,i.pixelDelta_=r.pixelDelta!==void 0?r.pixelDelta:128,i}return e.prototype.handleEvent=function(t){var i=!1;if(t.type==Et.KEYDOWN){var r=t.originalEvent,a=r.keyCode;if(this.condition_(t)&&(a==Sr.DOWN||a==Sr.LEFT||a==Sr.RIGHT||a==Sr.UP)){var o=t.map,s=o.getView(),l=s.getResolution()*this.pixelDelta_,h=0,f=0;a==Sr.DOWN?f=-l:a==Sr.LEFT?h=-l:a==Sr.RIGHT?h=l:f=l;var d=[h,f];gl(d,s.getRotation()),B0(s,d,this.duration_),r.preventDefault(),i=!0}}return!i},e}(dn),dm=cm,pm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),vm=function(n){pm(e,n);function e(t){var i=n.call(this)||this,r=t||{};return i.condition_=r.condition?r.condition:uc,i.delta_=r.delta?r.delta:1,i.duration_=r.duration!==void 0?r.duration:100,i}return e.prototype.handleEvent=function(t){var i=!1;if(t.type==Et.KEYDOWN||t.type==Et.KEYPRESS){var r=t.originalEvent,a=r.charCode;if(this.condition_(t)&&(a=="+".charCodeAt(0)||a=="-".charCodeAt(0))){var o=t.map,s=a=="+".charCodeAt(0)?this.delta_:-this.delta_,l=o.getView();ru(l,s,void 0,this.duration_),r.preventDefault(),i=!0}}return!i},e}(dn),gm=vm,ym=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fu={TRACKPAD:"trackpad",WHEEL:"wheel"},_m=function(n){ym(e,n);function e(t){var i=this,r=t||{};i=n.call(this,r)||this,i.totalDelta_=0,i.lastDelta_=0,i.maxDelta_=r.maxDelta!==void 0?r.maxDelta:1,i.duration_=r.duration!==void 0?r.duration:250,i.timeout_=r.timeout!==void 0?r.timeout:80,i.useAnchor_=r.useAnchor!==void 0?r.useAnchor:!0,i.constrainResolution_=r.constrainResolution!==void 0?r.constrainResolution:!1;var a=r.condition?r.condition:oc;return i.condition_=r.onFocusOnly?ou(ac,a):a,i.lastAnchor_=null,i.startTime_=void 0,i.timeoutId_,i.mode_=void 0,i.trackpadEventGap_=400,i.trackpadTimeoutId_,i.deltaPerZoom_=300,i}return e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var t=this.getMap().getView();t.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var i=t.type;if(i!==Et.WHEEL)return!0;var r=t.map,a=t.originalEvent;a.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);var o;if(t.type==Et.WHEEL&&(o=a.deltaY,Zp&&a.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=Eh),a.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;var s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?fu.TRACKPAD:fu.WHEEL);var l=r.getView();if(this.mode_===fu.TRACKPAD&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=o;var h=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),h),!1},e.prototype.handleWheelZoom_=function(t){var i=t.getView();i.getAnimating()&&i.cancelAnimations();var r=-ne(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),ru(i,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(dn),mm=_m,xm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Em=function(n){xm(e,n);function e(t){var i=this,r=t||{},a=r;return a.stopDown||(a.stopDown=Fr),i=n.call(this,a)||this,i.anchor_=null,i.lastAngle_=void 0,i.rotating_=!1,i.rotationDelta_=0,i.threshold_=r.threshold!==void 0?r.threshold:.3,i.duration_=r.duration!==void 0?r.duration:250,i}return e.prototype.handleDragEvent=function(t){var i=0,r=this.targetPointers[0],a=this.targetPointers[1],o=Math.atan2(a.clientY-r.clientY,a.clientX-r.clientX);if(this.lastAngle_!==void 0){var s=o-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=s}this.lastAngle_=o;var l=t.map,h=l.getView();if(h.getConstraints().rotation!==Zl){var f=l.getViewport().getBoundingClientRect(),d=au(this.targetPointers);d[0]-=f.left,d[1]-=f.top,this.anchor_=l.getCoordinateFromPixelInternal(d),this.rotating_&&(l.render(),h.adjustRotationInternal(i,this.anchor_))}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map,r=i.getView();return r.endInteraction(this.duration_),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}else return!1},e}(Or),Tm=Em,Cm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),wm=function(n){Cm(e,n);function e(t){var i=this,r=t||{},a=r;return a.stopDown||(a.stopDown=Fr),i=n.call(this,a)||this,i.anchor_=null,i.duration_=r.duration!==void 0?r.duration:400,i.lastDistance_=void 0,i.lastScaleDelta_=1,i}return e.prototype.handleDragEvent=function(t){var i=1,r=this.targetPointers[0],a=this.targetPointers[1],o=r.clientX-a.clientX,s=r.clientY-a.clientY,l=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(i=this.lastDistance_/l),this.lastDistance_=l;var h=t.map,f=h.getView();i!=1&&(this.lastScaleDelta_=i);var d=h.getViewport().getBoundingClientRect(),p=au(this.targetPointers);p[0]-=d.left,p[1]-=d.top,this.anchor_=h.getCoordinateFromPixelInternal(p),h.render(),f.adjustResolutionInternal(i,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var i=t.map,r=i.getView(),a=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,a),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}else return!1},e}(Or),Mm=wm,Om=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fc=function(n){Om(e,n);function e(t,i,r){var a=n.call(this)||this;if(r!==void 0&&i===void 0)a.setFlatCoordinates(r,t);else{var o=i||0;a.setCenterAndRadius(t,o,r)}return a}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){var o=this.flatCoordinates,s=t-o[0],l=i-o[1],h=s*s+l*l;if(h<a){if(h===0)for(var f=0;f<this.stride;++f)r[f]=o[f];else{var d=this.getRadius()/Math.sqrt(h);r[0]=o[0]+d*s,r[1]=o[1]+d*l;for(var f=2;f<this.stride;++f)r[f]=o[f]}return r.length=this.stride,h}else return a},e.prototype.containsXY=function(t,i){var r=this.flatCoordinates,a=t-r[0],o=i-r[1];return a*a+o*o<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var i=this.flatCoordinates,r=i[this.stride]-i[0];return Ti(i[0]-r,i[1]-r,i[0]+r,i[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],i=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+i*i},e.prototype.getType=function(){return V.CIRCLE},e.prototype.intersectsExtent=function(t){var i=this.getExtent();if(Ve(t,i)){var r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||t[1]<=r[1]&&t[3]>=r[1]?!0:ll(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var i=this.stride,r=this.flatCoordinates[i]-this.flatCoordinates[0],a=t.slice();a[i]=a[0]+r;for(var o=1;o<i;++o)a[i+o]=t[o];this.setFlatCoordinates(this.layout,a),this.changed()},e.prototype.setCenterAndRadius=function(t,i,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var a=this.flatCoordinates,o=Hh(a,0,t,this.stride);a[o++]=a[0]+i;for(var s=1,l=this.stride;s<l;++s)a[o++]=a[s];a.length=o,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,i){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,i){var r=this.getCenter(),a=this.getStride();this.setCenter(Tl(r,0,r.length,a,t,i,r)),this.changed()},e.prototype.translate=function(t,i){var r=this.getCenter(),a=this.getStride();this.setCenter($h(r,0,r.length,a,t,i,r)),this.changed()},e}(wn);fc.prototype.transform;var cc=fc,Sm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Rm=function(n){Sm(e,n);function e(t,i,r){var a=n.call(this)||this;if(a.ends_=[],a.maxDelta_=-1,a.maxDeltaRevision_=-1,Array.isArray(t[0]))a.setCoordinates(t,i);else if(i!==void 0&&r)a.setFlatCoordinates(i,t),a.ends_=r;else{for(var o=a.getLayout(),s=t,l=[],h=[],f=0,d=s.length;f<d;++f){var p=s[f];f===0&&(o=p.getLayout()),hi(l,p.getFlatCoordinates()),h.push(l.length)}a.setFlatCoordinates(o,l),a.ends_=h}return a}return e.prototype.appendLineString=function(t){this.flatCoordinates?hi(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){return a<ur(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wl(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ol(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,i,r,a))},e.prototype.getCoordinateAtM=function(t,i,r){if(this.layout!=ie.XYM&&this.layout!=ie.XYZM||this.flatCoordinates.length===0)return null;var a=i!==void 0?i:!1,o=r!==void 0?r:!1;return Tg(this.flatCoordinates,0,this.ends_,this.stride,t,a,o)},e.prototype.getCoordinates=function(){return Aa(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new On(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,i=this.ends_,r=this.layout,a=[],o=0,s=0,l=i.length;s<l;++s){var h=i[s],f=new On(t.slice(o,h),r);a.push(f),o=h}return a},e.prototype.getFlatMidpoints=function(){for(var t=[],i=this.flatCoordinates,r=0,a=this.ends_,o=this.stride,s=0,l=a.length;s<l;++s){var h=a[s],f=sf(i,r,h,o,.5);hi(t,f),r=h}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Jv(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,r),new e(i,ie.XY,r)},e.prototype.getType=function(){return V.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return ug(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Sl(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()},e}(wn),dc=Rm,Im=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Pm=function(n){Im(e,n);function e(t,i){var r=n.call(this)||this;return i&&!Array.isArray(t[0])?r.setFlatCoordinates(i,t):r.setCoordinates(t,i),r}return e.prototype.appendPoint=function(t){this.flatCoordinates?hi(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){if(a<ur(this.getExtent(),t,i))return a;for(var o=this.flatCoordinates,s=this.stride,l=0,h=o.length;l<h;l+=s){var f=cr(t,i,o[l],o[l+1]);if(f<a){a=f;for(var d=0;d<s;++d)r[d]=o[l+d];r.length=s}}return a},e.prototype.getCoordinates=function(){return Mn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var i=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||i<=t?null:new an(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,i=this.layout,r=this.stride,a=[],o=0,s=t.length;o<s;o+=r){var l=new an(t.slice(o,o+r),i);a.push(l)}return a},e.prototype.getType=function(){return V.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var i=this.flatCoordinates,r=this.stride,a=0,o=i.length;a<o;a+=r){var s=i[a],l=i[a+1];if(al(t,s,l))return!0}return!1},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(wn),cu=Pm;function bm(n,e,t,i){for(var r=[],a=ze(),o=0,s=t.length;o<s;++o){var l=t[o];a=Sh(n,e,l[0],i),r.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=l[l.length-1]}return r}var Lm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Am=function(n){Lm(e,n);function e(t,i,r){var a=n.call(this)||this;if(a.endss_=[],a.flatInteriorPointsRevision_=-1,a.flatInteriorPoints_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,!r&&!Array.isArray(t[0])){for(var o=a.getLayout(),s=t,l=[],h=[],f=0,d=s.length;f<d;++f){var p=s[f];f===0&&(o=p.getLayout());for(var y=l.length,m=p.getEnds(),x=0,C=m.length;x<C;++x)m[x]+=y;hi(l,p.getFlatCoordinates()),h.push(m)}i=o,t=l,r=h}return i!==void 0&&r?(a.setFlatCoordinates(i,t),a.endss_=r):a.setCoordinates(t,i),a}return e.prototype.appendPolygon=function(t){var i;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),i=t.getEnds().slice(),this.endss_.push();else{var r=this.flatCoordinates.length;hi(this.flatCoordinates,t.getFlatCoordinates()),i=t.getEnds().slice();for(var a=0,o=i.length;a<o;++a)i[a]+=r}this.endss_.push(i),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),r=0;r<t;++r)i[r]=this.endss_[r].slice();var a=new e(this.flatCoordinates.slice(),this.layout,i);return a.applyProperties(this),a},e.prototype.closestPointXY=function(t,i,r,a){return a<ur(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(qv(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Kv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,r,a))},e.prototype.containsXY=function(t,i){return sg(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,i)},e.prototype.getArea=function(){return eg(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),rf(i,0,this.endss_,this.stride,t)):i=this.flatCoordinates,Il(i,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=bm(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=lg(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new cu(this.getFlatInteriorPoints().slice(),ie.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;dg(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=rf(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=tg(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,r),new e(i,ie.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var i;if(t===0)i=0;else{var r=this.endss_[t-1];i=r[r.length-1]}var a=this.endss_[t].slice(),o=a[a.length-1];if(i!==0)for(var s=0,l=a.length;s<l;++s)a[s]-=i;return new mr(this.flatCoordinates.slice(i,o),this.layout,a)},e.prototype.getPolygons=function(){for(var t=this.layout,i=this.flatCoordinates,r=this.endss_,a=[],o=0,s=0,l=r.length;s<l;++s){var h=r[s].slice(),f=h[h.length-1];if(o!==0)for(var d=0,p=h.length;d<p;++d)h[d]-=o;var y=new mr(i.slice(o,f),t,h);a.push(y),o=f}return a},e.prototype.getType=function(){return V.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return fg(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=Zv(this.flatCoordinates,0,t,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{var a=r[r.length-1];this.flatCoordinates.length=a.length===0?0:a[a.length-1]}this.changed()},e}(wn),pc=Am,vc=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Nt={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},os={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},ss=function(n){vc(e,n);function e(t,i){var r=n.call(this,t)||this;return r.feature=i,r}return e}(ui),Nm=function(n){vc(e,n);function e(t){var i=this,r=t;r.stopDown||(r.stopDown=Fr),i=n.call(this,r)||this,i.on,i.once,i.un,i.shouldHandle_=!1,i.downPx_=null,i.downTimeout_,i.lastDragTime_,i.pointerType_,i.freehand_=!1,i.source_=t.source?t.source:null,i.features_=t.features?t.features:null,i.snapTolerance_=t.snapTolerance?t.snapTolerance:12,i.type_=t.type,i.mode_=Fm(i.type_),i.stopClick_=!!t.stopClick,i.minPoints_=t.minPoints?t.minPoints:i.mode_===Nt.POLYGON?3:2,i.maxPoints_=i.mode_===Nt.CIRCLE?2:t.maxPoints?t.maxPoints:1/0,i.finishCondition_=t.finishCondition?t.finishCondition:tn;var a=t.geometryFunction;if(!a){var o=i.mode_;if(o===Nt.CIRCLE)a=function(l,h,f){var d=h||new cc([NaN,NaN]),p=wi(l[0]),y=Nv(p,wi(l[l.length-1]));return d.setCenterAndRadius(p,Math.sqrt(y)),d};else{var s;o===Nt.POINT?s=an:o===Nt.LINE_STRING?s=On:o===Nt.POLYGON&&(s=mr),a=function(l,h,f){return h?o===Nt.POLYGON?l[0].length?h.setCoordinates([l[0].concat([l[0][0]])]):h.setCoordinates([]):h.setCoordinates(l):h=new s(l),h}}}return i.geometryFunction_=a,i.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,i.overlay_=new Wl({source:new Kf({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:Dm(),updateWhileInteracting:!0}),i.geometryName_=t.geometryName,i.condition_=t.condition?t.condition:su,i.freehandCondition_,t.freehand?i.freehandCondition_=oc:i.freehandCondition_=t.freehandCondition?t.freehandCondition:lu,i.addChangeListener(nu.ACTIVE,i.updateState_),i}return e.prototype.setMap=function(t){n.prototype.setMap.call(this,t),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(t){t.originalEvent.type===Et.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==Nt.POINT&&this.freehandCondition_(t);var i=t.type===bt.POINTERMOVE,r=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===bt.POINTERDRAG){var a=Date.now();a-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===bt.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),r=!1):this.freehand_&&t.type===bt.POINTERDOWN?r=!1:i&&this.getPointerCount()<2?(r=t.type===bt.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===bt.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===bt.DBLCLICK&&(r=!1),n.prototype.handleEvent.call(this,t)&&r},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new cn(bt.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var i=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var r=!this.finishCoordinate_;r&&this.startDrawing_(t.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||this.mode_===Nt.POINT)&&(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),i=!1}else this.freehand_&&this.abortDrawing();return!i&&this.stopClick_&&t.preventDefault(),i},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var i=this.downPx_,r=t.pixel,a=i[0]-r[0],o=i[1]-r[1],s=a*a+o*o;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},e.prototype.atFinish_=function(t){var i=!1;if(this.sketchFeature_){var r=!1,a=[this.finishCoordinate_],o=this.mode_;if(o===Nt.POINT)i=!0;else if(o===Nt.CIRCLE)i=this.sketchCoords_.length===2;else if(o===Nt.LINE_STRING)r=this.sketchCoords_.length>this.minPoints_;else if(o===Nt.POLYGON){var s=this.sketchCoords_;r=s[0].length>this.minPoints_,a=[s[0][0],s[0][s[0].length-2]]}if(r)for(var l=this.getMap(),h=0,f=a.length;h<f;h++){var d=a[h],p=l.getPixelFromCoordinate(d),y=t[0]-p[0],m=t[1]-p[1],x=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(y*y+m*m)<=x,i){this.finishCoordinate_=d;break}}}return i},e.prototype.createOrUpdateSketchPoint_=function(t){if(!this.sketchPoint_)this.sketchPoint_=new en(new an(t)),this.updateSketchFeatures_();else{var i=this.sketchPoint_.getGeometry();i.setCoordinates(t)}},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new en);var i=t.getLinearRing(0),r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(i.getLayout(),i.getFlatCoordinates()),r.changed()):(r=new On(i.getFlatCoordinates(),i.getLayout()),this.sketchLine_.setGeometry(r))},e.prototype.startDrawing_=function(t){var i=this.getMap().getView().getProjection();this.finishCoordinate_=t,this.mode_===Nt.POINT?this.sketchCoords_=t.slice():this.mode_===Nt.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new en(new On(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_,void 0,i);this.sketchFeature_=new en,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new ss(os.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var i=this.getMap(),r=this.sketchFeature_.getGeometry(),a=i.getView().getProjection(),o,s;if(this.mode_===Nt.POINT?s=this.sketchCoords_:this.mode_===Nt.POLYGON?(o=this.sketchCoords_[0],s=o[o.length-1],this.atFinish_(i.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(o=this.sketchCoords_,s=o[o.length-1]),s[0]=t[0],s[1]=t[1],this.geometryFunction_(this.sketchCoords_,r,a),this.sketchPoint_){var l=this.sketchPoint_.getGeometry();l.setCoordinates(t)}if(r.getType()===V.POLYGON&&this.mode_!==Nt.POLYGON)this.createOrUpdateCustomSketchLine_(r);else if(this.sketchLineCoords_){var h=this.sketchLine_.getGeometry();h.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var i=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),a,o,s=this.mode_;s===Nt.LINE_STRING||s===Nt.CIRCLE?(this.finishCoordinate_=t.slice(),o=this.sketchCoords_,o.length>=this.maxPoints_&&(this.freehand_?o.pop():a=!0),o.push(t.slice()),this.geometryFunction_(o,i,r)):s===Nt.POLYGON&&(o=this.sketchCoords_[0],o.length>=this.maxPoints_&&(this.freehand_?o.pop():a=!0),o.push(t.slice()),a&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,i,r)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),a&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(!!this.sketchFeature_){var t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r,a=this.mode_;if(a===Nt.LINE_STRING||a===Nt.CIRCLE){if(r=this.sketchCoords_,r.splice(-2,1),r.length>=2){this.finishCoordinate_=r[r.length-2].slice();var o=this.finishCoordinate_.slice();r[r.length-1]=o,this.createOrUpdateSketchPoint_(o)}this.geometryFunction_(r,t,i),t.getType()===V.POLYGON&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(a===Nt.POLYGON){r=this.sketchCoords_[0],r.splice(-2,1);var s=this.sketchLine_.getGeometry();if(r.length>=2){var o=r[r.length-2].slice();r[r.length-1]=o,this.createOrUpdateSketchPoint_(o)}s.setCoordinates(r),this.geometryFunction_(this.sketchCoords_,t,i)}r.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(!!t){var i=this.sketchCoords_,r=t.getGeometry(),a=this.getMap().getView().getProjection();this.mode_===Nt.LINE_STRING?(i.pop(),this.geometryFunction_(i,r,a)):this.mode_===Nt.POLYGON&&(i[0].pop(),this.geometryFunction_(i,r,a),i=r.getCoordinates()),this.type_===V.MULTI_POINT?t.setGeometry(new cu([i])):this.type_===V.MULTI_LINE_STRING?t.setGeometry(new dc([i])):this.type_===V.MULTI_POLYGON&&t.setGeometry(new pc([i])),this.dispatchEvent(new ss(os.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new ss(os.DRAWABORT,t))},e.prototype.appendCoordinates=function(t){var i=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(t[0]);var a;if(i===Nt.LINE_STRING||i===Nt.CIRCLE)a=this.sketchCoords_;else if(i===Nt.POLYGON)a=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&a.shift(),a.pop();for(var o=0;o<t.length;o++)this.addToDrawing_(t[o]);var s=t[t.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)},e.prototype.extend=function(t){var i=t.getGeometry(),r=i;this.sketchFeature_=t,this.sketchCoords_=r.getCoordinates();var a=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=a.slice(),this.sketchCoords_.push(a.slice()),this.sketchPoint_=new en(new an(a)),this.updateSketchFeatures_(),this.dispatchEvent(new ss(os.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var i=this.overlay_.getSource();i.clear(!0),i.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),i=this.getActive();(!t||!i)&&this.abortDrawing(),this.overlay_.setMap(i?t:null)},e}(Or);function Dm(){var n=Mf();return function(e,t){return n[e.getGeometry().getType()]}}function Fm(n){switch(n){case V.POINT:case V.MULTI_POINT:return Nt.POINT;case V.LINE_STRING:case V.MULTI_LINE_STRING:return Nt.LINE_STRING;case V.POLYGON:case V.MULTI_POLYGON:return Nt.POLYGON;case V.CIRCLE:return Nt.CIRCLE;default:throw new Error("Invalid type: "+n)}}var IM=Nm,gc=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),km={SELECT:"select"},Gm=function(n){gc(e,n);function e(t,i,r,a){var o=n.call(this,t)||this;return o.selected=i,o.deselected=r,o.mapBrowserEvent=a,o}return e}(ui),ls={},jm=function(n){gc(e,n);function e(t){var i=n.call(this)||this;i.on,i.once,i.un;var r=t||{};i.boundAddFeature_=i.addFeature_.bind(i),i.boundRemoveFeature_=i.removeFeature_.bind(i),i.condition_=r.condition?r.condition:q0,i.addCondition_=r.addCondition?r.addCondition:lc,i.removeCondition_=r.removeCondition?r.removeCondition:lc,i.toggleCondition_=r.toggleCondition?r.toggleCondition:lu,i.multi_=r.multi?r.multi:!1,i.filter_=r.filter?r.filter:tn,i.hitTolerance_=r.hitTolerance?r.hitTolerance:0,i.style_=r.style!==void 0?r.style:Bm(),i.features_=r.features||new Qe;var a;if(r.layers)if(typeof r.layers=="function")a=r.layers;else{var o=r.layers;a=function(s){return il(o,s)}}else a=tn;return i.layerFilter_=a,i.featureLayerAssociation_={},i}return e.prototype.addFeatureLayerAssociation_=function(t,i){this.featureLayerAssociation_[It(t)]=i},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[It(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(t){var i=this.getMap();i&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),n.prototype.setMap.call(this,t),t?(this.features_.addEventListener(pe.ADD,this.boundAddFeature_),this.features_.addEventListener(pe.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(pe.ADD,this.boundAddFeature_),this.features_.removeEventListener(pe.REMOVE,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var i=t.element;if(this.style_&&this.applySelectedStyle_(i),!this.getLayer(i)){var r=this.getMap().getAllLayers().find(function(a){if(a instanceof Wl&&a.getSource()&&a.getSource().hasFeature(i))return a});r&&this.addFeatureLayerAssociation_(i,r)}},e.prototype.removeFeature_=function(t){var i=t.element;this.style_&&this.restorePreviousStyle_(i)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var i=It(t);i in ls||(ls[i]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){for(var i=this.getMap().getInteractions().getArray(),r=i.length-1;r>=0;--r){var a=i[r];if(a!==this&&a instanceof e&&a.getStyle()&&a.getFeatures().getArray().lastIndexOf(t)!==-1){t.setStyle(a.getStyle());return}}var o=It(t);t.setStyle(ls[o]),delete ls[o]},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[It(t)]},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var i=this.addCondition_(t),r=this.removeCondition_(t),a=this.toggleCondition_(t),o=!i&&!r&&!a,s=t.map,l=this.getFeatures(),h=[],f=[];if(o){kr(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,function(x,C){if(this.filter_(x,C))return this.addFeatureLayerAssociation_(x,C),f.push(x),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var d=l.getLength()-1;d>=0;--d){var p=l.item(d),y=f.indexOf(p);y>-1?f.splice(y,1):(l.remove(p),h.push(p))}f.length!==0&&l.extend(f)}else{s.forEachFeatureAtPixel(t.pixel,function(x,C){if(this.filter_(x,C))return(i||a)&&!il(l.getArray(),x)?(this.addFeatureLayerAssociation_(x,C),f.push(x)):(r||a)&&il(l.getArray(),x)&&(h.push(x),this.removeFeatureLayerAssociation_(x)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var m=h.length-1;m>=0;--m)l.remove(h[m]);l.extend(f)}return(f.length>0||h.length>0)&&this.dispatchEvent(new Gm(km.SELECT,f,h,t)),!0},e}(dn);function Bm(){var n=Mf();return hi(n[V.POLYGON],n[V.LINE_STRING]),hi(n[V.GEOMETRY_COLLECTION],n[V.LINE_STRING]),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}var PM=jm;function Um(n){var e=n||{},t=new Qe,i=new D_(-.005,.05,100),r=e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0;r&&t.push(new im);var a=e.doubleClickZoom!==void 0?e.doubleClickZoom:!0;a&&t.push(new z0({delta:e.zoomDelta,duration:e.zoomDuration}));var o=e.dragPan!==void 0?e.dragPan:!0;o&&t.push(new Q0({onFocusOnly:e.onFocusOnly,kinetic:i}));var s=e.pinchRotate!==void 0?e.pinchRotate:!0;s&&t.push(new Tm);var l=e.pinchZoom!==void 0?e.pinchZoom:!0;l&&t.push(new Mm({duration:e.zoomDuration}));var h=e.keyboard!==void 0?e.keyboard:!0;h&&(t.push(new dm),t.push(new gm({delta:e.zoomDelta,duration:e.zoomDuration})));var f=e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0;f&&t.push(new mm({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration}));var d=e.shiftDragZoom!==void 0?e.shiftDragZoom:!0;return d&&t.push(new hm({duration:e.zoomDuration})),t}var $m=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),zm=function(n){$m(e,n);function e(t){var i=this;return t=Wt({},t),t.controls||(t.controls=k0()),t.interactions||(t.interactions=Um({onFocusOnly:!0})),i=n.call(this,t)||this,i}return e.prototype.createRenderer=function(){return new $_(this)},e}(m0),bM=zm,Vm=function(){function n(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return n.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},n.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},n.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},n.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},n.prototype.get=function(e,t){var i=this.entries_[e];return Mt(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_},n.prototype.remove=function(e){var t=this.entries_[e];return Mt(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},n.prototype.getCount=function(){return this.count_},n.prototype.getKeys=function(){var e=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e},n.prototype.getValues=function(){var e=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e},n.prototype.peekLast=function(){return this.oldest_.value_},n.prototype.peekLastKey=function(){return this.oldest_.key_},n.prototype.peekFirstKey=function(){return this.newest_.key_},n.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},n.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},n.prototype.set=function(e,t){Mt(!(e in this.entries_),16);var i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_},n.prototype.setSize=function(e){this.highWaterMark=e},n}(),Wm=Vm;function yc(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function us(n,e,t){return n+"/"+e+"/"+t}function _c(n){return us(n[0],n[1],n[2])}function Ym(n){return n.split("/").map(Number)}function du(n){return(n[1]<<n[0])+n[2]}function Hm(n,e){var t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;var a=e.getFullTileRange(t);return a?a.containsXY(i,r):!0}var Xm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),qm=function(n){Xm(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.expireCache=function(t){for(;this.canExpireCache();){var i=this.peekLast();if(i.getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var t=this.peekFirstKey(),i=Ym(t),r=i[0];this.forEach(function(a){a.tileCoord[0]!==r&&(this.remove(_c(a.tileCoord)),a.release())}.bind(this))}},e}(Wm),mc=qm,xc=function(){function n(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}return n.prototype.contains=function(e){return this.containsXY(e[1],e[2])},n.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},n.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},n.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},n.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},n.prototype.getHeight=function(){return this.maxY-this.minY+1},n.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},n.prototype.getWidth=function(){return this.maxX-this.minX+1},n.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},n}();function ea(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new xc(n,e,t,i)}var Ec=xc,Km=.5,pn=!0,pu={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Zm={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},Jm=function(){function n(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return n.prototype.getReadOptions=function(e,t){var i;if(t){var r=t.dataProjection?Vt(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()===$e.TILE_PIXELS&&(r=Vt(r),r.setWorldExtent(t.extent)),i={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(i)},n.prototype.adaptOptions=function(e){return Wt({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)},n.prototype.getType=function(){return dt()},n.prototype.readFeature=function(e,t){return dt()},n.prototype.readFeatures=function(e,t){return dt()},n.prototype.readGeometry=function(e,t){return dt()},n.prototype.readProjection=function(e){return dt()},n.prototype.writeFeature=function(e,t){return dt()},n.prototype.writeFeatures=function(e,t){return dt()},n.prototype.writeGeometry=function(e,t){return dt()},n}();function Tc(n,e,t){var i=t?Vt(t.featureProjection):null,r=t?Vt(t.dataProjection):null,a;if(i&&r&&!pr(i,r)?a=(e?n.clone():n).transform(e?i:r,e?r:i):a=n,e&&t&&t.decimals!==void 0){var o=Math.pow(10,t.decimals),s=function(l){for(var h=0,f=l.length;h<f;++h)l[h]=Math.round(l[h]*o)/o;return l};a===n&&(a=n.clone()),a.applyTransform(s)}return a}var Cc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function vu(n){if(n.__esModule)return n;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(t){var i=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,i.get?i:{enumerable:!0,get:function(){return n[t]}})}),e}var Qm=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),wc=function(n){Qm(e,n);function e(t){var i=n.call(this,t)||this;return i.extentChanged=!0,i.renderedExtent_=null,i.renderedPixelRatio,i.renderedProjection=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=ze(),i.tmpTileRange_=new Ec(0,0,0,0),i}return e.prototype.isDrawableTile=function(t){var i=this.getLayer(),r=t.getState(),a=i.getUseInterimTilesOnError();return r==mt.LOADED||r==mt.EMPTY||r==mt.ERROR&&!a},e.prototype.getTile=function(t,i,r,a){var o=a.pixelRatio,s=a.viewState.projection,l=this.getLayer(),h=l.getSource(),f=h.getTile(t,i,r,o,s);return f.getState()==mt.ERROR&&(l.getUseInterimTilesOnError()?l.getPreload()>0&&(this.newTiles_=!0):f.setState(mt.LOADED)),this.isDrawableTile(f)||(f=f.getInterimTile()),f},e.prototype.loadedTileCallback=function(t,i,r){return this.isDrawableTile(r)?n.prototype.loadedTileCallback.call(this,t,i,r):!1},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,i){var r=t.layerStatesArray[t.layerIndex],a=t.viewState,o=a.projection,s=a.resolution,l=a.center,h=a.rotation,f=t.pixelRatio,d=this.getLayer(),p=d.getSource(),y=p.getRevision(),m=p.getTileGridForProjection(o),x=m.getZForResolution(s,p.zDirection),C=m.getResolution(x),w=t.extent,S=r.extent&&vr(r.extent);S&&(w=Pa(w,vr(r.extent)));var R=p.getTilePixelRatio(f),I=Math.round(t.size[0]*R),F=Math.round(t.size[1]*R);if(h){var g=Math.round(Math.sqrt(I*I+F*F));I=g,F=g}var G=C*I/2/R,B=C*F/2/R,X=[l[0]-G,l[1]-B,l[0]+G,l[1]+B],Z=m.getTileRangeForExtentAndZ(w,x),et={};et[x]={};var K=this.createLoadedTileFinder(p,o,et),lt=this.tmpExtent,vt=this.tmpTileRange_;this.newTiles_=!1;for(var nt=Z.minX;nt<=Z.maxX;++nt)for(var yt=Z.minY;yt<=Z.maxY;++yt){var rt=this.getTile(x,nt,yt,t);if(this.isDrawableTile(rt)){var Rt=It(this);if(rt.getState()==mt.LOADED){et[x][rt.tileCoord.toString()]=rt;var wt=rt.inTransition(Rt);!this.newTiles_&&(wt||this.renderedTiles.indexOf(rt)===-1)&&(this.newTiles_=!0)}if(rt.getAlpha(Rt,t.time)===1)continue}var Lt=m.getTileCoordChildTileRange(rt.tileCoord,vt,lt),St=!1;Lt&&(St=K(x+1,Lt)),St||m.forEachTileCoordParentTileRange(rt.tileCoord,K,vt,lt)}var H=C/s;nn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/R,1/R,h,-I/2,-F/2);var Xt=wh(this.pixelTransform);this.useContainer(i,Xt,r.opacity,this.getBackground(t));var _t=this.context,Ut=_t.canvas;rl(this.inversePixelTransform,this.pixelTransform),nn(this.tempTransform,I/2,F/2,H,H,0,-I/2,-F/2),Ut.width!=I||Ut.height!=F?(Ut.width=I,Ut.height=F):this.containerReused||_t.clearRect(0,0,I,F),S&&this.clipUnrotated(_t,t,S),p.getInterpolate()||Wt(_t,pu),this.preRender(_t,t),this.renderedTiles.length=0;var le=Object.keys(et).map(Number);le.sort(or);var ae,Zt,Dt;r.opacity===1&&(!this.containerReused||p.getOpaque(t.viewState.projection))?le=le.reverse():(ae=[],Zt=[]);for(var ai=le.length-1;ai>=0;--ai){var Se=le[ai],Yi=p.getTilePixelSize(Se,f,o),Re=m.getResolution(Se),Fe=Re/C,oi=Yi[0]*Fe*H,st=Yi[1]*Fe*H,oe=m.getTileCoordForCoordAndZ(fr(X),Se),Lr=m.getTileCoordExtent(oe),Hi=ce(this.tempTransform,[R*(Lr[0]-X[0])/C,R*(X[3]-Lr[3])/C]),Vn=R*p.getGutterForProjection(o),Wn=et[Se];for(var Xi in Wn){var rt=Wn[Xi],ke=rt.tileCoord,Ee=oe[1]-ke[1],gi=Math.round(Hi[0]-(Ee-1)*oi),yi=oe[2]-ke[2],Yn=Math.round(Hi[1]-(yi-1)*st),nt=Math.round(Hi[0]-Ee*oi),yt=Math.round(Hi[1]-yi*st),Xe=gi-nt,si=Yn-yt,Ii=x===Se,wt=Ii&&rt.getAlpha(It(this),t.time)!==1;if(!wt)if(ae){_t.save(),Dt=[nt,yt,nt+Xe,yt,nt+Xe,yt+si,nt,yt+si];for(var yn=0,de=ae.length;yn<de;++yn)if(x!==Se&&Se<Zt[yn]){var ye=ae[yn];_t.beginPath(),_t.moveTo(Dt[0],Dt[1]),_t.lineTo(Dt[2],Dt[3]),_t.lineTo(Dt[4],Dt[5]),_t.lineTo(Dt[6],Dt[7]),_t.moveTo(ye[6],ye[7]),_t.lineTo(ye[4],ye[5]),_t.lineTo(ye[2],ye[3]),_t.lineTo(ye[0],ye[1]),_t.clip()}ae.push(Dt),Zt.push(Se)}else _t.clearRect(nt,yt,Xe,si);this.drawTileImage(rt,t,nt,yt,Xe,si,Vn,Ii),ae&&!wt?(_t.restore(),this.renderedTiles.unshift(rt)):this.renderedTiles.push(rt),this.updateUsedTiles(t.usedTiles,p,rt)}}this.renderedRevision=y,this.renderedResolution=C,this.extentChanged=!this.renderedExtent_||!Ra(this.renderedExtent_,X),this.renderedExtent_=X,this.renderedPixelRatio=f,this.renderedProjection=o,this.manageTilePyramid(t,p,m,f,o,w,x,d.getPreload()),this.scheduleExpireCache(t,p),this.postRender(_t,t),r.extent&&_t.restore(),Wt(_t,Zm),Xt!==Ut.style.transform&&(Ut.style.transform=Xt);var Pi=xf(r.opacity),qi=this.container;return Pi!==qi.style.opacity&&(qi.style.opacity=Pi),this.container},e.prototype.drawTileImage=function(t,i,r,a,o,s,l,h){var f=this.getTileImage(t);if(!!f){var d=It(this),p=h?t.getAlpha(d,i.time):1,y=p!==this.context.globalAlpha;y&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(f,l,l,f.width-2*l,f.height-2*l,r,a,o,s),y&&this.context.restore(),p!==1?i.animate=!0:h&&t.endTransition(d)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,i){if(i.canExpireCache()){var r=function(a,o,s){var l=It(a);l in s.usedTiles&&a.expireCache(s.viewState.projection,s.usedTiles[l])}.bind(null,i);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,i,r){var a=It(i);a in t||(t[a]={}),t[a][r.getKey()]=!0},e.prototype.manageTilePyramid=function(t,i,r,a,o,s,l,h,f){var d=It(i);d in t.wantedTiles||(t.wantedTiles[d]={});var p=t.wantedTiles[d],y=t.tileQueue,m=r.getMinZoom(),x=0,C,w,S,R,I,F;for(F=m;F<=l;++F)for(w=r.getTileRangeForExtentAndZ(s,F,w),S=r.getResolution(F),R=w.minX;R<=w.maxX;++R)for(I=w.minY;I<=w.maxY;++I)l-F<=h?(++x,C=i.getTile(F,R,I,a,o),C.getState()==mt.IDLE&&(p[C.getKey()]=!0,y.isKeyQueued(C.getKey())||y.enqueue([C,d,r.getTileCoordCenter(C.tileCoord),S])),f!==void 0&&f(C)):i.useTile(F,R,I,o);i.updateCacheSize(x,o)},e}(kf);wc.prototype.getLayer;var t1=wc,hs={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},gu={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},e1=[0,0,0],An=5,i1=function(){function n(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Mt(Bp(this.resolutions_,function(o,s){return s-o},!0),17);var t;if(!e.origins){for(var i=0,r=this.resolutions_.length-1;i<r;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Mt(this.origins_.length==this.resolutions_.length,20));var a=e.extent;a!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=fr(a)),Mt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Mt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Xl,Mt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=a!==void 0?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(o,s){var l=new Ec(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(a){var h=this.getTileRangeForExtentAndZ(a,s);l.minX=Math.max(h.minX,l.minX),l.maxX=Math.min(h.maxX,l.maxX),l.minY=Math.max(h.minY,l.minY),l.maxY=Math.min(h.maxY,l.maxY)}return l},this):a&&this.calculateTileRanges_(a)}return n.prototype.forEachTileCoord=function(e,t,i){for(var r=this.getTileRangeForExtentAndZ(e,t),a=r.minX,o=r.maxX;a<=o;++a)for(var s=r.minY,l=r.maxY;s<=l;++s)i([t,a,s])},n.prototype.forEachTileCoordParentTileRange=function(e,t,i,r){var a,o,s,l=null,h=e[0]-1;for(this.zoomFactor_===2?(o=e[1],s=e[2]):l=this.getTileCoordExtent(e,r);h>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),s=Math.floor(s/2),a=ea(o,o,s,s,i)):a=this.getTileRangeForExtentAndZ(l,h,i),t(h,a))return!0;--h}return!1},n.prototype.getExtent=function(){return this.extent_},n.prototype.getMaxZoom=function(){return this.maxZoom},n.prototype.getMinZoom=function(){return this.minZoom},n.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},n.prototype.getResolution=function(e){return this.resolutions_[e]},n.prototype.getResolutions=function(){return this.resolutions_},n.prototype.getTileCoordChildTileRange=function(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var r=e[1]*2,a=e[2]*2;return ea(r,r+1,a,a+1,t)}var o=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e[0]+1,t)}return null},n.prototype.getTileRangeForTileCoordAndZ=function(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;var r=e[0],a=e[1],o=e[2];if(t===r)return ea(a,o,a,o,i);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,t-r),l=Math.floor(a*s),h=Math.floor(o*s);if(t<r)return ea(l,l,h,h,i);var f=Math.floor(s*(a+1))-1,d=Math.floor(s*(o+1))-1;return ea(l,f,h,d,i)}var p=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(p,t,i)},n.prototype.getTileRangeExtent=function(e,t,i){var r=this.getOrigin(e),a=this.getResolution(e),o=ti(this.getTileSize(e),this.tmpSize_),s=r[0]+t.minX*o[0]*a,l=r[0]+(t.maxX+1)*o[0]*a,h=r[1]+t.minY*o[1]*a,f=r[1]+(t.maxY+1)*o[1]*a;return Ti(s,h,l,f,i)},n.prototype.getTileRangeForExtentAndZ=function(e,t,i){var r=e1;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);var a=r[1],o=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),ea(a,r[1],o,r[2],i)},n.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=ti(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]},n.prototype.getTileCoordExtent=function(e,t){var i=this.getOrigin(e[0]),r=this.getResolution(e[0]),a=ti(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*a[0]*r,s=i[1]-(e[2]+1)*a[1]*r,l=o+a[0]*r,h=s+a[1]*r;return Ti(o,s,l,h,t)},n.prototype.getTileCoordForCoordAndResolution=function(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)},n.prototype.getTileCoordForXYAndResolution_=function(e,t,i,r,a){var o=this.getZForResolution(i),s=i/this.getResolution(o),l=this.getOrigin(o),h=ti(this.getTileSize(o),this.tmpSize_),f=s*(e-l[0])/i/h[0],d=s*(l[1]-t)/i/h[1];return r?(f=Ao(f,An)-1,d=Ao(d,An)-1):(f=Lo(f,An),d=Lo(d,An)),yc(o,f,d,a)},n.prototype.getTileCoordForXYAndZ_=function(e,t,i,r,a){var o=this.getOrigin(i),s=this.getResolution(i),l=ti(this.getTileSize(i),this.tmpSize_),h=(e-o[0])/s/l[0],f=(o[1]-t)/s/l[1];return r?(h=Ao(h,An)-1,f=Ao(f,An)-1):(h=Lo(h,An),f=Lo(f,An)),yc(i,h,f,a)},n.prototype.getTileCoordForCoordAndZ=function(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)},n.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},n.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},n.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},n.prototype.getZForResolution=function(e,t){var i=nl(this.resolutions_,e,t||0);return ne(i,this.minZoom,this.maxZoom)},n.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,i=new Array(t),r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i},n}(),Mc=i1;function Oc(n){var e=n.getDefaultTileGrid();return e||(e=o1(n),n.setDefaultTileGrid(e)),e}function n1(n,e,t){var i=e[0],r=n.getTileCoordCenter(e),a=yu(t);if(Oa(a,r))return e;var o=Kt(a),s=Math.ceil((a[0]-r[0])/o);return r[0]+=o*s,n.getTileCoordForCoordAndZ(r,i)}function r1(n,e,t,i){var r=i!==void 0?i:wa.TOP_LEFT,a=Sc(n,e,t);return new Mc({extent:n,origin:lv(n,r),resolutions:a,tileSize:t})}function a1(n){var e=n||{},t=e.extent||Vt("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Sc(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Mc(i)}function Sc(n,e,t,i){for(var r=e!==void 0?e:r0,a=Ci(n),o=Kt(n),s=ti(t!==void 0?t:Xl),l=i>0?i:Math.max(o/s[0],a/s[1]),h=r+1,f=new Array(h),d=0;d<h;++d)f[d]=l/Math.pow(2,d);return f}function o1(n,e,t,i){var r=yu(n);return r1(r,e,t,i)}function yu(n){n=Vt(n);var e=n.getExtent();if(!e){var t=180*Ei[$e.DEGREES]/n.getMetersPerUnit();e=Ti(-t,-t,t,t)}return e}var Rc=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),s1=function(n){Rc(e,n);function e(t){var i=n.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate})||this;i.on,i.once,i.un,i.opaque_=t.opaque!==void 0?t.opaque:!1,i.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,i.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;var r=[256,256],a=t.tileGrid;return a&&ti(a.getTileSize(a.getMinZoom()),r),i.tileCache=new mc(t.cacheSize||0),i.tmpSize=[0,0],i.key_=t.key||"",i.tileOptions={transition:t.transition,interpolate:t.interpolate},i.zDirection=t.zDirection?t.zDirection:0,i}return e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,i){var r=this.getTileCacheForProjection(t);r&&r.expireCache(i)},e.prototype.forEachLoadedTile=function(t,i,r,a){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var s=!0,l,h,f,d=r.minX;d<=r.maxX;++d)for(var p=r.minY;p<=r.maxY;++p)h=us(i,d,p),f=!1,o.containsKey(h)&&(l=o.get(h),f=l.getState()===mt.LOADED,f&&(f=a(l)!==!1)),f||(s=!1);return s},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,i,r,a,o){return dt()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Oc(t)},e.prototype.getTileCacheForProjection=function(t){return Mt(pr(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,i,r){var a=this.getTileGridForProjection(r),o=this.getTilePixelRatio(i),s=ti(a.getTileSize(t),this.tmpSize);return o==1?s:Al(s,o,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,i){var r=i!==void 0?i:this.getProjection(),a=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=n1(a,t,r)),Hm(t,a)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),n.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,i){var r=this.getTileCacheForProjection(i);t>r.highWaterMark&&(r.highWaterMark=t)},e.prototype.useTile=function(t,i,r,a){},e}(Hf),l1=function(n){Rc(e,n);function e(t,i){var r=n.call(this,t)||this;return r.tile=i,r}return e}(ui),u1=s1;function h1(n,e){var t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,a=/\{-y\}/g;return function(o,s,l){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(a,function(){var h=o[0],f=e.getFullTileRange(h);Mt(f,55);var d=f.getHeight()-o[2]-1;return d.toString()})}}function f1(n,e){for(var t=n.length,i=new Array(t),r=0;r<t;++r)i[r]=h1(n[r],e);return c1(i)}function c1(n){return n.length===1?n[0]:function(e,t,i){if(e){var r=du(e),a=Ni(r,n.length);return n[a](e,t,i)}else return}}function d1(n){var e=[],t=/\{([a-z])-([a-z])\}/.exec(n);if(t){var i=t[1].charCodeAt(0),r=t[2].charCodeAt(0),a=void 0;for(a=i;a<=r;++a)e.push(n.replace(t[0],String.fromCharCode(a)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){for(var o=parseInt(t[2],10),s=parseInt(t[1],10);s<=o;s++)e.push(n.replace(t[0],s.toString()));return e}return e.push(n),e}var p1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),v1=function(n){p1(e,n);function e(t){var i=n.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return i.generateTileUrlFunction_=i.tileUrlFunction===e.prototype.tileUrlFunction,i.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(i.tileUrlFunction=t.tileUrlFunction),i.urls=null,t.urls?i.setUrls(t.urls):t.url&&i.setUrl(t.url),i.tileLoadingKeys_={},i}return e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var i=t.target,r=It(i),a=i.getState(),o;a==mt.LOADING?(this.tileLoadingKeys_[r]=!0,o=gu.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=a==mt.ERROR?gu.TILELOADERROR:a==mt.LOADED?gu.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new l1(o,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,i){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof i!="undefined"?this.setKey(i):this.changed()},e.prototype.setUrl=function(t){var i=d1(t);this.urls=i,this.setUrls(i)},e.prototype.setUrls=function(t){this.urls=t;var i=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(f1(t,this.tileGrid),i):this.setKey(i)},e.prototype.tileUrlFunction=function(t,i,r){},e.prototype.useTile=function(t,i,r){var a=us(t,i,r);this.tileCache.containsKey(a)&&this.tileCache.get(a)},e}(u1),g1=v1,y1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_1=function(n){y1(e,n);function e(t){var i=n.call(this)||this;return i.geometries_=t||null,i.changeEventsKeys_=[],i.listenGeometriesChange_(),i}return e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(Yt),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(!!this.geometries_)for(var t=0,i=this.geometries_.length;t<i;++t)this.changeEventsKeys_.push(Pt(this.geometries_[t],Et.CHANGE,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},e.prototype.closestPointXY=function(t,i,r,a){if(a<ur(this.getExtent(),t,i))return a;for(var o=this.geometries_,s=0,l=o.length;s<l;++s)a=o[s].closestPointXY(t,i,r,a);return a},e.prototype.containsXY=function(t,i){for(var r=this.geometries_,a=0,o=r.length;a<o;++a)if(r[a].containsXY(t,i))return!0;return!1},e.prototype.computeExtent=function(t){Sa(t);for(var i=this.geometries_,r=0,a=i.length;r<a;++r)Rh(t,i[r].getExtent());return t},e.prototype.getGeometries=function(){return Ic(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],i=this.geometries_,r=0,a=i.length;r<a;++r)i[r].getType()===this.getType()?t=t.concat(i[r].getGeometriesArrayRecursive()):t.push(i[r]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var i=[],r=this.geometries_,a=!1,o=0,s=r.length;o<s;++o){var l=r[o],h=l.getSimplifiedGeometry(t);i.push(h),h!==l&&(a=!0)}if(a){var f=new e(null);return f.setGeometriesArray(i),f}else return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return V.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var i=this.geometries_,r=0,a=i.length;r<a;++r)if(i[r].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return this.geometries_.length===0},e.prototype.rotate=function(t,i){for(var r=this.geometries_,a=0,o=r.length;a<o;++a)r[a].rotate(t,i);this.changed()},e.prototype.scale=function(t,i,r){var a=r;a||(a=hr(this.getExtent()));for(var o=this.geometries_,s=0,l=o.length;s<l;++s)o[s].scale(t,i,a);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(Ic(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var i=this.geometries_,r=0,a=i.length;r<a;++r)i[r].applyTransform(t);this.changed()},e.prototype.translate=function(t,i){for(var r=this.geometries_,a=0,o=r.length;a<o;++a)r[a].translate(t,i);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),n.prototype.disposeInternal.call(this)},e}(Vh);function Ic(n){for(var e=[],t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}var m1=_1,x1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),E1=function(n){x1(e,n);function e(){return n.call(this)||this}return e.prototype.getType=function(){return Qr.JSON},e.prototype.readFeature=function(t,i){return this.readFeatureFromObject(fs(t),this.getReadOptions(t,i))},e.prototype.readFeatures=function(t,i){return this.readFeaturesFromObject(fs(t),this.getReadOptions(t,i))},e.prototype.readFeatureFromObject=function(t,i){return dt()},e.prototype.readFeaturesFromObject=function(t,i){return dt()},e.prototype.readGeometry=function(t,i){return this.readGeometryFromObject(fs(t),this.getReadOptions(t,i))},e.prototype.readGeometryFromObject=function(t,i){return dt()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(fs(t))},e.prototype.readProjectionFromObject=function(t){return dt()},e.prototype.writeFeature=function(t,i){return JSON.stringify(this.writeFeatureObject(t,i))},e.prototype.writeFeatureObject=function(t,i){return dt()},e.prototype.writeFeatures=function(t,i){return JSON.stringify(this.writeFeaturesObject(t,i))},e.prototype.writeFeaturesObject=function(t,i){return dt()},e.prototype.writeGeometry=function(t,i){return JSON.stringify(this.writeGeometryObject(t,i))},e.prototype.writeGeometryObject=function(t,i){return dt()},e}(Jm);function fs(n){if(typeof n=="string"){var e=JSON.parse(n);return e||null}else return n!==null?n:null}var T1=E1,C1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),w1=function(n){C1(e,n);function e(t){var i=this,r=t||{};return i=n.call(this)||this,i.dataProjection=Vt(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(i.defaultFeatureProjection=Vt(r.featureProjection)),i.geometryName_=r.geometryName,i.extractGeometryName_=r.extractGeometryName,i.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],i}return e.prototype.readFeatureFromObject=function(t,i){var r=null;t.type==="Feature"?r=t:r={type:"Feature",geometry:t,properties:null};var a=_u(r.geometry,i),o=new en;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&o.setGeometryName(r.geometry_name),o.setGeometry(a),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties,!0),o},e.prototype.readFeaturesFromObject=function(t,i){var r=t,a=null;if(r.type==="FeatureCollection"){var o=t;a=[];for(var s=o.features,l=0,h=s.length;l<h;++l)a.push(this.readFeatureFromObject(s[l],i))}else a=[this.readFeatureFromObject(t,i)];return a},e.prototype.readGeometryFromObject=function(t,i){return _u(t,i)},e.prototype.readProjectionFromObject=function(t){var i=t.crs,r;return i?i.type=="name"?r=Vt(i.properties.name):i.type==="EPSG"?r=Vt("EPSG:"+i.properties.code):Mt(!1,36):r=this.dataProjection,r},e.prototype.writeFeatureObject=function(t,i){i=this.adaptOptions(i);var r={type:"Feature",geometry:null,properties:null},a=t.getId();if(a!==void 0&&(r.id=a),!t.hasProperties())return r;var o=t.getProperties(),s=t.getGeometry();return s&&(r.geometry=mu(s,i),delete o[t.getGeometryName()]),Gr(o)||(r.properties=o),r},e.prototype.writeFeaturesObject=function(t,i){i=this.adaptOptions(i);for(var r=[],a=0,o=t.length;a<o;++a)r.push(this.writeFeatureObject(t[a],i));return{type:"FeatureCollection",features:r}},e.prototype.writeGeometryObject=function(t,i){return mu(t,this.adaptOptions(i))},e}(T1);function _u(n,e){if(!n)return null;var t;switch(n.type){case V.POINT:{t=O1(n);break}case V.LINE_STRING:{t=S1(n);break}case V.POLYGON:{t=b1(n);break}case V.MULTI_POINT:{t=I1(n);break}case V.MULTI_LINE_STRING:{t=R1(n);break}case V.MULTI_POLYGON:{t=P1(n);break}case V.GEOMETRY_COLLECTION:{t=M1(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return Tc(t,!1,e)}function M1(n,e){var t=n.geometries.map(function(i){return _u(i,e)});return new m1(t)}function O1(n){return new an(n.coordinates)}function S1(n){return new On(n.coordinates)}function R1(n){return new dc(n.coordinates)}function I1(n){return new cu(n.coordinates)}function P1(n){return new pc(n.coordinates)}function b1(n){return new mr(n.coordinates)}function mu(n,e){n=Tc(n,!0,e);var t=n.getType(),i;switch(t){case V.POINT:{i=k1(n);break}case V.LINE_STRING:{i=A1(n);break}case V.POLYGON:{i=G1(n,e);break}case V.MULTI_POINT:{i=D1(n);break}case V.MULTI_LINE_STRING:{i=N1(n);break}case V.MULTI_POLYGON:{i=F1(n,e);break}case V.GEOMETRY_COLLECTION:{i=L1(n,e);break}case V.CIRCLE:{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function L1(n,e){var t=n.getGeometriesArray().map(function(i){var r=Wt({},e);return delete r.featureProjection,mu(i,r)});return{type:"GeometryCollection",geometries:t}}function A1(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function N1(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function D1(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function F1(n,e){var t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function k1(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function G1(n,e){var t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}var LM=w1,j1=10,Pc=.25,B1=function(){function n(e,t,i,r,a,o){this.sourceProj_=e,this.targetProj_=t;var s={},l=La(this.targetProj_,this.sourceProj_);this.transformInv_=function(R){var I=R[0]+"/"+R[1];return s[I]||(s[I]=l(R)),s[I]},this.maxSourceExtent_=r,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Kt(r)==Kt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Kt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Kt(this.targetProj_.getExtent()):null;var h=fr(i),f=bo(i),d=Po(i),p=Io(i),y=this.transformInv_(h),m=this.transformInv_(f),x=this.transformInv_(d),C=this.transformInv_(p),w=j1+(o?Math.max(0,Math.ceil(vv(ul(i)/(o*o*256*256)))):0);if(this.addQuad_(h,f,d,p,y,m,x,C,w),this.wrapsXInSource_){var S=1/0;this.triangles_.forEach(function(R,I,F){S=Math.min(S,R.source[0][0],R.source[1][0],R.source[2][0])}),this.triangles_.forEach(function(R){if(Math.max(R.source[0][0],R.source[1][0],R.source[2][0])-S>this.sourceWorldWidth_/2){var I=[[R.source[0][0],R.source[0][1]],[R.source[1][0],R.source[1][1]],[R.source[2][0],R.source[2][1]]];I[0][0]-S>this.sourceWorldWidth_/2&&(I[0][0]-=this.sourceWorldWidth_),I[1][0]-S>this.sourceWorldWidth_/2&&(I[1][0]-=this.sourceWorldWidth_),I[2][0]-S>this.sourceWorldWidth_/2&&(I[2][0]-=this.sourceWorldWidth_);var F=Math.min(I[0][0],I[1][0],I[2][0]),g=Math.max(I[0][0],I[1][0],I[2][0]);g-F<this.sourceWorldWidth_/2&&(R.source=I)}}.bind(this))}s={}}return n.prototype.addTriangle_=function(e,t,i,r,a,o){this.triangles_.push({source:[r,a,o],target:[e,t,i]})},n.prototype.addQuad_=function(e,t,i,r,a,o,s,l,h){var f=Mh([a,o,s,l]),d=this.sourceWorldWidth_?Kt(f)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,y=this.sourceProj_.canWrapX()&&d>.5&&d<1,m=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var x=Mh([e,t,i,r]),C=Kt(x)/this.targetWorldWidth_;m=C>Pc||m}!y&&this.sourceProj_.isGlobal()&&d&&(m=d>Pc||m)}if(!(!m&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!Ve(f,this.maxSourceExtent_))){var w=0;if(!m&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1]))){if(h>0)m=!0;else if(w=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(s[0])||!isFinite(s[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(h>0){if(!m){var S=[(e[0]+i[0])/2,(e[1]+i[1])/2],R=this.transformInv_(S),I=void 0;if(y){var F=(Ni(a[0],p)+Ni(s[0],p))/2;I=F-Ni(R[0],p)}else I=(a[0]+s[0])/2-R[0];var g=(a[1]+s[1])/2-R[1],G=I*I+g*g;m=G>this.errorThresholdSquared_}if(m){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){var B=[(t[0]+i[0])/2,(t[1]+i[1])/2],X=this.transformInv_(B),Z=[(r[0]+e[0])/2,(r[1]+e[1])/2],et=this.transformInv_(Z);this.addQuad_(e,t,B,Z,a,o,X,et,h-1),this.addQuad_(Z,B,i,r,et,X,s,l,h-1)}else{var K=[(e[0]+t[0])/2,(e[1]+t[1])/2],lt=this.transformInv_(K),vt=[(i[0]+r[0])/2,(i[1]+r[1])/2],nt=this.transformInv_(vt);this.addQuad_(e,K,vt,r,a,lt,nt,l,h-1),this.addQuad_(K,t,i,vt,lt,o,s,nt,h-1)}return}}if(y){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(w&11)==0&&this.addTriangle_(e,i,r,a,s,l),(w&14)==0&&this.addTriangle_(e,i,t,a,s,o),w&&((w&13)==0&&this.addTriangle_(t,r,e,o,l,a),(w&7)==0&&this.addTriangle_(t,r,i,o,l,s))}},n.prototype.calculateSourceExtent=function(){var e=ze();return this.triangles_.forEach(function(t,i,r){var a=t.source;Ia(e,a[0]),Ia(e,a[1]),Ia(e,a[2])}),e},n.prototype.getTriangles=function(){return this.triangles_},n}(),U1=B1,xu;function bc(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function Eu(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function $1(){if(xu===void 0){var n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",bc(n,4,5,4,0),bc(n,4,5,0,5);var e=n.getImageData(0,0,3,3).data;xu=Eu(e,0)||Eu(e,4)||Eu(e,8)}return xu}function Tu(n,e,t,i){var r=Cn(t,e,n),a=Go(e,i,t),o=e.getMetersPerUnit();o!==void 0&&(a*=o);var s=n.getMetersPerUnit();s!==void 0&&(a/=s);var l=n.getExtent();if(!l||Oa(l,r)){var h=Go(n,a,r)/a;isFinite(h)&&h>0&&(a/=h)}return a}function z1(n,e,t,i){var r=hr(t),a=Tu(n,e,r,i);return(!isFinite(a)||a<=0)&&ll(t,function(o){return a=Tu(n,e,o,i),isFinite(a)&&a>0}),a}function V1(n,e,t,i,r,a,o,s,l,h,f,d){var p=fi(Math.round(t*n),Math.round(t*e));if(d||Wt(p,pu),l.length===0)return p.canvas;p.scale(t,t);function y(I){return Math.round(I*t)/t}p.globalCompositeOperation="lighter";var m=ze();l.forEach(function(I,F,g){Rh(m,I.extent)});var x=Kt(m),C=Ci(m),w=fi(Math.round(t*x/i),Math.round(t*C/i));d||Wt(w,pu);var S=t/i;l.forEach(function(I,F,g){var G=I.extent[0]-m[0],B=-(I.extent[3]-m[3]),X=Kt(I.extent),Z=Ci(I.extent);I.image.width>0&&I.image.height>0&&w.drawImage(I.image,h,h,I.image.width-2*h,I.image.height-2*h,G*S,B*S,X*S,Z*S)});var R=fr(o);return s.getTriangles().forEach(function(I,F,g){var G=I.source,B=I.target,X=G[0][0],Z=G[0][1],et=G[1][0],K=G[1][1],lt=G[2][0],vt=G[2][1],nt=y((B[0][0]-R[0])/a),yt=y(-(B[0][1]-R[1])/a),rt=y((B[1][0]-R[0])/a),Rt=y(-(B[1][1]-R[1])/a),wt=y((B[2][0]-R[0])/a),Lt=y(-(B[2][1]-R[1])/a),St=X,H=Z;X=0,Z=0,et-=St,K-=H,lt-=St,vt-=H;var Xt=[[et,K,0,0,rt-nt],[lt,vt,0,0,wt-nt],[0,0,et,K,Rt-yt],[0,0,lt,vt,Lt-yt]],_t=yv(Xt);if(!!_t){if(p.save(),p.beginPath(),$1()||!d){p.moveTo(rt,Rt);for(var Ut=4,le=nt-rt,ae=yt-Rt,Zt=0;Zt<Ut;Zt++)p.lineTo(rt+y((Zt+1)*le/Ut),Rt+y(Zt*ae/(Ut-1))),Zt!=Ut-1&&p.lineTo(rt+y((Zt+1)*le/Ut),Rt+y((Zt+1)*ae/(Ut-1)));p.lineTo(wt,Lt)}else p.moveTo(rt,Rt),p.lineTo(nt,yt),p.lineTo(wt,Lt);p.clip(),p.transform(_t[0],_t[2],_t[1],_t[3],nt,yt),p.translate(m[0]-St,m[3]-H),p.scale(i/t,-i/t),p.drawImage(w.canvas,0,0),p.restore()}}),f&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,s.getTriangles().forEach(function(I,F,g){var G=I.target,B=(G[0][0]-R[0])/a,X=-(G[0][1]-R[1])/a,Z=(G[1][0]-R[0])/a,et=-(G[1][1]-R[1])/a,K=(G[2][0]-R[0])/a,lt=-(G[2][1]-R[1])/a;p.beginPath(),p.moveTo(Z,et),p.lineTo(B,X),p.lineTo(K,lt),p.closePath(),p.stroke()}),p.restore()),p.canvas}var W1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Y1=function(n){W1(e,n);function e(t,i,r,a,o,s,l,h,f,d,p,y){var m=n.call(this,o,mt.IDLE,{interpolate:!!y})||this;m.renderEdges_=p!==void 0?p:!1,m.pixelRatio_=l,m.gutter_=h,m.canvas_=null,m.sourceTileGrid_=i,m.targetTileGrid_=a,m.wrappedTileCoord_=s||o,m.sourceTiles_=[],m.sourcesListenerKeys_=null,m.sourceZ_=0;var x=a.getTileCoordExtent(m.wrappedTileCoord_),C=m.targetTileGrid_.getExtent(),w=m.sourceTileGrid_.getExtent(),S=C?Pa(x,C):x;if(ul(S)===0)return m.state=mt.EMPTY,m;var R=t.getExtent();R&&(w?w=Pa(w,R):w=R);var I=a.getResolution(m.wrappedTileCoord_[0]),F=z1(t,r,S,I);if(!isFinite(F)||F<=0)return m.state=mt.EMPTY,m;var g=d!==void 0?d:Km;if(m.triangulation_=new U1(t,r,S,w,F*g,I),m.triangulation_.getTriangles().length===0)return m.state=mt.EMPTY,m;m.sourceZ_=i.getZForResolution(F);var G=m.triangulation_.calculateSourceExtent();if(w&&(t.canWrapX()?(G[1]=ne(G[1],w[1],w[3]),G[3]=ne(G[3],w[1],w[3])):G=Pa(G,w)),!ul(G))m.state=mt.EMPTY;else{for(var B=i.getTileRangeForExtentAndZ(G,m.sourceZ_),X=B.minX;X<=B.maxX;X++)for(var Z=B.minY;Z<=B.maxY;Z++){var et=f(m.sourceZ_,X,Z,l);et&&m.sourceTiles_.push(et)}m.sourceTiles_.length===0&&(m.state=mt.EMPTY)}return m}return e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(f,d,p){f&&f.getState()==mt.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(f.tileCoord),image:f.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=mt.ERROR;else{var i=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(i),a=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],s=this.targetTileGrid_.getResolution(i),l=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=V1(a,o,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),s,h,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=mt.LOADED}this.changed()},e.prototype.load=function(){if(this.state==mt.IDLE){this.state=mt.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i,r,a){var o=i.getState();if(o==mt.IDLE||o==mt.LOADING){t++;var s=Pt(i,Et.CHANGE,function(l){var h=i.getState();(h==mt.LOADED||h==mt.ERROR||h==mt.EMPTY)&&(Yt(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(i,r,a){var o=i.getState();o==mt.IDLE&&i.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Yt),this.sourcesListenerKeys_=null},e}(Jf),H1=Y1,X1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),q1=function(n){X1(e,n);function e(t){var i=this,r=t.imageSmoothing!==void 0?t.imageSmoothing:!0;return t.interpolate!==void 0&&(r=t.interpolate),i=n.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:K1,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:r,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this,i.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,i.tileClass=t.tileClass!==void 0?t.tileClass:A_,i.tileCacheForProjection={},i.tileGridForProjection={},i.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,i.renderReprojectionEdges_=!1,i}return e.prototype.canExpireCache=function(){if(!pn)return n.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,i){if(!pn){n.prototype.expireCache.call(this,t,i);return}var r=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==r?i:{});for(var a in this.tileCacheForProjection){var o=this.tileCacheForProjection[a];o.expireCache(o==r?i:{})}},e.prototype.getGutterForProjection=function(t){return pn&&this.getProjection()&&t&&!pr(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var t=n.prototype.getKey.call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t},e.prototype.getOpaque=function(t){return pn&&this.getProjection()&&t&&!pr(this.getProjection(),t)?!1:n.prototype.getOpaque.call(this,t)},e.prototype.getTileGridForProjection=function(t){if(!pn)return n.prototype.getTileGridForProjection.call(this,t);var i=this.getProjection();if(this.tileGrid&&(!i||pr(i,t)))return this.tileGrid;var r=It(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Oc(t)),this.tileGridForProjection[r]},e.prototype.getTileCacheForProjection=function(t){if(!pn)return n.prototype.getTileCacheForProjection.call(this,t);var i=this.getProjection();if(!i||pr(i,t))return this.tileCache;var r=It(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new mc(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},e.prototype.createTile_=function(t,i,r,a,o,s){var l=[t,i,r],h=this.getTileCoordForTileUrlFunction(l,o),f=h?this.tileUrlFunction(h,a,o):void 0,d=new this.tileClass(l,f!==void 0?mt.IDLE:mt.EMPTY,f!==void 0?f:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=s,d.addEventListener(Et.CHANGE,this.handleTileChange.bind(this)),d},e.prototype.getTile=function(t,i,r,a,o){var s=this.getProjection();if(!pn||!s||!o||pr(s,o))return this.getTileInternal(t,i,r,a,s||o);var l=this.getTileCacheForProjection(o),h=[t,i,r],f=void 0,d=_c(h);l.containsKey(d)&&(f=l.get(d));var p=this.getKey();if(f&&f.key==p)return f;var y=this.getTileGridForProjection(s),m=this.getTileGridForProjection(o),x=this.getTileCoordForTileUrlFunction(h,o),C=new H1(s,y,o,m,h,x,this.getTilePixelRatio(a),this.getGutter(),function(w,S,R,I){return this.getTileInternal(w,S,R,I,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return C.key=p,f?(C.interimTile=f,C.refreshInterimChain(),l.replace(d,C)):l.set(d,C),C},e.prototype.getTileInternal=function(t,i,r,a,o){var s=null,l=us(t,i,r),h=this.getKey();if(!this.tileCache.containsKey(l))s=this.createTile_(t,i,r,a,o,h),this.tileCache.set(l,s);else if(s=this.tileCache.get(l),s.key!=h){var f=s;s=this.createTile_(t,i,r,a,o,h),f.getState()==mt.IDLE?s.interimTile=f.interimTile:s.interimTile=f,s.refreshInterimChain(),this.tileCache.replace(l,s)}return s},e.prototype.setRenderReprojectionEdges=function(t){if(!(!pn||this.renderReprojectionEdges_==t)){this.renderReprojectionEdges_=t;for(var i in this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,i){if(pn){var r=Vt(t);if(r){var a=It(r);a in this.tileGridForProjection||(this.tileGridForProjection[a]=i)}}},e}(g1);function K1(n,e){n.getImage().src=e}var Cu=q1,Z1=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),J1=function(n){Z1(e,n);function e(t){var i=this,r=t||{},a=Wt({},r);return delete a.preload,delete a.useInterimTilesOnError,i=n.call(this,a)||this,i.on,i.once,i.un,i.setPreload(r.preload!==void 0?r.preload:0),i.setUseInterimTilesOnError(r.useInterimTilesOnError!==void 0?r.useInterimTilesOnError:!0),i}return e.prototype.getPreload=function(){return this.get(hs.PRELOAD)},e.prototype.setPreload=function(t){this.set(hs.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(hs.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(hs.USE_INTERIM_TILES_ON_ERROR,t)},e}(Ko),Q1=J1,tx=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ex=function(n){tx(e,n);function e(t){return n.call(this,t)||this}return e.prototype.createRenderer=function(){return new t1(this)},e}(Q1),AM=ex,ix=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),nx=function(n){ix(e,n);function e(t){var i=this,r=t||{},a=r.imageSmoothing!==void 0?r.imageSmoothing:!0;r.interpolate!==void 0&&(a=r.interpolate);var o=r.projection!==void 0?r.projection:"EPSG:3857",s=r.tileGrid!==void 0?r.tileGrid:a1({extent:yu(o),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return i=n.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:a,opaque:r.opaque,projection:o,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX!==void 0?r.wrapX:!0,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,i}return e}(Cu),rx=nx;function wu(n,e){var t=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&t.push(r+"="+encodeURIComponent(e[r]))});var i=t.join("&");return n=n.replace(/[?&]$/,""),n=n.indexOf("?")===-1?n+"?":n+"&",n+i}var cs="1.3.0",ds={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"},ax=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ox='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',sx=function(n){ax(e,n);function e(t){var i=this,r=t||{},a=r.imageSmoothing!==void 0?r.imageSmoothing:!0;r.interpolate!==void 0&&(a=r.interpolate);var o;r.attributions!==void 0?o=r.attributions:o=[ox];var s=r.crossOrigin!==void 0?r.crossOrigin:"anonymous",l=r.url!==void 0?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return i=n.call(this,{attributions:o,attributionsCollapsible:!1,cacheSize:r.cacheSize,crossOrigin:s,interpolate:a,maxZoom:r.maxZoom!==void 0?r.maxZoom:19,opaque:r.opaque!==void 0?r.opaque:!0,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,transition:r.transition,url:l,wrapX:r.wrapX,zDirection:r.zDirection})||this,i}return e}(rx),NM=sx,lx=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ux=function(n){lx(e,n);function e(t){var i=this,r=t||{},a=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(a=r.interpolate),i=n.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:a,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:r.wrapX!==void 0?r.wrapX:!0,transition:r.transition,zDirection:r.zDirection})||this,i.params_=r.params||{},i.hidpi_=r.hidpi!==void 0?r.hidpi:!0,i.tmpExtent_=ze(),i.setKey(i.getKeyForParams_()),i}return e.prototype.getKeyForParams_=function(){var t=0,i=[];for(var r in this.params_)i[t++]=r+"-"+this.params_[r];return i.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,i,r,a,o,s){var l=this.urls;if(!!l){var h=o.getCode().split(/:(?=\d+$)/).pop();s.SIZE=i[0]+","+i[1],s.BBOX=r.join(","),s.BBOXSR=h,s.IMAGESR=h,s.DPI=Math.round(s.DPI?s.DPI*a:90*a);var f;if(l.length==1)f=l[0];else{var d=Ni(du(t),l.length);f=l[d]}var p=f.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return wu(p,s)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){Wt(this.params_,t),this.setKey(this.getKeyForParams_())},e.prototype.tileUrlFunction=function(t,i,r){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(r)),!(a.getResolutions().length<=t[0])){i!=1&&!this.hidpi_&&(i=1);var o=a.getTileCoordExtent(t,this.tmpExtent_),s=ti(a.getTileSize(t[0]),this.tmpSize);i!=1&&(s=Al(s,i,this.tmpSize));var l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Wt(l,this.params_),this.getRequestUrl_(t,s,o,i,r,l)}},e}(Cu),DM=ux,hx=globalThis&&globalThis.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fx=function(n){hx(e,n);function e(t){var i=this,r=t||{},a=r.imageSmoothing!==void 0?r.imageSmoothing:!0;r.interpolate!==void 0&&(a=r.interpolate);var o=r.params||{},s="TRANSPARENT"in o?o.TRANSPARENT:!0;return i=n.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:a,opaque:!s,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:r.wrapX!==void 0?r.wrapX:!0,transition:r.transition,zDirection:r.zDirection})||this,i.gutter_=r.gutter!==void 0?r.gutter:0,i.params_=o,i.v13_=!0,i.serverType_=r.serverType,i.hidpi_=r.hidpi!==void 0?r.hidpi:!0,i.tmpExtent_=ze(),i.updateV13_(),i.setKey(i.getKeyForParams_()),i}return e.prototype.getFeatureInfoUrl=function(t,i,r,a){var o=Vt(r),s=this.getProjection(),l=this.getTileGrid();l||(l=this.getTileGridForProjection(o));var h=l.getZForResolution(i,this.zDirection),f=l.getTileCoordForCoordAndZ(t,h);if(!(l.getResolutions().length<=f[0])){var d=l.getResolution(f[0]),p=l.getTileCoordExtent(f,this.tmpExtent_),y=ti(l.getTileSize(f[0]),this.tmpSize),m=this.gutter_;m!==0&&(y=uf(y,m,this.tmpSize),p=Ma(p,d*m,p)),s&&s!==o&&(d=Tu(s,o,t,d),p=Gv(p,o,s),t=Cn(t,o,s));var x={SERVICE:"WMS",VERSION:cs,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Wt(x,this.params_,a);var C=Math.floor((t[0]-p[0])/d),w=Math.floor((p[3]-t[1])/d);return x[this.v13_?"I":"X"]=C,x[this.v13_?"J":"Y"]=w,this.getRequestUrl_(f,y,p,1,s||o,x)}},e.prototype.getLegendUrl=function(t,i){if(this.urls[0]!==void 0){var r={SERVICE:"WMS",VERSION:cs,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(i===void 0||i.LAYER===void 0){var a=this.params_.LAYERS,o=!Array.isArray(a)||a.length===1;if(!o)return;r.LAYER=a}if(t!==void 0){var s=this.getProjection()?this.getProjection().getMetersPerUnit():1,l=28e-5;r.SCALE=t*s/l}return Wt(r,i),wu(this.urls[0],r)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,i,r,a,o,s){var l=this.urls;if(!!l){if(s.WIDTH=i[0],s.HEIGHT=i[1],s[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(s.STYLES=""),a!=1)switch(this.serverType_){case ds.GEOSERVER:var h=90*a+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+h:s.FORMAT_OPTIONS="dpi:"+h;break;case ds.MAPSERVER:s.MAP_RESOLUTION=90*a;break;case ds.CARMENTA_SERVER:case ds.QGIS:s.DPI=90*a;break;default:Mt(!1,52);break}var f=o.getAxisOrientation(),d=r;if(this.v13_&&f.substr(0,2)=="ne"){var p=void 0;p=r[0],d[0]=r[1],d[1]=p,p=r[2],d[2]=r[3],d[3]=p}s.BBOX=d.join(",");var y;if(l.length==1)y=l[0];else{var m=Ni(du(t),l.length);y=l[m]}return wu(y,s)}},e.prototype.getTilePixelRatio=function(t){return!this.hidpi_||this.serverType_===void 0?1:t},e.prototype.getKeyForParams_=function(){var t=0,i=[];for(var r in this.params_)i[t++]=r+"-"+this.params_[r];return i.join("/")},e.prototype.updateParams=function(t){Wt(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||cs;this.v13_=bv(t,"1.3")>=0},e.prototype.tileUrlFunction=function(t,i,r){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(r)),!(a.getResolutions().length<=t[0])){i!=1&&(!this.hidpi_||this.serverType_===void 0)&&(i=1);var o=a.getResolution(t[0]),s=a.getTileCoordExtent(t,this.tmpExtent_),l=ti(a.getTileSize(t[0]),this.tmpSize),h=this.gutter_;h!==0&&(l=uf(l,h,this.tmpSize),s=Ma(s,o*h,s)),i!=1&&(l=Al(l,i,this.tmpSize));var f={SERVICE:"WMS",VERSION:cs,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Wt(f,this.params_),this.getRequestUrl_(t,l,s,i,r,f)}},e}(Cu),FM=fx;function kM(n){var e=Object.keys(n.defs),t=e.length,i,r;for(i=0;i<t;++i){var a=e[i];if(!Vt(a)){var o=n.defs(a),s=o.units;!s&&o.projName==="longlat"&&(s=$e.DEGREES),Gh(new cl({code:a,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:s}))}}for(i=0;i<t;++i){var l=e[i],h=Vt(l);for(r=0;r<t;++r){var f=e[r],d=Vt(f);if(!Dh(l,f))if(n.defs[l]===n.defs[f])ml([h,d]);else{var p=n(l,f);kv(h,d,Uh(h,d,p.forward),Uh(d,h,p.inverse))}}}}var Lc={exports:{}},cx=vu(T0),dx=vu(Wp),px=vu(V_);(function(n,e){(function(t,i){n.exports=i(cx,dx,px)})(Cc,function(t,i,r){t="default"in t?t.default:t,r="default"in r?r.default:r;var a=function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")},o=function(){function p(y,m){for(var x=0;x<m.length;x++){var C=m[x];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(y,C.key,C)}}return function(y,m,x){return m&&p(y.prototype,m),x&&p(y,x),y}}(),s=function p(y,m,x){y===null&&(y=Function.prototype);var C=Object.getOwnPropertyDescriptor(y,m);if(C===void 0){var w=Object.getPrototypeOf(y);return w===null?void 0:p(w,m,x)}else{if("value"in C)return C.value;var S=C.get;return S===void 0?void 0:S.call(x)}},l=function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)},h=function(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p},f="layer-switcher-",d=function(p){l(y,p);function y(m){a(this,y);var x=Object.assign({},m),C=x.tipLabel?x.tipLabel:"Legend",w=x.collapseTipLabel?x.collapseTipLabel:"Collapse legend",S=document.createElement("div"),R=h(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,{element:S,target:x.target}));R.activationMode=x.activationMode||"mouseover",R.startActive=x.startActive===!0;var I=x.label!==void 0?x.label:"",F=x.collapseLabel!==void 0?x.collapseLabel:"\xBB";R.groupSelectStyle=y.getGroupSelectStyle(x.groupSelectStyle),R.reverse=x.reverse!==!1,R.mapListeners=[],R.hiddenClassName="ol-unselectable ol-control layer-switcher",y.isTouchDevice_()&&(R.hiddenClassName+=" touch"),R.shownClassName="shown",S.className=R.hiddenClassName;var g=document.createElement("button");return g.setAttribute("title",C),g.setAttribute("aria-label",C),S.appendChild(g),R.panel=document.createElement("div"),R.panel.className="panel",S.appendChild(R.panel),y.enableTouchScroll_(R.panel),g.textContent=I,S.classList.add(f+"group-select-style-"+R.groupSelectStyle),S.classList.add(f+"activation-mode-"+R.activationMode),R.activationMode==="click"?(S.classList.add("activationModeClick"),R.startActive&&(g.textContent=F,g.setAttribute("title",w),g.setAttribute("aria-label",w)),g.onclick=function(G){var B=G||window.event;R.element.classList.contains(R.shownClassName)?(R.hidePanel(),g.textContent=I,g.setAttribute("title",C),g.setAttribute("aria-label",C)):(R.showPanel(),g.textContent=F,g.setAttribute("title",w),g.setAttribute("aria-label",w)),B.preventDefault()}):(g.onmouseover=function(){R.showPanel()},g.onclick=function(G){var B=G||window.event;R.showPanel(),B.preventDefault()},R.panel.onmouseout=function(G){R.panel.contains(G.relatedTarget)||R.hidePanel()}),R}return o(y,[{key:"setMap",value:function(x){for(var C=this,w=0;w<this.mapListeners.length;w++)i.unByKey(this.mapListeners[w]);this.mapListeners.length=0,s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"setMap",this).call(this,x),x&&(this.startActive?this.showPanel():this.renderPanel(),this.activationMode!=="click"&&this.mapListeners.push(x.on("pointerdown",function(){C.hidePanel()})))}},{key:"showPanel",value:function(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.renderPanel())}},{key:"hidePanel",value:function(){this.element.classList.contains(this.shownClassName)&&this.element.classList.remove(this.shownClassName)}},{key:"renderPanel",value:function(){this.dispatchEvent("render"),y.renderPanel(this.getMap(),this.panel,{groupSelectStyle:this.groupSelectStyle,reverse:this.reverse}),this.dispatchEvent("rendercomplete")}}],[{key:"renderPanel",value:function(x,C,w){var S=new Event("render");for(C.dispatchEvent(S),w=w||{},w.groupSelectStyle=y.getGroupSelectStyle(w.groupSelectStyle),y.ensureTopVisibleBaseLayerShown(x,w.groupSelectStyle);C.firstChild;)C.removeChild(C.firstChild);y.forEachRecursive(x,function(F,g,G){F.set("indeterminate",!1)}),w.groupSelectStyle==="children"||w.groupSelectStyle==="none"?y.setGroupVisibility(x):w.groupSelectStyle==="group"&&y.setChildVisibility(x);var R=document.createElement("ul");C.appendChild(R),y.renderLayers_(x,x,R,w,function(g){y.renderPanel(x,C,w)});var I=new Event("rendercomplete");C.dispatchEvent(I)}},{key:"isBaseGroup",value:function(x){if(x instanceof r){var C=x.getLayers().getArray();return C.length&&C[0].get("type")==="base"}else return!1}},{key:"setGroupVisibility",value:function(x){var C=y.getGroupsAndLayers(x,function(w){return w instanceof r&&!w.get("combine")&&!y.isBaseGroup(w)}).reverse();C.forEach(function(w){var S=w.getLayersArray().map(function(R){var I=R.getVisible();return I});S.every(function(R){return R===!0})?(w.setVisible(!0),w.set("indeterminate",!1)):S.every(function(R){return R===!1})?(w.setVisible(!1),w.set("indeterminate",!1)):(w.setVisible(!0),w.set("indeterminate",!0))})}},{key:"setChildVisibility",value:function(x){var C=y.getGroupsAndLayers(x,function(w){return w instanceof r&&!w.get("combine")&&!y.isBaseGroup(w)});C.forEach(function(w){var S=w,R=S.getVisible(),I=S.get("indeterminate");S.getLayers().getArray().forEach(function(F){F.set("indeterminate",!1),(!R||I)&&F.getVisible()&&F.set("indeterminate",!0)})})}},{key:"ensureTopVisibleBaseLayerShown",value:function(x,C){var w=void 0;y.forEachRecursive(x,function(S,R,I){S.get("type")==="base"&&S.getVisible()&&(w=S)}),w&&y.setVisible_(x,w,!0,C)}},{key:"getGroupsAndLayers",value:function(x,C){var w=[];return C=C||function(S,R,I){return!0},y.forEachRecursive(x,function(S,R,I){S.get("title")&&C(S,R,I)&&w.push(S)}),w}},{key:"setVisible_",value:function(x,C,w,S){C.setVisible(w),w&&C.get("type")==="base"&&y.forEachRecursive(x,function(R,I,F){R!=C&&R.get("type")==="base"&&R.setVisible(!1)}),C instanceof r&&!C.get("combine")&&S==="children"&&C.getLayers().forEach(function(R){y.setVisible_(x,R,C.getVisible(),S)})}},{key:"renderLayer_",value:function(x,C,w,S,R){var I=document.createElement("li"),F=C.get("title"),g=y.uuid(),G=document.createElement("label");if(C instanceof r&&!C.get("combine")){var B=y.isBaseGroup(C);if(I.classList.add("group"),B&&I.classList.add(f+"base-group"),C.get("fold")){I.classList.add(f+"fold"),I.classList.add(f+C.get("fold"));var X=document.createElement("button");X.onclick=function(vt){var nt=vt||window.event;y.toggleFold_(C,I),nt.preventDefault()},I.appendChild(X)}if(!B&&S.groupSelectStyle!="none"){var Z=document.createElement("input");Z.type="checkbox",Z.id=g,Z.checked=C.getVisible(),Z.indeterminate=C.get("indeterminate"),Z.onchange=function(vt){var nt=vt.target;y.setVisible_(x,C,nt.checked,S.groupSelectStyle),R(C)},I.appendChild(Z),G.htmlFor=g}G.innerHTML=F,I.appendChild(G);var et=document.createElement("ul");I.appendChild(et),y.renderLayers_(x,C,et,S,R)}else{I.className="layer";var K=document.createElement("input");C.get("type")==="base"?(K.type="radio",K.name="base"):K.type="checkbox",K.id=g,K.checked=C.get("visible"),K.indeterminate=C.get("indeterminate"),K.onchange=function(vt){var nt=vt.target;y.setVisible_(x,C,nt.checked,S.groupSelectStyle),R(C)},I.appendChild(K),G.htmlFor=g,G.innerHTML=F;var lt=x.getView().getResolution();(lt>C.getMaxResolution()||lt<C.getMinResolution())&&(G.className+=" disabled"),I.appendChild(G)}return I}},{key:"renderLayers_",value:function(x,C,w,S,R){var I=C.getLayers().getArray().slice();S.reverse&&(I=I.reverse());for(var F=0,g;F<I.length;F++)g=I[F],g.get("title")&&w.appendChild(y.renderLayer_(x,g,F,S,R))}},{key:"forEachRecursive",value:function(x,C){x.getLayers().forEach(function(w,S,R){C(w,S,R),w instanceof r&&y.forEachRecursive(w,C)})}},{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var C=Math.random()*16|0,w=x=="x"?C:C&3|8;return w.toString(16)})}},{key:"enableTouchScroll_",value:function(x){if(y.isTouchDevice_()){var C=0;x.addEventListener("touchstart",function(w){C=this.scrollTop+w.touches[0].pageY},!1),x.addEventListener("touchmove",function(w){this.scrollTop=C-w.touches[0].pageY},!1)}}},{key:"isTouchDevice_",value:function(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}},{key:"toggleFold_",value:function(x,C){C.classList.remove(f+x.get("fold")),x.set("fold",x.get("fold")==="open"?"close":"open"),C.classList.add(f+x.get("fold"))}},{key:"getGroupSelectStyle",value:function(x){return["none","children","group"].indexOf(x)>=0?x:"children"}}]),y}(t);return window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=d),d})})(Lc);var GM=Lc.exports;window.ol&&!ol.ext&&(ol.ext={});var ii=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n};window.ol&&(ol.inherits||(ol.inherits=ii));window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);window.Element&&!Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});window.ol&&(ol.ext.input={});var Rr=function(n){n=n||{},Ue.call(this);var e=this.input=n.input;e||(e=this.input=document.createElement("INPUT"),n.type&&e.setAttribute("type",n.type),n.min!==void 0&&e.setAttribute("min",n.min),n.max!==void 0&&e.setAttribute("max",n.max),n.step!==void 0&&e.setAttribute("step",n.step),n.parent&&n.parent.appendChild(e)),n.disabled&&(e.disabled=!0),n.checked!==void 0&&(e.checked=!!n.checked),n.val!==void 0&&(e.value=n.val),n.hidden&&(e.style.display="none")};ii(Rr,Ue);Rr.prototype._listenDrag=function(n,e){var t=function(i){this.moving=!0;var r=function(a){a.type==="pointerup"&&(document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",r),document.removeEventListener("pointercancel",r),setTimeout(function(){this.moving=!1}.bind(this))),a.target===n&&e(a),a.stopPropagation(),a.preventDefault()}.bind(this);document.addEventListener("pointermove",r,!1),document.addEventListener("pointerup",r,!1),document.addEventListener("pointercancel",r,!1),i.stopPropagation(),i.preventDefault()}.bind(this);n.addEventListener("mousedown",t,!1),n.addEventListener("touchstart",t,!1)};Rr.prototype.setValue=function(n){n!==void 0&&(this.input.value=n),this.input.dispatchEvent(new Event("change"))};Rr.prototype.getValue=function(){return this.input.value};Rr.prototype.getInputElement=function(){return this.input};var Ir=function(n){n=n||{},Rr.call(this,n);var e=this.element=document.createElement("LABEL");n.html instanceof Element?e.appendChild(n.html):n.html!==void 0&&(e.innerHTML=n.html),e.className=("ol-ext-check ol-ext-checkbox"+(n.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),n.after&&e.appendChild(document.createTextNode(n.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))};ii(Ir,Rr);Ir.prototype.isChecked=function(){return this.input.checked};var Ac=function(n){n=n||{},Ir.call(this,n),this.element.className=("ol-ext-toggle-switch "+(n.className||"")).trim()};ii(Ac,Ir);var Nc=function(n,e){e=e||{},Ir.call(this,n,e),this.element.className=("ol-ext-check ol-ext-radio"+(e.className||"")).trim()};ii(Nc,Ir);var ht={};ht.create=function(n,e){e=e||{};var t;if(n==="TEXT")t=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(t);else{t=document.createElement(n),/button/i.test(n)&&t.setAttribute("type","button");for(var i in e)switch(i){case"className":{e.className&&e.className.trim&&t.setAttribute("class",e.className.trim());break}case"html":{e.html instanceof Element?t.appendChild(e.html):e.html!==void 0&&(t.innerHTML=e.html);break}case"parent":{e.parent&&e.parent.appendChild(t);break}case"options":{if(/select/i.test(n))for(var r in e.options)ht.create("OPTION",{html:r,value:e.options[r],parent:t});break}case"style":{this.setStyle(t,e.style);break}case"change":case"click":{ht.addListener(t,i,e[i]);break}case"on":{for(var a in e.on)ht.addListener(t,a,e.on[a]);break}case"checked":{t.checked=!!e.checked;break}default:{t.setAttribute(i,e[i]);break}}}return t};ht.createSwitch=function(n){var e=ht.create("INPUT",{type:"checkbox",on:n.on,click:n.click,change:n.change,parent:n.parent}),t=Object.assign({input:e},n||{});return new Ac(t),e};ht.createCheck=function(n){var e=ht.create("INPUT",{name:n.name,type:n.type==="radio"?"radio":"checkbox",on:n.on,parent:n.parent});console.log(e);var t=Object.assign({input:e},n||{});return n.type==="radio"?new Nc(t):new Ir(t),e};ht.setHTML=function(n,e){e instanceof Element?n.appendChild(e):e!==void 0&&(n.innerHTML=e)};ht.appendText=function(n,e){n.appendChild(document.createTextNode(e||""))};ht.addListener=function(n,e,t,i){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(r){n.addEventListener(r,t,i)})};ht.removeListener=function(n,e,t){typeof e=="string"&&(e=e.split(" ")),e.forEach(function(i){n.removeEventListener(i,t)})};ht.show=function(n){n.style.display=""};ht.hide=function(n){n.style.display="none"};ht.hidden=function(n){return ht.getStyle(n,"display")==="none"};ht.toggle=function(n){n.style.display=n.style.display==="none"?"":"none"};ht.setStyle=function(n,e){for(var t in e)switch(t){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":{typeof e[t]=="number"?n.style[t]=e[t]+"px":n.style[t]=e[t];break}default:n.style[t]=e[t]}};ht.getStyle=function(n,e){var t,i=(n.ownerDocument||document).defaultView;if(i&&i.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),t=i.getComputedStyle(n,null).getPropertyValue(e);else if(n.currentStyle&&(e=e.replace(/-(\w)/g,function(r,a){return a.toUpperCase()}),t=n.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(t)))return function(r){var a=n.style.left,o=n.runtimeStyle.left;return n.runtimeStyle.left=n.currentStyle.left,n.style.left=r||0,r=n.style.pixelLeft+"px",n.style.left=a,n.runtimeStyle.left=o,r}(t);return/px$/.test(t)?parseInt(t):t};ht.outerHeight=function(n){return n.offsetHeight+ht.getStyle(n,"marginBottom")};ht.outerWidth=function(n){return n.offsetWidth+ht.getStyle(n,"marginLeft")};ht.offsetRect=function(n){var e=n.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}};ht.getFixedOffset=function(n){var e={left:0,top:0},t=function(i){if(!i)return e;if(ht.getStyle(i,"position")==="absolute"&&ht.getStyle(i,"transform")!=="none"){var r=i.getBoundingClientRect();return e.left+=r.left,e.top+=r.top,e}return console.log(i,e),t(i.offsetParent)};return t(n.offsetParent)};ht.positionRect=function(n,e){var t=0,i=0,r=function(a){if(a)return t+=a.offsetLeft,i+=a.offsetTop,r(a.offsetParent);var o={top:n.offsetTop+i,left:n.offsetLeft+t};return e&&(o.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),o.bottom=o.top+n.offsetHeight,o.right=o.top+n.offsetWidth,o};return r(n.offsetParent)};ht.scrollDiv=function(n,e){e=e||{};var t=!1,i=0,r,a=0,o=typeof e.onmove=="function"?e.onmove:function(){},s=e.vertical?"screenY":"screenX",l=e.vertical?"scrollTop":"scrollLeft",h=!1,f,d,p=0,y=function(){R&&(p++,setTimeout(m))},m=function(){if(R){if(p--,p)return;var G=n.clientHeight,B=n.scrollHeight;f=G/B,R.style.height=f*100+"%",R.style.top=n.scrollTop/B*100+"%",S.style.height=G+"px",G>B-.5?S.classList.add("ol-100pc"):S.classList.remove("ol-100pc")}},x=function(G){G.target.classList.contains("ol-noscroll")||(h=!1,t=G[s],a=new Date,n.classList.add("ol-move"),G.preventDefault(),window.addEventListener("pointermove",C),ht.addListener(window,["pointerup","pointercancel"],F))},C=function(G){if(h=!0,t!==!1){var B=(d?-1/f:1)*(t-G[s]);n[l]+=B,r=new Date,r-a&&(i=(i+B/(r-a))/2),t=G[s],a=r,B&&o(!0)}},w=function(G){var B=G>0?Math.min(100,G/2):Math.max(-100,G/2);G-=B,n[l]+=B,-1<G&&G<1?(h?setTimeout(function(){n.classList.remove("ol-move")}):n.classList.remove("ol-move"),h=!1,o(!1)):setTimeout(function(){w(G)},40)},S,R;if(e.vertical&&e.minibar){var I=function(G){n.removeEventListener("pointermove",I),n.parentNode.classList.add("ol-miniscroll"),R=ht.create("DIV"),S=ht.create("DIV",{className:"ol-scroll",html:R}),n.parentNode.insertBefore(S,n),R.addEventListener("pointerdown",function(B){d=!0,x(B)}),e.mousewheel&&(ht.addListener(S,["mousewheel","DOMMouseScroll","onmousewheel"],function(B){g(B)}),ht.addListener(R,["mousewheel","DOMMouseScroll","onmousewheel"],function(B){g(B)})),n.parentNode.addEventListener("pointerenter",y),window.addEventListener("resize",y),G!==!1&&y()};n.parentNode?I(!1):n.addEventListener("pointermove",I),n.addEventListener("scroll",function(){y()})}n.style["touch-action"]="none",n.style.overflow="hidden",n.classList.add("ol-scrolldiv"),ht.addListener(n,["pointerdown"],function(G){d=!1,x(G)}),n.addEventListener("click",function(G){n.classList.contains("ol-move")&&(G.preventDefault(),G.stopPropagation())},!0);var F=function(G){a=new Date-a,a>100||d?i=0:a>0&&(i=((i||0)+(t-G[s])/a)/2),w(e.animate===!1?0:i*200),t=!1,i=0,a=0,n.classList.contains("ol-move")?n.classList.remove("ol-hasClick"):(n.classList.add("ol-hasClick"),setTimeout(function(){n.classList.remove("ol-hasClick")},500)),d=!1,window.removeEventListener("pointermove",C),ht.removeListener(window,["pointerup","pointercancel"],F)},g=function(G){var B=Math.max(-1,Math.min(1,G.wheelDelta||-G.detail));return n.classList.add("ol-move"),n[l]-=B*30,n.classList.remove("ol-move"),!1};return e.mousewheel&&ht.addListener(n,["mousewheel","DOMMouseScroll","onmousewheel"],g),{refresh:y}};ht.dispatchEvent=function(n,e){var t;try{t=new CustomEvent(n)}catch{t=document.createEvent("CustomEvent"),t.initCustomEvent(n,!0,!0,{})}e.dispatchEvent(t)};var Dc={base32:"0123456789bcdefghjkmnpqrstuvwxyz"},Fc=function(n,e){var t=n[0],i=n[1];if(!e){for(var r=1;r<=12;r++){var a=Fc([t,i],r),o=Mu(a);if(o.lat==i&&o.lon==t)return a}e=12}(e<1||e>12)&&(e=12);for(var s=0,l=0,h=!0,f="",d=-90,p=90,y=-180,m=180;f.length<e;){if(h){var x=(y+m)/2;t>=x?(s=s*2+1,y=x):(s=s*2,m=x)}else{var C=(d+p)/2;i>=C?(s=s*2+1,d=C):(s=s*2,p=C)}h=!h,++l==5&&(f+=Dc.base32.charAt(s),l=0,s=0)}return f},Mu=function(n){var e=vx(n),t=e[1],i=e[0],r=e[3],a=e[2],o=(t+r)/2,s=(i+a)/2;return o=o.toFixed(Math.floor(2-Math.log(r-t)/Math.LN10)),s=s.toFixed(Math.floor(2-Math.log(a-i)/Math.LN10)),[Number(s),Number(o)]},vx=function(n){if(!n)return!1;n=n.toLowerCase();for(var e=!0,t=-90,i=90,r=-180,a=180,o=0;o<n.length;o++){var s=n.charAt(o),l=Dc.base32.indexOf(s);if(l==-1)return!1;for(var h=4;h>=0;h--){var f=l>>h&1;if(e){var d=(r+a)/2;f==1?r=d:a=d}else{var p=(t+i)/2;f==1?t=p:i=p}e=!e}}return[r,t,a,i]},Le=function(n){var e=n||{},t=this,i=document.createElement("button");if(this.replaceState_=e.urlReplace!==!1,this.fixed_=e.fixed||6,this.hash_=e.anchor?"#":"?",this._localStorage=e.localStorage,!this._localStorage)try{localStorage.removeItem("ol@permalink")}catch{console.warn("Failed to access localStorage...")}function r(){typeof e.onclick=="function"?e.onclick(t.getLink()):t.setUrlReplace(!t.replaceState_)}i.addEventListener("click",r,!1),i.addEventListener("touchstart",r,!1);var a=document.createElement("div");a.className=(e.className||"ol-permalink")+" ol-unselectable ol-control",a.appendChild(i),(e.hidden||e.visible===!1)&&ht.hide(a),be.call(this,{element:a,target:e.target}),this.set("geohash",e.geohash),this.set("initial",!1),this.on("change",this.viewChange_.bind(this)),this.search_={};var o={},s=document.location.hash||document.location.search||"";if(this.replaceState_&&!s&&this._localStorage)try{s=localStorage["ol@permalink"]}catch{console.warn("Failed to access localStorage...")}if(s){s=s.replace(/(^#|^\?)/,"").split("&");for(var l=0;l<s.length;l++){var h=s[l].split("=");switch(h[0]){case"lon":case"lat":case"z":case"r":{o[h[0]]=h[1];break}case"gh":{const f=h[1].split("-"),d=Mu(f[0]);o.lon=d[0],o.lat=d[1],o.z=f[1];break}case"l":break;default:this.search_[h[0]]=h[1]}}}o.hasOwnProperty("lon")&&this.set("initial",o),this.replaceState_&&this.setPosition()};ii(Le,be);Le.prototype.getInitialPosition=function(){return this.get("initial")};Le.prototype.setMap=function(n){this._listener&&(Oo(this._listener.change),Oo(this._listener.moveend)),this._listener=null,be.prototype.setMap.call(this,n),n&&(this._listener={change:n.getLayerGroup().on("change",this.layerChange_.bind(this)),moveend:n.on("moveend",this.viewChange_.bind(this))},this.setPosition())};Le.prototype.getLayerByLink=function(n,e){!e&&this.getMap()&&(e=this.getMap().getLayers().getArray());for(var t=0;t<e.length;t++){if(e[t].get("permalink")==n)return e[t];if(e[t].getLayers){var i=this.getLayerByLink(n,e[t].getLayers().getArray());if(i)return i}}return!1};Le.prototype.setGeohash=function(n){this.set("geohash",n),this.setUrlParam()};Le.prototype.setPosition=function(n){var e=this.getMap();if(!e)return;var t=this.replaceState_||n?document.location.hash||document.location.search:"";if(!t&&this._localStorage)try{t=localStorage["ol@permalink"]}catch{console.warn("Failed to access localStorage...")}if(!t)return;var i,r,a={};for(t=t.replace(/(^#|^\?)/,"").split("&"),i=0;i<t.length;i++)r=t[i].split("="),a[r[0]]=r[1];if(a.gh){var o=a.gh.split("-"),s=Mu(o[0]);a.lon=s[0],a.lat=s[1],a.z=o[1]}var l=Cn([Number(a.lon),Number(a.lat)],"EPSG:4326",e.getView().getProjection());l[0]&&l[1]&&e.getView().setCenter(l),a.z&&e.getView().setZoom(Number(a.z)),a.r&&e.getView().setRotation(Number(a.r));function h(y){y||(y=e.getLayers().getArray());for(var m=0;m<y.length;m++)y[m].get("permalink")&&y[m].setVisible(!1),y[m].getLayers&&h(y[m].getLayers().getArray())}if(a.l){h();var f=a.l.split("|");for(i=0;i<f.length;i++){r=f[i].split(":");var d=this.getLayerByLink(r[0]),p=Number(r[1]);d&&(d.setOpacity(p),d.setVisible(!0))}}};Le.prototype.getUrlParams=function(){return this.search_};Le.prototype.setUrlParam=function(n,e){n&&(e===void 0||e===""?delete this.search_[encodeURIComponent(n)]:this.search_[encodeURIComponent(n)]=encodeURIComponent(e)),this.viewChange_()};Le.prototype.getUrlParam=function(n){return decodeURIComponent(this.search_[encodeURIComponent(n)]||"")};Le.prototype.hasUrlParam=function(n){return this.search_.hasOwnProperty(encodeURIComponent(n))};Le.prototype.getLink=function(n){var e=this.getMap(),t=Cn(e.getView().getCenter(),e.getView().getProjection(),"EPSG:4326"),i=Math.round(e.getView().getZoom()*10)/10,r=e.getView().getRotation(),a=this.layerStr_,o=(r?"&r="+Math.round(r*1e4)/1e4:"")+(a?"&l="+a:"");if(this.get("geohash")){var s=Fc(t,8);o="gh="+s+"-"+i+o}else o="lon="+t[0].toFixed(this.fixed_)+"&lat="+t[1].toFixed(this.fixed_)+"&z="+i+o;if(n==="position")return o;for(var l in this.search_)o+="&"+l+(typeof this.search_[l]!="undefined"?"="+this.search_[l]:"");return n?o:document.location.protocol+"//"+document.location.host+document.location.pathname+this.hash_+o};Le.prototype.getUrlReplace=function(){return this.replaceState_};Le.prototype.setUrlReplace=function(n){try{if(this.replaceState_=n,n)window.history.replaceState(null,null,this.getLink());else{var e="";for(var t in this.search_)e+=(e==""?"?":"&")+t+(typeof this.search_[t]!="undefined"?"="+this.search_[t]:"");window.history.replaceState(null,null,document.location.origin+document.location.pathname+e)}}catch{}};Le.prototype.viewChange_=function(){try{this.replaceState_&&window.history.replaceState(null,null,this.getLink())}catch{}if(this._localStorage)try{localStorage["ol@permalink"]=this.getLink(this._localStorage)}catch{console.warn("Failed to access localStorage...")}};Le.prototype.layerChange_=function(){this._tout&&(clearTimeout(this._tout),this._tout=null),this._tout=setTimeout(function(){this._tout=null;var n="";function e(t){for(var i=0;i<t.length;i++)t[i].getVisible()&&t[i].get("permalink")&&(n&&(n+="|"),n+=t[i].get("permalink")+":"+t[i].get("opacity")),t[i].getLayers&&e(t[i].getLayers().getArray())}e(this.getMap().getLayers().getArray()),this.layerStr_=n,this.viewChange_()}.bind(this),200)};var di=function(n){n||(n={});var e=document.createElement("div");if(e.classList.add("ol-unselectable","ol-control","ol-bar"),n.className){var t=n.className.split(" ").filter(function(r){return r.length>0});e.classList.add.apply(e.classList,t)}if(n.group&&e.classList.add("ol-group"),be.call(this,{element:e,target:n.target}),this.set("toggleOne",n.toggleOne),this.set("autoDeactivate",n.autoDeactivate),this.controls_=[],n.controls instanceof Array)for(var i=0;i<n.controls.length;i++)this.addControl(n.controls[i])};ii(di,be);di.prototype.setVisible=function(n){n?this.element.style.display="":this.element.style.display="none"};di.prototype.getVisible=function(){return this.element.style.display!="none"};di.prototype.setMap=function(n){be.prototype.setMap.call(this,n);for(var e=0;e<this.controls_.length;e++){var t=this.controls_[e];t.setMap(n)}};di.prototype.getControls=function(){return this.controls_};di.prototype.setPosition=function(n){this.element.classList.remove("ol-left","ol-top","ol-bottom","ol-right"),n=n.split("-");for(var e=0;e<n.length;e++)switch(n[e]){case"top":case"left":case"bottom":case"right":this.element.classList.add("ol-"+n[e]);break}};di.prototype.addControl=function(n){this.controls_.push(n),n.setTarget(this.element),this.getMap()&&this.getMap().addControl(n),n.on("change:active",function(e){this.onActivateControl_(e,n)}.bind(this)),n.getActive&&this.onActivateControl_({target:n,active:n.getActive()},n)};di.prototype.deactivateControls=function(n){for(var e=0;e<this.controls_.length;e++)this.controls_[e]!==n&&this.controls_[e].setActive&&this.controls_[e].setActive(!1)};di.prototype.getActiveControls=function(){for(var n=[],e=0,t;t=this.controls_[e];e++)t.getActive&&t.getActive()&&n.push(t);return n};di.prototype.setActive=function(n){if(!n&&this.get("autoDeactivate")&&this.deactivateControls(),n)for(var e=this.getControls(),t=0,i;i=e[t];t++)i.get("autoActivate")&&i.setActive(!0)};di.prototype.onActivateControl_=function(n,e){if(this.get("toggleOne")){if(n.active){var t;for(t=0;t<this.controls_.length&&this.controls_[t]!==e;t++);if(t==this.controls_.length)return;this.deactivateControls(this.controls_[t])}else if(!this.getActiveControls().length){for(var i=0,r;r=this.controls_[i];i++)if(r.get("autoActivate")){r.setActive(!0);break}}}};di.prototype.getControlsByName=function(n){var e=this.getControls();return e.filter(function(t){return t.get("name")===n})};var Nn=function(n){n=n||{};var e=document.createElement("div");e.className=(n.className||"")+" ol-button ol-unselectable ol-control";var t=this,i=this.button_=document.createElement(/ol-text-button/.test(n.className)?"div":"button");i.type="button",n.title&&(i.title=n.title),n.name&&(i.name=n.name),n.html instanceof Element?i.appendChild(n.html):i.innerHTML=n.html||"";var r=function(a){a&&a.preventDefault&&(a.preventDefault(),a.stopPropagation()),n.handleClick&&n.handleClick.call(t,a)};i.addEventListener("click",r),i.addEventListener("touchstart",r),e.appendChild(i),!n.title&&i.firstElementChild&&(i.title=i.firstElementChild.title),be.call(this,{element:e,target:n.target}),n.title&&this.set("title",n.title),n.title&&this.set("title",n.title),n.name&&this.set("name",n.name)};ii(Nn,be);Nn.prototype.setVisible=function(n){n?ht.show(this.element):ht.hide(this.element)};Nn.prototype.setTitle=function(n){this.button_.setAttribute("title",n)};Nn.prototype.setHtml=function(n){ht.setHTML(this.button_,n)};Nn.prototype.getButtonElement=function(){return this.button_};var ni=function(n){n=n||{};var e=this;this.interaction_=n.interaction,this.interaction_&&(this.interaction_.setActive(n.active),this.interaction_.on("change:active",function(){e.setActive(e.interaction_.getActive())})),n.toggleFn&&(n.onToggle=n.toggleFn),n.handleClick=function(){e.toggle(),n.onToggle&&n.onToggle.call(e,e.getActive())},n.className=(n.className||"")+" ol-toggle",Nn.call(this,n),this.set("title",n.title),this.set("autoActivate",n.autoActivate),n.bar&&this.setSubBar(n.bar),this.setActive(n.active),this.setDisable(n.disable)};ii(ni,Nn);ni.prototype.setMap=function(n){!n&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),Nn.prototype.setMap.call(this,n),n&&(this.interaction_&&n.addInteraction(this.interaction_),this.subbar_&&n.addControl(this.subbar_))};ni.prototype.getSubBar=function(){return this.subbar_};ni.prototype.setSubBar=function(n){var e=this.getMap();e&&this.subbar_&&e.removeControl(this.subbar_),this.subbar_=n,n&&(this.subbar_.setTarget(this.element),this.subbar_.element.classList.add("ol-option-bar"),e&&e.addControl(this.subbar_))};ni.prototype.getDisable=function(){var n=this.element.querySelector("button");return n&&n.disabled};ni.prototype.setDisable=function(n){this.getDisable()!=n&&(this.element.querySelector("button").disabled=n,n&&this.getActive()&&this.setActive(!1),this.dispatchEvent({type:"change:disable",key:"disable",oldValue:!n,disable:n}))};ni.prototype.getActive=function(){return this.element.classList.contains("ol-active")};ni.prototype.toggle=function(){this.getActive()?this.setActive(!1):this.setActive(!0)};ni.prototype.setActive=function(n){this.interaction_&&this.interaction_.setActive(n),this.subbar_&&this.subbar_.setActive(n),this.getActive()!==n&&(n?this.element.classList.add("ol-active"):this.element.classList.remove("ol-active"),this.dispatchEvent({type:"change:active",key:"active",oldValue:!n,active:n}))};ni.prototype.setInteraction=function(n){this.interaction_=n};ni.prototype.getInteraction=function(){return this.interaction_};var Dn=function(n){n||(n={});var e=ht.create("DIV",{className:"ol-unselectable ol-overlay "+(n.className||""),html:n.content});be.call(this,{element:e,target:n.target});var t=this;n.hideOnClick&&e.addEventListener("click",function(){t.hide()}),this.set("closeBox",n.closeBox),this._timeout=!1,this.setContent(n.content)};ii(Dn,be);Dn.prototype.setContent=function(n){var e=this;if(n){var t=this.element;if(n instanceof Element?(t.innerHTML="",t.appendChild(n)):n!==void 0&&(t.innerHTML=n),this.get("closeBox")){var i=document.createElement("div");i.classList.add("ol-closebox"),i.addEventListener("click",function(){e.hide()}),t.insertBefore(i,t.firstChild)}}};Dn.prototype.show=function(n,e){var t=this,i=this.element;i.style.display="block",e?(this.center_=this.getMap().getPixelFromCoordinate(e),i.style.top=this.center_[1]+"px",i.style.left=this.center_[0]+"px"):(this.center_=!1,i.style.top="",i.style.left=""),n&&this.setContent(n),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){i.classList.add("ol-visible"),i.style.top="",i.style.left="",t.dispatchEvent({type:"change:visible",visible:!0,element:t.element})},10)};Dn.prototype.showImage=function(n,e){e=e||{};var t=ht.create("DIV",{className:"ol-fullscreen-image"});ht.create("IMG",{src:n,parent:t}),e.title&&(t.classList.add("ol-has-title"),ht.create("P",{html:e.title,parent:t})),this.show(t,e.coordinate)};Dn.prototype.hide=function(){var n=this.element;this.element.classList.remove("ol-visible"),this.center_&&(n.style.top=this.center_[1]+"px",n.style.left=this.center_[0]+"px",this.center_=!1),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){n.style.display="none"},500),this.dispatchEvent({type:"change:visible",visible:!1,element:this.element})};Dn.prototype.toggle=function(){this.getVisible()?this.hide():this.show()};Dn.prototype.getVisible=function(){return ht.getStyle(this.element,"display")!=="none"};Dn.prototype.setClass=function(n){var e=this.element.classList.contains("ol-visible");this.element.className=("ol-unselectable ol-overlay "+(e?"ol-visible ":"")+n).trim()};var Ae=function(n){n||(n={}),this.geolocation=new xg({projection:"EPSG:4326",trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),this.geolocation.on("change",this.draw_.bind(this)),this.path_=[],this.lastPosition_=!1;var e=[255,255,255,1],t=[0,153,255,1],i=3,r=new kl({radius:i*2,fill:new on({color:t}),stroke:new Sn({color:e,width:i/2})}),a=[new Ua({stroke:new Sn({color:e,width:i+2})}),new Ua({stroke:new Sn({color:t,width:i}),fill:new on({color:[255,255,255,.5]})})],o=new wf({radius:i*3.5,points:3,rotation:0,fill:new on({color:t}),stroke:new Sn({color:e,width:i/2})}),s=o.getImage(),l=s.getContext("2d"),h=document.createElement("canvas");h.width=h.height=s.width,h.getContext("2d").drawImage(s,0,0),l.clearRect(0,0,s.width,s.height),l.drawImage(h,0,0,s.width,s.height,i,0,s.width-2*i,s.height);var f=function(d){return d.get("heading")===void 0?a[1].setImage(r):(a[1].setImage(o),o.setRotation(d.get("heading")||0)),a};this.locStyle={error:new Ua({fill:new on({color:[255,0,0,.2]})}),warn:new Ua({fill:new on({color:[255,192,0,.2]})}),ok:new Ua({fill:new on({color:[0,255,0,.2]})})},this.overlayLayer_=new Wl({source:new Kf,name:"GeolocationDraw overlay",style:n.style||f}),this.sketch_=[new en,new en,new en],this.overlayLayer_.getSource().addFeatures(this.sketch_),this.features_=n.features,this.source_=n.source,this.condition_=n.condition||function(d){return d.getAccuracy()<this.get("minAccuracy")},dn.call(this,{handleEvent:function(){return!this.get("followTrack")||this.get("followTrack")=="auto"}}),this.set("type",n.type||"LineString"),this.set("attributes",n.attributes||{}),this.set("minAccuracy",n.minAccuracy||20),this.set("tolerance",n.tolerance||5),this.set("zoom",n.zoom),this.set("minZoom",n.minZoom),this.setFollowTrack(n.followTrack===void 0?!0:n.followTrack),this.setActive(!1)};ii(Ae,dn);Ae.prototype.simplify3D=function(n,e){var t=n.getCoordinates(),i=this.getMap().getView().getProjection();this.get("type")==="Polygon"&&(t=t[0]);for(var r=[t[0]],a,o=Cn(t[0],i,"EPSG:4326"),s=1;s<t.length;s++){a=Cn(t[s],i,"EPSG:4326");var l=Fo(o,a);l>e&&(r.push(t[s]),o=a)}return r[r.length-1]!==t[t.length-1]&&r.push(t[t.length-1]),this.get("type")==="Polygon"?n=new mr([r],"XYZM"):n=new On(r,"XYZM"),n};Ae.prototype.setMap=function(n){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),Or.prototype.setMap.call(this,n),this.overlayLayer_.setMap(n),n&&this.geolocation.setProjection(n.getView().getProjection())};Ae.prototype.setActive=function(n){if(n!==this.getActive()){if(dn.prototype.setActive.call(this,n),this.overlayLayer_.setVisible(n),this.getMap()){this.geolocation.setTracking(n);try{this.getMap().renderSync()}catch{}}if(this.pause(!n),n)this.reset(),this.dispatchEvent({type:"drawstart",feature:this.sketch_[1]});else{var e=this.sketch_[1].clone();e.getGeometry()&&(this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)),this.dispatchEvent({type:"drawend",feature:e})}}};Ae.prototype.simulate=function(n,e){if(this._track&&clearTimeout(this._track.timeout),!n){this._track=!1;return}e=e||{};var t=e.delay||1e3;function i(){if(this._track.pos>=this._track.track.length){this._track=!1;return}var r=this._track.track[this._track.pos];r[2]=r[3]||0,r[3]=new Date().getTime(),this._track.pos++,e.repeat!==!1&&(this._track.pos=this._track.pos%this._track.track.length),this.getActive()&&this.draw_(!0,r,e.accuracy),this._track.timeout=setTimeout(i.bind(this),t)}this._track={track:n,pos:0,timeout:setTimeout(i.bind(this),0)}};Ae.prototype.simulating=function(){return!!this._track};Ae.prototype.reset=function(){this.sketch_[1].setGeometry(),this.path_=[],this.lastPosition_=!1};Ae.prototype.start=function(){this.setActive(!0)};Ae.prototype.stop=function(){this.setActive(!1)};Ae.prototype.pause=function(n){this.pause_=n!==!1};Ae.prototype.isPaused=function(){return this.pause_};Ae.prototype.setFollowTrack=function(n){this.set("followTrack",n);var e=this.getMap();if(this.getActive()&&e){var t;if(n!=="position"&&(this.get("minZoom")?t=Math.max(this.get("minZoom"),e.getView().getZoom()):t=this.get("zoom")),n!==!1&&!this.lastPosition_){var i=this.path_[this.path_.length-1];i&&e.getView().animate({center:i,zoom:t})}else n==="auto"&&this.lastPosition_&&e.getView().animate({center:this.lastPosition_,zoom:t})}this.lastPosition_=!1,this.dispatchEvent({type:"follow",following:n!==!1})};Ae.prototype.draw_=function(n,e,t){var i=this.getMap();if(!!i){var r,a,o,s,l;if(this._track){if(n!==!0)return;if(a=e,r=t||10,this.path_&&this.path_.length){var h=this.path_[this.path_.length-1];l=Math.atan2(e[0]-h[0],e[1]-h[1])}var f=new cc(a,i.getView().getResolution()*r);o=gg(f)}else s=this.geolocation,r=s.getAccuracy(),a=this.getPosition(s),o=s.getAccuracyGeometry(),l=s.getHeading();switch(this.get("followTrack")){case!0:{this.get("followTrack")==!0&&(this.get("minZoom")?this.get("minZoom")>i.getView().getZoom()&&i.getView().setZoom(this.get("minZoom")):i.getView().setZoom(this.get("zoom")||16),Tn(i.getView().calculateExtent(i.getSize()),o.getExtent())||i.getView().fit(o.getExtent())),i.getView().setCenter(a);break}case"position":{i.getView().setCenter(a);break}case"auto":{if(this.lastPosition_){var d=i.getView().getCenter();d[0]!=this.lastPosition_[0]||d[1]!=this.lastPosition_[1]?this.setFollowTrack(!1):(i.getView().setCenter(a),this.lastPosition_=a)}else i.getView().setCenter(a),this.get("minZoom")?this.get("minZoom")>i.getView().getZoom()&&i.getView().setZoom(this.get("minZoom")):this.get("zoom")&&i.getView().setZoom(this.get("zoom")),this.lastPosition_=a;break}case"visible":{Oa(i.getView().calculateExtent(i.getSize()),a)||i.getView().setCenter(a);break}}var p=this.sketch_[0];p.setGeometry(o),r<this.get("minAccuracy")/2?p.setStyle(this.locStyle.ok):r<this.get("minAccuracy")?p.setStyle(this.locStyle.warn):p.setStyle(this.locStyle.error);var y;if(this.pause_&&(this.lastPosition_=a),!this.pause_&&(!s||this.condition_.call(this,s))){switch(p=this.sketch_[1],this.path_.push(a),this.get("type")){case"Point":this.path_=[a],p.setGeometry(new an(a,"XYZM"));var m=this.get("attributes");m.heading&&p.set("heading",s.getHeading()),m.accuracy&&p.set("accuracy",s.getAccuracy()),m.altitudeAccuracy&&p.set("altitudeAccuracy",s.getAltitudeAccuracy()),m.speed&&p.set("speed",s.getSpeed());break;case"LineString":this.path_.length>1?(y=new On(this.path_,"XYZM"),this.get("tolerance")&&(y=this.simplify3D(y,this.get("tolerance"))),p.setGeometry(y)):p.setGeometry();break;case"Polygon":this.path_.length>2?(y=new mr([this.path_],"XYZM"),this.get("tolerance")&&(y=this.simplify3D(y,this.get("tolerance"))),p.setGeometry(y)):p.setGeometry();break}this.dispatchEvent({type:"drawing",feature:this.sketch_[1],geolocation:s})}this.sketch_[2].setGeometry(new an(a)),this.sketch_[2].set("heading",l),this.dispatchEvent({type:"tracking",feature:this.sketch_[1],geolocation:s})}};Ae.prototype.getPosition=function(n){var e=n.getPosition();return e.push(Math.round((n.getAltitude()||0)*100)/100),e.push(Math.round(new Date().getTime()/1e3)),e};var gx=function(n){n||(n={}),n.followTrack=n.followTrack||"auto",n.zoom=n.zoom||16;var e=new Ae(n);ni.call(this,{className:n.className=((n.className||"")+" ol-geobt").trim(),interaction:e,title:n.title||"Geolocation",onToggle:function(){e.pause(!0),e.setFollowTrack(n.followTrack||"auto")}}),this.setActive(!1),e.on("tracking",function(i){this.dispatchEvent({type:"position",coordinate:i.geolocation.getPosition()})}.bind(this));var t;e.on("change:active",function(){this.dispatchEvent({type:"position"}),t&&(clearTimeout(t),t=null),e.getActive()&&(t=setTimeout(function(){e.setActive(!1),t=null}.bind(this),n.delay||3e3))}.bind(this))};ii(gx,ni);var Oi=function(n){n=n||{},typeof n.offsetBox=="number"?this.offsetBox=[n.offsetBox,n.offsetBox,n.offsetBox,n.offsetBox]:this.offsetBox=n.offsetBox;var e=document.createElement("div");n.element=e,this.closeBox=n.closeBox,this.onclose=n.onclose,this.onshow=n.onshow,ht.create("BUTTON",{className:"closeBox"+(n.closeBox?" hasclosebox":""),type:"button",click:function(){this.hide()}.bind(this),parent:e}),n.anchor!==!1&&ht.create("DIV",{className:"anchor",parent:e}),this.content=ht.create("DIV",{html:n.html||"",className:"ol-popup-content",parent:e}),n.minibar&&ht.scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:!0}),n.stopEvent&&(e.addEventListener("mousedown",function(t){t.stopPropagation()}),e.addEventListener("touchstart",function(t){t.stopPropagation()})),tu.call(this,n),this._elt=e,this.setPositioning(n.positioning||"auto"),this.setPopupClass(n.popupClass||n.className||"default"),n.anim&&this.addPopupClass("anim"),n.position&&setTimeout(function(){this.show(n.position)}.bind(this))};ii(Oi,tu);Oi.prototype.getClassPositioning=function(){var n="",e=this.getPositioning();return/bottom/.test(e)&&(n+="ol-popup-bottom "),/top/.test(e)&&(n+="ol-popup-top "),/left/.test(e)&&(n+="ol-popup-left "),/right/.test(e)&&(n+="ol-popup-right "),/^center/.test(e)&&(n+="ol-popup-middle "),/center$/.test(e)&&(n+="ol-popup-center "),n};Oi.prototype.setClosebox=function(n){this.closeBox=n,n?this.element.classList.add("hasclosebox"):this.element.classList.remove("hasclosebox")};Oi.prototype.setPopupClass=function(n){var e=["ol-popup"];this.getVisible()&&e.push("visible"),this.element.className="";var t=this.getClassPositioning().split(" ").filter(function(i){return i.length>0});n?n.split(" ").filter(function(i){return i.length>0}).forEach(function(i){e.push(i)}):e.push("default"),t.forEach(function(i){e.push(i)}),this.closeBox&&e.push("hasclosebox"),this.element.classList.add.apply(this.element.classList,e)};Oi.prototype.addPopupClass=function(n){this.element.classList.add(n)};Oi.prototype.removePopupClass=function(n){this.element.classList.remove(n)};Oi.prototype.setPositioning=function(n){n!==void 0&&(/auto/.test(n)?(this.autoPositioning=n.split("-"),this.autoPositioning.length==1&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,n=n.replace(/auto/g,"center"),n=="center"&&(n="bottom-center"),this.setPositioning_(n))};Oi.prototype.setPositioning_=function(n){if(this.element){tu.prototype.setPositioning.call(this,n),this.element.classList.remove("ol-popup-top","ol-popup-bottom","ol-popup-left","ol-popup-right","ol-popup-center","ol-popup-middle");var e=this.getClassPositioning().split(" ").filter(function(t){return t.length>0});this.element.classList.add.apply(this.element.classList,e)}};Oi.prototype.getVisible=function(){return this.element.classList.contains("visible")};Oi.prototype.show=function(n,e){!e&&typeof n=="string"&&(e=n,n=null),n===!0&&(n=this.getPosition());var t=this,i=this.getMap();if(!!i&&(e&&e!==this.prevHTML&&(this.prevHTML=e,this.content.innerHTML="",e instanceof Element?this.content.appendChild(e):ht.create("DIV",{html:e,parent:this.content}),Array.prototype.slice.call(this.content.querySelectorAll("img")).forEach(function(s){s.addEventListener("load",function(){try{i.renderSync()}catch{}t.content.dispatchEvent(new Event("scroll"))})})),n)){if(this.autoPositioning){var r=i.getPixelFromCoordinate(n),a=i.getSize(),o=[];this.autoPositioning[0]=="auto"?o[0]=r[1]<a[1]/3?"top":"bottom":o[0]=this.autoPositioning[0],o[1]=r[0]<2*a[0]/3?"left":"right",this.setPositioning_(o[0]+"-"+o[1]),this.offsetBox&&this.setOffset([this.offsetBox[o[1]=="left"?2:0],this.offsetBox[o[0]=="top"?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(n),this.element.parentElement.style.display="",typeof this.onshow=="function"&&this.onshow(),this.dispatchEvent({type:"show"}),this._tout=setTimeout(function(){t.element.classList.add("visible")},0)}};Oi.prototype.hide=function(){this.getPosition()!=null&&(typeof this.onclose=="function"&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this.element.classList.remove("visible"),this.dispatchEvent({type:"hide"}))};function yx(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var Pr=1,br=2,ps=3,_x=4,Ou=5,kc=6378137,mx=6356752314e-3,Gc=.0066943799901413165,Ka=484813681109536e-20,q=Math.PI/2,xx=.16666666666666666,Ex=.04722222222222222,Tx=.022156084656084655,tt=1e-10,xe=.017453292519943295,Gi=57.29577951308232,kt=Math.PI/4,Za=Math.PI*2,re=3.14159265359,We={};We.greenwich=0;We.lisbon=-9.131906111111;We.paris=2.337229166667;We.bogota=-74.080916666667;We.madrid=-3.687938888889;We.rome=12.452333333333;We.bern=7.439583333333;We.jakarta=106.807719444444;We.ferro=-17.666666666667;We.brussels=4.367975;We.stockholm=18.058277777778;We.athens=23.7163375;We.oslo=10.722916666667;var Cx={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},jc=/[\s_\-\/\(\)]/g;function Fn(n,e){if(n[e])return n[e];for(var t=Object.keys(n),i=e.toLowerCase().replace(jc,""),r=-1,a,o;++r<t.length;)if(a=t[r],o=a.toLowerCase().replace(jc,""),o===i)return n[a]}function Su(n){var e={},t=n.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,l){var h=l.split("=");return h.push(!0),s[h[0].toLowerCase()]=h[1],s},{}),i,r,a,o={proj:"projName",datum:"datumCode",rf:function(s){e.rf=parseFloat(s)},lat_0:function(s){e.lat0=s*xe},lat_1:function(s){e.lat1=s*xe},lat_2:function(s){e.lat2=s*xe},lat_ts:function(s){e.lat_ts=s*xe},lon_0:function(s){e.long0=s*xe},lon_1:function(s){e.long1=s*xe},lon_2:function(s){e.long2=s*xe},alpha:function(s){e.alpha=parseFloat(s)*xe},gamma:function(s){e.rectified_grid_angle=parseFloat(s)},lonc:function(s){e.longc=s*xe},x_0:function(s){e.x0=parseFloat(s)},y_0:function(s){e.y0=parseFloat(s)},k_0:function(s){e.k0=parseFloat(s)},k:function(s){e.k0=parseFloat(s)},a:function(s){e.a=parseFloat(s)},b:function(s){e.b=parseFloat(s)},r_a:function(){e.R_A=!0},zone:function(s){e.zone=parseInt(s,10)},south:function(){e.utmSouth=!0},towgs84:function(s){e.datum_params=s.split(",").map(function(l){return parseFloat(l)})},to_meter:function(s){e.to_meter=parseFloat(s)},units:function(s){e.units=s;var l=Fn(Cx,s);l&&(e.to_meter=l.to_meter)},from_greenwich:function(s){e.from_greenwich=s*xe},pm:function(s){var l=Fn(We,s);e.from_greenwich=(l||parseFloat(s))*xe},nadgrids:function(s){s==="@null"?e.datumCode="none":e.nadgrids=s},axis:function(s){var l="ewnsud";s.length===3&&l.indexOf(s.substr(0,1))!==-1&&l.indexOf(s.substr(1,1))!==-1&&l.indexOf(s.substr(2,1))!==-1&&(e.axis=s)},approx:function(){e.approx=!0}};for(i in t)r=t[i],i in o?(a=o[i],typeof a=="function"?a(r):e[a]=r):e[i]=r;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Ja=1,Bc=2,Uc=3,vs=4,$c=5,Ru=-1,wx=/\s/,Mx=/[A-Za-z]/,Ox=/[A-Za-z84_]/,gs=/[,\]]/,zc=/[\d\.E\-\+]/;function vn(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Ja}vn.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==vs)for(;wx.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case Ja:return this.neutral(n);case Bc:return this.keyword(n);case vs:return this.quoted(n);case $c:return this.afterquote(n);case Uc:return this.number(n);case Ru:return}};vn.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=vs;return}if(gs.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};vn.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Ja;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Ja,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Ru);return}};vn.prototype.number=function(n){if(zc.test(n)){this.word+=n;return}if(gs.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};vn.prototype.quoted=function(n){if(n==='"'){this.state=$c;return}this.word+=n};vn.prototype.keyword=function(n){if(Ox.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Ja;return}if(gs.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};vn.prototype.neutral=function(n){if(Mx.test(n)){this.word=n,this.state=Bc;return}if(n==='"'){this.word="",this.state=vs;return}if(zc.test(n)){this.word=n,this.state=Uc;return}if(gs.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};vn.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Ru)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Sx(n){var e=new vn(n);return e.output()}function Vc(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var i=e?{}:n,r=t.reduce(function(a,o){return ia(o,a),a},i);e&&(n[e]=r)}function ia(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},ia(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var i;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&ia(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&ia(n[3],e[t]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":n[0]=["name",n[0]],Vc(e,t,n);return;default:for(i=-1;++i<n.length;)if(!Array.isArray(n[i]))return ia(n,e[t]);return Vc(e,t,n)}}var Rx=.017453292519943295;function Ix(n,e){var t=e[0],i=e[1];!(t in n)&&i in n&&(n[t]=n[i],e.length===3&&(n[t]=e[2](n[t])))}function gn(n){return n*Rx}function Px(n){if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var e="",t=0,i=n.AXIS.length;t<i;++t){var r=[n.AXIS[t][0].toLowerCase(),n.AXIS[t][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?e+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?e+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?e+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(n.axis=e)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var a=n.GEOGCS;n.type==="GEOGCS"&&(a=n),a&&(a.DATUM?n.datumCode=a.DATUM.name.toLowerCase():n.datumCode=a.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),(n.datumCode==="new_zealand_geodetic_datum_1949"||n.datumCode==="new_zealand_1949")&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode.slice(-6)==="_ferro"&&(n.datumCode=n.datumCode.slice(0,-6)),n.datumCode.slice(-8)==="_jakarta"&&(n.datumCode=n.datumCode.slice(0,-8)),~n.datumCode.indexOf("belge")&&(n.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(n.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=a.DATUM.SPHEROID.a,n.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(n.datum_params=a.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a);function o(h){var f=n.to_meter||1;return h*f}var s=function(h){return Ix(n,h)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",gn],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",gn],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",gn],["lat0","latitude_of_origin",gn],["lat0","standard_parallel_1",gn],["lat1","standard_parallel_1",gn],["lat2","standard_parallel_2",gn],["azimuth","Azimuth"],["alpha","azimuth",gn],["srsCode","name"]];l.forEach(s),!n.long0&&n.longc&&(n.projName==="Albers_Conic_Equal_Area"||n.projName==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(n.projName==="Stereographic_South_Pole"||n.projName==="Polar Stereographic (variant B)")&&(n.lat0=gn(n.lat1>0?90:-90),n.lat_ts=n.lat1)}function Wc(n){var e=Sx(n),t=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",t]);var r={};return ia(e,r),Px(r),r}function Ne(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?Ne[n]=Su(arguments[1]):Ne[n]=Wc(arguments[1]):Ne[n]=t}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(i){Array.isArray(i)?Ne.apply(e,i):Ne(i)});if(typeof n=="string"){if(n in Ne)return Ne[n]}else"EPSG"in n?Ne["EPSG:"+n.EPSG]=n:"ESRI"in n?Ne["ESRI:"+n.ESRI]=n:"IAU2000"in n?Ne["IAU2000:"+n.IAU2000]=n:console.log(n);return}}yx(Ne);function bx(n){return typeof n=="string"}function Lx(n){return n in Ne}var Ax=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Nx(n){return Ax.some(function(e){return n.indexOf(e)>-1})}var Dx=["3857","900913","3785","102113"];function Fx(n){var e=Fn(n,"authority");if(!!e){var t=Fn(e,"epsg");return t&&Dx.indexOf(t)>-1}}function kx(n){var e=Fn(n,"extension");if(!!e)return Fn(e,"proj4")}function Gx(n){return n[0]==="+"}function jx(n){if(bx(n)){if(Lx(n))return Ne[n];if(Nx(n)){var e=Wc(n);if(Fx(e))return Ne["EPSG:3857"];var t=kx(e);return t?Su(t):e}if(Gx(n))return Su(n)}else return n}function Yc(n,e){n=n||{};var t,i;if(!e)return n;for(i in e)t=e[i],t!==void 0&&(n[i]=t);return n}function ji(n,e,t){var i=n*e;return t/Math.sqrt(1-i*i)}function Qa(n){return n<0?-1:1}function it(n){return Math.abs(n)<=re?n:n-Qa(n)*Za}function Si(n,e,t){var i=n*t,r=.5*n;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(q-e))/i}function to(n,e){for(var t=.5*n,i,r,a=q-2*Math.atan(e),o=0;o<=15;o++)if(i=n*Math.sin(a),r=q-2*Math.atan(e*Math.pow((1-i)/(1+i),t))-a,a+=r,Math.abs(r)<=1e-10)return a;return-9999}function Bx(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ji(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Ux(n){var e=n.x,t=n.y;if(t*Gi>90&&t*Gi<-90&&e*Gi>180&&e*Gi<-180)return null;var i,r;if(Math.abs(Math.abs(t)-q)<=tt)return null;if(this.sphere)i=this.x0+this.a*this.k0*it(e-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(kt+.5*t));else{var a=Math.sin(t),o=Si(this.e,t,a);i=this.x0+this.a*this.k0*it(e-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return n.x=i,n.y=r,n}function $x(n){var e=n.x-this.x0,t=n.y-this.y0,i,r;if(this.sphere)r=q-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var a=Math.exp(-t/(this.a*this.k0));if(r=to(this.e,a),r===-9999)return null}return i=it(this.long0+e/(this.a*this.k0)),n.x=i,n.y=r,n}var zx=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],Vx={init:Bx,forward:Ux,inverse:$x,names:zx};function Wx(){}function Hc(n){return n}var Yx=["longlat","identity"],Hx={init:Wx,forward:Hc,inverse:Hc,names:Yx},Xx=[Vx,Hx],ys={},_s=[];function Xc(n,e){var t=_s.length;return n.names?(_s[t]=n,n.names.forEach(function(i){ys[i.toLowerCase()]=t}),this):(console.log(e),!0)}function qx(n){if(!n)return!1;var e=n.toLowerCase();if(typeof ys[e]!="undefined"&&_s[ys[e]])return _s[ys[e]]}function Kx(){Xx.forEach(Xc)}var Zx={start:Kx,add:Xc,get:qx},Ct={};Ct.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Ct.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Ct.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Ct.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Ct.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Ct.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Ct.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Ct.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Ct.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Ct.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Ct.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Ct.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Ct.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Ct.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Ct.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Ct.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Ct.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Ct.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Ct.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Ct.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Ct.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Ct.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Ct.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Ct.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Ct.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Ct.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Ct.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Ct.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Ct.hough={a:6378270,rf:297,ellipseName:"Hough"};Ct.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Ct.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Ct.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Ct.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Ct.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Ct.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Ct.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Ct.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Ct.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Ct.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Ct.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Ct.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Jx=Ct.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ct.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Qx(n,e,t,i){var r=n*n,a=e*e,o=(r-a)/r,s=0;i?(n*=1-o*(xx+o*(Ex+o*Tx)),r=n*n,o=0):s=Math.sqrt(o);var l=(r-a)/a;return{es:o,e:s,ep2:l}}function tE(n,e,t,i,r){if(!n){var a=Fn(Ct,i);a||(a=Jx),n=a.a,e=a.b,t=a.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<tt)&&(r=!0,e=n),{a:n,b:e,rf:t,sphere:r}}var ge={};ge.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};ge.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};ge.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};ge.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};ge.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};ge.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};ge.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};ge.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};ge.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};ge.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};ge.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};ge.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};ge.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};ge.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};ge.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};ge.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};ge.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function eE(n,e,t,i,r,a,o){var s={};return n===void 0||n==="none"?s.datum_type=Ou:s.datum_type=_x,e&&(s.datum_params=e.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=Pr),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=br,s.datum_params[3]*=Ka,s.datum_params[4]*=Ka,s.datum_params[5]*=Ka,s.datum_params[6]=s.datum_params[6]/1e6+1)),o&&(s.datum_type=ps,s.grids=o),s.a=t,s.b=i,s.es=r,s.ep2=a,s}var qc={};function iE(n,e){var t=new DataView(e),i=aE(t),r=oE(t,i);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var a=sE(t,r,i),o={header:r,subgrids:a};return qc[n]=o,o}function nE(n){if(n===void 0)return null;var e=n.split(",");return e.map(rE)}function rE(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:qc[n]||null,isNull:!1}}function na(n){return n/3600*Math.PI/180}function aE(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function oE(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:Iu(n,56,56+8).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function Iu(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function sE(n,e,t){for(var i=176,r=[],a=0;a<e.nSubgrids;a++){var o=uE(n,i,t),s=hE(n,i,o,t),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),h=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[na(o.lowerLongitude),na(o.lowerLatitude)],del:[na(o.longitudeInterval),na(o.latitudeInterval)],lim:[l,h],count:o.gridNodeCount,cvs:lE(s)})}return r}function lE(n){return n.map(function(e){return[na(e.longitudeShift),na(e.latitudeShift)]})}function uE(n,e,t){return{name:Iu(n,e+8,e+16).trim(),parent:Iu(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function hE(n,e,t,i){for(var r=e+176,a=16,o=[],s=0;s<t.gridNodeCount;s++){var l={latitudeShift:n.getFloat32(r+s*a,i),longitudeShift:n.getFloat32(r+s*a+4,i),latitudeAccuracy:n.getFloat32(r+s*a+8,i),longitudeAccuracy:n.getFloat32(r+s*a+12,i)};o.push(l)}return o}function Bi(n,e){if(!(this instanceof Bi))return new Bi(n);e=e||function(h){if(h)throw h};var t=jx(n);if(typeof t!="object"){e(n);return}var i=Bi.projections.get(t.projName);if(!i){e(n);return}if(t.datumCode&&t.datumCode!=="none"){var r=Fn(ge,t.datumCode);r&&(t.datum_params=t.datum_params||(r.towgs84?r.towgs84.split(","):null),t.ellps=r.ellipse,t.datumName=r.datumName?r.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var a=tE(t.a,t.b,t.rf,t.ellps,t.sphere),o=Qx(a.a,a.b,a.rf,t.R_A),s=nE(t.nadgrids),l=t.datum||eE(t.datumCode,t.datum_params,a.a,a.b,o.es,o.ep2,s);Yc(this,t),Yc(this,i),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}Bi.projections=Zx;Bi.projections.start();function fE(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===Pr?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===br?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function Kc(n,e,t){var i=n.x,r=n.y,a=n.z?n.z:0,o,s,l,h;if(r<-q&&r>-1.001*q)r=-q;else if(r>q&&r<1.001*q)r=q;else{if(r<-q)return{x:-1/0,y:-1/0,z:n.z};if(r>q)return{x:1/0,y:1/0,z:n.z}}return i>Math.PI&&(i-=2*Math.PI),s=Math.sin(r),h=Math.cos(r),l=s*s,o=t/Math.sqrt(1-e*l),{x:(o+a)*h*Math.cos(i),y:(o+a)*h*Math.sin(i),z:(o*(1-e)+a)*s}}function Zc(n,e,t,i){var r=1e-12,a=r*r,o=30,s,l,h,f,d,p,y,m,x,C,w,S,R,I=n.x,F=n.y,g=n.z?n.z:0,G,B,X;if(s=Math.sqrt(I*I+F*F),l=Math.sqrt(I*I+F*F+g*g),s/t<r){if(G=0,l/t<r)return B=q,X=-i,{x:n.x,y:n.y,z:n.z}}else G=Math.atan2(F,I);h=g/l,f=s/l,d=1/Math.sqrt(1-e*(2-e)*f*f),m=f*(1-e)*d,x=h*d,R=0;do R++,y=t/Math.sqrt(1-e*x*x),X=s*m+g*x-y*(1-e*x*x),p=e*y/(y+X),d=1/Math.sqrt(1-p*(2-p)*f*f),C=f*(1-p)*d,w=h*d,S=w*m-C*x,m=C,x=w;while(S*S>a&&R<o);return B=Math.atan(w/Math.abs(C)),{x:G,y:B,z:X}}function cE(n,e,t){if(e===Pr)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===br){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],h=t[6];return{x:h*(n.x-l*n.y+s*n.z)+i,y:h*(l*n.x+n.y-o*n.z)+r,z:h*(-s*n.x+o*n.y+n.z)+a}}}function dE(n,e,t){if(e===Pr)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===br){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],h=t[6],f=(n.x-i)/h,d=(n.y-r)/h,p=(n.z-a)/h;return{x:f+l*d-s*p,y:-l*f+d+o*p,z:s*f-o*d+p}}}function ms(n){return n===Pr||n===br}function pE(n,e,t){if(fE(n,e)||n.datum_type===Ou||e.datum_type===Ou)return t;var i=n.a,r=n.es;if(n.datum_type===ps){var a=Jc(n,!1,t);if(a!==0)return;i=kc,r=Gc}var o=e.a,s=e.b,l=e.es;if(e.datum_type===ps&&(o=kc,s=mx,l=Gc),r===l&&i===o&&!ms(n.datum_type)&&!ms(e.datum_type))return t;if(t=Kc(t,r,i),ms(n.datum_type)&&(t=cE(t,n.datum_type,n.datum_params)),ms(e.datum_type)&&(t=dE(t,e.datum_type,e.datum_params)),t=Zc(t,l,o,s),e.datum_type===ps){var h=Jc(e,!0,t);if(h!==0)return}return t}function Jc(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var i={x:-t.x,y:t.y},r={x:Number.NaN,y:Number.NaN},a=[],o=0;o<n.grids.length;o++){var s=n.grids[o];if(a.push(s.name),s.isNull){r=i;break}if(s.grid===null){if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1;continue}var l=s.grid.subgrids[0],h=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,f=l.ll[0]-h,d=l.ll[1]-h,p=l.ll[0]+(l.lim[0]-1)*l.del[0]+h,y=l.ll[1]+(l.lim[1]-1)*l.del[1]+h;if(!(d>i.y||f>i.x||y<i.y||p<i.x)&&(r=vE(i,e,l),!isNaN(r.x)))break}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Gi+" "+i.y*Gi+" tried: '"+a+"'"),-1):(t.x=-r.x,t.y=r.y,0)}function vE(n,e,t){var i={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return i;var r={x:n.x,y:n.y};r.x-=t.ll[0],r.y-=t.ll[1],r.x=it(r.x-Math.PI)+Math.PI;var a=Qc(r,t);if(e){if(isNaN(a.x))return i;a.x=r.x-a.x,a.y=r.y-a.y;var o=9,s=1e-12,l,h;do{if(h=Qc(a,t),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:r.x-(h.x+a.x),y:r.y-(h.y+a.y)},a.x+=l.x,a.y+=l.y}while(o--&&Math.abs(l.x)>s&&Math.abs(l.y)>s);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=it(a.x+t.ll[0]),i.y=a.y+t.ll[1]}else isNaN(a.x)||(i.x=n.x+a.x,i.y=n.y+a.y);return i}function Qc(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},i={x:Math.floor(t.x),y:Math.floor(t.y)},r={x:t.x-1*i.x,y:t.y-1*i.y},a={x:Number.NaN,y:Number.NaN},o;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return a;o=i.y*e.lim[0]+i.x;var s={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var h={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var f={x:e.cvs[o][0],y:e.cvs[o][1]},d=r.x*r.y,p=r.x*(1-r.y),y=(1-r.x)*(1-r.y),m=(1-r.x)*r.y;return a.x=y*s.x+p*l.x+m*f.x+d*h.x,a.y=y*s.y+p*l.y+m*f.y+d*h.y,a}function td(n,e,t){var i=t.x,r=t.y,a=t.z||0,o,s,l,h={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(o=i,"ew".indexOf(n.axis[l])!==-1?s="x":s="y"):l===1?(o=r,"ns".indexOf(n.axis[l])!==-1?s="y":s="x"):(o=a,s="z"),n.axis[l]){case"e":h[s]=o;break;case"w":h[s]=-o;break;case"n":h[s]=o;break;case"s":h[s]=-o;break;case"u":t[s]!==void 0&&(h.z=o);break;case"d":t[s]!==void 0&&(h.z=-o);break;default:return null}return h}function ed(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function gE(n){id(n.x),id(n.y)}function id(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function yE(n,e){return(n.datum.datum_type===Pr||n.datum.datum_type===br)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Pr||e.datum.datum_type===br)&&n.datumCode!=="WGS84"}function xs(n,e,t,i){var r;if(Array.isArray(t)&&(t=ed(t)),gE(t),n.datum&&e.datum&&yE(n,e)&&(r=new Bi("WGS84"),t=xs(n,r,t,i),n=r),i&&n.axis!=="enu"&&(t=td(n,!1,t)),n.projName==="longlat")t={x:t.x*xe,y:t.y*xe,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=pE(n.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*Gi,y:t.y*Gi,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),i&&e.axis!=="enu"?td(e,!0,t):t}var nd=Bi("WGS84");function Pu(n,e,t,i){var r,a,o;return Array.isArray(t)?(r=xs(n,e,t,i)||{x:NaN,y:NaN},t.length>2?typeof n.name!="undefined"&&n.name==="geocent"||typeof e.name!="undefined"&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(t.splice(3)):[r.x,r.y,t[2]].concat(t.splice(3)):[r.x,r.y].concat(t.splice(2)):[r.x,r.y]):(a=xs(n,e,t,i),o=Object.keys(t),o.length===2||o.forEach(function(s){if(typeof n.name!="undefined"&&n.name==="geocent"||typeof e.name!="undefined"&&e.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;a[s]=t[s]}),a)}function rd(n){return n instanceof Bi?n:n.oProj?n.oProj:Bi(n)}function pi(n,e,t){n=rd(n);var i=!1,r;return typeof e=="undefined"?(e=n,n=nd,i=!0):(typeof e.x!="undefined"||Array.isArray(e))&&(t=e,e=n,n=nd,i=!0),e=rd(e),t?Pu(n,e,t):(r={forward:function(a,o){return Pu(n,e,a,o)},inverse:function(a,o){return Pu(e,n,a,o)}},i&&(r.oProj=e),r)}var ad=6,od="AJSAJS",sd="AFAFAF",ra=65,Ye=73,vi=79,eo=86,io=90,_E={forward:ld,inverse:mE,toPoint:ud};function ld(n,e){return e=e||5,TE(xE({lat:n[1],lon:n[0]}),e)}function mE(n){var e=Lu(cd(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function ud(n){var e=Lu(cd(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function bu(n){return n*(Math.PI/180)}function hd(n){return 180*(n/Math.PI)}function xE(n){var e=n.lat,t=n.lon,i=6378137,r=.00669438,a=.9996,o,s,l,h,f,d,p,y=bu(e),m=bu(t),x,C;C=Math.floor((t+180)/6)+1,t===180&&(C=60),e>=56&&e<64&&t>=3&&t<12&&(C=32),e>=72&&e<84&&(t>=0&&t<9?C=31:t>=9&&t<21?C=33:t>=21&&t<33?C=35:t>=33&&t<42&&(C=37)),o=(C-1)*6-180+3,x=bu(o),s=r/(1-r),l=i/Math.sqrt(1-r*Math.sin(y)*Math.sin(y)),h=Math.tan(y)*Math.tan(y),f=s*Math.cos(y)*Math.cos(y),d=Math.cos(y)*(m-x),p=i*((1-r/4-3*r*r/64-5*r*r*r/256)*y-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*y)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*y)-35*r*r*r/3072*Math.sin(6*y));var w=a*l*(d+(1-h+f)*d*d*d/6+(5-18*h+h*h+72*f-58*s)*d*d*d*d*d/120)+5e5,S=a*(p+l*Math.tan(y)*(d*d/2+(5-h+9*f+4*f*f)*d*d*d*d/24+(61-58*h+h*h+600*f-330*s)*d*d*d*d*d*d/720));return e<0&&(S+=1e7),{northing:Math.round(S),easting:Math.round(w),zoneNumber:C,zoneLetter:EE(e)}}function Lu(n){var e=n.northing,t=n.easting,i=n.zoneLetter,r=n.zoneNumber;if(r<0||r>60)return null;var a=.9996,o=6378137,s=.00669438,l,h=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),f,d,p,y,m,x,C,w,S,R=t-5e5,I=e;i<"N"&&(I-=1e7),C=(r-1)*6-180+3,l=s/(1-s),x=I/a,w=x/(o*(1-s/4-3*s*s/64-5*s*s*s/256)),S=w+(3*h/2-27*h*h*h/32)*Math.sin(2*w)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*w)+151*h*h*h/96*Math.sin(6*w),f=o/Math.sqrt(1-s*Math.sin(S)*Math.sin(S)),d=Math.tan(S)*Math.tan(S),p=l*Math.cos(S)*Math.cos(S),y=o*(1-s)/Math.pow(1-s*Math.sin(S)*Math.sin(S),1.5),m=R/(f*a);var F=S-f*Math.tan(S)/y*(m*m/2-(5+3*d+10*p-4*p*p-9*l)*m*m*m*m/24+(61+90*d+298*p+45*d*d-252*l-3*p*p)*m*m*m*m*m*m/720);F=hd(F);var g=(m-(1+2*d+p)*m*m*m/6+(5-2*p+28*d-3*p*p+8*l+24*d*d)*m*m*m*m*m/120)/Math.cos(S);g=C+hd(g);var G;if(n.accuracy){var B=Lu({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});G={top:B.lat,right:B.lon,bottom:F,left:g}}else G={lat:F,lon:g};return G}function EE(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function TE(n,e){var t="00000"+n.easting,i="00000"+n.northing;return n.zoneNumber+n.zoneLetter+CE(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+i.substr(i.length-5,e)}function CE(n,e,t){var i=fd(t),r=Math.floor(n/1e5),a=Math.floor(e/1e5)%20;return wE(r,a,i)}function fd(n){var e=n%ad;return e===0&&(e=ad),e}function wE(n,e,t){var i=t-1,r=od.charCodeAt(i),a=sd.charCodeAt(i),o=r+n-1,s=a+e,l=!1;o>io&&(o=o-io+ra-1,l=!0),(o===Ye||r<Ye&&o>Ye||(o>Ye||r<Ye)&&l)&&o++,(o===vi||r<vi&&o>vi||(o>vi||r<vi)&&l)&&(o++,o===Ye&&o++),o>io&&(o=o-io+ra-1),s>eo?(s=s-eo+ra-1,l=!0):l=!1,(s===Ye||a<Ye&&s>Ye||(s>Ye||a<Ye)&&l)&&s++,(s===vi||a<vi&&s>vi||(s>vi||a<vi)&&l)&&(s++,s===Ye&&s++),s>eo&&(s=s-eo+ra-1);var h=String.fromCharCode(o)+String.fromCharCode(s);return h}function cd(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,i="",r,a=0;!/[A-Z]/.test(r=n.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+n;i+=r,a++}var o=parseInt(i,10);if(a===0||a+3>e)throw"MGRSPoint bad conversion from: "+n;var s=n.charAt(a++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+n;t=n.substring(a,a+=2);for(var l=fd(o),h=ME(t.charAt(0),l),f=OE(t.charAt(1),l);f<SE(s);)f+=2e6;var d=e-a;if(d%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var p=d/2,y=0,m=0,x,C,w,S,R;return p>0&&(x=1e5/Math.pow(10,p),C=n.substring(a,a+p),y=parseFloat(C)*x,w=n.substring(a+p),m=parseFloat(w)*x),S=y+h,R=m+f,{easting:S,northing:R,zoneLetter:s,zoneNumber:o,accuracy:x}}function ME(n,e){for(var t=od.charCodeAt(e-1),i=1e5,r=!1;t!==n.charCodeAt(0);){if(t++,t===Ye&&t++,t===vi&&t++,t>io){if(r)throw"Bad character: "+n;t=ra,r=!0}i+=1e5}return i}function OE(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=sd.charCodeAt(e-1),i=0,r=!1;t!==n.charCodeAt(0);){if(t++,t===Ye&&t++,t===vi&&t++,t>eo){if(r)throw"Bad character: "+n;t=ra,r=!0}i+=1e5}return i}function SE(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function aa(n,e,t){if(!(this instanceof aa))return new aa(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e=="undefined"){var i=n.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}aa.fromMGRS=function(n){return new aa(ud(n))};aa.prototype.toMGRS=function(n){return ld([this.x,this.y],n)};var RE=1,IE=.25,dd=.046875,pd=.01953125,vd=.01068115234375,PE=.75,bE=.46875,LE=.013020833333333334,AE=.007120768229166667,NE=.3645833333333333,DE=.005696614583333333,FE=.3076171875;function gd(n){var e=[];e[0]=RE-n*(IE+n*(dd+n*(pd+n*vd))),e[1]=n*(PE-n*(dd+n*(pd+n*vd)));var t=n*n;return e[2]=t*(bE-n*(LE+n*AE)),t*=n,e[3]=t*(NE-n*DE),e[4]=t*n*FE,e}function Es(n,e,t,i){return t*=e,e*=e,i[0]*n-t*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var kE=20;function yd(n,e,t){for(var i=1/(1-e),r=n,a=kE;a;--a){var o=Math.sin(r),s=1-e*o*o;if(s=(Es(r,o,Math.cos(r),t)-n)*(s*Math.sqrt(s))*i,r-=s,Math.abs(s)<tt)return r}return r}function GE(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=gd(this.es),this.ml0=Es(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function jE(n){var e=n.x,t=n.y,i=it(e-this.long0),r,a,o,s=Math.sin(t),l=Math.cos(t);if(this.es){var f=l*i,d=Math.pow(f,2),p=this.ep2*Math.pow(l,2),y=Math.pow(p,2),m=Math.abs(l)>tt?Math.tan(t):0,x=Math.pow(m,2),C=Math.pow(x,2);r=1-this.es*Math.pow(s,2),f=f/Math.sqrt(r);var w=Es(t,s,l,this.en);a=this.a*(this.k0*f*(1+d/6*(1-x+p+d/20*(5-18*x+C+14*p-58*x*p+d/42*(61+179*C-C*x-479*x)))))+this.x0,o=this.a*(this.k0*(w-this.ml0+s*i*f/2*(1+d/12*(5-x+9*p+4*y+d/30*(61+C-58*x+270*p-330*x*p+d/56*(1385+543*C-C*x-3111*x))))))+this.y0}else{var h=l*Math.sin(i);if(Math.abs(Math.abs(h)-1)<tt)return 93;if(a=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,o=l*Math.cos(i)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(o),h>=1){if(h-1>tt)return 93;o=0}else o=Math.acos(o);t<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return n.x=a,n.y=o,n}function BE(n){var e,t,i,r,a=(n.x-this.x0)*(1/this.a),o=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,t=yd(e,this.es,this.en),Math.abs(t)<q){var d=Math.sin(t),p=Math.cos(t),y=Math.abs(p)>tt?Math.tan(t):0,m=this.ep2*Math.pow(p,2),x=Math.pow(m,2),C=Math.pow(y,2),w=Math.pow(C,2);e=1-this.es*Math.pow(d,2);var S=a*Math.sqrt(e)/this.k0,R=Math.pow(S,2);e=e*y,i=t-e*R/(1-this.es)*.5*(1-R/12*(5+3*C-9*m*C+m-4*x-R/30*(61+90*C-252*m*C+45*w+46*m-R/56*(1385+3633*C+4095*w+1574*w*C)))),r=it(this.long0+S*(1-R/6*(1+2*C+m-R/20*(5+28*C+24*w+8*m*C+6*m-R/42*(61+662*C+1320*w+720*w*C))))/p)}else i=q*Qa(o),r=0;else{var s=Math.exp(a/this.k0),l=.5*(s-1/s),h=this.lat0+o/this.k0,f=Math.cos(h);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(l,2))),i=Math.asin(e),o<0&&(i=-i),l===0&&f===0?r=0:r=it(Math.atan2(l,f)+this.long0)}return n.x=r,n.y=i,n}var UE=["Fast_Transverse_Mercator","Fast Transverse Mercator"],Ts={init:GE,forward:jE,inverse:BE,names:UE};function _d(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function Cs(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),i=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(i,2))}function $E(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function zE(n){var e=Math.abs(n);return e=$E(e*(1+e/(Cs(1,e)+1))),n<0?-e:e}function Au(n,e){for(var t=2*Math.cos(2*e),i=n.length-1,r=n[i],a=0,o;--i>=0;)o=-a+t*r+n[i],a=r,r=o;return e+o*Math.sin(2*e)}function VE(n,e){for(var t=2*Math.cos(e),i=n.length-1,r=n[i],a=0,o;--i>=0;)o=-a+t*r+n[i],a=r,r=o;return Math.sin(e)*o}function WE(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function md(n,e,t){for(var i=Math.sin(e),r=Math.cos(e),a=_d(t),o=WE(t),s=2*r*o,l=-2*i*a,h=n.length-1,f=n[h],d=0,p=0,y=0,m,x;--h>=0;)m=p,x=d,p=f,d=y,f=-m+s*p-l*d+n[h],y=-x+l*p+s*d;return s=i*o,l=r*a,[s*f-l*y,s*y+l*f]}function YE(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ts.init.apply(this),this.forward=Ts.forward,this.inverse=Ts.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var i=Au(this.cbg,this.lat0);this.Zb=-this.Qn*(i+VE(this.gtu,2*i))}function HE(n){var e=it(n.x-this.long0),t=n.y;t=Au(this.cbg,t);var i=Math.sin(t),r=Math.cos(t),a=Math.sin(e),o=Math.cos(e);t=Math.atan2(i,o*r),e=Math.atan2(a*r,Cs(i,r*o)),e=zE(Math.tan(e));var s=md(this.gtu,2*t,2*e);t=t+s[0],e=e+s[1];var l,h;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,h=1/0),n.x=l,n.y=h,n}function XE(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var i,r;if(Math.abs(e)<=2.623395162778){var a=md(this.utg,2*t,2*e);t=t+a[0],e=e+a[1],e=Math.atan(_d(e));var o=Math.sin(t),s=Math.cos(t),l=Math.sin(e),h=Math.cos(e);t=Math.atan2(o*h,Cs(l,h*s)),e=Math.atan2(l,h*s),i=it(e+this.long0),r=Au(this.cgb,t)}else i=1/0,r=1/0;return n.x=i,n.y=r,n}var qE=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],ws={init:YE,forward:HE,inverse:XE,names:qE};function KE(n,e){if(n===void 0){if(n=Math.floor((it(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var ZE="etmerc";function JE(){var n=KE(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*xe,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ws.init.apply(this),this.forward=ws.forward,this.inverse=ws.inverse}var QE=["Universal Transverse Mercator System","utm"],tT={init:JE,names:QE,dependsOn:ZE};function Nu(n,e){return Math.pow((1-n)/(1+n),e)}var eT=20;function iT(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+kt)/(Math.pow(Math.tan(.5*this.lat0+kt),this.C)*Nu(this.e*n,this.ratexp))}function nT(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+kt),this.C)*Nu(this.e*Math.sin(t),this.ratexp))-q,n.x=this.C*e,n}function rT(n){for(var e=1e-14,t=n.x/this.C,i=n.y,r=Math.pow(Math.tan(.5*i+kt)/this.K,1/this.C),a=eT;a>0&&(i=2*Math.atan(r*Nu(this.e*Math.sin(n.y),-.5*this.e))-q,!(Math.abs(i-n.y)<e));--a)n.y=i;return a?(n.x=t,n.y=i,n):null}var aT=["gauss"],Du={init:iT,forward:nT,inverse:rT,names:aT};function oT(){Du.init.apply(this),!!this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function sT(n){var e,t,i,r;return n.x=it(n.x-this.long0),Du.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),i=Math.cos(n.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*i),n.x=r*t*Math.sin(n.x),n.y=r*(this.cosc0*e-this.sinc0*t*i),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function lT(n){var e,t,i,r,a;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,a=Math.sqrt(n.x*n.x+n.y*n.y)){var o=2*Math.atan2(a,this.R2);e=Math.sin(o),t=Math.cos(o),r=Math.asin(t*this.sinc0+n.y*e*this.cosc0/a),i=Math.atan2(n.x*e,a*this.cosc0*t-n.y*this.sinc0*e)}else r=this.phic0,i=0;return n.x=i,n.y=r,Du.inverse.apply(this,[n]),n.x=it(n.x+this.long0),n}var uT=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],hT={init:oT,forward:sT,inverse:lT,names:uT};function fT(n,e,t){return e*=t,Math.tan(.5*(q+n))*Math.pow((1-e)/(1+e),.5*t)}function cT(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=tt&&(this.k0=.5*(1+Qa(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=tt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=tt&&(this.k0=.5*this.cons*ji(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Si(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ji(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-q,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function dT(n){var e=n.x,t=n.y,i=Math.sin(t),r=Math.cos(t),a,o,s,l,h,f,d=it(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=tt&&Math.abs(t+this.lat0)<=tt?(n.x=NaN,n.y=NaN,n):this.sphere?(a=2*this.k0/(1+this.sinlat0*i+this.coslat0*r*Math.cos(d)),n.x=this.a*a*r*Math.sin(d)+this.x0,n.y=this.a*a*(this.coslat0*i-this.sinlat0*r*Math.cos(d))+this.y0,n):(o=2*Math.atan(this.ssfn_(t,i,this.e))-q,l=Math.cos(o),s=Math.sin(o),Math.abs(this.coslat0)<=tt?(h=Si(this.e,t*this.con,this.con*i),f=2*this.a*this.k0*h/this.cons,n.x=this.x0+f*Math.sin(e-this.long0),n.y=this.y0-this.con*f*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<tt?(a=2*this.a*this.k0/(1+l*Math.cos(d)),n.y=a*s):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*l*Math.cos(d))),n.y=a*(this.cosX0*s-this.sinX0*l*Math.cos(d))+this.y0),n.x=a*l*Math.sin(d)+this.x0,n))}function pT(n){n.x-=this.x0,n.y-=this.y0;var e,t,i,r,a,o=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,t=this.lat0,o<=tt?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(s)*this.sinlat0+n.y*Math.sin(s)*this.coslat0/o),Math.abs(this.coslat0)<tt?this.lat0>0?e=it(this.long0+Math.atan2(n.x,-1*n.y)):e=it(this.long0+Math.atan2(n.x,n.y)):e=it(this.long0+Math.atan2(n.x*Math.sin(s),o*this.coslat0*Math.cos(s)-n.y*this.sinlat0*Math.sin(s))),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=tt){if(o<=tt)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,i=o*this.cons/(2*this.a*this.k0),t=this.con*to(this.e,i),e=this.con*it(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=tt?a=this.X0:(a=Math.asin(Math.cos(r)*this.sinX0+n.y*Math.sin(r)*this.cosX0/o),e=it(this.long0+Math.atan2(n.x*Math.sin(r),o*this.cosX0*Math.cos(r)-n.y*this.sinX0*Math.sin(r)))),t=-1*to(this.e,Math.tan(.5*(q+a)));return n.x=e,n.y=t,n}var vT=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],gT={init:cT,forward:dT,inverse:pT,names:vT,ssfn_:fT};function yT(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,i=this.rf,r=1/i,a=2*r-Math.pow(r,2),o=this.e=Math.sqrt(a);this.R=this.k0*t*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),h=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*l+this.alpha*o/2*h}function _T(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),i=-this.alpha*(e+t)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),a=this.alpha*(n.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(a))),s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(a));return n.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,n.x=this.R*o+this.x0,n}function mT(n){for(var e=n.x-this.x0,t=n.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),s=this.lambda0+o/this.alpha,l=0,h=a,f=-1e3,d=0;Math.abs(h-f)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),f=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=s,n.y=h,n}var xT=["somerc"],ET={init:yT,forward:_T,inverse:mT,names:xT},oa=1e-7;function TT(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.PROJECTION=="object"?Object.keys(n.PROJECTION)[0]:n.PROJECTION;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1}function CT(){var n,e,t,i,r,a,o,s,l,h,f=0,d,p=0,y=0,m=0,x=0,C=0,w=0;this.no_off=TT(this),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var R=!1;if("rectified_grid_angle"in this&&(R=!0),S&&(w=this.alpha),R&&(f=this.rectified_grid_angle*xe),S||R)p=this.longc;else if(y=this.long1,x=this.lat1,m=this.long2,C=this.lat2,Math.abs(x-C)<=oa||(n=Math.abs(x))<=oa||Math.abs(n-q)<=oa||Math.abs(Math.abs(this.lat0)-q)<=oa||Math.abs(Math.abs(C)-q)<=oa)throw new Error;var I=1-this.es;e=Math.sqrt(I),Math.abs(this.lat0)>tt?(s=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*s*s,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/I),this.A=this.B*this.k0*e/n,i=this.B*e/(t*Math.sqrt(n)),r=i*i-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(Si(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),S||R?(S?(d=Math.asin(Math.sin(w)/i),R||(f=w)):(d=f,w=Math.asin(i*Math.sin(d))),this.lam0=p-Math.asin(.5*(r-1/r)*Math.tan(d))/this.B):(a=Math.pow(Si(this.e,x,Math.sin(x)),this.B),o=Math.pow(Si(this.e,C,Math.sin(C)),this.B),r=this.E/a,l=(o-a)/(o+a),h=this.E*this.E,h=(h-o*a)/(h+o*a),n=y-m,n<-Math.pi?m-=Za:n>Math.pi&&(m+=Za),this.lam0=it(.5*(y+m)-Math.atan(h*Math.tan(.5*this.B*(y-m))/l)/this.B),d=Math.atan(2*Math.sin(this.B*it(y-this.lam0))/(r-1/r)),f=w=Math.asin(i*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(w))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(kt-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(kt+r))}function wT(n){var e={},t,i,r,a,o,s,l,h;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-q)>tt){if(o=this.E/Math.pow(Si(this.e,n.y,Math.sin(n.y)),this.B),s=1/o,t=.5*(o-s),i=.5*(o+s),a=Math.sin(this.B*n.x),r=(t*this.singam-a*this.cosgam)/i,Math.abs(Math.abs(r)-1)<tt)throw new Error;h=.5*this.ArB*Math.log((1-r)/(1+r)),s=Math.cos(this.B*n.x),Math.abs(s)<oa?l=this.A*n.x:l=this.ArB*Math.atan2(t*this.cosgam+a*this.singam,s)}else h=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(e.x=l,e.y=h):(l-=this.u_0,e.x=h*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-h*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function MT(n){var e,t,i,r,a,o,s,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*t),r=.5*(i-1/i),a=.5*(i+1/i),o=Math.sin(this.BrA*e),s=(o*this.cosgam+r*this.singam)/a,Math.abs(Math.abs(s)-1)<tt)l.x=0,l.y=s<0?-q:q;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=to(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var OT=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],ST={init:CT,forward:wT,inverse:MT,names:OT};function RT(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<tt)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),i=ji(this.e,e,t),r=Si(this.e,this.lat1,e),a=Math.sin(this.lat2),o=Math.cos(this.lat2),s=ji(this.e,a,o),l=Si(this.e,this.lat2,a),h=Si(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>tt?this.ns=Math.log(i/s)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function IT(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=tt&&(t=Qa(t)*(q-2*tt));var i=Math.abs(Math.abs(t)-q),r,a;if(i>tt)r=Si(this.e,t,Math.sin(t)),a=this.a*this.f0*Math.pow(r,this.ns);else{if(i=t*this.ns,i<=0)return null;a=0}var o=this.ns*it(e-this.long0);return n.x=this.k0*(a*Math.sin(o))+this.x0,n.y=this.k0*(this.rh-a*Math.cos(o))+this.y0,n}function PT(n){var e,t,i,r,a,o=(n.x-this.x0)/this.k0,s=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+s*s),t=1):(e=-Math.sqrt(o*o+s*s),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*o,t*s)),e!==0||this.ns>0){if(t=1/this.ns,i=Math.pow(e/(this.a*this.f0),t),r=to(this.e,i),r===-9999)return null}else r=-q;return a=it(l/this.ns+this.long0),n.x=a,n.y=r,n}var bT=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"],LT={init:RT,forward:IT,inverse:PT,names:bT};function AT(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function NT(n){var e,t,i,r,a,o,s,l=n.x,h=n.y,f=it(l-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),i=-f*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(i)),a=Math.asin(Math.cos(t)*Math.sin(i)/Math.cos(r)),o=this.n*a,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),n.y=s*Math.cos(o)/1,n.x=s*Math.sin(o)/1,this.czech||(n.y*=-1,n.x*=-1),n}function DT(n){var e,t,i,r,a,o,s,l,h=n.x;n.x=n.y,n.y=h,this.czech||(n.y*=-1,n.x*=-1),o=Math.sqrt(n.x*n.x+n.y*n.y),a=Math.atan2(n.y,n.x),r=a/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),t=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),n.x=this.long0-t/this.alfa,s=e,l=0;var f=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-n.y)<1e-10&&(l=1),s=n.y,f+=1;while(l===0&&f<15);return f>=15?null:n}var FT=["Krovak","krovak"],kT={init:AT,forward:NT,inverse:DT,names:FT};function De(n,e,t,i,r){return n*r-e*Math.sin(2*r)+t*Math.sin(4*r)-i*Math.sin(6*r)}function no(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function ro(n){return .375*n*(1+.25*n*(1+.46875*n))}function ao(n){return .05859375*n*n*(1+.75*n)}function oo(n){return n*n*n*(35/3072)}function sa(n,e,t){var i=e*t;return n/Math.sqrt(1-i*i)}function la(n){return Math.abs(n)<q?n:n-Qa(n)*Math.PI}function Ms(n,e,t,i,r){var a,o;a=n/e;for(var s=0;s<15;s++)if(o=(n-(e*a-t*Math.sin(2*a)+i*Math.sin(4*a)-r*Math.sin(6*a)))/(e-2*t*Math.cos(2*a)+4*i*Math.cos(4*a)-6*r*Math.cos(6*a)),a+=o,Math.abs(o)<=1e-10)return a;return NaN}function GT(){this.sphere||(this.e0=no(this.es),this.e1=ro(this.es),this.e2=ao(this.es),this.e3=oo(this.es),this.ml0=this.a*De(this.e0,this.e1,this.e2,this.e3,this.lat0))}function jT(n){var e,t,i=n.x,r=n.y;if(i=it(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),t=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var a=Math.sin(r),o=Math.cos(r),s=sa(this.a,this.e,a),l=Math.tan(r)*Math.tan(r),h=i*Math.cos(r),f=h*h,d=this.es*o*o/(1-this.es),p=this.a*De(this.e0,this.e1,this.e2,this.e3,r);e=s*h*(1-f*l*(1/6-(8-l+8*d)*f/120)),t=p-this.ml0+s*a/o*f*(.5+(5-l+6*d)*f/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function BT(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,i,r;if(this.sphere){var a=t+this.lat0;i=Math.asin(Math.sin(a)*Math.cos(e)),r=Math.atan2(Math.tan(e),Math.cos(a))}else{var o=this.ml0/this.a+t,s=Ms(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-q)<=tt)return n.x=this.long0,n.y=q,t<0&&(n.y*=-1),n;var l=sa(this.a,this.e,Math.sin(s)),h=l*l*l/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(s),2),d=e*this.a/l,p=d*d;i=s-l*Math.tan(s)/h*d*d*(.5-(1+3*f)*d*d/24),r=d*(1-p*(f/3+(1+3*f)*f*p/15))/Math.cos(s)}return n.x=it(r+this.long0),n.y=la(i),n}var UT=["Cassini","Cassini_Soldner","cass"],$T={init:GT,forward:jT,inverse:BT,names:UT};function kn(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var zT=1,VT=2,WT=3,YT=4;function HT(){var n=Math.abs(this.lat0);if(Math.abs(n-q)<tt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<tt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=kn(this.e,1),this.mmf=.5/(1-this.es),this.apa=iC(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=kn(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function XT(n){var e,t,i,r,a,o,s,l,h,f,d=n.x,p=n.y;if(d=it(d-this.long0),this.sphere){if(a=Math.sin(p),f=Math.cos(p),i=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+f*i:1+this.sinph0*a+this.cosph0*f*i,t<=tt)return null;t=Math.sqrt(2/t),e=t*f*Math.sin(d),t*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*f*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(p+this.lat0)<tt)return null;t=kt-p*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(d),t*=i}}else{switch(s=0,l=0,h=0,i=Math.cos(d),r=Math.sin(d),a=Math.sin(p),o=kn(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=o/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:h=1+this.sinb1*s+this.cosb1*l*i;break;case this.EQUIT:h=1+l*i;break;case this.N_POLE:h=q+p,o=this.qp-o;break;case this.S_POLE:h=p-q,o=this.qp+o;break}if(Math.abs(h)<tt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?t=this.ymf*h*(this.cosb1*s-this.sinb1*l*i):t=(h=Math.sqrt(2/(1+l*i)))*s*this.ymf,e=this.xmf*h*l*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(h=Math.sqrt(o))*r,t=i*(this.mode===this.S_POLE?h:-h)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function qT(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,i,r,a,o,s,l,h;if(this.sphere){var f=0,d,p=0;if(d=Math.sqrt(e*e+t*t),r=d*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(p=Math.sin(r),f=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(d)<=tt?0:Math.asin(t*p/d),e*=p,t=f*d;break;case this.OBLIQ:r=Math.abs(d)<=tt?this.lat0:Math.asin(f*this.sinph0+t*p*this.cosph0/d),e*=p*this.cosph0,t=(f-Math.sin(r)*this.sinph0)*d;break;case this.N_POLE:t=-t,r=q-r;break;case this.S_POLE:r-=q;break}i=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<tt)return n.x=this.long0,n.y=this.lat0,n;o=2*Math.asin(.5*l/this.rq),a=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(h=a*this.sinb1+t*o*this.cosb1/l,s=this.qp*h,t=l*this.cosb1*a-t*this.sinb1*o):(h=t*o/l,s=this.qp*h,t=l*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),s=e*e+t*t,!s)return n.x=this.long0,n.y=this.lat0,n;h=1-s/this.qp,this.mode===this.S_POLE&&(h=-h)}i=Math.atan2(e,t),r=nC(Math.asin(h),this.apa)}return n.x=it(this.long0+i),n.y=r,n}var KT=.3333333333333333,ZT=.17222222222222222,JT=.10257936507936508,QT=.06388888888888888,tC=.0664021164021164,eC=.016415012942191543;function iC(n){var e,t=[];return t[0]=n*KT,e=n*n,t[0]+=e*ZT,t[1]=e*QT,e*=n,t[0]+=e*JT,t[1]+=e*tC,t[2]=e*eC,t}function nC(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var rC=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],aC={init:HT,forward:XT,inverse:qT,names:rC,S_POLE:zT,N_POLE:VT,EQUIT:WT,OBLIQ:YT};function Gn(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function oC(){Math.abs(this.lat1+this.lat2)<tt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ji(this.e3,this.sin_po,this.cos_po),this.qs1=kn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ji(this.e3,this.sin_po,this.cos_po),this.qs2=kn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=kn(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>tt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function sC(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var i=kn(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,a=this.ns0*it(e-this.long0),o=r*Math.sin(a)+this.x0,s=this.rh-r*Math.cos(a)+this.y0;return n.x=o,n.y=s,n}function lC(n){var e,t,i,r,a,o;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),i=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),i=-1),r=0,e!==0&&(r=Math.atan2(i*n.x,i*n.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(t=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,t)),a=it(r/this.ns0+this.long0),n.x=a,n.y=o,n}function uC(n,e){var t,i,r,a,o,s=Gn(.5*e);if(n<tt)return s;for(var l=n*n,h=1;h<=25;h++)if(t=Math.sin(s),i=Math.cos(s),r=n*t,a=1-r*r,o=.5*a*a/i*(e/(1-l)-t/a+.5/n*Math.log((1-r)/(1+r))),s=s+o,Math.abs(o)<=1e-7)return s;return null}var hC=["Albers_Conic_Equal_Area","Albers","aea"],fC={init:oC,forward:sC,inverse:lC,names:hC,phi1z:uC};function cC(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function dC(n){var e,t,i,r,a,o,s,l,h=n.x,f=n.y;return i=it(h-this.long0),e=Math.sin(f),t=Math.cos(f),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*t*r,a=1,o>0||Math.abs(o)<=tt?(s=this.x0+this.a*a*t*Math.sin(i)/o,l=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*t*r)/o):(s=this.x0+this.infinity_dist*t*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*r)),n.x=s,n.y=l,n}function pC(n){var e,t,i,r,a,o;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(r=Math.atan2(e,this.rc),t=Math.sin(r),i=Math.cos(r),o=Gn(i*this.sin_p14+n.y*t*this.cos_p14/e),a=Math.atan2(n.x*t,e*this.cos_p14*i-n.y*this.sin_p14*t),a=it(this.long0+a)):(o=this.phic0,a=0),n.x=a,n.y=o,n}var vC=["gnom"],gC={init:cC,forward:dC,inverse:pC,names:vC};function yC(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*q:q;for(var i=Math.asin(.5*e),r,a,o,s,l=0;l<30;l++)if(a=Math.sin(i),o=Math.cos(i),s=n*a,r=Math.pow(1-s*s,2)/(2*o)*(e/(1-n*n)-a/(1-s*s)+.5/n*Math.log((1-s)/(1+s))),i+=r,Math.abs(r)<=1e-10)return i;return NaN}function _C(){this.sphere||(this.k0=ji(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function mC(n){var e=n.x,t=n.y,i,r,a=it(e-this.long0);if(this.sphere)i=this.x0+this.a*a*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var o=kn(this.e,Math.sin(t));i=this.x0+this.a*this.k0*a,r=this.y0+this.a*o*.5/this.k0}return n.x=i,n.y=r,n}function xC(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=it(this.long0+n.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=yC(this.e,2*n.y*this.k0/this.a),e=it(this.long0+n.x/(this.a*this.k0))),n.x=e,n.y=t,n}var EC=["cea"],TC={init:_C,forward:mC,inverse:xC,names:EC};function CC(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function wC(n){var e=n.x,t=n.y,i=it(e-this.long0),r=la(t-this.lat0);return n.x=this.x0+this.a*i*this.rc,n.y=this.y0+this.a*r,n}function MC(n){var e=n.x,t=n.y;return n.x=it(this.long0+(e-this.x0)/(this.a*this.rc)),n.y=la(this.lat0+(t-this.y0)/this.a),n}var OC=["Equirectangular","Equidistant_Cylindrical","eqc"],SC={init:CC,forward:wC,inverse:MC,names:OC},xd=20;function RC(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=no(this.es),this.e1=ro(this.es),this.e2=ao(this.es),this.e3=oo(this.es),this.ml0=this.a*De(this.e0,this.e1,this.e2,this.e3,this.lat0)}function IC(n){var e=n.x,t=n.y,i,r,a,o=it(e-this.long0);if(a=o*Math.sin(t),this.sphere)Math.abs(t)<=tt?(i=this.a*o,r=-1*this.a*this.lat0):(i=this.a*Math.sin(a)/Math.tan(t),r=this.a*(la(t-this.lat0)+(1-Math.cos(a))/Math.tan(t)));else if(Math.abs(t)<=tt)i=this.a*o,r=-1*this.ml0;else{var s=sa(this.a,this.e,Math.sin(t))/Math.tan(t);i=s*Math.sin(a),r=this.a*De(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+s*(1-Math.cos(a))}return n.x=i+this.x0,n.y=r+this.y0,n}function PC(n){var e,t,i,r,a,o,s,l,h;if(i=n.x-this.x0,r=n.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=tt)e=it(i/this.a+this.long0),t=0;else{o=this.lat0+r/this.a,s=i*i/this.a/this.a+o*o,l=o;var f;for(a=xd;a;--a)if(f=Math.tan(l),h=-1*(o*(l*f+1)-l-.5*(l*l+s)*f)/((l-o)/f-1),l+=h,Math.abs(h)<=tt){t=l;break}e=it(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(t))}else if(Math.abs(r+this.ml0)<=tt)t=0,e=it(this.long0+i/this.a);else{o=(this.ml0+r)/this.a,s=i*i/this.a/this.a+o*o,l=o;var d,p,y,m,x;for(a=xd;a;--a)if(x=this.e*Math.sin(l),d=Math.sqrt(1-x*x)*Math.tan(l),p=this.a*De(this.e0,this.e1,this.e2,this.e3,l),y=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),m=p/this.a,h=(o*(d*m+1)-m-.5*d*(m*m+s))/(this.es*Math.sin(2*l)*(m*m+s-2*o*m)/(4*d)+(o-m)*(d*y-2/Math.sin(2*l))-y),l-=h,Math.abs(h)<=tt){t=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=it(this.long0+Math.asin(i*d/this.a)/Math.sin(t))}return n.x=e,n.y=t,n}var bC=["Polyconic","poly"],LC={init:RC,forward:IC,inverse:PC,names:bC};function AC(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function NC(n){var e,t=n.x,i=n.y,r=i-this.lat0,a=t-this.long0,o=r/Ka*1e-5,s=a,l=1,h=0;for(e=1;e<=10;e++)l=l*o,h=h+this.A[e]*l;var f=h,d=s,p=1,y=0,m,x,C=0,w=0;for(e=1;e<=6;e++)m=p*f-y*d,x=y*f+p*d,p=m,y=x,C=C+this.B_re[e]*p-this.B_im[e]*y,w=w+this.B_im[e]*p+this.B_re[e]*y;return n.x=w*this.a+this.x0,n.y=C*this.a+this.y0,n}function DC(n){var e,t=n.x,i=n.y,r=t-this.x0,a=i-this.y0,o=a/this.a,s=r/this.a,l=1,h=0,f,d,p=0,y=0;for(e=1;e<=6;e++)f=l*o-h*s,d=h*o+l*s,l=f,h=d,p=p+this.C_re[e]*l-this.C_im[e]*h,y=y+this.C_im[e]*l+this.C_re[e]*h;for(var m=0;m<this.iterations;m++){var x=p,C=y,w,S,R=o,I=s;for(e=2;e<=6;e++)w=x*p-C*y,S=C*p+x*y,x=w,C=S,R=R+(e-1)*(this.B_re[e]*x-this.B_im[e]*C),I=I+(e-1)*(this.B_im[e]*x+this.B_re[e]*C);x=1,C=0;var F=this.B_re[1],g=this.B_im[1];for(e=2;e<=6;e++)w=x*p-C*y,S=C*p+x*y,x=w,C=S,F=F+e*(this.B_re[e]*x-this.B_im[e]*C),g=g+e*(this.B_im[e]*x+this.B_re[e]*C);var G=F*F+g*g;p=(R*F+I*g)/G,y=(I*F-R*g)/G}var B=p,X=y,Z=1,et=0;for(e=1;e<=9;e++)Z=Z*B,et=et+this.D[e]*Z;var K=this.lat0+et*Ka*1e5,lt=this.long0+X;return n.x=lt,n.y=K,n}var FC=["New_Zealand_Map_Grid","nzmg"],kC={init:AC,forward:NC,inverse:DC,names:FC};function GC(){}function jC(n){var e=n.x,t=n.y,i=it(e-this.long0),r=this.x0+this.a*i,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=r,n.y=a,n}function BC(n){n.x-=this.x0,n.y-=this.y0;var e=it(this.long0+n.x/this.a),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var UC=["Miller_Cylindrical","mill"],$C={init:GC,forward:jC,inverse:BC,names:UC},zC=20;function VC(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=gd(this.es)}function WC(n){var e,t,i=n.x,r=n.y;if(i=it(i-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var a=this.n*Math.sin(r),o=zC;o;--o){var s=(this.m*r+Math.sin(r)-a)/(this.m+Math.cos(r));if(r-=s,Math.abs(s)<tt)break}e=this.a*this.C_x*i*(this.m+Math.cos(r)),t=this.a*this.C_y*r}else{var l=Math.sin(r),h=Math.cos(r);t=this.a*Es(r,l,h,this.en),e=this.a*i*h/Math.sqrt(1-this.es*l*l)}return n.x=e,n.y=t,n}function YC(n){var e,t,i,r;return n.x-=this.x0,i=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=Gn((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Gn(Math.sin(e)/this.n)),i=it(i+this.long0),e=la(e)):(e=yd(n.y/this.a,this.es,this.en),r=Math.abs(e),r<q?(r=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),i=it(t)):r-tt<q&&(i=this.long0)),n.x=i,n.y=e,n}var HC=["Sinusoidal","sinu"],XC={init:VC,forward:WC,inverse:YC,names:HC};function qC(){}function KC(n){for(var e=n.x,t=n.y,i=it(e-this.long0),r=t,a=Math.PI*Math.sin(t);;){var o=-(r+Math.sin(r)-a)/(1+Math.cos(r));if(r+=o,Math.abs(o)<tt)break}r/=2,Math.PI/2-Math.abs(t)<tt&&(i=0);var s=.900316316158*this.a*i*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return n.x=s,n.y=l,n}function ZC(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var i=it(this.long0+n.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var r=Math.asin(t);return n.x=i,n.y=r,n}var JC=["Mollweide","moll"],QC={init:qC,forward:KC,inverse:ZC,names:JC};function tw(){Math.abs(this.lat1+this.lat2)<tt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=no(this.es),this.e1=ro(this.es),this.e2=ao(this.es),this.e3=oo(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ji(this.e,this.sinphi,this.cosphi),this.ml1=De(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<tt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ji(this.e,this.sinphi,this.cosphi),this.ml2=De(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=De(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function ew(n){var e=n.x,t=n.y,i;if(this.sphere)i=this.a*(this.g-t);else{var r=De(this.e0,this.e1,this.e2,this.e3,t);i=this.a*(this.g-r)}var a=this.ns*it(e-this.long0),o=this.x0+i*Math.sin(a),s=this.y0+this.rh-i*Math.cos(a);return n.x=o,n.y=s,n}function iw(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,i,r;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var a=0;if(t!==0&&(a=Math.atan2(e*n.x,e*n.y)),this.sphere)return r=it(this.long0+a/this.ns),i=la(this.g-t/this.a),n.x=r,n.y=i,n;var o=this.g-t/this.a;return i=Ms(o,this.e0,this.e1,this.e2,this.e3),r=it(this.long0+a/this.ns),n.x=r,n.y=i,n}var nw=["Equidistant_Conic","eqdc"],rw={init:tw,forward:ew,inverse:iw,names:nw};function aw(){this.R=this.a}function ow(n){var e=n.x,t=n.y,i=it(e-this.long0),r,a;Math.abs(t)<=tt&&(r=this.x0+this.R*i,a=this.y0);var o=Gn(2*Math.abs(t/Math.PI));(Math.abs(i)<=tt||Math.abs(Math.abs(t)-q)<=tt)&&(r=this.x0,t>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*o):a=this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/i-i/Math.PI),l=s*s,h=Math.sin(o),f=Math.cos(o),d=f/(h+f-1),p=d*d,y=d*(2/h-1),m=y*y,x=Math.PI*this.R*(s*(d-m)+Math.sqrt(l*(d-m)*(d-m)-(m+l)*(p-m)))/(m+l);i<0&&(x=-x),r=this.x0+x;var C=l+d;return x=Math.PI*this.R*(y*C-s*Math.sqrt((m+l)*(l+1)-C*C))/(m+l),t>=0?a=this.y0+x:a=this.y0-x,n.x=r,n.y=a,n}function sw(n){var e,t,i,r,a,o,s,l,h,f,d,p,y;return n.x-=this.x0,n.y-=this.y0,d=Math.PI*this.R,i=n.x/d,r=n.y/d,a=i*i+r*r,o=-Math.abs(r)*(1+a),s=o-2*r*r+i*i,l=-2*o+1+2*r*r+a*a,y=r*r/l+(2*s*s*s/l/l/l-9*o*s/l/l)/27,h=(o-s*s/3/l)/l,f=2*Math.sqrt(-h/3),d=3*y/h/f,Math.abs(d)>1&&(d>=0?d=1:d=-1),p=Math.acos(d)/3,n.y>=0?t=(-f*Math.cos(p+Math.PI/3)-s/3/l)*Math.PI:t=-(-f*Math.cos(p+Math.PI/3)-s/3/l)*Math.PI,Math.abs(i)<tt?e=this.long0:e=it(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(i*i-r*r)+a*a))/2/i),n.x=e,n.y=t,n}var lw=["Van_der_Grinten_I","VanDerGrinten","vandg"],uw={init:aw,forward:ow,inverse:sw,names:lw};function hw(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function fw(n){var e=n.x,t=n.y,i=Math.sin(n.y),r=Math.cos(n.y),a=it(e-this.long0),o,s,l,h,f,d,p,y,m,x,C,w,S,R,I,F,g,G,B,X,Z,et,K;return this.sphere?Math.abs(this.sin_p12-1)<=tt?(n.x=this.x0+this.a*(q-t)*Math.sin(a),n.y=this.y0-this.a*(q-t)*Math.cos(a),n):Math.abs(this.sin_p12+1)<=tt?(n.x=this.x0+this.a*(q+t)*Math.sin(a),n.y=this.y0+this.a*(q+t)*Math.cos(a),n):(G=this.sin_p12*i+this.cos_p12*r*Math.cos(a),F=Math.acos(G),g=F?F/Math.sin(F):1,n.x=this.x0+this.a*g*r*Math.sin(a),n.y=this.y0+this.a*g*(this.cos_p12*i-this.sin_p12*r*Math.cos(a)),n):(o=no(this.es),s=ro(this.es),l=ao(this.es),h=oo(this.es),Math.abs(this.sin_p12-1)<=tt?(f=this.a*De(o,s,l,h,q),d=this.a*De(o,s,l,h,t),n.x=this.x0+(f-d)*Math.sin(a),n.y=this.y0-(f-d)*Math.cos(a),n):Math.abs(this.sin_p12+1)<=tt?(f=this.a*De(o,s,l,h,q),d=this.a*De(o,s,l,h,t),n.x=this.x0+(f+d)*Math.sin(a),n.y=this.y0+(f+d)*Math.cos(a),n):(p=i/r,y=sa(this.a,this.e,this.sin_p12),m=sa(this.a,this.e,i),x=Math.atan((1-this.es)*p+this.es*y*this.sin_p12/(m*r)),C=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(x)-this.sin_p12*Math.cos(a)),C===0?B=Math.asin(this.cos_p12*Math.sin(x)-this.sin_p12*Math.cos(x)):Math.abs(Math.abs(C)-Math.PI)<=tt?B=-Math.asin(this.cos_p12*Math.sin(x)-this.sin_p12*Math.cos(x)):B=Math.asin(Math.sin(a)*Math.cos(x)/Math.sin(C)),w=this.e*this.sin_p12/Math.sqrt(1-this.es),S=this.e*this.cos_p12*Math.cos(C)/Math.sqrt(1-this.es),R=w*S,I=S*S,X=B*B,Z=X*B,et=Z*B,K=et*B,F=y*B*(1-X*I*(1-I)/6+Z/8*R*(1-2*I)+et/120*(I*(4-7*I)-3*w*w*(1-7*I))-K/48*R),n.x=this.x0+F*Math.sin(C),n.y=this.y0+F*Math.cos(C),n))}function cw(n){n.x-=this.x0,n.y-=this.y0;var e,t,i,r,a,o,s,l,h,f,d,p,y,m,x,C,w,S,R,I,F,g,G,B;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*q*this.a?void 0:(t=e/this.a,i=Math.sin(t),r=Math.cos(t),a=this.long0,Math.abs(e)<=tt?o=this.lat0:(o=Gn(r*this.sin_p12+n.y*i*this.cos_p12/e),s=Math.abs(this.lat0)-q,Math.abs(s)<=tt?this.lat0>=0?a=it(this.long0+Math.atan2(n.x,-n.y)):a=it(this.long0-Math.atan2(-n.x,n.y)):a=it(this.long0+Math.atan2(n.x*i,e*this.cos_p12*r-n.y*this.sin_p12*i))),n.x=a,n.y=o,n)):(l=no(this.es),h=ro(this.es),f=ao(this.es),d=oo(this.es),Math.abs(this.sin_p12-1)<=tt?(p=this.a*De(l,h,f,d,q),e=Math.sqrt(n.x*n.x+n.y*n.y),y=p-e,o=Ms(y/this.a,l,h,f,d),a=it(this.long0+Math.atan2(n.x,-1*n.y)),n.x=a,n.y=o,n):Math.abs(this.sin_p12+1)<=tt?(p=this.a*De(l,h,f,d,q),e=Math.sqrt(n.x*n.x+n.y*n.y),y=e-p,o=Ms(y/this.a,l,h,f,d),a=it(this.long0+Math.atan2(n.x,n.y)),n.x=a,n.y=o,n):(e=Math.sqrt(n.x*n.x+n.y*n.y),C=Math.atan2(n.x,n.y),m=sa(this.a,this.e,this.sin_p12),w=Math.cos(C),S=this.e*this.cos_p12*w,R=-S*S/(1-this.es),I=3*this.es*(1-R)*this.sin_p12*this.cos_p12*w/(1-this.es),F=e/m,g=F-R*(1+R)*Math.pow(F,3)/6-I*(1+3*R)*Math.pow(F,4)/24,G=1-R*g*g/2-F*g*g*g/6,x=Math.asin(this.sin_p12*Math.cos(g)+this.cos_p12*Math.sin(g)*w),a=it(this.long0+Math.asin(Math.sin(C)*Math.sin(g)/Math.cos(x))),B=Math.sin(x),o=Math.atan2((B-this.es*G*this.sin_p12)*Math.tan(x),B*(1-this.es)),n.x=a,n.y=o,n))}var dw=["Azimuthal_Equidistant","aeqd"],pw={init:hw,forward:fw,inverse:cw,names:dw};function vw(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function gw(n){var e,t,i,r,a,o,s,l,h=n.x,f=n.y;return i=it(h-this.long0),e=Math.sin(f),t=Math.cos(f),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*t*r,a=1,(o>0||Math.abs(o)<=tt)&&(s=this.a*a*t*Math.sin(i),l=this.y0+this.a*a*(this.cos_p14*e-this.sin_p14*t*r)),n.x=s,n.y=l,n}function yw(n){var e,t,i,r,a,o,s;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=Gn(e/this.a),i=Math.sin(t),r=Math.cos(t),o=this.long0,Math.abs(e)<=tt?(s=this.lat0,n.x=o,n.y=s,n):(s=Gn(r*this.sin_p14+n.y*i*this.cos_p14/e),a=Math.abs(this.lat0)-q,Math.abs(a)<=tt?(this.lat0>=0?o=it(this.long0+Math.atan2(n.x,-n.y)):o=it(this.long0-Math.atan2(-n.x,n.y)),n.x=o,n.y=s,n):(o=it(this.long0+Math.atan2(n.x*i,e*this.cos_p14*r-n.y*this.sin_p14*i)),n.x=o,n.y=s,n))}var _w=["ortho"],mw={init:vw,forward:gw,inverse:yw,names:_w},ee={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Gt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function xw(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=q-kt/2?this.face=ee.TOP:this.lat0<=-(q-kt/2)?this.face=ee.BOTTOM:Math.abs(this.long0)<=kt?this.face=ee.FRONT:Math.abs(this.long0)<=q+kt?this.face=this.long0>0?ee.RIGHT:ee.LEFT:this.face=ee.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Ew(n){var e={x:0,y:0},t,i,r,a,o,s,l={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,i=n.x,this.face===ee.TOP)a=q-t,i>=kt&&i<=q+kt?(l.value=Gt.AREA_0,r=i-q):i>q+kt||i<=-(q+kt)?(l.value=Gt.AREA_1,r=i>0?i-re:i+re):i>-(q+kt)&&i<=-kt?(l.value=Gt.AREA_2,r=i+q):(l.value=Gt.AREA_3,r=i);else if(this.face===ee.BOTTOM)a=q+t,i>=kt&&i<=q+kt?(l.value=Gt.AREA_0,r=-i+q):i<kt&&i>=-kt?(l.value=Gt.AREA_1,r=-i):i<-kt&&i>=-(q+kt)?(l.value=Gt.AREA_2,r=-i-q):(l.value=Gt.AREA_3,r=i>0?-i+re:-i-re);else{var h,f,d,p,y,m,x;this.face===ee.RIGHT?i=ua(i,+q):this.face===ee.BACK?i=ua(i,+re):this.face===ee.LEFT&&(i=ua(i,-q)),p=Math.sin(t),y=Math.cos(t),m=Math.sin(i),x=Math.cos(i),h=y*x,f=y*m,d=p,this.face===ee.FRONT?(a=Math.acos(h),r=Os(a,d,f,l)):this.face===ee.RIGHT?(a=Math.acos(f),r=Os(a,d,-h,l)):this.face===ee.BACK?(a=Math.acos(-h),r=Os(a,d,-f,l)):this.face===ee.LEFT?(a=Math.acos(-f),r=Os(a,d,h,l)):(a=r=0,l.value=Gt.AREA_0)}return s=Math.atan(12/re*(r+Math.acos(Math.sin(r)*Math.cos(kt))-q)),o=Math.sqrt((1-Math.cos(a))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===Gt.AREA_1?s+=q:l.value===Gt.AREA_2?s+=re:l.value===Gt.AREA_3&&(s+=1.5*re),e.x=o*Math.cos(s),e.y=o*Math.sin(s),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function Tw(n){var e={lam:0,phi:0},t,i,r,a,o,s,l,h,f,d={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,i=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?d.value=Gt.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(d.value=Gt.AREA_1,t-=q):n.x<0&&-n.x>=Math.abs(n.y)?(d.value=Gt.AREA_2,t=t<0?t+re:t-re):(d.value=Gt.AREA_3,t+=q),f=re/12*Math.tan(t),o=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),s=Math.atan(o),r=Math.cos(t),a=Math.tan(i),l=1-r*r*a*a*(1-Math.cos(Math.atan(1/Math.cos(s)))),l<-1?l=-1:l>1&&(l=1),this.face===ee.TOP)h=Math.acos(l),e.phi=q-h,d.value===Gt.AREA_0?e.lam=s+q:d.value===Gt.AREA_1?e.lam=s<0?s+re:s-re:d.value===Gt.AREA_2?e.lam=s-q:e.lam=s;else if(this.face===ee.BOTTOM)h=Math.acos(l),e.phi=h-q,d.value===Gt.AREA_0?e.lam=-s+q:d.value===Gt.AREA_1?e.lam=-s:d.value===Gt.AREA_2?e.lam=-s-q:e.lam=s<0?-s-re:-s+re;else{var p,y,m;p=l,f=p*p,f>=1?m=0:m=Math.sqrt(1-f)*Math.sin(s),f+=m*m,f>=1?y=0:y=Math.sqrt(1-f),d.value===Gt.AREA_1?(f=y,y=-m,m=f):d.value===Gt.AREA_2?(y=-y,m=-m):d.value===Gt.AREA_3&&(f=y,y=m,m=-f),this.face===ee.RIGHT?(f=p,p=-y,y=f):this.face===ee.BACK?(p=-p,y=-y):this.face===ee.LEFT&&(f=p,p=y,y=-f),e.phi=Math.acos(-m)-q,e.lam=Math.atan2(y,p),this.face===ee.RIGHT?e.lam=ua(e.lam,-q):this.face===ee.BACK?e.lam=ua(e.lam,-re):this.face===ee.LEFT&&(e.lam=ua(e.lam,+q))}if(this.es!==0){var x,C,w;x=e.phi<0?1:0,C=Math.tan(e.phi),w=this.b/Math.sqrt(C*C+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-w*w)/(this.one_minus_f*w)),x&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function Os(n,e,t,i){var r;return n<tt?(i.value=Gt.AREA_0,r=0):(r=Math.atan2(e,t),Math.abs(r)<=kt?i.value=Gt.AREA_0:r>kt&&r<=q+kt?(i.value=Gt.AREA_1,r-=q):r>q+kt||r<=-(q+kt)?(i.value=Gt.AREA_2,r=r>=0?r-re:r+re):(i.value=Gt.AREA_3,r+=q)),r}function ua(n,e){var t=n+e;return t<-re?t+=Za:t>+re&&(t-=Za),t}var Cw=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],ww={init:xw,forward:Ew,inverse:Tw,names:Cw},Fu=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],so=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ed=.8487,Td=1.3523,Cd=Gi/5,Mw=1/Cd,ha=18,Ss=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},Ow=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function Sw(n,e,t,i){for(var r=e;i;--i){var a=n(r);if(r-=a,Math.abs(a)<t)break}return r}function Rw(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Iw(n){var e=it(n.x-this.long0),t=Math.abs(n.y),i=Math.floor(t*Cd);i<0?i=0:i>=ha&&(i=ha-1),t=Gi*(t-Mw*i);var r={x:Ss(Fu[i],t)*e,y:Ss(so[i],t)};return n.y<0&&(r.y=-r.y),r.x=r.x*this.a*Ed+this.x0,r.y=r.y*this.a*Td+this.y0,r}function Pw(n){var e={x:(n.x-this.x0)/(this.a*Ed),y:Math.abs(n.y-this.y0)/(this.a*Td)};if(e.y>=1)e.x/=Fu[ha][0],e.y=n.y<0?-q:q;else{var t=Math.floor(e.y*ha);for(t<0?t=0:t>=ha&&(t=ha-1);;)if(so[t][0]>e.y)--t;else if(so[t+1][0]<=e.y)++t;else break;var i=so[t],r=5*(e.y-i[0])/(so[t+1][0]-i[0]);r=Sw(function(a){return(Ss(i,a)-e.y)/Ow(i,a)},r,tt,100),e.x/=Ss(Fu[t],r),e.y=(5*t+r)*xe,n.y<0&&(e.y=-e.y)}return e.x=it(e.x+this.long0),e}var bw=["Robinson","robin"],Lw={init:Rw,forward:Iw,inverse:Pw,names:bw};function Aw(){this.name="geocent"}function Nw(n){var e=Kc(n,this.es,this.a);return e}function Dw(n){var e=Zc(n,this.es,this.a,this.b);return e}var Fw=["Geocentric","geocentric","geocent","Geocent"],kw={init:Aw,forward:Nw,inverse:Dw,names:Fw},Oe={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},lo={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Gw(){if(Object.keys(lo).forEach(function(t){if(typeof this[t]=="undefined")this[t]=lo[t].def;else{if(lo[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);lo[t].num&&(this[t]=parseFloat(this[t]))}lo[t].degrees&&(this[t]=this[t]*xe)}.bind(this)),Math.abs(Math.abs(this.lat0)-q)<tt?this.mode=this.lat0<0?Oe.S_POLE:Oe.N_POLE:Math.abs(this.lat0)<tt?this.mode=Oe.EQUIT:(this.mode=Oe.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function jw(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),i=Math.cos(n.x),r,a;switch(this.mode){case Oe.OBLIQ:a=this.sinph0*e+this.cosph0*t*i;break;case Oe.EQUIT:a=t*i;break;case Oe.S_POLE:a=-e;break;case Oe.N_POLE:a=e;break}switch(a=this.pn1/(this.p-a),r=a*t*Math.sin(n.x),this.mode){case Oe.OBLIQ:a*=this.cosph0*e-this.sinph0*t*i;break;case Oe.EQUIT:a*=e;break;case Oe.N_POLE:a*=-(t*i);break;case Oe.S_POLE:a*=t*i;break}var o,s;return o=a*this.cg+r*this.sg,s=1/(o*this.sw*this.h1+this.cw),r=(r*this.cg-a*this.sg)*this.cw*s,a=o*s,n.x=r*this.a,n.y=a*this.a,n}function Bw(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,i,r;r=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*r,i=this.pn1*n.y*this.cw*r,n.x=t*this.cg+i*this.sg,n.y=i*this.cg-t*this.sg;var a=Cs(n.x,n.y);if(Math.abs(a)<tt)e.x=0,e.y=n.y;else{var o,s;switch(s=1-a*a*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/a+a/this.pn1),o=Math.sqrt(1-s*s),this.mode){case Oe.OBLIQ:e.y=Math.asin(o*this.sinph0+n.y*s*this.cosph0/a),n.y=(o-this.sinph0*Math.sin(e.y))*a,n.x*=s*this.cosph0;break;case Oe.EQUIT:e.y=Math.asin(n.y*s/a),n.y=o*a,n.x*=s;break;case Oe.N_POLE:e.y=Math.asin(o),n.y=-n.y;break;case Oe.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var Uw=["Tilted_Perspective","tpers"],$w={init:Gw,forward:jw,inverse:Bw,names:Uw};function zw(n){n.Proj.projections.add(Ts),n.Proj.projections.add(ws),n.Proj.projections.add(tT),n.Proj.projections.add(hT),n.Proj.projections.add(gT),n.Proj.projections.add(ET),n.Proj.projections.add(ST),n.Proj.projections.add(LT),n.Proj.projections.add(kT),n.Proj.projections.add($T),n.Proj.projections.add(aC),n.Proj.projections.add(fC),n.Proj.projections.add(gC),n.Proj.projections.add(TC),n.Proj.projections.add(SC),n.Proj.projections.add(LC),n.Proj.projections.add(kC),n.Proj.projections.add($C),n.Proj.projections.add(XC),n.Proj.projections.add(QC),n.Proj.projections.add(rw),n.Proj.projections.add(uw),n.Proj.projections.add(pw),n.Proj.projections.add(mw),n.Proj.projections.add(ww),n.Proj.projections.add(Lw),n.Proj.projections.add(kw),n.Proj.projections.add($w)}pi.defaultDatum="WGS84";pi.Proj=Bi;pi.WGS84=new pi.Proj("WGS84");pi.Point=aa;pi.toPoint=ed;pi.defs=Ne;pi.nadgrid=iE;pi.transform=xs;pi.mgrs=_E;pi.version="__VERSION__";zw(pi);var wd={exports:{}};/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */(function(n){(function(e,t){n.exports=e.document?t(e,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return t(i)}})(typeof window!="undefined"?window:Cc,function(e,t){var i=[],r=Object.getPrototypeOf,a=i.slice,o=i.flat?function(u){return i.flat.call(u)}:function(u){return i.concat.apply([],u)},s=i.push,l=i.indexOf,h={},f=h.toString,d=h.hasOwnProperty,p=d.toString,y=p.call(Object),m={},x=function(c){return typeof c=="function"&&typeof c.nodeType!="number"&&typeof c.item!="function"},C=function(c){return c!=null&&c===c.window},w=e.document,S={type:!0,src:!0,nonce:!0,noModule:!0};function R(u,c,v){v=v||w;var _,E,T=v.createElement("script");if(T.text=u,c)for(_ in S)E=c[_]||c.getAttribute&&c.getAttribute(_),E&&T.setAttribute(_,E);v.head.appendChild(T).parentNode.removeChild(T)}function I(u){return u==null?u+"":typeof u=="object"||typeof u=="function"?h[f.call(u)]||"object":typeof u}var F="3.6.0",g=function(u,c){return new g.fn.init(u,c)};g.fn=g.prototype={jquery:F,constructor:g,length:0,toArray:function(){return a.call(this)},get:function(u){return u==null?a.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var c=g.merge(this.constructor(),u);return c.prevObject=this,c},each:function(u){return g.each(this,u)},map:function(u){return this.pushStack(g.map(this,function(c,v){return u.call(c,v,c)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(u,c){return(c+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(u,c){return c%2}))},eq:function(u){var c=this.length,v=+u+(u<0?c:0);return this.pushStack(v>=0&&v<c?[this[v]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice},g.extend=g.fn.extend=function(){var u,c,v,_,E,T,M=arguments[0]||{},b=1,L=arguments.length,N=!1;for(typeof M=="boolean"&&(N=M,M=arguments[b]||{},b++),typeof M!="object"&&!x(M)&&(M={}),b===L&&(M=this,b--);b<L;b++)if((u=arguments[b])!=null)for(c in u)_=u[c],!(c==="__proto__"||M===_)&&(N&&_&&(g.isPlainObject(_)||(E=Array.isArray(_)))?(v=M[c],E&&!Array.isArray(v)?T=[]:!E&&!g.isPlainObject(v)?T={}:T=v,E=!1,M[c]=g.extend(N,T,_)):_!==void 0&&(M[c]=_));return M},g.extend({expando:"jQuery"+(F+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var c,v;return!u||f.call(u)!=="[object Object]"?!1:(c=r(u),c?(v=d.call(c,"constructor")&&c.constructor,typeof v=="function"&&p.call(v)===y):!0)},isEmptyObject:function(u){var c;for(c in u)return!1;return!0},globalEval:function(u,c,v){R(u,{nonce:c&&c.nonce},v)},each:function(u,c){var v,_=0;if(G(u))for(v=u.length;_<v&&c.call(u[_],_,u[_])!==!1;_++);else for(_ in u)if(c.call(u[_],_,u[_])===!1)break;return u},makeArray:function(u,c){var v=c||[];return u!=null&&(G(Object(u))?g.merge(v,typeof u=="string"?[u]:u):s.call(v,u)),v},inArray:function(u,c,v){return c==null?-1:l.call(c,u,v)},merge:function(u,c){for(var v=+c.length,_=0,E=u.length;_<v;_++)u[E++]=c[_];return u.length=E,u},grep:function(u,c,v){for(var _,E=[],T=0,M=u.length,b=!v;T<M;T++)_=!c(u[T],T),_!==b&&E.push(u[T]);return E},map:function(u,c,v){var _,E,T=0,M=[];if(G(u))for(_=u.length;T<_;T++)E=c(u[T],T,v),E!=null&&M.push(E);else for(T in u)E=c(u[T],T,v),E!=null&&M.push(E);return o(M)},guid:1,support:m}),typeof Symbol=="function"&&(g.fn[Symbol.iterator]=i[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,c){h["[object "+c+"]"]=c.toLowerCase()});function G(u){var c=!!u&&"length"in u&&u.length,v=I(u);return x(u)||C(u)?!1:v==="array"||c===0||typeof c=="number"&&c>0&&c-1 in u}var B=function(u){var c,v,_,E,T,M,b,L,N,j,W,k,U,at,Tt,ot,he,se,qe,Bt="sizzle"+1*new Date,xt=u.document,je=0,At=0,Jt=Eo(),xa=Eo(),_o=Eo(),Ke=Eo(),er=function(O,P){return O===P&&(W=!0),0},ir={}.hasOwnProperty,Be=[],xn=Be.pop,li=Be.push,En=Be.push,oh=Be.slice,nr=function(O,P){for(var A=0,$=O.length;A<$;A++)if(O[A]===P)return A;return-1},Hs="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ft="[\\x20\\t\\r\\n\\f]",rr="(?:\\\\[\\da-fA-F]{1,6}"+Ft+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",sh="\\["+Ft+"*("+rr+")(?:"+Ft+"*([*^$|!~]?=)"+Ft+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+rr+"))|)"+Ft+"*\\]",Xs=":("+rr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+sh+")*)|.*)\\)|)",_p=new RegExp(Ft+"+","g"),mo=new RegExp("^"+Ft+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ft+"+$","g"),mp=new RegExp("^"+Ft+"*,"+Ft+"*"),lh=new RegExp("^"+Ft+"*([>+~]|"+Ft+")"+Ft+"*"),xp=new RegExp(Ft+"|>"),Ep=new RegExp(Xs),Tp=new RegExp("^"+rr+"$"),xo={ID:new RegExp("^#("+rr+")"),CLASS:new RegExp("^\\.("+rr+")"),TAG:new RegExp("^("+rr+"|[*])"),ATTR:new RegExp("^"+sh),PSEUDO:new RegExp("^"+Xs),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ft+"*(even|odd|(([+-]|)(\\d*)n|)"+Ft+"*(?:([+-]|)"+Ft+"*(\\d+)|))"+Ft+"*\\)|)","i"),bool:new RegExp("^(?:"+Hs+")$","i"),needsContext:new RegExp("^"+Ft+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ft+"*((?:-\\d)?\\d*)"+Ft+"*\\)|)(?=[^-]|$)","i")},Cp=/HTML$/i,wp=/^(?:input|select|textarea|button)$/i,Mp=/^h\d$/i,Ea=/^[^{]+\{\s*\[native \w/,Op=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qs=/[+~]/,Ji=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ft+"?|\\\\([^\\r\\n\\f])","g"),Qi=function(O,P){var A="0x"+O.slice(1)-65536;return P||(A<0?String.fromCharCode(A+65536):String.fromCharCode(A>>10|55296,A&1023|56320))},uh=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,hh=function(O,P){return P?O==="\0"?"\uFFFD":O.slice(0,-1)+"\\"+O.charCodeAt(O.length-1).toString(16)+" ":"\\"+O},fh=function(){k()},Sp=Co(function(O){return O.disabled===!0&&O.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{En.apply(Be=oh.call(xt.childNodes),xt.childNodes),Be[xt.childNodes.length].nodeType}catch{En={apply:Be.length?function(P,A){li.apply(P,oh.call(A))}:function(P,A){for(var $=P.length,D=0;P[$++]=A[D++];);P.length=$-1}}}function $t(O,P,A,$){var D,z,Y,J,Q,ft,ut,pt=P&&P.ownerDocument,Ot=P?P.nodeType:9;if(A=A||[],typeof O!="string"||!O||Ot!==1&&Ot!==9&&Ot!==11)return A;if(!$&&(k(P),P=P||U,Tt)){if(Ot!==11&&(Q=Op.exec(O)))if(D=Q[1]){if(Ot===9)if(Y=P.getElementById(D)){if(Y.id===D)return A.push(Y),A}else return A;else if(pt&&(Y=pt.getElementById(D))&&qe(P,Y)&&Y.id===D)return A.push(Y),A}else{if(Q[2])return En.apply(A,P.getElementsByTagName(O)),A;if((D=Q[3])&&v.getElementsByClassName&&P.getElementsByClassName)return En.apply(A,P.getElementsByClassName(D)),A}if(v.qsa&&!Ke[O+" "]&&(!ot||!ot.test(O))&&(Ot!==1||P.nodeName.toLowerCase()!=="object")){if(ut=O,pt=P,Ot===1&&(xp.test(O)||lh.test(O))){for(pt=qs.test(O)&&Zs(P.parentNode)||P,(pt!==P||!v.scope)&&((J=P.getAttribute("id"))?J=J.replace(uh,hh):P.setAttribute("id",J=Bt)),ft=M(O),z=ft.length;z--;)ft[z]=(J?"#"+J:":scope")+" "+To(ft[z]);ut=ft.join(",")}try{return En.apply(A,pt.querySelectorAll(ut)),A}catch{Ke(O,!0)}finally{J===Bt&&P.removeAttribute("id")}}}return L(O.replace(mo,"$1"),P,A,$)}function Eo(){var O=[];function P(A,$){return O.push(A+" ")>_.cacheLength&&delete P[O.shift()],P[A+" "]=$}return P}function mi(O){return O[Bt]=!0,O}function xi(O){var P=U.createElement("fieldset");try{return!!O(P)}catch{return!1}finally{P.parentNode&&P.parentNode.removeChild(P),P=null}}function Ks(O,P){for(var A=O.split("|"),$=A.length;$--;)_.attrHandle[A[$]]=P}function ch(O,P){var A=P&&O,$=A&&O.nodeType===1&&P.nodeType===1&&O.sourceIndex-P.sourceIndex;if($)return $;if(A){for(;A=A.nextSibling;)if(A===P)return-1}return O?1:-1}function Rp(O){return function(P){var A=P.nodeName.toLowerCase();return A==="input"&&P.type===O}}function Ip(O){return function(P){var A=P.nodeName.toLowerCase();return(A==="input"||A==="button")&&P.type===O}}function dh(O){return function(P){return"form"in P?P.parentNode&&P.disabled===!1?"label"in P?"label"in P.parentNode?P.parentNode.disabled===O:P.disabled===O:P.isDisabled===O||P.isDisabled!==!O&&Sp(P)===O:P.disabled===O:"label"in P?P.disabled===O:!1}}function ar(O){return mi(function(P){return P=+P,mi(function(A,$){for(var D,z=O([],A.length,P),Y=z.length;Y--;)A[D=z[Y]]&&(A[D]=!($[D]=A[D]))})})}function Zs(O){return O&&typeof O.getElementsByTagName!="undefined"&&O}v=$t.support={},T=$t.isXML=function(O){var P=O&&O.namespaceURI,A=O&&(O.ownerDocument||O).documentElement;return!Cp.test(P||A&&A.nodeName||"HTML")},k=$t.setDocument=function(O){var P,A,$=O?O.ownerDocument||O:xt;return $==U||$.nodeType!==9||!$.documentElement||(U=$,at=U.documentElement,Tt=!T(U),xt!=U&&(A=U.defaultView)&&A.top!==A&&(A.addEventListener?A.addEventListener("unload",fh,!1):A.attachEvent&&A.attachEvent("onunload",fh)),v.scope=xi(function(D){return at.appendChild(D).appendChild(U.createElement("div")),typeof D.querySelectorAll!="undefined"&&!D.querySelectorAll(":scope fieldset div").length}),v.attributes=xi(function(D){return D.className="i",!D.getAttribute("className")}),v.getElementsByTagName=xi(function(D){return D.appendChild(U.createComment("")),!D.getElementsByTagName("*").length}),v.getElementsByClassName=Ea.test(U.getElementsByClassName),v.getById=xi(function(D){return at.appendChild(D).id=Bt,!U.getElementsByName||!U.getElementsByName(Bt).length}),v.getById?(_.filter.ID=function(D){var z=D.replace(Ji,Qi);return function(Y){return Y.getAttribute("id")===z}},_.find.ID=function(D,z){if(typeof z.getElementById!="undefined"&&Tt){var Y=z.getElementById(D);return Y?[Y]:[]}}):(_.filter.ID=function(D){var z=D.replace(Ji,Qi);return function(Y){var J=typeof Y.getAttributeNode!="undefined"&&Y.getAttributeNode("id");return J&&J.value===z}},_.find.ID=function(D,z){if(typeof z.getElementById!="undefined"&&Tt){var Y,J,Q,ft=z.getElementById(D);if(ft){if(Y=ft.getAttributeNode("id"),Y&&Y.value===D)return[ft];for(Q=z.getElementsByName(D),J=0;ft=Q[J++];)if(Y=ft.getAttributeNode("id"),Y&&Y.value===D)return[ft]}return[]}}),_.find.TAG=v.getElementsByTagName?function(D,z){if(typeof z.getElementsByTagName!="undefined")return z.getElementsByTagName(D);if(v.qsa)return z.querySelectorAll(D)}:function(D,z){var Y,J=[],Q=0,ft=z.getElementsByTagName(D);if(D==="*"){for(;Y=ft[Q++];)Y.nodeType===1&&J.push(Y);return J}return ft},_.find.CLASS=v.getElementsByClassName&&function(D,z){if(typeof z.getElementsByClassName!="undefined"&&Tt)return z.getElementsByClassName(D)},he=[],ot=[],(v.qsa=Ea.test(U.querySelectorAll))&&(xi(function(D){var z;at.appendChild(D).innerHTML="<a id='"+Bt+"'></a><select id='"+Bt+"-\r\\' msallowcapture=''><option selected=''></option></select>",D.querySelectorAll("[msallowcapture^='']").length&&ot.push("[*^$]="+Ft+`*(?:''|"")`),D.querySelectorAll("[selected]").length||ot.push("\\["+Ft+"*(?:value|"+Hs+")"),D.querySelectorAll("[id~="+Bt+"-]").length||ot.push("~="),z=U.createElement("input"),z.setAttribute("name",""),D.appendChild(z),D.querySelectorAll("[name='']").length||ot.push("\\["+Ft+"*name"+Ft+"*="+Ft+`*(?:''|"")`),D.querySelectorAll(":checked").length||ot.push(":checked"),D.querySelectorAll("a#"+Bt+"+*").length||ot.push(".#.+[+~]"),D.querySelectorAll("\\\f"),ot.push("[\\r\\n\\f]")}),xi(function(D){D.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var z=U.createElement("input");z.setAttribute("type","hidden"),D.appendChild(z).setAttribute("name","D"),D.querySelectorAll("[name=d]").length&&ot.push("name"+Ft+"*[*^$|!~]?="),D.querySelectorAll(":enabled").length!==2&&ot.push(":enabled",":disabled"),at.appendChild(D).disabled=!0,D.querySelectorAll(":disabled").length!==2&&ot.push(":enabled",":disabled"),D.querySelectorAll("*,:x"),ot.push(",.*:")})),(v.matchesSelector=Ea.test(se=at.matches||at.webkitMatchesSelector||at.mozMatchesSelector||at.oMatchesSelector||at.msMatchesSelector))&&xi(function(D){v.disconnectedMatch=se.call(D,"*"),se.call(D,"[s!='']:x"),he.push("!=",Xs)}),ot=ot.length&&new RegExp(ot.join("|")),he=he.length&&new RegExp(he.join("|")),P=Ea.test(at.compareDocumentPosition),qe=P||Ea.test(at.contains)?function(D,z){var Y=D.nodeType===9?D.documentElement:D,J=z&&z.parentNode;return D===J||!!(J&&J.nodeType===1&&(Y.contains?Y.contains(J):D.compareDocumentPosition&&D.compareDocumentPosition(J)&16))}:function(D,z){if(z){for(;z=z.parentNode;)if(z===D)return!0}return!1},er=P?function(D,z){if(D===z)return W=!0,0;var Y=!D.compareDocumentPosition-!z.compareDocumentPosition;return Y||(Y=(D.ownerDocument||D)==(z.ownerDocument||z)?D.compareDocumentPosition(z):1,Y&1||!v.sortDetached&&z.compareDocumentPosition(D)===Y?D==U||D.ownerDocument==xt&&qe(xt,D)?-1:z==U||z.ownerDocument==xt&&qe(xt,z)?1:j?nr(j,D)-nr(j,z):0:Y&4?-1:1)}:function(D,z){if(D===z)return W=!0,0;var Y,J=0,Q=D.parentNode,ft=z.parentNode,ut=[D],pt=[z];if(!Q||!ft)return D==U?-1:z==U?1:Q?-1:ft?1:j?nr(j,D)-nr(j,z):0;if(Q===ft)return ch(D,z);for(Y=D;Y=Y.parentNode;)ut.unshift(Y);for(Y=z;Y=Y.parentNode;)pt.unshift(Y);for(;ut[J]===pt[J];)J++;return J?ch(ut[J],pt[J]):ut[J]==xt?-1:pt[J]==xt?1:0}),U},$t.matches=function(O,P){return $t(O,null,null,P)},$t.matchesSelector=function(O,P){if(k(O),v.matchesSelector&&Tt&&!Ke[P+" "]&&(!he||!he.test(P))&&(!ot||!ot.test(P)))try{var A=se.call(O,P);if(A||v.disconnectedMatch||O.document&&O.document.nodeType!==11)return A}catch{Ke(P,!0)}return $t(P,U,null,[O]).length>0},$t.contains=function(O,P){return(O.ownerDocument||O)!=U&&k(O),qe(O,P)},$t.attr=function(O,P){(O.ownerDocument||O)!=U&&k(O);var A=_.attrHandle[P.toLowerCase()],$=A&&ir.call(_.attrHandle,P.toLowerCase())?A(O,P,!Tt):void 0;return $!==void 0?$:v.attributes||!Tt?O.getAttribute(P):($=O.getAttributeNode(P))&&$.specified?$.value:null},$t.escape=function(O){return(O+"").replace(uh,hh)},$t.error=function(O){throw new Error("Syntax error, unrecognized expression: "+O)},$t.uniqueSort=function(O){var P,A=[],$=0,D=0;if(W=!v.detectDuplicates,j=!v.sortStable&&O.slice(0),O.sort(er),W){for(;P=O[D++];)P===O[D]&&($=A.push(D));for(;$--;)O.splice(A[$],1)}return j=null,O},E=$t.getText=function(O){var P,A="",$=0,D=O.nodeType;if(D){if(D===1||D===9||D===11){if(typeof O.textContent=="string")return O.textContent;for(O=O.firstChild;O;O=O.nextSibling)A+=E(O)}else if(D===3||D===4)return O.nodeValue}else for(;P=O[$++];)A+=E(P);return A},_=$t.selectors={cacheLength:50,createPseudo:mi,match:xo,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(O){return O[1]=O[1].replace(Ji,Qi),O[3]=(O[3]||O[4]||O[5]||"").replace(Ji,Qi),O[2]==="~="&&(O[3]=" "+O[3]+" "),O.slice(0,4)},CHILD:function(O){return O[1]=O[1].toLowerCase(),O[1].slice(0,3)==="nth"?(O[3]||$t.error(O[0]),O[4]=+(O[4]?O[5]+(O[6]||1):2*(O[3]==="even"||O[3]==="odd")),O[5]=+(O[7]+O[8]||O[3]==="odd")):O[3]&&$t.error(O[0]),O},PSEUDO:function(O){var P,A=!O[6]&&O[2];return xo.CHILD.test(O[0])?null:(O[3]?O[2]=O[4]||O[5]||"":A&&Ep.test(A)&&(P=M(A,!0))&&(P=A.indexOf(")",A.length-P)-A.length)&&(O[0]=O[0].slice(0,P),O[2]=A.slice(0,P)),O.slice(0,3))}},filter:{TAG:function(O){var P=O.replace(Ji,Qi).toLowerCase();return O==="*"?function(){return!0}:function(A){return A.nodeName&&A.nodeName.toLowerCase()===P}},CLASS:function(O){var P=Jt[O+" "];return P||(P=new RegExp("(^|"+Ft+")"+O+"("+Ft+"|$)"))&&Jt(O,function(A){return P.test(typeof A.className=="string"&&A.className||typeof A.getAttribute!="undefined"&&A.getAttribute("class")||"")})},ATTR:function(O,P,A){return function($){var D=$t.attr($,O);return D==null?P==="!=":P?(D+="",P==="="?D===A:P==="!="?D!==A:P==="^="?A&&D.indexOf(A)===0:P==="*="?A&&D.indexOf(A)>-1:P==="$="?A&&D.slice(-A.length)===A:P==="~="?(" "+D.replace(_p," ")+" ").indexOf(A)>-1:P==="|="?D===A||D.slice(0,A.length+1)===A+"-":!1):!0}},CHILD:function(O,P,A,$,D){var z=O.slice(0,3)!=="nth",Y=O.slice(-4)!=="last",J=P==="of-type";return $===1&&D===0?function(Q){return!!Q.parentNode}:function(Q,ft,ut){var pt,Ot,zt,ct,fe,Te,Ze=z!==Y?"nextSibling":"previousSibling",qt=Q.parentNode,Ta=J&&Q.nodeName.toLowerCase(),Ca=!ut&&!J,Je=!1;if(qt){if(z){for(;Ze;){for(ct=Q;ct=ct[Ze];)if(J?ct.nodeName.toLowerCase()===Ta:ct.nodeType===1)return!1;Te=Ze=O==="only"&&!Te&&"nextSibling"}return!0}if(Te=[Y?qt.firstChild:qt.lastChild],Y&&Ca){for(ct=qt,zt=ct[Bt]||(ct[Bt]={}),Ot=zt[ct.uniqueID]||(zt[ct.uniqueID]={}),pt=Ot[O]||[],fe=pt[0]===je&&pt[1],Je=fe&&pt[2],ct=fe&&qt.childNodes[fe];ct=++fe&&ct&&ct[Ze]||(Je=fe=0)||Te.pop();)if(ct.nodeType===1&&++Je&&ct===Q){Ot[O]=[je,fe,Je];break}}else if(Ca&&(ct=Q,zt=ct[Bt]||(ct[Bt]={}),Ot=zt[ct.uniqueID]||(zt[ct.uniqueID]={}),pt=Ot[O]||[],fe=pt[0]===je&&pt[1],Je=fe),Je===!1)for(;(ct=++fe&&ct&&ct[Ze]||(Je=fe=0)||Te.pop())&&!((J?ct.nodeName.toLowerCase()===Ta:ct.nodeType===1)&&++Je&&(Ca&&(zt=ct[Bt]||(ct[Bt]={}),Ot=zt[ct.uniqueID]||(zt[ct.uniqueID]={}),Ot[O]=[je,Je]),ct===Q)););return Je-=D,Je===$||Je%$==0&&Je/$>=0}}},PSEUDO:function(O,P){var A,$=_.pseudos[O]||_.setFilters[O.toLowerCase()]||$t.error("unsupported pseudo: "+O);return $[Bt]?$(P):$.length>1?(A=[O,O,"",P],_.setFilters.hasOwnProperty(O.toLowerCase())?mi(function(D,z){for(var Y,J=$(D,P),Q=J.length;Q--;)Y=nr(D,J[Q]),D[Y]=!(z[Y]=J[Q])}):function(D){return $(D,0,A)}):$}},pseudos:{not:mi(function(O){var P=[],A=[],$=b(O.replace(mo,"$1"));return $[Bt]?mi(function(D,z,Y,J){for(var Q,ft=$(D,null,J,[]),ut=D.length;ut--;)(Q=ft[ut])&&(D[ut]=!(z[ut]=Q))}):function(D,z,Y){return P[0]=D,$(P,null,Y,A),P[0]=null,!A.pop()}}),has:mi(function(O){return function(P){return $t(O,P).length>0}}),contains:mi(function(O){return O=O.replace(Ji,Qi),function(P){return(P.textContent||E(P)).indexOf(O)>-1}}),lang:mi(function(O){return Tp.test(O||"")||$t.error("unsupported lang: "+O),O=O.replace(Ji,Qi).toLowerCase(),function(P){var A;do if(A=Tt?P.lang:P.getAttribute("xml:lang")||P.getAttribute("lang"))return A=A.toLowerCase(),A===O||A.indexOf(O+"-")===0;while((P=P.parentNode)&&P.nodeType===1);return!1}}),target:function(O){var P=u.location&&u.location.hash;return P&&P.slice(1)===O.id},root:function(O){return O===at},focus:function(O){return O===U.activeElement&&(!U.hasFocus||U.hasFocus())&&!!(O.type||O.href||~O.tabIndex)},enabled:dh(!1),disabled:dh(!0),checked:function(O){var P=O.nodeName.toLowerCase();return P==="input"&&!!O.checked||P==="option"&&!!O.selected},selected:function(O){return O.parentNode&&O.parentNode.selectedIndex,O.selected===!0},empty:function(O){for(O=O.firstChild;O;O=O.nextSibling)if(O.nodeType<6)return!1;return!0},parent:function(O){return!_.pseudos.empty(O)},header:function(O){return Mp.test(O.nodeName)},input:function(O){return wp.test(O.nodeName)},button:function(O){var P=O.nodeName.toLowerCase();return P==="input"&&O.type==="button"||P==="button"},text:function(O){var P;return O.nodeName.toLowerCase()==="input"&&O.type==="text"&&((P=O.getAttribute("type"))==null||P.toLowerCase()==="text")},first:ar(function(){return[0]}),last:ar(function(O,P){return[P-1]}),eq:ar(function(O,P,A){return[A<0?A+P:A]}),even:ar(function(O,P){for(var A=0;A<P;A+=2)O.push(A);return O}),odd:ar(function(O,P){for(var A=1;A<P;A+=2)O.push(A);return O}),lt:ar(function(O,P,A){for(var $=A<0?A+P:A>P?P:A;--$>=0;)O.push($);return O}),gt:ar(function(O,P,A){for(var $=A<0?A+P:A;++$<P;)O.push($);return O})}},_.pseudos.nth=_.pseudos.eq;for(c in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[c]=Rp(c);for(c in{submit:!0,reset:!0})_.pseudos[c]=Ip(c);function ph(){}ph.prototype=_.filters=_.pseudos,_.setFilters=new ph,M=$t.tokenize=function(O,P){var A,$,D,z,Y,J,Q,ft=xa[O+" "];if(ft)return P?0:ft.slice(0);for(Y=O,J=[],Q=_.preFilter;Y;){(!A||($=mp.exec(Y)))&&($&&(Y=Y.slice($[0].length)||Y),J.push(D=[])),A=!1,($=lh.exec(Y))&&(A=$.shift(),D.push({value:A,type:$[0].replace(mo," ")}),Y=Y.slice(A.length));for(z in _.filter)($=xo[z].exec(Y))&&(!Q[z]||($=Q[z]($)))&&(A=$.shift(),D.push({value:A,type:z,matches:$}),Y=Y.slice(A.length));if(!A)break}return P?Y.length:Y?$t.error(O):xa(O,J).slice(0)};function To(O){for(var P=0,A=O.length,$="";P<A;P++)$+=O[P].value;return $}function Co(O,P,A){var $=P.dir,D=P.next,z=D||$,Y=A&&z==="parentNode",J=At++;return P.first?function(Q,ft,ut){for(;Q=Q[$];)if(Q.nodeType===1||Y)return O(Q,ft,ut);return!1}:function(Q,ft,ut){var pt,Ot,zt,ct=[je,J];if(ut){for(;Q=Q[$];)if((Q.nodeType===1||Y)&&O(Q,ft,ut))return!0}else for(;Q=Q[$];)if(Q.nodeType===1||Y)if(zt=Q[Bt]||(Q[Bt]={}),Ot=zt[Q.uniqueID]||(zt[Q.uniqueID]={}),D&&D===Q.nodeName.toLowerCase())Q=Q[$]||Q;else{if((pt=Ot[z])&&pt[0]===je&&pt[1]===J)return ct[2]=pt[2];if(Ot[z]=ct,ct[2]=O(Q,ft,ut))return!0}return!1}}function Js(O){return O.length>1?function(P,A,$){for(var D=O.length;D--;)if(!O[D](P,A,$))return!1;return!0}:O[0]}function Pp(O,P,A){for(var $=0,D=P.length;$<D;$++)$t(O,P[$],A);return A}function wo(O,P,A,$,D){for(var z,Y=[],J=0,Q=O.length,ft=P!=null;J<Q;J++)(z=O[J])&&(!A||A(z,$,D))&&(Y.push(z),ft&&P.push(J));return Y}function Qs(O,P,A,$,D,z){return $&&!$[Bt]&&($=Qs($)),D&&!D[Bt]&&(D=Qs(D,z)),mi(function(Y,J,Q,ft){var ut,pt,Ot,zt=[],ct=[],fe=J.length,Te=Y||Pp(P||"*",Q.nodeType?[Q]:Q,[]),Ze=O&&(Y||!P)?wo(Te,zt,O,Q,ft):Te,qt=A?D||(Y?O:fe||$)?[]:J:Ze;if(A&&A(Ze,qt,Q,ft),$)for(ut=wo(qt,ct),$(ut,[],Q,ft),pt=ut.length;pt--;)(Ot=ut[pt])&&(qt[ct[pt]]=!(Ze[ct[pt]]=Ot));if(Y){if(D||O){if(D){for(ut=[],pt=qt.length;pt--;)(Ot=qt[pt])&&ut.push(Ze[pt]=Ot);D(null,qt=[],ut,ft)}for(pt=qt.length;pt--;)(Ot=qt[pt])&&(ut=D?nr(Y,Ot):zt[pt])>-1&&(Y[ut]=!(J[ut]=Ot))}}else qt=wo(qt===J?qt.splice(fe,qt.length):qt),D?D(null,J,qt,ft):En.apply(J,qt)})}function tl(O){for(var P,A,$,D=O.length,z=_.relative[O[0].type],Y=z||_.relative[" "],J=z?1:0,Q=Co(function(pt){return pt===P},Y,!0),ft=Co(function(pt){return nr(P,pt)>-1},Y,!0),ut=[function(pt,Ot,zt){var ct=!z&&(zt||Ot!==N)||((P=Ot).nodeType?Q(pt,Ot,zt):ft(pt,Ot,zt));return P=null,ct}];J<D;J++)if(A=_.relative[O[J].type])ut=[Co(Js(ut),A)];else{if(A=_.filter[O[J].type].apply(null,O[J].matches),A[Bt]){for($=++J;$<D&&!_.relative[O[$].type];$++);return Qs(J>1&&Js(ut),J>1&&To(O.slice(0,J-1).concat({value:O[J-2].type===" "?"*":""})).replace(mo,"$1"),A,J<$&&tl(O.slice(J,$)),$<D&&tl(O=O.slice($)),$<D&&To(O))}ut.push(A)}return Js(ut)}function bp(O,P){var A=P.length>0,$=O.length>0,D=function(z,Y,J,Q,ft){var ut,pt,Ot,zt=0,ct="0",fe=z&&[],Te=[],Ze=N,qt=z||$&&_.find.TAG("*",ft),Ta=je+=Ze==null?1:Math.random()||.1,Ca=qt.length;for(ft&&(N=Y==U||Y||ft);ct!==Ca&&(ut=qt[ct])!=null;ct++){if($&&ut){for(pt=0,!Y&&ut.ownerDocument!=U&&(k(ut),J=!Tt);Ot=O[pt++];)if(Ot(ut,Y||U,J)){Q.push(ut);break}ft&&(je=Ta)}A&&((ut=!Ot&&ut)&&zt--,z&&fe.push(ut))}if(zt+=ct,A&&ct!==zt){for(pt=0;Ot=P[pt++];)Ot(fe,Te,Y,J);if(z){if(zt>0)for(;ct--;)fe[ct]||Te[ct]||(Te[ct]=xn.call(Q));Te=wo(Te)}En.apply(Q,Te),ft&&!z&&Te.length>0&&zt+P.length>1&&$t.uniqueSort(Q)}return ft&&(je=Ta,N=Ze),fe};return A?mi(D):D}return b=$t.compile=function(O,P){var A,$=[],D=[],z=_o[O+" "];if(!z){for(P||(P=M(O)),A=P.length;A--;)z=tl(P[A]),z[Bt]?$.push(z):D.push(z);z=_o(O,bp(D,$)),z.selector=O}return z},L=$t.select=function(O,P,A,$){var D,z,Y,J,Q,ft=typeof O=="function"&&O,ut=!$&&M(O=ft.selector||O);if(A=A||[],ut.length===1){if(z=ut[0]=ut[0].slice(0),z.length>2&&(Y=z[0]).type==="ID"&&P.nodeType===9&&Tt&&_.relative[z[1].type]){if(P=(_.find.ID(Y.matches[0].replace(Ji,Qi),P)||[])[0],P)ft&&(P=P.parentNode);else return A;O=O.slice(z.shift().value.length)}for(D=xo.needsContext.test(O)?0:z.length;D--&&(Y=z[D],!_.relative[J=Y.type]);)if((Q=_.find[J])&&($=Q(Y.matches[0].replace(Ji,Qi),qs.test(z[0].type)&&Zs(P.parentNode)||P))){if(z.splice(D,1),O=$.length&&To(z),!O)return En.apply(A,$),A;break}}return(ft||b(O,ut))($,P,!Tt,A,!P||qs.test(O)&&Zs(P.parentNode)||P),A},v.sortStable=Bt.split("").sort(er).join("")===Bt,v.detectDuplicates=!!W,k(),v.sortDetached=xi(function(O){return O.compareDocumentPosition(U.createElement("fieldset"))&1}),xi(function(O){return O.innerHTML="<a href='#'></a>",O.firstChild.getAttribute("href")==="#"})||Ks("type|href|height|width",function(O,P,A){if(!A)return O.getAttribute(P,P.toLowerCase()==="type"?1:2)}),(!v.attributes||!xi(function(O){return O.innerHTML="<input/>",O.firstChild.setAttribute("value",""),O.firstChild.getAttribute("value")===""}))&&Ks("value",function(O,P,A){if(!A&&O.nodeName.toLowerCase()==="input")return O.defaultValue}),xi(function(O){return O.getAttribute("disabled")==null})||Ks(Hs,function(O,P,A){var $;if(!A)return O[P]===!0?P.toLowerCase():($=O.getAttributeNode(P))&&$.specified?$.value:null}),$t}(e);g.find=B,g.expr=B.selectors,g.expr[":"]=g.expr.pseudos,g.uniqueSort=g.unique=B.uniqueSort,g.text=B.getText,g.isXMLDoc=B.isXML,g.contains=B.contains,g.escapeSelector=B.escape;var X=function(u,c,v){for(var _=[],E=v!==void 0;(u=u[c])&&u.nodeType!==9;)if(u.nodeType===1){if(E&&g(u).is(v))break;_.push(u)}return _},Z=function(u,c){for(var v=[];u;u=u.nextSibling)u.nodeType===1&&u!==c&&v.push(u);return v},et=g.expr.match.needsContext;function K(u,c){return u.nodeName&&u.nodeName.toLowerCase()===c.toLowerCase()}var lt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function vt(u,c,v){return x(c)?g.grep(u,function(_,E){return!!c.call(_,E,_)!==v}):c.nodeType?g.grep(u,function(_){return _===c!==v}):typeof c!="string"?g.grep(u,function(_){return l.call(c,_)>-1!==v}):g.filter(c,u,v)}g.filter=function(u,c,v){var _=c[0];return v&&(u=":not("+u+")"),c.length===1&&_.nodeType===1?g.find.matchesSelector(_,u)?[_]:[]:g.find.matches(u,g.grep(c,function(E){return E.nodeType===1}))},g.fn.extend({find:function(u){var c,v,_=this.length,E=this;if(typeof u!="string")return this.pushStack(g(u).filter(function(){for(c=0;c<_;c++)if(g.contains(E[c],this))return!0}));for(v=this.pushStack([]),c=0;c<_;c++)g.find(u,E[c],v);return _>1?g.uniqueSort(v):v},filter:function(u){return this.pushStack(vt(this,u||[],!1))},not:function(u){return this.pushStack(vt(this,u||[],!0))},is:function(u){return!!vt(this,typeof u=="string"&&et.test(u)?g(u):u||[],!1).length}});var nt,yt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,rt=g.fn.init=function(u,c,v){var _,E;if(!u)return this;if(v=v||nt,typeof u=="string")if(u[0]==="<"&&u[u.length-1]===">"&&u.length>=3?_=[null,u,null]:_=yt.exec(u),_&&(_[1]||!c))if(_[1]){if(c=c instanceof g?c[0]:c,g.merge(this,g.parseHTML(_[1],c&&c.nodeType?c.ownerDocument||c:w,!0)),lt.test(_[1])&&g.isPlainObject(c))for(_ in c)x(this[_])?this[_](c[_]):this.attr(_,c[_]);return this}else return E=w.getElementById(_[2]),E&&(this[0]=E,this.length=1),this;else return!c||c.jquery?(c||v).find(u):this.constructor(c).find(u);else{if(u.nodeType)return this[0]=u,this.length=1,this;if(x(u))return v.ready!==void 0?v.ready(u):u(g)}return g.makeArray(u,this)};rt.prototype=g.fn,nt=g(w);var Rt=/^(?:parents|prev(?:Until|All))/,wt={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(u){var c=g(u,this),v=c.length;return this.filter(function(){for(var _=0;_<v;_++)if(g.contains(this,c[_]))return!0})},closest:function(u,c){var v,_=0,E=this.length,T=[],M=typeof u!="string"&&g(u);if(!et.test(u)){for(;_<E;_++)for(v=this[_];v&&v!==c;v=v.parentNode)if(v.nodeType<11&&(M?M.index(v)>-1:v.nodeType===1&&g.find.matchesSelector(v,u))){T.push(v);break}}return this.pushStack(T.length>1?g.uniqueSort(T):T)},index:function(u){return u?typeof u=="string"?l.call(g(u),this[0]):l.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,c){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(u,c))))},addBack:function(u){return this.add(u==null?this.prevObject:this.prevObject.filter(u))}});function Lt(u,c){for(;(u=u[c])&&u.nodeType!==1;);return u}g.each({parent:function(u){var c=u.parentNode;return c&&c.nodeType!==11?c:null},parents:function(u){return X(u,"parentNode")},parentsUntil:function(u,c,v){return X(u,"parentNode",v)},next:function(u){return Lt(u,"nextSibling")},prev:function(u){return Lt(u,"previousSibling")},nextAll:function(u){return X(u,"nextSibling")},prevAll:function(u){return X(u,"previousSibling")},nextUntil:function(u,c,v){return X(u,"nextSibling",v)},prevUntil:function(u,c,v){return X(u,"previousSibling",v)},siblings:function(u){return Z((u.parentNode||{}).firstChild,u)},children:function(u){return Z(u.firstChild)},contents:function(u){return u.contentDocument!=null&&r(u.contentDocument)?u.contentDocument:(K(u,"template")&&(u=u.content||u),g.merge([],u.childNodes))}},function(u,c){g.fn[u]=function(v,_){var E=g.map(this,c,v);return u.slice(-5)!=="Until"&&(_=v),_&&typeof _=="string"&&(E=g.filter(_,E)),this.length>1&&(wt[u]||g.uniqueSort(E),Rt.test(u)&&E.reverse()),this.pushStack(E)}});var St=/[^\x20\t\r\n\f]+/g;function H(u){var c={};return g.each(u.match(St)||[],function(v,_){c[_]=!0}),c}g.Callbacks=function(u){u=typeof u=="string"?H(u):g.extend({},u);var c,v,_,E,T=[],M=[],b=-1,L=function(){for(E=E||u.once,_=c=!0;M.length;b=-1)for(v=M.shift();++b<T.length;)T[b].apply(v[0],v[1])===!1&&u.stopOnFalse&&(b=T.length,v=!1);u.memory||(v=!1),c=!1,E&&(v?T=[]:T="")},N={add:function(){return T&&(v&&!c&&(b=T.length-1,M.push(v)),function j(W){g.each(W,function(k,U){x(U)?(!u.unique||!N.has(U))&&T.push(U):U&&U.length&&I(U)!=="string"&&j(U)})}(arguments),v&&!c&&L()),this},remove:function(){return g.each(arguments,function(j,W){for(var k;(k=g.inArray(W,T,k))>-1;)T.splice(k,1),k<=b&&b--}),this},has:function(j){return j?g.inArray(j,T)>-1:T.length>0},empty:function(){return T&&(T=[]),this},disable:function(){return E=M=[],T=v="",this},disabled:function(){return!T},lock:function(){return E=M=[],!v&&!c&&(T=v=""),this},locked:function(){return!!E},fireWith:function(j,W){return E||(W=W||[],W=[j,W.slice?W.slice():W],M.push(W),c||L()),this},fire:function(){return N.fireWith(this,arguments),this},fired:function(){return!!_}};return N};function Xt(u){return u}function _t(u){throw u}function Ut(u,c,v,_){var E;try{u&&x(E=u.promise)?E.call(u).done(c).fail(v):u&&x(E=u.then)?E.call(u,c,v):c.apply(void 0,[u].slice(_))}catch(T){v.apply(void 0,[T])}}g.extend({Deferred:function(u){var c=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],v="pending",_={state:function(){return v},always:function(){return E.done(arguments).fail(arguments),this},catch:function(T){return _.then(null,T)},pipe:function(){var T=arguments;return g.Deferred(function(M){g.each(c,function(b,L){var N=x(T[L[4]])&&T[L[4]];E[L[1]](function(){var j=N&&N.apply(this,arguments);j&&x(j.promise)?j.promise().progress(M.notify).done(M.resolve).fail(M.reject):M[L[0]+"With"](this,N?[j]:arguments)})}),T=null}).promise()},then:function(T,M,b){var L=0;function N(j,W,k,U){return function(){var at=this,Tt=arguments,ot=function(){var se,qe;if(!(j<L)){if(se=k.apply(at,Tt),se===W.promise())throw new TypeError("Thenable self-resolution");qe=se&&(typeof se=="object"||typeof se=="function")&&se.then,x(qe)?U?qe.call(se,N(L,W,Xt,U),N(L,W,_t,U)):(L++,qe.call(se,N(L,W,Xt,U),N(L,W,_t,U),N(L,W,Xt,W.notifyWith))):(k!==Xt&&(at=void 0,Tt=[se]),(U||W.resolveWith)(at,Tt))}},he=U?ot:function(){try{ot()}catch(se){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(se,he.stackTrace),j+1>=L&&(k!==_t&&(at=void 0,Tt=[se]),W.rejectWith(at,Tt))}};j?he():(g.Deferred.getStackHook&&(he.stackTrace=g.Deferred.getStackHook()),e.setTimeout(he))}}return g.Deferred(function(j){c[0][3].add(N(0,j,x(b)?b:Xt,j.notifyWith)),c[1][3].add(N(0,j,x(T)?T:Xt)),c[2][3].add(N(0,j,x(M)?M:_t))}).promise()},promise:function(T){return T!=null?g.extend(T,_):_}},E={};return g.each(c,function(T,M){var b=M[2],L=M[5];_[M[1]]=b.add,L&&b.add(function(){v=L},c[3-T][2].disable,c[3-T][3].disable,c[0][2].lock,c[0][3].lock),b.add(M[3].fire),E[M[0]]=function(){return E[M[0]+"With"](this===E?void 0:this,arguments),this},E[M[0]+"With"]=b.fireWith}),_.promise(E),u&&u.call(E,E),E},when:function(u){var c=arguments.length,v=c,_=Array(v),E=a.call(arguments),T=g.Deferred(),M=function(b){return function(L){_[b]=this,E[b]=arguments.length>1?a.call(arguments):L,--c||T.resolveWith(_,E)}};if(c<=1&&(Ut(u,T.done(M(v)).resolve,T.reject,!c),T.state()==="pending"||x(E[v]&&E[v].then)))return T.then();for(;v--;)Ut(E[v],M(v),T.reject);return T.promise()}});var le=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(u,c){e.console&&e.console.warn&&u&&le.test(u.name)&&e.console.warn("jQuery.Deferred exception: "+u.message,u.stack,c)},g.readyException=function(u){e.setTimeout(function(){throw u})};var ae=g.Deferred();g.fn.ready=function(u){return ae.then(u).catch(function(c){g.readyException(c)}),this},g.extend({isReady:!1,readyWait:1,ready:function(u){(u===!0?--g.readyWait:g.isReady)||(g.isReady=!0,!(u!==!0&&--g.readyWait>0)&&ae.resolveWith(w,[g]))}}),g.ready.then=ae.then;function Zt(){w.removeEventListener("DOMContentLoaded",Zt),e.removeEventListener("load",Zt),g.ready()}w.readyState==="complete"||w.readyState!=="loading"&&!w.documentElement.doScroll?e.setTimeout(g.ready):(w.addEventListener("DOMContentLoaded",Zt),e.addEventListener("load",Zt));var Dt=function(u,c,v,_,E,T,M){var b=0,L=u.length,N=v==null;if(I(v)==="object"){E=!0;for(b in v)Dt(u,c,b,v[b],!0,T,M)}else if(_!==void 0&&(E=!0,x(_)||(M=!0),N&&(M?(c.call(u,_),c=null):(N=c,c=function(j,W,k){return N.call(g(j),k)})),c))for(;b<L;b++)c(u[b],v,M?_:_.call(u[b],b,c(u[b],v)));return E?u:N?c.call(u):L?c(u[0],v):T},ai=/^-ms-/,Se=/-([a-z])/g;function Yi(u,c){return c.toUpperCase()}function Re(u){return u.replace(ai,"ms-").replace(Se,Yi)}var Fe=function(u){return u.nodeType===1||u.nodeType===9||!+u.nodeType};function oi(){this.expando=g.expando+oi.uid++}oi.uid=1,oi.prototype={cache:function(u){var c=u[this.expando];return c||(c={},Fe(u)&&(u.nodeType?u[this.expando]=c:Object.defineProperty(u,this.expando,{value:c,configurable:!0}))),c},set:function(u,c,v){var _,E=this.cache(u);if(typeof c=="string")E[Re(c)]=v;else for(_ in c)E[Re(_)]=c[_];return E},get:function(u,c){return c===void 0?this.cache(u):u[this.expando]&&u[this.expando][Re(c)]},access:function(u,c,v){return c===void 0||c&&typeof c=="string"&&v===void 0?this.get(u,c):(this.set(u,c,v),v!==void 0?v:c)},remove:function(u,c){var v,_=u[this.expando];if(_!==void 0){if(c!==void 0)for(Array.isArray(c)?c=c.map(Re):(c=Re(c),c=c in _?[c]:c.match(St)||[]),v=c.length;v--;)delete _[c[v]];(c===void 0||g.isEmptyObject(_))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var c=u[this.expando];return c!==void 0&&!g.isEmptyObject(c)}};var st=new oi,oe=new oi,Lr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Hi=/[A-Z]/g;function Vn(u){return u==="true"?!0:u==="false"?!1:u==="null"?null:u===+u+""?+u:Lr.test(u)?JSON.parse(u):u}function Wn(u,c,v){var _;if(v===void 0&&u.nodeType===1)if(_="data-"+c.replace(Hi,"-$&").toLowerCase(),v=u.getAttribute(_),typeof v=="string"){try{v=Vn(v)}catch{}oe.set(u,c,v)}else v=void 0;return v}g.extend({hasData:function(u){return oe.hasData(u)||st.hasData(u)},data:function(u,c,v){return oe.access(u,c,v)},removeData:function(u,c){oe.remove(u,c)},_data:function(u,c,v){return st.access(u,c,v)},_removeData:function(u,c){st.remove(u,c)}}),g.fn.extend({data:function(u,c){var v,_,E,T=this[0],M=T&&T.attributes;if(u===void 0){if(this.length&&(E=oe.get(T),T.nodeType===1&&!st.get(T,"hasDataAttrs"))){for(v=M.length;v--;)M[v]&&(_=M[v].name,_.indexOf("data-")===0&&(_=Re(_.slice(5)),Wn(T,_,E[_])));st.set(T,"hasDataAttrs",!0)}return E}return typeof u=="object"?this.each(function(){oe.set(this,u)}):Dt(this,function(b){var L;if(T&&b===void 0)return L=oe.get(T,u),L!==void 0||(L=Wn(T,u),L!==void 0)?L:void 0;this.each(function(){oe.set(this,u,b)})},null,c,arguments.length>1,null,!0)},removeData:function(u){return this.each(function(){oe.remove(this,u)})}}),g.extend({queue:function(u,c,v){var _;if(u)return c=(c||"fx")+"queue",_=st.get(u,c),v&&(!_||Array.isArray(v)?_=st.access(u,c,g.makeArray(v)):_.push(v)),_||[]},dequeue:function(u,c){c=c||"fx";var v=g.queue(u,c),_=v.length,E=v.shift(),T=g._queueHooks(u,c),M=function(){g.dequeue(u,c)};E==="inprogress"&&(E=v.shift(),_--),E&&(c==="fx"&&v.unshift("inprogress"),delete T.stop,E.call(u,M,T)),!_&&T&&T.empty.fire()},_queueHooks:function(u,c){var v=c+"queueHooks";return st.get(u,v)||st.access(u,v,{empty:g.Callbacks("once memory").add(function(){st.remove(u,[c+"queue",v])})})}}),g.fn.extend({queue:function(u,c){var v=2;return typeof u!="string"&&(c=u,u="fx",v--),arguments.length<v?g.queue(this[0],u):c===void 0?this:this.each(function(){var _=g.queue(this,u,c);g._queueHooks(this,u),u==="fx"&&_[0]!=="inprogress"&&g.dequeue(this,u)})},dequeue:function(u){return this.each(function(){g.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,c){var v,_=1,E=g.Deferred(),T=this,M=this.length,b=function(){--_||E.resolveWith(T,[T])};for(typeof u!="string"&&(c=u,u=void 0),u=u||"fx";M--;)v=st.get(T[M],u+"queueHooks"),v&&v.empty&&(_++,v.empty.add(b));return b(),E.promise(c)}});var Xi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ke=new RegExp("^(?:([+-])=|)("+Xi+")([a-z%]*)$","i"),Ee=["Top","Right","Bottom","Left"],gi=w.documentElement,yi=function(u){return g.contains(u.ownerDocument,u)},Yn={composed:!0};gi.getRootNode&&(yi=function(u){return g.contains(u.ownerDocument,u)||u.getRootNode(Yn)===u.ownerDocument});var Xe=function(u,c){return u=c||u,u.style.display==="none"||u.style.display===""&&yi(u)&&g.css(u,"display")==="none"};function si(u,c,v,_){var E,T,M=20,b=_?function(){return _.cur()}:function(){return g.css(u,c,"")},L=b(),N=v&&v[3]||(g.cssNumber[c]?"":"px"),j=u.nodeType&&(g.cssNumber[c]||N!=="px"&&+L)&&ke.exec(g.css(u,c));if(j&&j[3]!==N){for(L=L/2,N=N||j[3],j=+L||1;M--;)g.style(u,c,j+N),(1-T)*(1-(T=b()/L||.5))<=0&&(M=0),j=j/T;j=j*2,g.style(u,c,j+N),v=v||[]}return v&&(j=+j||+L||0,E=v[1]?j+(v[1]+1)*v[2]:+v[2],_&&(_.unit=N,_.start=j,_.end=E)),E}var Ii={};function yn(u){var c,v=u.ownerDocument,_=u.nodeName,E=Ii[_];return E||(c=v.body.appendChild(v.createElement(_)),E=g.css(c,"display"),c.parentNode.removeChild(c),E==="none"&&(E="block"),Ii[_]=E,E)}function de(u,c){for(var v,_,E=[],T=0,M=u.length;T<M;T++)_=u[T],!!_.style&&(v=_.style.display,c?(v==="none"&&(E[T]=st.get(_,"display")||null,E[T]||(_.style.display="")),_.style.display===""&&Xe(_)&&(E[T]=yn(_))):v!=="none"&&(E[T]="none",st.set(_,"display",v)));for(T=0;T<M;T++)E[T]!=null&&(u[T].style.display=E[T]);return u}g.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(u){return typeof u=="boolean"?u?this.show():this.hide():this.each(function(){Xe(this)?g(this).show():g(this).hide()})}});var ye=/^(?:checkbox|radio)$/i,Pi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,qi=/^$|^module$|\/(?:java|ecma)script/i;(function(){var u=w.createDocumentFragment(),c=u.appendChild(w.createElement("div")),v=w.createElement("input");v.setAttribute("type","radio"),v.setAttribute("checked","checked"),v.setAttribute("name","t"),c.appendChild(v),m.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",m.option=!!c.lastChild})();var _e={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};_e.tbody=_e.tfoot=_e.colgroup=_e.caption=_e.thead,_e.th=_e.td,m.option||(_e.optgroup=_e.option=[1,"<select multiple='multiple'>","</select>"]);function me(u,c){var v;return typeof u.getElementsByTagName!="undefined"?v=u.getElementsByTagName(c||"*"):typeof u.querySelectorAll!="undefined"?v=u.querySelectorAll(c||"*"):v=[],c===void 0||c&&K(u,c)?g.merge([u],v):v}function Ar(u,c){for(var v=0,_=u.length;v<_;v++)st.set(u[v],"globalEval",!c||st.get(c[v],"globalEval"))}var ca=/<|&#?\w+;/;function fo(u,c,v,_,E){for(var T,M,b,L,N,j,W=c.createDocumentFragment(),k=[],U=0,at=u.length;U<at;U++)if(T=u[U],T||T===0)if(I(T)==="object")g.merge(k,T.nodeType?[T]:T);else if(!ca.test(T))k.push(c.createTextNode(T));else{for(M=M||W.appendChild(c.createElement("div")),b=(Pi.exec(T)||["",""])[1].toLowerCase(),L=_e[b]||_e._default,M.innerHTML=L[1]+g.htmlPrefilter(T)+L[2],j=L[0];j--;)M=M.lastChild;g.merge(k,M.childNodes),M=W.firstChild,M.textContent=""}for(W.textContent="",U=0;T=k[U++];){if(_&&g.inArray(T,_)>-1){E&&E.push(T);continue}if(N=yi(T),M=me(W.appendChild(T),"script"),N&&Ar(M),v)for(j=0;T=M[j++];)qi.test(T.type||"")&&v.push(T)}return W}var co=/^([^.]*)(?:\.(.+)|)/;function Ki(){return!0}function Zi(){return!1}function da(u,c){return u===po()==(c==="focus")}function po(){try{return w.activeElement}catch{}}function Hn(u,c,v,_,E,T){var M,b;if(typeof c=="object"){typeof v!="string"&&(_=_||v,v=void 0);for(b in c)Hn(u,b,v,_,c[b],T);return u}if(_==null&&E==null?(E=v,_=v=void 0):E==null&&(typeof v=="string"?(E=_,_=void 0):(E=_,_=v,v=void 0)),E===!1)E=Zi;else if(!E)return u;return T===1&&(M=E,E=function(L){return g().off(L),M.apply(this,arguments)},E.guid=M.guid||(M.guid=g.guid++)),u.each(function(){g.event.add(this,c,E,_,v)})}g.event={global:{},add:function(u,c,v,_,E){var T,M,b,L,N,j,W,k,U,at,Tt,ot=st.get(u);if(!!Fe(u))for(v.handler&&(T=v,v=T.handler,E=T.selector),E&&g.find.matchesSelector(gi,E),v.guid||(v.guid=g.guid++),(L=ot.events)||(L=ot.events=Object.create(null)),(M=ot.handle)||(M=ot.handle=function(he){return typeof g!="undefined"&&g.event.triggered!==he.type?g.event.dispatch.apply(u,arguments):void 0}),c=(c||"").match(St)||[""],N=c.length;N--;)b=co.exec(c[N])||[],U=Tt=b[1],at=(b[2]||"").split(".").sort(),!!U&&(W=g.event.special[U]||{},U=(E?W.delegateType:W.bindType)||U,W=g.event.special[U]||{},j=g.extend({type:U,origType:Tt,data:_,handler:v,guid:v.guid,selector:E,needsContext:E&&g.expr.match.needsContext.test(E),namespace:at.join(".")},T),(k=L[U])||(k=L[U]=[],k.delegateCount=0,(!W.setup||W.setup.call(u,_,at,M)===!1)&&u.addEventListener&&u.addEventListener(U,M)),W.add&&(W.add.call(u,j),j.handler.guid||(j.handler.guid=v.guid)),E?k.splice(k.delegateCount++,0,j):k.push(j),g.event.global[U]=!0)},remove:function(u,c,v,_,E){var T,M,b,L,N,j,W,k,U,at,Tt,ot=st.hasData(u)&&st.get(u);if(!(!ot||!(L=ot.events))){for(c=(c||"").match(St)||[""],N=c.length;N--;){if(b=co.exec(c[N])||[],U=Tt=b[1],at=(b[2]||"").split(".").sort(),!U){for(U in L)g.event.remove(u,U+c[N],v,_,!0);continue}for(W=g.event.special[U]||{},U=(_?W.delegateType:W.bindType)||U,k=L[U]||[],b=b[2]&&new RegExp("(^|\\.)"+at.join("\\.(?:.*\\.|)")+"(\\.|$)"),M=T=k.length;T--;)j=k[T],(E||Tt===j.origType)&&(!v||v.guid===j.guid)&&(!b||b.test(j.namespace))&&(!_||_===j.selector||_==="**"&&j.selector)&&(k.splice(T,1),j.selector&&k.delegateCount--,W.remove&&W.remove.call(u,j));M&&!k.length&&((!W.teardown||W.teardown.call(u,at,ot.handle)===!1)&&g.removeEvent(u,U,ot.handle),delete L[U])}g.isEmptyObject(L)&&st.remove(u,"handle events")}},dispatch:function(u){var c,v,_,E,T,M,b=new Array(arguments.length),L=g.event.fix(u),N=(st.get(this,"events")||Object.create(null))[L.type]||[],j=g.event.special[L.type]||{};for(b[0]=L,c=1;c<arguments.length;c++)b[c]=arguments[c];if(L.delegateTarget=this,!(j.preDispatch&&j.preDispatch.call(this,L)===!1)){for(M=g.event.handlers.call(this,L,N),c=0;(E=M[c++])&&!L.isPropagationStopped();)for(L.currentTarget=E.elem,v=0;(T=E.handlers[v++])&&!L.isImmediatePropagationStopped();)(!L.rnamespace||T.namespace===!1||L.rnamespace.test(T.namespace))&&(L.handleObj=T,L.data=T.data,_=((g.event.special[T.origType]||{}).handle||T.handler).apply(E.elem,b),_!==void 0&&(L.result=_)===!1&&(L.preventDefault(),L.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,L),L.result}},handlers:function(u,c){var v,_,E,T,M,b=[],L=c.delegateCount,N=u.target;if(L&&N.nodeType&&!(u.type==="click"&&u.button>=1)){for(;N!==this;N=N.parentNode||this)if(N.nodeType===1&&!(u.type==="click"&&N.disabled===!0)){for(T=[],M={},v=0;v<L;v++)_=c[v],E=_.selector+" ",M[E]===void 0&&(M[E]=_.needsContext?g(E,this).index(N)>-1:g.find(E,this,null,[N]).length),M[E]&&T.push(_);T.length&&b.push({elem:N,handlers:T})}}return N=this,L<c.length&&b.push({elem:N,handlers:c.slice(L)}),b},addProp:function(u,c){Object.defineProperty(g.Event.prototype,u,{enumerable:!0,configurable:!0,get:x(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(v){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:v})}})},fix:function(u){return u[g.expando]?u:new g.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var c=this||u;return ye.test(c.type)&&c.click&&K(c,"input")&&bi(c,"click",Ki),!1},trigger:function(u){var c=this||u;return ye.test(c.type)&&c.click&&K(c,"input")&&bi(c,"click"),!0},_default:function(u){var c=u.target;return ye.test(c.type)&&c.click&&K(c,"input")&&st.get(c,"click")||K(c,"a")}},beforeunload:{postDispatch:function(u){u.result!==void 0&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}};function bi(u,c,v){if(!v){st.get(u,c)===void 0&&g.event.add(u,c,Ki);return}st.set(u,c,!1),g.event.add(u,c,{namespace:!1,handler:function(_){var E,T,M=st.get(this,c);if(_.isTrigger&1&&this[c]){if(M.length)(g.event.special[c]||{}).delegateType&&_.stopPropagation();else if(M=a.call(arguments),st.set(this,c,M),E=v(this,c),this[c](),T=st.get(this,c),M!==T||E?st.set(this,c,!1):T={},M!==T)return _.stopImmediatePropagation(),_.preventDefault(),T&&T.value}else M.length&&(st.set(this,c,{value:g.event.trigger(g.extend(M[0],g.Event.prototype),M.slice(1),this)}),_.stopImmediatePropagation())}})}g.removeEvent=function(u,c,v){u.removeEventListener&&u.removeEventListener(c,v)},g.Event=function(u,c){if(!(this instanceof g.Event))return new g.Event(u,c);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||u.defaultPrevented===void 0&&u.returnValue===!1?Ki:Zi,this.target=u.target&&u.target.nodeType===3?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,c&&g.extend(this,c),this.timeStamp=u&&u.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:Zi,isPropagationStopped:Zi,isImmediatePropagationStopped:Zi,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=Ki,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=Ki,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=Ki,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(u,c){g.event.special[u]={setup:function(){return bi(this,u,da),!1},trigger:function(){return bi(this,u),!0},_default:function(){return!0},delegateType:c}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,c){g.event.special[u]={delegateType:c,bindType:c,handle:function(v){var _,E=this,T=v.relatedTarget,M=v.handleObj;return(!T||T!==E&&!g.contains(E,T))&&(v.type=M.origType,_=M.handler.apply(this,arguments),v.type=c),_}}}),g.fn.extend({on:function(u,c,v,_){return Hn(this,u,c,v,_)},one:function(u,c,v,_){return Hn(this,u,c,v,_,1)},off:function(u,c,v){var _,E;if(u&&u.preventDefault&&u.handleObj)return _=u.handleObj,g(u.delegateTarget).off(_.namespace?_.origType+"."+_.namespace:_.origType,_.selector,_.handler),this;if(typeof u=="object"){for(E in u)this.off(E,c,u[E]);return this}return(c===!1||typeof c=="function")&&(v=c,c=void 0),v===!1&&(v=Zi),this.each(function(){g.event.remove(this,u,v,c)})}});var Xn=/<script|<style|<link/i,qn=/checked\s*(?:[^=]|=\s*.checked.)/i,vo=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(u,c){return K(u,"table")&&K(c.nodeType!==11?c:c.firstChild,"tr")&&g(u).children("tbody")[0]||u}function Ds(u){return u.type=(u.getAttribute("type")!==null)+"/"+u.type,u}function Fs(u){return(u.type||"").slice(0,5)==="true/"?u.type=u.type.slice(5):u.removeAttribute("type"),u}function _n(u,c){var v,_,E,T,M,b,L;if(c.nodeType===1){if(st.hasData(u)&&(T=st.get(u),L=T.events,L)){st.remove(c,"handle events");for(E in L)for(v=0,_=L[E].length;v<_;v++)g.event.add(c,E,L[E][v])}oe.hasData(u)&&(M=oe.access(u),b=g.extend({},M),oe.set(c,b))}}function Kn(u,c){var v=c.nodeName.toLowerCase();v==="input"&&ye.test(u.type)?c.checked=u.checked:(v==="input"||v==="textarea")&&(c.defaultValue=u.defaultValue)}function Ie(u,c,v,_){c=o(c);var E,T,M,b,L,N,j=0,W=u.length,k=W-1,U=c[0],at=x(U);if(at||W>1&&typeof U=="string"&&!m.checkClone&&qn.test(U))return u.each(function(Tt){var ot=u.eq(Tt);at&&(c[0]=U.call(this,Tt,ot.html())),Ie(ot,c,v,_)});if(W&&(E=fo(c,u[0].ownerDocument,!1,u,_),T=E.firstChild,E.childNodes.length===1&&(E=T),T||_)){for(M=g.map(me(E,"script"),Ds),b=M.length;j<W;j++)L=E,j!==k&&(L=g.clone(L,!0,!0),b&&g.merge(M,me(L,"script"))),v.call(u[j],L,j);if(b)for(N=M[M.length-1].ownerDocument,g.map(M,Fs),j=0;j<b;j++)L=M[j],qi.test(L.type||"")&&!st.access(L,"globalEval")&&g.contains(N,L)&&(L.src&&(L.type||"").toLowerCase()!=="module"?g._evalUrl&&!L.noModule&&g._evalUrl(L.src,{nonce:L.nonce||L.getAttribute("nonce")},N):R(L.textContent.replace(vo,""),L,N))}return u}function Zn(u,c,v){for(var _,E=c?g.filter(c,u):u,T=0;(_=E[T])!=null;T++)!v&&_.nodeType===1&&g.cleanData(me(_)),_.parentNode&&(v&&yi(_)&&Ar(me(_,"script")),_.parentNode.removeChild(_));return u}g.extend({htmlPrefilter:function(u){return u},clone:function(u,c,v){var _,E,T,M,b=u.cloneNode(!0),L=yi(u);if(!m.noCloneChecked&&(u.nodeType===1||u.nodeType===11)&&!g.isXMLDoc(u))for(M=me(b),T=me(u),_=0,E=T.length;_<E;_++)Kn(T[_],M[_]);if(c)if(v)for(T=T||me(u),M=M||me(b),_=0,E=T.length;_<E;_++)_n(T[_],M[_]);else _n(u,b);return M=me(b,"script"),M.length>0&&Ar(M,!L&&me(u,"script")),b},cleanData:function(u){for(var c,v,_,E=g.event.special,T=0;(v=u[T])!==void 0;T++)if(Fe(v)){if(c=v[st.expando]){if(c.events)for(_ in c.events)E[_]?g.event.remove(v,_):g.removeEvent(v,_,c.handle);v[st.expando]=void 0}v[oe.expando]&&(v[oe.expando]=void 0)}}}),g.fn.extend({detach:function(u){return Zn(this,u,!0)},remove:function(u){return Zn(this,u)},text:function(u){return Dt(this,function(c){return c===void 0?g.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=c)})},null,u,arguments.length)},append:function(){return Ie(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=pa(this,u);c.appendChild(u)}})},prepend:function(){return Ie(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=pa(this,u);c.insertBefore(u,c.firstChild)}})},before:function(){return Ie(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return Ie(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,c=0;(u=this[c])!=null;c++)u.nodeType===1&&(g.cleanData(me(u,!1)),u.textContent="");return this},clone:function(u,c){return u=u==null?!1:u,c=c==null?u:c,this.map(function(){return g.clone(this,u,c)})},html:function(u){return Dt(this,function(c){var v=this[0]||{},_=0,E=this.length;if(c===void 0&&v.nodeType===1)return v.innerHTML;if(typeof c=="string"&&!Xn.test(c)&&!_e[(Pi.exec(c)||["",""])[1].toLowerCase()]){c=g.htmlPrefilter(c);try{for(;_<E;_++)v=this[_]||{},v.nodeType===1&&(g.cleanData(me(v,!1)),v.innerHTML=c);v=0}catch{}}v&&this.empty().append(c)},null,u,arguments.length)},replaceWith:function(){var u=[];return Ie(this,arguments,function(c){var v=this.parentNode;g.inArray(this,u)<0&&(g.cleanData(me(this)),v&&v.replaceChild(c,this))},u)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,c){g.fn[u]=function(v){for(var _,E=[],T=g(v),M=T.length-1,b=0;b<=M;b++)_=b===M?this:this.clone(!0),g(T[b])[c](_),s.apply(E,_.get());return this.pushStack(E)}});var mn=new RegExp("^("+Xi+")(?!px)[a-z%]+$","i"),ue=function(u){var c=u.ownerDocument.defaultView;return(!c||!c.opener)&&(c=e),c.getComputedStyle(u)},Pe=function(u,c,v){var _,E,T={};for(E in c)T[E]=u.style[E],u.style[E]=c[E];_=v.call(u);for(E in c)u.style[E]=T[E];return _},va=new RegExp(Ee.join("|"),"i");(function(){function u(){if(!!N){L.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",N.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",gi.appendChild(L).appendChild(N);var j=e.getComputedStyle(N);v=j.top!=="1%",b=c(j.marginLeft)===12,N.style.right="60%",T=c(j.right)===36,_=c(j.width)===36,N.style.position="absolute",E=c(N.offsetWidth/3)===12,gi.removeChild(L),N=null}}function c(j){return Math.round(parseFloat(j))}var v,_,E,T,M,b,L=w.createElement("div"),N=w.createElement("div");!N.style||(N.style.backgroundClip="content-box",N.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=N.style.backgroundClip==="content-box",g.extend(m,{boxSizingReliable:function(){return u(),_},pixelBoxStyles:function(){return u(),T},pixelPosition:function(){return u(),v},reliableMarginLeft:function(){return u(),b},scrollboxSize:function(){return u(),E},reliableTrDimensions:function(){var j,W,k,U;return M==null&&(j=w.createElement("table"),W=w.createElement("tr"),k=w.createElement("div"),j.style.cssText="position:absolute;left:-11111px;border-collapse:separate",W.style.cssText="border:1px solid",W.style.height="1px",k.style.height="9px",k.style.display="block",gi.appendChild(j).appendChild(W).appendChild(k),U=e.getComputedStyle(W),M=parseInt(U.height,10)+parseInt(U.borderTopWidth,10)+parseInt(U.borderBottomWidth,10)===W.offsetHeight,gi.removeChild(j)),M}}))})();function Jn(u,c,v){var _,E,T,M,b=u.style;return v=v||ue(u),v&&(M=v.getPropertyValue(c)||v[c],M===""&&!yi(u)&&(M=g.style(u,c)),!m.pixelBoxStyles()&&mn.test(M)&&va.test(c)&&(_=b.width,E=b.minWidth,T=b.maxWidth,b.minWidth=b.maxWidth=b.width=M,M=v.width,b.width=_,b.minWidth=E,b.maxWidth=T)),M!==void 0?M+"":M}function ga(u,c){return{get:function(){if(u()){delete this.get;return}return(this.get=c).apply(this,arguments)}}}var Uu=["Webkit","Moz","ms"],$u=w.createElement("div").style,zu={};function Yd(u){for(var c=u[0].toUpperCase()+u.slice(1),v=Uu.length;v--;)if(u=Uu[v]+c,u in $u)return u}function ks(u){var c=g.cssProps[u]||zu[u];return c||(u in $u?u:zu[u]=Yd(u)||u)}var Hd=/^(none|table(?!-c[ea]).+)/,Vu=/^--/,Xd={position:"absolute",visibility:"hidden",display:"block"},Wu={letterSpacing:"0",fontWeight:"400"};function Yu(u,c,v){var _=ke.exec(c);return _?Math.max(0,_[2]-(v||0))+(_[3]||"px"):c}function Gs(u,c,v,_,E,T){var M=c==="width"?1:0,b=0,L=0;if(v===(_?"border":"content"))return 0;for(;M<4;M+=2)v==="margin"&&(L+=g.css(u,v+Ee[M],!0,E)),_?(v==="content"&&(L-=g.css(u,"padding"+Ee[M],!0,E)),v!=="margin"&&(L-=g.css(u,"border"+Ee[M]+"Width",!0,E))):(L+=g.css(u,"padding"+Ee[M],!0,E),v!=="padding"?L+=g.css(u,"border"+Ee[M]+"Width",!0,E):b+=g.css(u,"border"+Ee[M]+"Width",!0,E));return!_&&T>=0&&(L+=Math.max(0,Math.ceil(u["offset"+c[0].toUpperCase()+c.slice(1)]-T-L-b-.5))||0),L}function Hu(u,c,v){var _=ue(u),E=!m.boxSizingReliable()||v,T=E&&g.css(u,"boxSizing",!1,_)==="border-box",M=T,b=Jn(u,c,_),L="offset"+c[0].toUpperCase()+c.slice(1);if(mn.test(b)){if(!v)return b;b="auto"}return(!m.boxSizingReliable()&&T||!m.reliableTrDimensions()&&K(u,"tr")||b==="auto"||!parseFloat(b)&&g.css(u,"display",!1,_)==="inline")&&u.getClientRects().length&&(T=g.css(u,"boxSizing",!1,_)==="border-box",M=L in u,M&&(b=u[L])),b=parseFloat(b)||0,b+Gs(u,c,v||(T?"border":"content"),M,_,b)+"px"}g.extend({cssHooks:{opacity:{get:function(u,c){if(c){var v=Jn(u,"opacity");return v===""?"1":v}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(u,c,v,_){if(!(!u||u.nodeType===3||u.nodeType===8||!u.style)){var E,T,M,b=Re(c),L=Vu.test(c),N=u.style;if(L||(c=ks(b)),M=g.cssHooks[c]||g.cssHooks[b],v!==void 0){if(T=typeof v,T==="string"&&(E=ke.exec(v))&&E[1]&&(v=si(u,c,E),T="number"),v==null||v!==v)return;T==="number"&&!L&&(v+=E&&E[3]||(g.cssNumber[b]?"":"px")),!m.clearCloneStyle&&v===""&&c.indexOf("background")===0&&(N[c]="inherit"),(!M||!("set"in M)||(v=M.set(u,v,_))!==void 0)&&(L?N.setProperty(c,v):N[c]=v)}else return M&&"get"in M&&(E=M.get(u,!1,_))!==void 0?E:N[c]}},css:function(u,c,v,_){var E,T,M,b=Re(c),L=Vu.test(c);return L||(c=ks(b)),M=g.cssHooks[c]||g.cssHooks[b],M&&"get"in M&&(E=M.get(u,!0,v)),E===void 0&&(E=Jn(u,c,_)),E==="normal"&&c in Wu&&(E=Wu[c]),v===""||v?(T=parseFloat(E),v===!0||isFinite(T)?T||0:E):E}}),g.each(["height","width"],function(u,c){g.cssHooks[c]={get:function(v,_,E){if(_)return Hd.test(g.css(v,"display"))&&(!v.getClientRects().length||!v.getBoundingClientRect().width)?Pe(v,Xd,function(){return Hu(v,c,E)}):Hu(v,c,E)},set:function(v,_,E){var T,M=ue(v),b=!m.scrollboxSize()&&M.position==="absolute",L=b||E,N=L&&g.css(v,"boxSizing",!1,M)==="border-box",j=E?Gs(v,c,E,N,M):0;return N&&b&&(j-=Math.ceil(v["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(M[c])-Gs(v,c,"border",!1,M)-.5)),j&&(T=ke.exec(_))&&(T[3]||"px")!=="px"&&(v.style[c]=_,_=g.css(v,c)),Yu(v,_,j)}}}),g.cssHooks.marginLeft=ga(m.reliableMarginLeft,function(u,c){if(c)return(parseFloat(Jn(u,"marginLeft"))||u.getBoundingClientRect().left-Pe(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(u,c){g.cssHooks[u+c]={expand:function(v){for(var _=0,E={},T=typeof v=="string"?v.split(" "):[v];_<4;_++)E[u+Ee[_]+c]=T[_]||T[_-2]||T[0];return E}},u!=="margin"&&(g.cssHooks[u+c].set=Yu)}),g.fn.extend({css:function(u,c){return Dt(this,function(v,_,E){var T,M,b={},L=0;if(Array.isArray(_)){for(T=ue(v),M=_.length;L<M;L++)b[_[L]]=g.css(v,_[L],!1,T);return b}return E!==void 0?g.style(v,_,E):g.css(v,_)},u,c,arguments.length>1)}});function Ge(u,c,v,_,E){return new Ge.prototype.init(u,c,v,_,E)}g.Tween=Ge,Ge.prototype={constructor:Ge,init:function(u,c,v,_,E,T){this.elem=u,this.prop=v,this.easing=E||g.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=_,this.unit=T||(g.cssNumber[v]?"":"px")},cur:function(){var u=Ge.propHooks[this.prop];return u&&u.get?u.get(this):Ge.propHooks._default.get(this)},run:function(u){var c,v=Ge.propHooks[this.prop];return this.options.duration?this.pos=c=g.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):this.pos=c=u,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),v&&v.set?v.set(this):Ge.propHooks._default.set(this),this}},Ge.prototype.init.prototype=Ge.prototype,Ge.propHooks={_default:{get:function(u){var c;return u.elem.nodeType!==1||u.elem[u.prop]!=null&&u.elem.style[u.prop]==null?u.elem[u.prop]:(c=g.css(u.elem,u.prop,""),!c||c==="auto"?0:c)},set:function(u){g.fx.step[u.prop]?g.fx.step[u.prop](u):u.elem.nodeType===1&&(g.cssHooks[u.prop]||u.elem.style[ks(u.prop)]!=null)?g.style(u.elem,u.prop,u.now+u.unit):u.elem[u.prop]=u.now}}},Ge.propHooks.scrollTop=Ge.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},g.easing={linear:function(u){return u},swing:function(u){return .5-Math.cos(u*Math.PI)/2},_default:"swing"},g.fx=Ge.prototype.init,g.fx.step={};var Nr,go,qd=/^(?:toggle|show|hide)$/,Kd=/queueHooks$/;function js(){go&&(w.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(js):e.setTimeout(js,g.fx.interval),g.fx.tick())}function Xu(){return e.setTimeout(function(){Nr=void 0}),Nr=Date.now()}function yo(u,c){var v,_=0,E={height:u};for(c=c?1:0;_<4;_+=2-c)v=Ee[_],E["margin"+v]=E["padding"+v]=u;return c&&(E.opacity=E.width=u),E}function qu(u,c,v){for(var _,E=(_i.tweeners[c]||[]).concat(_i.tweeners["*"]),T=0,M=E.length;T<M;T++)if(_=E[T].call(v,c,u))return _}function Zd(u,c,v){var _,E,T,M,b,L,N,j,W="width"in c||"height"in c,k=this,U={},at=u.style,Tt=u.nodeType&&Xe(u),ot=st.get(u,"fxshow");v.queue||(M=g._queueHooks(u,"fx"),M.unqueued==null&&(M.unqueued=0,b=M.empty.fire,M.empty.fire=function(){M.unqueued||b()}),M.unqueued++,k.always(function(){k.always(function(){M.unqueued--,g.queue(u,"fx").length||M.empty.fire()})}));for(_ in c)if(E=c[_],qd.test(E)){if(delete c[_],T=T||E==="toggle",E===(Tt?"hide":"show"))if(E==="show"&&ot&&ot[_]!==void 0)Tt=!0;else continue;U[_]=ot&&ot[_]||g.style(u,_)}if(L=!g.isEmptyObject(c),!(!L&&g.isEmptyObject(U))){W&&u.nodeType===1&&(v.overflow=[at.overflow,at.overflowX,at.overflowY],N=ot&&ot.display,N==null&&(N=st.get(u,"display")),j=g.css(u,"display"),j==="none"&&(N?j=N:(de([u],!0),N=u.style.display||N,j=g.css(u,"display"),de([u]))),(j==="inline"||j==="inline-block"&&N!=null)&&g.css(u,"float")==="none"&&(L||(k.done(function(){at.display=N}),N==null&&(j=at.display,N=j==="none"?"":j)),at.display="inline-block")),v.overflow&&(at.overflow="hidden",k.always(function(){at.overflow=v.overflow[0],at.overflowX=v.overflow[1],at.overflowY=v.overflow[2]})),L=!1;for(_ in U)L||(ot?"hidden"in ot&&(Tt=ot.hidden):ot=st.access(u,"fxshow",{display:N}),T&&(ot.hidden=!Tt),Tt&&de([u],!0),k.done(function(){Tt||de([u]),st.remove(u,"fxshow");for(_ in U)g.style(u,_,U[_])})),L=qu(Tt?ot[_]:0,_,k),_ in ot||(ot[_]=L.start,Tt&&(L.end=L.start,L.start=0))}}function Jd(u,c){var v,_,E,T,M;for(v in u)if(_=Re(v),E=c[_],T=u[v],Array.isArray(T)&&(E=T[1],T=u[v]=T[0]),v!==_&&(u[_]=T,delete u[v]),M=g.cssHooks[_],M&&"expand"in M){T=M.expand(T),delete u[_];for(v in T)v in u||(u[v]=T[v],c[v]=E)}else c[_]=E}function _i(u,c,v){var _,E,T=0,M=_i.prefilters.length,b=g.Deferred().always(function(){delete L.elem}),L=function(){if(E)return!1;for(var W=Nr||Xu(),k=Math.max(0,N.startTime+N.duration-W),U=k/N.duration||0,at=1-U,Tt=0,ot=N.tweens.length;Tt<ot;Tt++)N.tweens[Tt].run(at);return b.notifyWith(u,[N,at,k]),at<1&&ot?k:(ot||b.notifyWith(u,[N,1,0]),b.resolveWith(u,[N]),!1)},N=b.promise({elem:u,props:g.extend({},c),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},v),originalProperties:c,originalOptions:v,startTime:Nr||Xu(),duration:v.duration,tweens:[],createTween:function(W,k){var U=g.Tween(u,N.opts,W,k,N.opts.specialEasing[W]||N.opts.easing);return N.tweens.push(U),U},stop:function(W){var k=0,U=W?N.tweens.length:0;if(E)return this;for(E=!0;k<U;k++)N.tweens[k].run(1);return W?(b.notifyWith(u,[N,1,0]),b.resolveWith(u,[N,W])):b.rejectWith(u,[N,W]),this}}),j=N.props;for(Jd(j,N.opts.specialEasing);T<M;T++)if(_=_i.prefilters[T].call(N,u,j,N.opts),_)return x(_.stop)&&(g._queueHooks(N.elem,N.opts.queue).stop=_.stop.bind(_)),_;return g.map(j,qu,N),x(N.opts.start)&&N.opts.start.call(u,N),N.progress(N.opts.progress).done(N.opts.done,N.opts.complete).fail(N.opts.fail).always(N.opts.always),g.fx.timer(g.extend(L,{elem:u,anim:N,queue:N.opts.queue})),N}g.Animation=g.extend(_i,{tweeners:{"*":[function(u,c){var v=this.createTween(u,c);return si(v.elem,u,ke.exec(c),v),v}]},tweener:function(u,c){x(u)?(c=u,u=["*"]):u=u.match(St);for(var v,_=0,E=u.length;_<E;_++)v=u[_],_i.tweeners[v]=_i.tweeners[v]||[],_i.tweeners[v].unshift(c)},prefilters:[Zd],prefilter:function(u,c){c?_i.prefilters.unshift(u):_i.prefilters.push(u)}}),g.speed=function(u,c,v){var _=u&&typeof u=="object"?g.extend({},u):{complete:v||!v&&c||x(u)&&u,duration:u,easing:v&&c||c&&!x(c)&&c};return g.fx.off?_.duration=0:typeof _.duration!="number"&&(_.duration in g.fx.speeds?_.duration=g.fx.speeds[_.duration]:_.duration=g.fx.speeds._default),(_.queue==null||_.queue===!0)&&(_.queue="fx"),_.old=_.complete,_.complete=function(){x(_.old)&&_.old.call(this),_.queue&&g.dequeue(this,_.queue)},_},g.fn.extend({fadeTo:function(u,c,v,_){return this.filter(Xe).css("opacity",0).show().end().animate({opacity:c},u,v,_)},animate:function(u,c,v,_){var E=g.isEmptyObject(u),T=g.speed(c,v,_),M=function(){var b=_i(this,g.extend({},u),T);(E||st.get(this,"finish"))&&b.stop(!0)};return M.finish=M,E||T.queue===!1?this.each(M):this.queue(T.queue,M)},stop:function(u,c,v){var _=function(E){var T=E.stop;delete E.stop,T(v)};return typeof u!="string"&&(v=c,c=u,u=void 0),c&&this.queue(u||"fx",[]),this.each(function(){var E=!0,T=u!=null&&u+"queueHooks",M=g.timers,b=st.get(this);if(T)b[T]&&b[T].stop&&_(b[T]);else for(T in b)b[T]&&b[T].stop&&Kd.test(T)&&_(b[T]);for(T=M.length;T--;)M[T].elem===this&&(u==null||M[T].queue===u)&&(M[T].anim.stop(v),E=!1,M.splice(T,1));(E||!v)&&g.dequeue(this,u)})},finish:function(u){return u!==!1&&(u=u||"fx"),this.each(function(){var c,v=st.get(this),_=v[u+"queue"],E=v[u+"queueHooks"],T=g.timers,M=_?_.length:0;for(v.finish=!0,g.queue(this,u,[]),E&&E.stop&&E.stop.call(this,!0),c=T.length;c--;)T[c].elem===this&&T[c].queue===u&&(T[c].anim.stop(!0),T.splice(c,1));for(c=0;c<M;c++)_[c]&&_[c].finish&&_[c].finish.call(this);delete v.finish})}}),g.each(["toggle","show","hide"],function(u,c){var v=g.fn[c];g.fn[c]=function(_,E,T){return _==null||typeof _=="boolean"?v.apply(this,arguments):this.animate(yo(c,!0),_,E,T)}}),g.each({slideDown:yo("show"),slideUp:yo("hide"),slideToggle:yo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,c){g.fn[u]=function(v,_,E){return this.animate(c,v,_,E)}}),g.timers=[],g.fx.tick=function(){var u,c=0,v=g.timers;for(Nr=Date.now();c<v.length;c++)u=v[c],!u()&&v[c]===u&&v.splice(c--,1);v.length||g.fx.stop(),Nr=void 0},g.fx.timer=function(u){g.timers.push(u),g.fx.start()},g.fx.interval=13,g.fx.start=function(){go||(go=!0,js())},g.fx.stop=function(){go=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(u,c){return u=g.fx&&g.fx.speeds[u]||u,c=c||"fx",this.queue(c,function(v,_){var E=e.setTimeout(v,u);_.stop=function(){e.clearTimeout(E)}})},function(){var u=w.createElement("input"),c=w.createElement("select"),v=c.appendChild(w.createElement("option"));u.type="checkbox",m.checkOn=u.value!=="",m.optSelected=v.selected,u=w.createElement("input"),u.value="t",u.type="radio",m.radioValue=u.value==="t"}();var Ku,ya=g.expr.attrHandle;g.fn.extend({attr:function(u,c){return Dt(this,g.attr,u,c,arguments.length>1)},removeAttr:function(u){return this.each(function(){g.removeAttr(this,u)})}}),g.extend({attr:function(u,c,v){var _,E,T=u.nodeType;if(!(T===3||T===8||T===2)){if(typeof u.getAttribute=="undefined")return g.prop(u,c,v);if((T!==1||!g.isXMLDoc(u))&&(E=g.attrHooks[c.toLowerCase()]||(g.expr.match.bool.test(c)?Ku:void 0)),v!==void 0){if(v===null){g.removeAttr(u,c);return}return E&&"set"in E&&(_=E.set(u,v,c))!==void 0?_:(u.setAttribute(c,v+""),v)}return E&&"get"in E&&(_=E.get(u,c))!==null?_:(_=g.find.attr(u,c),_==null?void 0:_)}},attrHooks:{type:{set:function(u,c){if(!m.radioValue&&c==="radio"&&K(u,"input")){var v=u.value;return u.setAttribute("type",c),v&&(u.value=v),c}}}},removeAttr:function(u,c){var v,_=0,E=c&&c.match(St);if(E&&u.nodeType===1)for(;v=E[_++];)u.removeAttribute(v)}}),Ku={set:function(u,c,v){return c===!1?g.removeAttr(u,v):u.setAttribute(v,v),v}},g.each(g.expr.match.bool.source.match(/\w+/g),function(u,c){var v=ya[c]||g.find.attr;ya[c]=function(_,E,T){var M,b,L=E.toLowerCase();return T||(b=ya[L],ya[L]=M,M=v(_,E,T)!=null?L:null,ya[L]=b),M}});var Qd=/^(?:input|select|textarea|button)$/i,tp=/^(?:a|area)$/i;g.fn.extend({prop:function(u,c){return Dt(this,g.prop,u,c,arguments.length>1)},removeProp:function(u){return this.each(function(){delete this[g.propFix[u]||u]})}}),g.extend({prop:function(u,c,v){var _,E,T=u.nodeType;if(!(T===3||T===8||T===2))return(T!==1||!g.isXMLDoc(u))&&(c=g.propFix[c]||c,E=g.propHooks[c]),v!==void 0?E&&"set"in E&&(_=E.set(u,v,c))!==void 0?_:u[c]=v:E&&"get"in E&&(_=E.get(u,c))!==null?_:u[c]},propHooks:{tabIndex:{get:function(u){var c=g.find.attr(u,"tabindex");return c?parseInt(c,10):Qd.test(u.nodeName)||tp.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(g.propHooks.selected={get:function(u){var c=u.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(u){var c=u.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});function Qn(u){var c=u.match(St)||[];return c.join(" ")}function tr(u){return u.getAttribute&&u.getAttribute("class")||""}function Bs(u){return Array.isArray(u)?u:typeof u=="string"?u.match(St)||[]:[]}g.fn.extend({addClass:function(u){var c,v,_,E,T,M,b,L=0;if(x(u))return this.each(function(N){g(this).addClass(u.call(this,N,tr(this)))});if(c=Bs(u),c.length){for(;v=this[L++];)if(E=tr(v),_=v.nodeType===1&&" "+Qn(E)+" ",_){for(M=0;T=c[M++];)_.indexOf(" "+T+" ")<0&&(_+=T+" ");b=Qn(_),E!==b&&v.setAttribute("class",b)}}return this},removeClass:function(u){var c,v,_,E,T,M,b,L=0;if(x(u))return this.each(function(N){g(this).removeClass(u.call(this,N,tr(this)))});if(!arguments.length)return this.attr("class","");if(c=Bs(u),c.length){for(;v=this[L++];)if(E=tr(v),_=v.nodeType===1&&" "+Qn(E)+" ",_){for(M=0;T=c[M++];)for(;_.indexOf(" "+T+" ")>-1;)_=_.replace(" "+T+" "," ");b=Qn(_),E!==b&&v.setAttribute("class",b)}}return this},toggleClass:function(u,c){var v=typeof u,_=v==="string"||Array.isArray(u);return typeof c=="boolean"&&_?c?this.addClass(u):this.removeClass(u):x(u)?this.each(function(E){g(this).toggleClass(u.call(this,E,tr(this),c),c)}):this.each(function(){var E,T,M,b;if(_)for(T=0,M=g(this),b=Bs(u);E=b[T++];)M.hasClass(E)?M.removeClass(E):M.addClass(E);else(u===void 0||v==="boolean")&&(E=tr(this),E&&st.set(this,"__className__",E),this.setAttribute&&this.setAttribute("class",E||u===!1?"":st.get(this,"__className__")||""))})},hasClass:function(u){var c,v,_=0;for(c=" "+u+" ";v=this[_++];)if(v.nodeType===1&&(" "+Qn(tr(v))+" ").indexOf(c)>-1)return!0;return!1}});var ep=/\r/g;g.fn.extend({val:function(u){var c,v,_,E=this[0];return arguments.length?(_=x(u),this.each(function(T){var M;this.nodeType===1&&(_?M=u.call(this,T,g(this).val()):M=u,M==null?M="":typeof M=="number"?M+="":Array.isArray(M)&&(M=g.map(M,function(b){return b==null?"":b+""})),c=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],(!c||!("set"in c)||c.set(this,M,"value")===void 0)&&(this.value=M))})):E?(c=g.valHooks[E.type]||g.valHooks[E.nodeName.toLowerCase()],c&&"get"in c&&(v=c.get(E,"value"))!==void 0?v:(v=E.value,typeof v=="string"?v.replace(ep,""):v==null?"":v)):void 0}}),g.extend({valHooks:{option:{get:function(u){var c=g.find.attr(u,"value");return c!=null?c:Qn(g.text(u))}},select:{get:function(u){var c,v,_,E=u.options,T=u.selectedIndex,M=u.type==="select-one",b=M?null:[],L=M?T+1:E.length;for(T<0?_=L:_=M?T:0;_<L;_++)if(v=E[_],(v.selected||_===T)&&!v.disabled&&(!v.parentNode.disabled||!K(v.parentNode,"optgroup"))){if(c=g(v).val(),M)return c;b.push(c)}return b},set:function(u,c){for(var v,_,E=u.options,T=g.makeArray(c),M=E.length;M--;)_=E[M],(_.selected=g.inArray(g.valHooks.option.get(_),T)>-1)&&(v=!0);return v||(u.selectedIndex=-1),T}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(u,c){if(Array.isArray(c))return u.checked=g.inArray(g(u).val(),c)>-1}},m.checkOn||(g.valHooks[this].get=function(u){return u.getAttribute("value")===null?"on":u.value})}),m.focusin="onfocusin"in e;var Zu=/^(?:focusinfocus|focusoutblur)$/,Ju=function(u){u.stopPropagation()};g.extend(g.event,{trigger:function(u,c,v,_){var E,T,M,b,L,N,j,W,k=[v||w],U=d.call(u,"type")?u.type:u,at=d.call(u,"namespace")?u.namespace.split("."):[];if(T=W=M=v=v||w,!(v.nodeType===3||v.nodeType===8)&&!Zu.test(U+g.event.triggered)&&(U.indexOf(".")>-1&&(at=U.split("."),U=at.shift(),at.sort()),L=U.indexOf(":")<0&&"on"+U,u=u[g.expando]?u:new g.Event(U,typeof u=="object"&&u),u.isTrigger=_?2:3,u.namespace=at.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+at.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=v),c=c==null?[u]:g.makeArray(c,[u]),j=g.event.special[U]||{},!(!_&&j.trigger&&j.trigger.apply(v,c)===!1))){if(!_&&!j.noBubble&&!C(v)){for(b=j.delegateType||U,Zu.test(b+U)||(T=T.parentNode);T;T=T.parentNode)k.push(T),M=T;M===(v.ownerDocument||w)&&k.push(M.defaultView||M.parentWindow||e)}for(E=0;(T=k[E++])&&!u.isPropagationStopped();)W=T,u.type=E>1?b:j.bindType||U,N=(st.get(T,"events")||Object.create(null))[u.type]&&st.get(T,"handle"),N&&N.apply(T,c),N=L&&T[L],N&&N.apply&&Fe(T)&&(u.result=N.apply(T,c),u.result===!1&&u.preventDefault());return u.type=U,!_&&!u.isDefaultPrevented()&&(!j._default||j._default.apply(k.pop(),c)===!1)&&Fe(v)&&L&&x(v[U])&&!C(v)&&(M=v[L],M&&(v[L]=null),g.event.triggered=U,u.isPropagationStopped()&&W.addEventListener(U,Ju),v[U](),u.isPropagationStopped()&&W.removeEventListener(U,Ju),g.event.triggered=void 0,M&&(v[L]=M)),u.result}},simulate:function(u,c,v){var _=g.extend(new g.Event,v,{type:u,isSimulated:!0});g.event.trigger(_,null,c)}}),g.fn.extend({trigger:function(u,c){return this.each(function(){g.event.trigger(u,c,this)})},triggerHandler:function(u,c){var v=this[0];if(v)return g.event.trigger(u,c,v,!0)}}),m.focusin||g.each({focus:"focusin",blur:"focusout"},function(u,c){var v=function(_){g.event.simulate(c,_.target,g.event.fix(_))};g.event.special[c]={setup:function(){var _=this.ownerDocument||this.document||this,E=st.access(_,c);E||_.addEventListener(u,v,!0),st.access(_,c,(E||0)+1)},teardown:function(){var _=this.ownerDocument||this.document||this,E=st.access(_,c)-1;E?st.access(_,c,E):(_.removeEventListener(u,v,!0),st.remove(_,c))}}});var _a=e.location,Qu={guid:Date.now()},Us=/\?/;g.parseXML=function(u){var c,v;if(!u||typeof u!="string")return null;try{c=new e.DOMParser().parseFromString(u,"text/xml")}catch{}return v=c&&c.getElementsByTagName("parsererror")[0],(!c||v)&&g.error("Invalid XML: "+(v?g.map(v.childNodes,function(_){return _.textContent}).join(`
`):u)),c};var ip=/\[\]$/,th=/\r?\n/g,np=/^(?:submit|button|image|reset|file)$/i,rp=/^(?:input|select|textarea|keygen)/i;function $s(u,c,v,_){var E;if(Array.isArray(c))g.each(c,function(T,M){v||ip.test(u)?_(u,M):$s(u+"["+(typeof M=="object"&&M!=null?T:"")+"]",M,v,_)});else if(!v&&I(c)==="object")for(E in c)$s(u+"["+E+"]",c[E],v,_);else _(u,c)}g.param=function(u,c){var v,_=[],E=function(T,M){var b=x(M)?M():M;_[_.length]=encodeURIComponent(T)+"="+encodeURIComponent(b==null?"":b)};if(u==null)return"";if(Array.isArray(u)||u.jquery&&!g.isPlainObject(u))g.each(u,function(){E(this.name,this.value)});else for(v in u)$s(v,u[v],c,E);return _.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=g.prop(this,"elements");return u?g.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!g(this).is(":disabled")&&rp.test(this.nodeName)&&!np.test(u)&&(this.checked||!ye.test(u))}).map(function(u,c){var v=g(this).val();return v==null?null:Array.isArray(v)?g.map(v,function(_){return{name:c.name,value:_.replace(th,`\r
`)}}):{name:c.name,value:v.replace(th,`\r
`)}}).get()}});var ap=/%20/g,op=/#.*$/,sp=/([?&])_=[^&]*/,lp=/^(.*?):[ \t]*([^\r\n]*)$/mg,up=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,hp=/^(?:GET|HEAD)$/,fp=/^\/\//,eh={},zs={},ih="*/".concat("*"),Vs=w.createElement("a");Vs.href=_a.href;function nh(u){return function(c,v){typeof c!="string"&&(v=c,c="*");var _,E=0,T=c.toLowerCase().match(St)||[];if(x(v))for(;_=T[E++];)_[0]==="+"?(_=_.slice(1)||"*",(u[_]=u[_]||[]).unshift(v)):(u[_]=u[_]||[]).push(v)}}function rh(u,c,v,_){var E={},T=u===zs;function M(b){var L;return E[b]=!0,g.each(u[b]||[],function(N,j){var W=j(c,v,_);if(typeof W=="string"&&!T&&!E[W])return c.dataTypes.unshift(W),M(W),!1;if(T)return!(L=W)}),L}return M(c.dataTypes[0])||!E["*"]&&M("*")}function Ws(u,c){var v,_,E=g.ajaxSettings.flatOptions||{};for(v in c)c[v]!==void 0&&((E[v]?u:_||(_={}))[v]=c[v]);return _&&g.extend(!0,u,_),u}function cp(u,c,v){for(var _,E,T,M,b=u.contents,L=u.dataTypes;L[0]==="*";)L.shift(),_===void 0&&(_=u.mimeType||c.getResponseHeader("Content-Type"));if(_){for(E in b)if(b[E]&&b[E].test(_)){L.unshift(E);break}}if(L[0]in v)T=L[0];else{for(E in v){if(!L[0]||u.converters[E+" "+L[0]]){T=E;break}M||(M=E)}T=T||M}if(T)return T!==L[0]&&L.unshift(T),v[T]}function dp(u,c,v,_){var E,T,M,b,L,N={},j=u.dataTypes.slice();if(j[1])for(M in u.converters)N[M.toLowerCase()]=u.converters[M];for(T=j.shift();T;)if(u.responseFields[T]&&(v[u.responseFields[T]]=c),!L&&_&&u.dataFilter&&(c=u.dataFilter(c,u.dataType)),L=T,T=j.shift(),T){if(T==="*")T=L;else if(L!=="*"&&L!==T){if(M=N[L+" "+T]||N["* "+T],!M){for(E in N)if(b=E.split(" "),b[1]===T&&(M=N[L+" "+b[0]]||N["* "+b[0]],M)){M===!0?M=N[E]:N[E]!==!0&&(T=b[0],j.unshift(b[1]));break}}if(M!==!0)if(M&&u.throws)c=M(c);else try{c=M(c)}catch(W){return{state:"parsererror",error:M?W:"No conversion from "+L+" to "+T}}}}return{state:"success",data:c}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_a.href,type:"GET",isLocal:up.test(_a.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ih,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,c){return c?Ws(Ws(u,g.ajaxSettings),c):Ws(g.ajaxSettings,u)},ajaxPrefilter:nh(eh),ajaxTransport:nh(zs),ajax:function(u,c){typeof u=="object"&&(c=u,u=void 0),c=c||{};var v,_,E,T,M,b,L,N,j,W,k=g.ajaxSetup({},c),U=k.context||k,at=k.context&&(U.nodeType||U.jquery)?g(U):g.event,Tt=g.Deferred(),ot=g.Callbacks("once memory"),he=k.statusCode||{},se={},qe={},Bt="canceled",xt={readyState:0,getResponseHeader:function(At){var Jt;if(L){if(!T)for(T={};Jt=lp.exec(E);)T[Jt[1].toLowerCase()+" "]=(T[Jt[1].toLowerCase()+" "]||[]).concat(Jt[2]);Jt=T[At.toLowerCase()+" "]}return Jt==null?null:Jt.join(", ")},getAllResponseHeaders:function(){return L?E:null},setRequestHeader:function(At,Jt){return L==null&&(At=qe[At.toLowerCase()]=qe[At.toLowerCase()]||At,se[At]=Jt),this},overrideMimeType:function(At){return L==null&&(k.mimeType=At),this},statusCode:function(At){var Jt;if(At)if(L)xt.always(At[xt.status]);else for(Jt in At)he[Jt]=[he[Jt],At[Jt]];return this},abort:function(At){var Jt=At||Bt;return v&&v.abort(Jt),je(0,Jt),this}};if(Tt.promise(xt),k.url=((u||k.url||_a.href)+"").replace(fp,_a.protocol+"//"),k.type=c.method||c.type||k.method||k.type,k.dataTypes=(k.dataType||"*").toLowerCase().match(St)||[""],k.crossDomain==null){b=w.createElement("a");try{b.href=k.url,b.href=b.href,k.crossDomain=Vs.protocol+"//"+Vs.host!=b.protocol+"//"+b.host}catch{k.crossDomain=!0}}if(k.data&&k.processData&&typeof k.data!="string"&&(k.data=g.param(k.data,k.traditional)),rh(eh,k,c,xt),L)return xt;N=g.event&&k.global,N&&g.active++==0&&g.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!hp.test(k.type),_=k.url.replace(op,""),k.hasContent?k.data&&k.processData&&(k.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(k.data=k.data.replace(ap,"+")):(W=k.url.slice(_.length),k.data&&(k.processData||typeof k.data=="string")&&(_+=(Us.test(_)?"&":"?")+k.data,delete k.data),k.cache===!1&&(_=_.replace(sp,"$1"),W=(Us.test(_)?"&":"?")+"_="+Qu.guid+++W),k.url=_+W),k.ifModified&&(g.lastModified[_]&&xt.setRequestHeader("If-Modified-Since",g.lastModified[_]),g.etag[_]&&xt.setRequestHeader("If-None-Match",g.etag[_])),(k.data&&k.hasContent&&k.contentType!==!1||c.contentType)&&xt.setRequestHeader("Content-Type",k.contentType),xt.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+(k.dataTypes[0]!=="*"?", "+ih+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)xt.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(U,xt,k)===!1||L))return xt.abort();if(Bt="abort",ot.add(k.complete),xt.done(k.success),xt.fail(k.error),v=rh(zs,k,c,xt),!v)je(-1,"No Transport");else{if(xt.readyState=1,N&&at.trigger("ajaxSend",[xt,k]),L)return xt;k.async&&k.timeout>0&&(M=e.setTimeout(function(){xt.abort("timeout")},k.timeout));try{L=!1,v.send(se,je)}catch(At){if(L)throw At;je(-1,At)}}function je(At,Jt,xa,_o){var Ke,er,ir,Be,xn,li=Jt;L||(L=!0,M&&e.clearTimeout(M),v=void 0,E=_o||"",xt.readyState=At>0?4:0,Ke=At>=200&&At<300||At===304,xa&&(Be=cp(k,xt,xa)),!Ke&&g.inArray("script",k.dataTypes)>-1&&g.inArray("json",k.dataTypes)<0&&(k.converters["text script"]=function(){}),Be=dp(k,Be,xt,Ke),Ke?(k.ifModified&&(xn=xt.getResponseHeader("Last-Modified"),xn&&(g.lastModified[_]=xn),xn=xt.getResponseHeader("etag"),xn&&(g.etag[_]=xn)),At===204||k.type==="HEAD"?li="nocontent":At===304?li="notmodified":(li=Be.state,er=Be.data,ir=Be.error,Ke=!ir)):(ir=li,(At||!li)&&(li="error",At<0&&(At=0))),xt.status=At,xt.statusText=(Jt||li)+"",Ke?Tt.resolveWith(U,[er,li,xt]):Tt.rejectWith(U,[xt,li,ir]),xt.statusCode(he),he=void 0,N&&at.trigger(Ke?"ajaxSuccess":"ajaxError",[xt,k,Ke?er:ir]),ot.fireWith(U,[xt,li]),N&&(at.trigger("ajaxComplete",[xt,k]),--g.active||g.event.trigger("ajaxStop")))}return xt},getJSON:function(u,c,v){return g.get(u,c,v,"json")},getScript:function(u,c){return g.get(u,void 0,c,"script")}}),g.each(["get","post"],function(u,c){g[c]=function(v,_,E,T){return x(_)&&(T=T||E,E=_,_=void 0),g.ajax(g.extend({url:v,type:c,dataType:T,data:_,success:E},g.isPlainObject(v)&&v))}}),g.ajaxPrefilter(function(u){var c;for(c in u.headers)c.toLowerCase()==="content-type"&&(u.contentType=u.headers[c]||"")}),g._evalUrl=function(u,c,v){return g.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(_){g.globalEval(_,c,v)}})},g.fn.extend({wrapAll:function(u){var c;return this[0]&&(x(u)&&(u=u.call(this[0])),c=g(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var v=this;v.firstElementChild;)v=v.firstElementChild;return v}).append(this)),this},wrapInner:function(u){return x(u)?this.each(function(c){g(this).wrapInner(u.call(this,c))}):this.each(function(){var c=g(this),v=c.contents();v.length?v.wrapAll(u):c.append(u)})},wrap:function(u){var c=x(u);return this.each(function(v){g(this).wrapAll(c?u.call(this,v):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(u){return!g.expr.pseudos.visible(u)},g.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var pp={0:200,1223:204},ma=g.ajaxSettings.xhr();m.cors=!!ma&&"withCredentials"in ma,m.ajax=ma=!!ma,g.ajaxTransport(function(u){var c,v;if(m.cors||ma&&!u.crossDomain)return{send:function(_,E){var T,M=u.xhr();if(M.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(T in u.xhrFields)M[T]=u.xhrFields[T];u.mimeType&&M.overrideMimeType&&M.overrideMimeType(u.mimeType),!u.crossDomain&&!_["X-Requested-With"]&&(_["X-Requested-With"]="XMLHttpRequest");for(T in _)M.setRequestHeader(T,_[T]);c=function(b){return function(){c&&(c=v=M.onload=M.onerror=M.onabort=M.ontimeout=M.onreadystatechange=null,b==="abort"?M.abort():b==="error"?typeof M.status!="number"?E(0,"error"):E(M.status,M.statusText):E(pp[M.status]||M.status,M.statusText,(M.responseType||"text")!=="text"||typeof M.responseText!="string"?{binary:M.response}:{text:M.responseText},M.getAllResponseHeaders()))}},M.onload=c(),v=M.onerror=M.ontimeout=c("error"),M.onabort!==void 0?M.onabort=v:M.onreadystatechange=function(){M.readyState===4&&e.setTimeout(function(){c&&v()})},c=c("abort");try{M.send(u.hasContent&&u.data||null)}catch(b){if(c)throw b}},abort:function(){c&&c()}}}),g.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return g.globalEval(u),u}}}),g.ajaxPrefilter("script",function(u){u.cache===void 0&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),g.ajaxTransport("script",function(u){if(u.crossDomain||u.scriptAttrs){var c,v;return{send:function(_,E){c=g("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",v=function(T){c.remove(),v=null,T&&E(T.type==="error"?404:200,T.type)}),w.head.appendChild(c[0])},abort:function(){v&&v()}}}});var ah=[],Ys=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=ah.pop()||g.expando+"_"+Qu.guid++;return this[u]=!0,u}}),g.ajaxPrefilter("json jsonp",function(u,c,v){var _,E,T,M=u.jsonp!==!1&&(Ys.test(u.url)?"url":typeof u.data=="string"&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ys.test(u.data)&&"data");if(M||u.dataTypes[0]==="jsonp")return _=u.jsonpCallback=x(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,M?u[M]=u[M].replace(Ys,"$1"+_):u.jsonp!==!1&&(u.url+=(Us.test(u.url)?"&":"?")+u.jsonp+"="+_),u.converters["script json"]=function(){return T||g.error(_+" was not called"),T[0]},u.dataTypes[0]="json",E=e[_],e[_]=function(){T=arguments},v.always(function(){E===void 0?g(e).removeProp(_):e[_]=E,u[_]&&(u.jsonpCallback=c.jsonpCallback,ah.push(_)),T&&x(E)&&E(T[0]),T=E=void 0}),"script"}),m.createHTMLDocument=function(){var u=w.implementation.createHTMLDocument("").body;return u.innerHTML="<form></form><form></form>",u.childNodes.length===2}(),g.parseHTML=function(u,c,v){if(typeof u!="string")return[];typeof c=="boolean"&&(v=c,c=!1);var _,E,T;return c||(m.createHTMLDocument?(c=w.implementation.createHTMLDocument(""),_=c.createElement("base"),_.href=w.location.href,c.head.appendChild(_)):c=w),E=lt.exec(u),T=!v&&[],E?[c.createElement(E[1])]:(E=fo([u],c,T),T&&T.length&&g(T).remove(),g.merge([],E.childNodes))},g.fn.load=function(u,c,v){var _,E,T,M=this,b=u.indexOf(" ");return b>-1&&(_=Qn(u.slice(b)),u=u.slice(0,b)),x(c)?(v=c,c=void 0):c&&typeof c=="object"&&(E="POST"),M.length>0&&g.ajax({url:u,type:E||"GET",dataType:"html",data:c}).done(function(L){T=arguments,M.html(_?g("<div>").append(g.parseHTML(L)).find(_):L)}).always(v&&function(L,N){M.each(function(){v.apply(this,T||[L.responseText,N,L])})}),this},g.expr.pseudos.animated=function(u){return g.grep(g.timers,function(c){return u===c.elem}).length},g.offset={setOffset:function(u,c,v){var _,E,T,M,b,L,N,j=g.css(u,"position"),W=g(u),k={};j==="static"&&(u.style.position="relative"),b=W.offset(),T=g.css(u,"top"),L=g.css(u,"left"),N=(j==="absolute"||j==="fixed")&&(T+L).indexOf("auto")>-1,N?(_=W.position(),M=_.top,E=_.left):(M=parseFloat(T)||0,E=parseFloat(L)||0),x(c)&&(c=c.call(u,v,g.extend({},b))),c.top!=null&&(k.top=c.top-b.top+M),c.left!=null&&(k.left=c.left-b.left+E),"using"in c?c.using.call(u,k):W.css(k)}},g.fn.extend({offset:function(u){if(arguments.length)return u===void 0?this:this.each(function(E){g.offset.setOffset(this,u,E)});var c,v,_=this[0];if(!!_)return _.getClientRects().length?(c=_.getBoundingClientRect(),v=_.ownerDocument.defaultView,{top:c.top+v.pageYOffset,left:c.left+v.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var u,c,v,_=this[0],E={top:0,left:0};if(g.css(_,"position")==="fixed")c=_.getBoundingClientRect();else{for(c=this.offset(),v=_.ownerDocument,u=_.offsetParent||v.documentElement;u&&(u===v.body||u===v.documentElement)&&g.css(u,"position")==="static";)u=u.parentNode;u&&u!==_&&u.nodeType===1&&(E=g(u).offset(),E.top+=g.css(u,"borderTopWidth",!0),E.left+=g.css(u,"borderLeftWidth",!0))}return{top:c.top-E.top-g.css(_,"marginTop",!0),left:c.left-E.left-g.css(_,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&g.css(u,"position")==="static";)u=u.offsetParent;return u||gi})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,c){var v=c==="pageYOffset";g.fn[u]=function(_){return Dt(this,function(E,T,M){var b;if(C(E)?b=E:E.nodeType===9&&(b=E.defaultView),M===void 0)return b?b[c]:E[T];b?b.scrollTo(v?b.pageXOffset:M,v?M:b.pageYOffset):E[T]=M},u,_,arguments.length)}}),g.each(["top","left"],function(u,c){g.cssHooks[c]=ga(m.pixelPosition,function(v,_){if(_)return _=Jn(v,c),mn.test(_)?g(v).position()[c]+"px":_})}),g.each({Height:"height",Width:"width"},function(u,c){g.each({padding:"inner"+u,content:c,"":"outer"+u},function(v,_){g.fn[_]=function(E,T){var M=arguments.length&&(v||typeof E!="boolean"),b=v||(E===!0||T===!0?"margin":"border");return Dt(this,function(L,N,j){var W;return C(L)?_.indexOf("outer")===0?L["inner"+u]:L.document.documentElement["client"+u]:L.nodeType===9?(W=L.documentElement,Math.max(L.body["scroll"+u],W["scroll"+u],L.body["offset"+u],W["offset"+u],W["client"+u])):j===void 0?g.css(L,N,b):g.style(L,N,j,b)},c,M?E:void 0,M)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,c){g.fn[c]=function(v){return this.on(c,v)}}),g.fn.extend({bind:function(u,c,v){return this.on(u,null,c,v)},unbind:function(u,c){return this.off(u,null,c)},delegate:function(u,c,v,_){return this.on(c,u,v,_)},undelegate:function(u,c,v){return arguments.length===1?this.off(u,"**"):this.off(c,u||"**",v)},hover:function(u,c){return this.mouseenter(u).mouseleave(c||u)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,c){g.fn[c]=function(v,_){return arguments.length>0?this.on(c,null,v,_):this.trigger(c)}});var vp=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;g.proxy=function(u,c){var v,_,E;if(typeof c=="string"&&(v=u[c],c=u,u=v),!!x(u))return _=a.call(arguments,2),E=function(){return u.apply(c||this,_.concat(a.call(arguments)))},E.guid=u.guid=u.guid||g.guid++,E},g.holdReady=function(u){u?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=K,g.isFunction=x,g.isWindow=C,g.camelCase=Re,g.type=I,g.now=Date.now,g.isNumeric=function(u){var c=g.type(u);return(c==="number"||c==="string")&&!isNaN(u-parseFloat(u))},g.trim=function(u){return u==null?"":(u+"").replace(vp,"")};var gp=e.jQuery,yp=e.$;return g.noConflict=function(u){return e.$===g&&(e.$=yp),u&&e.jQuery===g&&(e.jQuery=gp),g},typeof t=="undefined"&&(e.jQuery=e.$=g),g})})(wd);var jM=wd.exports;/*! js-cookie v3.0.1 | MIT */function Rs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)n[i]=t[i]}return n}var Vw={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ku(n,e){function t(r,a,o){if(typeof document!="undefined"){o=Rs({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var l in o)!o[l]||(s+="; "+l,o[l]!==!0&&(s+="="+o[l].split(";")[0]));return document.cookie=r+"="+n.write(a,r)+s}}function i(r){if(!(typeof document=="undefined"||arguments.length&&!r)){for(var a=document.cookie?document.cookie.split("; "):[],o={},s=0;s<a.length;s++){var l=a[s].split("="),h=l.slice(1).join("=");try{var f=decodeURIComponent(l[0]);if(o[f]=n.read(h,f),r===f)break}catch{}}return r?o[r]:o}}return Object.create({set:t,get:i,remove:function(r,a){t(r,"",Rs({},a,{expires:-1}))},withAttributes:function(r){return ku(this.converter,Rs({},this.attributes,r))},withConverter:function(r){return ku(Rs({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var BM=ku(Vw,{path:"/"});function jn(n){return jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jn(n)}function Ui(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Md(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function $i(n,e,t){return e&&Md(n.prototype,e),t&&Md(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Bn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Gu(n,e){return Gu=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},Gu(n,e)}function Is(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Gu(n,e)}function uo(n,e){if(e&&(jn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bn(n)}function zi(n){return zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},zi(n)}function Un(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ww(n){if(Array.isArray(n))return n}function Yw(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Od(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Hw(n,e){if(!!n){if(typeof n=="string")return Od(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Od(n,e)}}function Xw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qw(n){return Ww(n)||Yw(n)||Hw(n)||Xw()}function Sd(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Rd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sd(Object(t),!0).forEach(function(i){Un(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Sd(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}var Kw={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Zw=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ui(this,n),this.init(e,t)}return $i(n,[{key:"init",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=i.prefix||"i18next:",this.logger=t||Kw,this.options=i,this.debug=i.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return this.forward(i,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return this.forward(i,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return this.forward(i,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return this.forward(i,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,i,r,a){return a&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(r).concat(this.prefix," ").concat(t[0])),this.logger[i](t))}},{key:"create",value:function(t){return new n(this.logger,Rd(Rd({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}}]),n}(),Vi=new Zw,$n=function(){function n(){Ui(this,n),this.observers={}}return $i(n,[{key:"on",value:function(t,i){var r=this;return t.split(" ").forEach(function(a){r.observers[a]=r.observers[a]||[],r.observers[a].push(i)}),this}},{key:"off",value:function(t,i){if(!!this.observers[t]){if(!i){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(r){return r!==i})}}},{key:"emit",value:function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];if(this.observers[t]){var o=[].concat(this.observers[t]);o.forEach(function(l){l.apply(void 0,r)})}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach(function(l){l.apply(l,[t].concat(r))})}}}]),n}();function ho(){var n,e,t=new Promise(function(i,r){n=i,e=r});return t.resolve=n,t.reject=e,t}function Id(n){return n==null?"":""+n}function Jw(n,e,t){n.forEach(function(i){e[i]&&(t[i]=e[i])})}function ju(n,e,t){function i(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function r(){return!n||typeof n=="string"}for(var a=typeof e!="string"?[].concat(e):e.split(".");a.length>1;){if(r())return{};var o=i(a.shift());!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={}}return r()?{}:{obj:n,k:i(a.shift())}}function Pd(n,e,t){var i=ju(n,e,Object),r=i.obj,a=i.k;r[a]=t}function Qw(n,e,t,i){var r=ju(n,e,Object),a=r.obj,o=r.k;a[o]=a[o]||[],i&&(a[o]=a[o].concat(t)),i||a[o].push(t)}function Ps(n,e){var t=ju(n,e),i=t.obj,r=t.k;if(!!i)return i[r]}function bd(n,e,t){var i=Ps(n,t);return i!==void 0?i:Ps(e,t)}function Ld(n,e,t){for(var i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?typeof n[i]=="string"||n[i]instanceof String||typeof e[i]=="string"||e[i]instanceof String?t&&(n[i]=e[i]):Ld(n[i],e[i],t):n[i]=e[i]);return n}function fa(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var tM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function eM(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,function(e){return tM[e]}):n}var bs=typeof window!="undefined"&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,iM=[" ",",","?","!",";"];function nM(n,e,t){e=e||"",t=t||"";var i=iM.filter(function(s){return e.indexOf(s)<0&&t.indexOf(s)<0});if(i.length===0)return!0;var r=new RegExp("(".concat(i.map(function(s){return s==="?"?"\\?":s}).join("|"),")")),a=!r.test(n);if(!a){var o=n.indexOf(t);o>0&&!r.test(n.substring(0,o))&&(a=!0)}return a}function Ad(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ls(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ad(Object(t),!0).forEach(function(i){Un(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ad(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function rM(n){var e=aM();return function(){var i=zi(n),r;if(e){var a=zi(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return uo(this,r)}}function aM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nd(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!!n){if(n[e])return n[e];for(var i=e.split(t),r=n,a=0;a<i.length;++a){if(!r||typeof r[i[a]]=="string"&&a+1<i.length)return;if(r[i[a]]===void 0){for(var o=2,s=i.slice(a,a+o).join(t),l=r[s];l===void 0&&i.length>a+o;)o++,s=i.slice(a,a+o).join(t),l=r[s];if(l===void 0)return;if(e.endsWith(s)){if(typeof l=="string")return l;if(s&&typeof l[s]=="string")return l[s]}var h=i.slice(a+o).join(t);return h?Nd(l,h,t):void 0}r=r[i[a]]}return r}}var oM=function(n){Is(t,n);var e=rM(t);function t(i){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Ui(this,t),r=e.call(this),bs&&$n.call(Bn(r)),r.data=i||{},r.options=a,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.options.ignoreJSONStructure===void 0&&(r.options.ignoreJSONStructure=!0),r}return $i(t,[{key:"addNamespaces",value:function(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}},{key:"removeNamespaces",value:function(r){var a=this.options.ns.indexOf(r);a>-1&&this.options.ns.splice(a,1)}},{key:"getResource",value:function(r,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,h=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure,f=[r,a];o&&typeof o!="string"&&(f=f.concat(o)),o&&typeof o=="string"&&(f=f.concat(l?o.split(l):o)),r.indexOf(".")>-1&&(f=r.split("."));var d=Ps(this.data,f);return d||!h||typeof o!="string"?d:Nd(this.data&&this.data[r]&&this.data[r][a],o,l)}},{key:"addResource",value:function(r,a,o,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},h=this.options.keySeparator;h===void 0&&(h=".");var f=[r,a];o&&(f=f.concat(h?o.split(h):o)),r.indexOf(".")>-1&&(f=r.split("."),s=a,a=f[1]),this.addNamespaces(a),Pd(this.data,f,s),l.silent||this.emit("added",r,a,o,s)}},{key:"addResources",value:function(r,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var l in o)(typeof o[l]=="string"||Object.prototype.toString.apply(o[l])==="[object Array]")&&this.addResource(r,a,l,o[l],{silent:!0});s.silent||this.emit("added",r,a,o)}},{key:"addResourceBundle",value:function(r,a,o,s,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},f=[r,a];r.indexOf(".")>-1&&(f=r.split("."),s=o,o=a,a=f[1]),this.addNamespaces(a);var d=Ps(this.data,f)||{};s?Ld(d,o,l):d=Ls(Ls({},d),o),Pd(this.data,f,d),h.silent||this.emit("added",r,a,o)}},{key:"removeResourceBundle",value:function(r,a){this.hasResourceBundle(r,a)&&delete this.data[r][a],this.removeNamespaces(a),this.emit("removed",r,a)}},{key:"hasResourceBundle",value:function(r,a){return this.getResource(r,a)!==void 0}},{key:"getResourceBundle",value:function(r,a){return a||(a=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Ls(Ls({},{}),this.getResource(r,a)):this.getResource(r,a)}},{key:"getDataByLanguage",value:function(r){return this.data[r]}},{key:"hasLanguageSomeTranslations",value:function(r){var a=this.getDataByLanguage(r),o=a&&Object.keys(a)||[];return!!o.find(function(s){return a[s]&&Object.keys(a[s]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}($n),Dd={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,i,r,a){var o=this;return e.forEach(function(s){o.processors[s]&&(t=o.processors[s].process(t,i,r,a))}),t}};function Fd(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ri(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fd(Object(t),!0).forEach(function(i){Un(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Fd(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function sM(n){var e=lM();return function(){var i=zi(n),r;if(e){var a=zi(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return uo(this,r)}}function lM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var kd={},Gd=function(n){Is(t,n);var e=sM(t);function t(i){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ui(this,t),r=e.call(this),bs&&$n.call(Bn(r)),Jw(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i,Bn(r)),r.options=a,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.logger=Vi.create("translator"),r}return $i(t,[{key:"changeLanguage",value:function(r){r&&(this.language=r)}},{key:"exists",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(r==null)return!1;var o=this.resolve(r,a);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(r,a){var o=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ns||this.options.defaultNS||[],h=o&&r.indexOf(o)>-1,f=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!nM(r,o,s);if(h&&!f){var d=r.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:r,namespaces:l};var p=r.split(o);(o!==s||o===s&&this.options.ns.indexOf(p[0])>-1)&&(l=p.shift()),r=p.join(s)}return typeof l=="string"&&(l=[l]),{key:r,namespaces:l}}},{key:"translate",value:function(r,a,o){var s=this;if(jn(a)!=="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),a||(a={}),r==null)return"";Array.isArray(r)||(r=[String(r)]);var l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,h=this.extractFromKey(r[r.length-1],a),f=h.key,d=h.namespaces,p=d[d.length-1],y=a.lng||this.language,m=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y&&y.toLowerCase()==="cimode"){if(m){var x=a.nsSeparator||this.options.nsSeparator;return p+x+f}return f}var C=this.resolve(r,a),w=C&&C.res,S=C&&C.usedKey||f,R=C&&C.exactUsedKey||f,I=Object.prototype.toString.apply(w),F=["[object Number]","[object Function]","[object RegExp]"],g=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,G=!this.i18nFormat||this.i18nFormat.handleAsObject,B=typeof w!="string"&&typeof w!="boolean"&&typeof w!="number";if(G&&w&&B&&F.indexOf(I)<0&&!(typeof g=="string"&&I==="[object Array]")){if(!a.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(S,w,ri(ri({},a),{},{ns:d})):"key '".concat(f," (").concat(this.language,")' returned an object instead of string.");if(l){var X=I==="[object Array]",Z=X?[]:{},et=X?R:S;for(var K in w)if(Object.prototype.hasOwnProperty.call(w,K)){var lt="".concat(et).concat(l).concat(K);Z[K]=this.translate(lt,ri(ri({},a),{joinArrays:!1,ns:d})),Z[K]===lt&&(Z[K]=w[K])}w=Z}}else if(G&&typeof g=="string"&&I==="[object Array]")w=w.join(g),w&&(w=this.extendTranslation(w,r,a,o));else{var vt=!1,nt=!1,yt=a.count!==void 0&&typeof a.count!="string",rt=t.hasDefaultValue(a),Rt=yt?this.pluralResolver.getSuffix(y,a.count,a):"",wt=a["defaultValue".concat(Rt)]||a.defaultValue;!this.isValidLookup(w)&&rt&&(vt=!0,w=wt),this.isValidLookup(w)||(nt=!0,w=f);var Lt=a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,St=Lt&&nt?void 0:w,H=rt&&wt!==w&&this.options.updateMissing;if(nt||vt||H){if(this.logger.log(H?"updateKey":"missingKey",y,p,f,H?wt:w),l){var Xt=this.resolve(f,ri(ri({},a),{},{keySeparator:!1}));Xt&&Xt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var _t=[],Ut=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ut&&Ut[0])for(var le=0;le<Ut.length;le++)_t.push(Ut[le]);else this.options.saveMissingTo==="all"?_t=this.languageUtils.toResolveHierarchy(a.lng||this.language):_t.push(a.lng||this.language);var ae=function(Dt,ai,Se){var Yi=rt&&Se!==w?Se:St;s.options.missingKeyHandler?s.options.missingKeyHandler(Dt,p,ai,Yi,H,a):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(Dt,p,ai,Yi,H,a),s.emit("missingKey",Dt,p,ai,w)};this.options.saveMissing&&(this.options.saveMissingPlurals&&yt?_t.forEach(function(Zt){s.pluralResolver.getSuffixes(Zt).forEach(function(Dt){ae([Zt],f+Dt,a["defaultValue".concat(Dt)]||wt)})}):ae(_t,f,wt))}w=this.extendTranslation(w,r,a,C,o),nt&&w===f&&this.options.appendNamespaceToMissingKey&&(w="".concat(p,":").concat(f)),(nt||vt)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?w=this.options.parseMissingKeyHandler(f,vt?w:void 0):w=this.options.parseMissingKeyHandler(w))}return w}},{key:"extendTranslation",value:function(r,a,o,s,l){var h=this;if(this.i18nFormat&&this.i18nFormat.parse)r=this.i18nFormat.parse(r,o,s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(ri(ri({},o),{interpolation:ri(ri({},this.options.interpolation),o.interpolation)}));var f=typeof r=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),d;if(f){var p=r.match(this.interpolator.nestingRegexp);d=p&&p.length}var y=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(y=ri(ri({},this.options.interpolation.defaultVariables),y)),r=this.interpolator.interpolate(r,y,o.lng||this.language,o),f){var m=r.match(this.interpolator.nestingRegexp),x=m&&m.length;d<x&&(o.nest=!1)}o.nest!==!1&&(r=this.interpolator.nest(r,function(){for(var S=arguments.length,R=new Array(S),I=0;I<S;I++)R[I]=arguments[I];return l&&l[0]===R[0]&&!o.context?(h.logger.warn("It seems you are nesting recursively key: ".concat(R[0]," in key: ").concat(a[0])),null):h.translate.apply(h,R.concat([a]))},o)),o.interpolation&&this.interpolator.reset()}var C=o.postProcess||this.options.postProcess,w=typeof C=="string"?[C]:C;return r!=null&&w&&w.length&&o.applyPostProcessor!==!1&&(r=Dd.handle(w,r,a,this.options&&this.options.postProcessPassResolved?ri({i18nResolved:s},o):o,this)),r}},{key:"resolve",value:function(r){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,l,h,f,d;return typeof r=="string"&&(r=[r]),r.forEach(function(p){if(!a.isValidLookup(s)){var y=a.extractFromKey(p,o),m=y.key;l=m;var x=y.namespaces;a.options.fallbackNS&&(x=x.concat(a.options.fallbackNS));var C=o.count!==void 0&&typeof o.count!="string",w=C&&!o.ordinal&&o.count===0&&a.pluralResolver.shouldUseIntlApi(),S=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",R=o.lngs?o.lngs:a.languageUtils.toResolveHierarchy(o.lng||a.language,o.fallbackLng);x.forEach(function(I){a.isValidLookup(s)||(d=I,!kd["".concat(R[0],"-").concat(I)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(d)&&(kd["".concat(R[0],"-").concat(I)]=!0,a.logger.warn('key "'.concat(l,'" for languages "').concat(R.join(", "),`" won't get resolved as namespace "`).concat(d,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),R.forEach(function(F){if(!a.isValidLookup(s)){f=F;var g=[m];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(g,m,F,I,o);else{var G;C&&(G=a.pluralResolver.getSuffix(F,o.count,o));var B="_zero";if(C&&(g.push(m+G),w&&g.push(m+B)),S){var X="".concat(m).concat(a.options.contextSeparator).concat(o.context);g.push(X),C&&(g.push(X+G),w&&g.push(X+B))}}for(var Z;Z=g.pop();)a.isValidLookup(s)||(h=Z,s=a.getResource(F,I,Z,o))}}))})}}),{res:s,usedKey:l,exactUsedKey:h,usedLng:f,usedNS:d}}},{key:"isValidLookup",value:function(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}},{key:"getResource",value:function(r,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(r,a,o,s):this.resourceStore.getResource(r,a,o,s)}}],[{key:"hasDefaultValue",value:function(r){var a="defaultValue";for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)&&a===o.substring(0,a.length)&&r[o]!==void 0)return!0;return!1}}]),t}($n);function Bu(n){return n.charAt(0).toUpperCase()+n.slice(1)}var uM=function(){function n(e){Ui(this,n),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Vi.create("languageUtils")}return $i(n,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var i=t.split("-");return i.length===2||(i.pop(),i[i.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(i.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var i=t.split("-");return this.formatLanguageCode(i[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var i=["hans","hant","latn","cyrl","cans","mong","arab"],r=t.split("-");return this.options.lowerCaseLng?r=r.map(function(a){return a.toLowerCase()}):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),i.indexOf(r[1].toLowerCase())>-1&&(r[1]=Bu(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),i.indexOf(r[1].toLowerCase())>-1&&(r[1]=Bu(r[1].toLowerCase())),i.indexOf(r[2].toLowerCase())>-1&&(r[2]=Bu(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var i=this;if(!t)return null;var r;return t.forEach(function(a){if(!r){var o=i.formatLanguageCode(a);(!i.options.supportedLngs||i.isSupportedCode(o))&&(r=o)}}),!r&&this.options.supportedLngs&&t.forEach(function(a){if(!r){var o=i.getLanguagePartFromCode(a);if(i.isSupportedCode(o))return r=o;r=i.options.supportedLngs.find(function(s){if(s.indexOf(o)===0)return s})}}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}},{key:"getFallbackCodes",value:function(t,i){if(!t)return[];if(typeof t=="function"&&(t=t(i)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!i)return t.default||[];var r=t[i];return r||(r=t[this.getScriptPartFromCode(i)]),r||(r=t[this.formatLanguageCode(i)]),r||(r=t[this.getLanguagePartFromCode(i)]),r||(r=t.default),r||[]}},{key:"toResolveHierarchy",value:function(t,i){var r=this,a=this.getFallbackCodes(i||this.options.fallbackLng||[],t),o=[],s=function(h){!h||(r.isSupportedCode(h)?o.push(h):r.logger.warn("rejecting language code not found in supportedLngs: ".concat(h)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):typeof t=="string"&&s(this.formatLanguageCode(t)),a.forEach(function(l){o.indexOf(l)<0&&s(r.formatLanguageCode(l))}),o}}]),n}(),hM=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],fM={1:function(e){return Number(e>1)},2:function(e){return Number(e!=1)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)},7:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(e==1?0:e==2?1:e!=8&&e!=11?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(e==1?0:e==2?1:e<7?2:e<11?3:4)},11:function(e){return Number(e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(e!==0)},14:function(e){return Number(e==1?0:e==2?1:e==3?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:e!==0?1:2)},17:function(e){return Number(e==1||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(e==0?0:e==1?1:2)},19:function(e){return Number(e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(e==1?0:e==0||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3)}},cM=["v1","v2","v3"],jd={zero:0,one:1,two:2,few:3,many:4,other:5};function dM(){var n={};return hM.forEach(function(e){e.lngs.forEach(function(t){n[t]={numbers:e.nr,plurals:fM[e.fc]}})}),n}var pM=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ui(this,n),this.languageUtils=e,this.options=t,this.logger=Vi.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl=="undefined"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=dM()}return $i(n,[{key:"addRule",value:function(t,i){this.rules[t]=i}},{key:"getRule",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:i.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,i);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(function(a){return"".concat(i).concat(a)})}},{key:"getSuffixes",value:function(t){var i=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getRule(t,r);return a?this.shouldUseIntlApi()?a.resolvedOptions().pluralCategories.sort(function(o,s){return jd[o]-jd[s]}).map(function(o){return"".concat(i.options.prepend).concat(o)}):a.numbers.map(function(o){return i.getSuffix(t,o,r)}):[]}},{key:"getSuffix",value:function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this.getRule(t,r);return a?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(a.select(i)):this.getSuffixRetroCompatible(a,i):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,i){var r=this,a=t.noAbs?t.plurals(i):t.plurals(Math.abs(i)),o=t.numbers[a];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var s=function(){return r.options.prepend&&o.toString()?r.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?s():this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}},{key:"shouldUseIntlApi",value:function(){return!cM.includes(this.options.compatibilityJSON)}}]),n}();function Bd(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ri(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bd(Object(t),!0).forEach(function(i){Un(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Bd(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}var vM=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ui(this,n),this.logger=Vi.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return $i(n,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var i=t.interpolation;this.escape=i.escape!==void 0?i.escape:eM,this.escapeValue=i.escapeValue!==void 0?i.escapeValue:!0,this.useRawValueToEscape=i.useRawValueToEscape!==void 0?i.useRawValueToEscape:!1,this.prefix=i.prefix?fa(i.prefix):i.prefixEscaped||"{{",this.suffix=i.suffix?fa(i.suffix):i.suffixEscaped||"}}",this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||",",this.unescapePrefix=i.unescapeSuffix?"":i.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":i.unescapeSuffix||"",this.nestingPrefix=i.nestingPrefix?fa(i.nestingPrefix):i.nestingPrefixEscaped||fa("$t("),this.nestingSuffix=i.nestingSuffix?fa(i.nestingSuffix):i.nestingSuffixEscaped||fa(")"),this.nestingOptionsSeparator=i.nestingOptionsSeparator?i.nestingOptionsSeparator:i.nestingOptionsSeparator||",",this.maxReplaces=i.maxReplaces?i.maxReplaces:1e3,this.alwaysFormat=i.alwaysFormat!==void 0?i.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var i="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(i,"g");var r="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(r,"g")}},{key:"interpolate",value:function(t,i,r,a){var o=this,s,l,h,f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function d(C){return C.replace(/\$/g,"$$$$")}var p=function(w){if(w.indexOf(o.formatSeparator)<0){var S=bd(i,f,w);return o.alwaysFormat?o.format(S,void 0,r,Ri(Ri(Ri({},a),i),{},{interpolationkey:w})):S}var R=w.split(o.formatSeparator),I=R.shift().trim(),F=R.join(o.formatSeparator).trim();return o.format(bd(i,f,I),F,r,Ri(Ri(Ri({},a),i),{},{interpolationkey:I}))};this.resetRegExp();var y=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,m=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,x=[{regex:this.regexpUnescape,safeValue:function(w){return d(w)}},{regex:this.regexp,safeValue:function(w){return o.escapeValue?d(o.escape(w)):d(w)}}];return x.forEach(function(C){for(h=0;s=C.regex.exec(t);){var w=s[1].trim();if(l=p(w),l===void 0)if(typeof y=="function"){var S=y(t,s,a);l=typeof S=="string"?S:""}else if(a&&a.hasOwnProperty(w))l="";else if(m){l=s[0];continue}else o.logger.warn("missed to pass in variable ".concat(w," for interpolating ").concat(t)),l="";else typeof l!="string"&&!o.useRawValueToEscape&&(l=Id(l));var R=C.safeValue(l);if(t=t.replace(s[0],R),m?(C.regex.lastIndex+=R.length,C.regex.lastIndex-=s[0].length):C.regex.lastIndex=0,h++,h>=o.maxReplaces)break}}),t}},{key:"nest",value:function(t,i){var r=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,l=Ri({},a);l.applyPostProcessor=!1,delete l.defaultValue;function h(y,m){var x=this.nestingOptionsSeparator;if(y.indexOf(x)<0)return y;var C=y.split(new RegExp("".concat(x,"[ ]*{"))),w="{".concat(C[1]);y=C[0],w=this.interpolate(w,l),w=w.replace(/'/g,'"');try{l=JSON.parse(w),m&&(l=Ri(Ri({},m),l))}catch(S){return this.logger.warn("failed parsing options string in nesting for key ".concat(y),S),"".concat(y).concat(x).concat(w)}return delete l.defaultValue,y}for(;o=this.nestingRegexp.exec(t);){var f=[],d=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var p=o[1].split(this.formatSeparator).map(function(y){return y.trim()});o[1]=p.shift(),f=p,d=!0}if(s=i(h.call(this,o[1].trim(),l),l),s&&o[0]===t&&typeof s!="string")return s;typeof s!="string"&&(s=Id(s)),s||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),s=""),d&&(s=f.reduce(function(y,m){return r.format(y,m,a.lng,Ri(Ri({},a),{},{interpolationkey:o[1].trim()}))},s.trim())),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t}}]),n}();function Ud(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function zn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ud(Object(t),!0).forEach(function(i){Un(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ud(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function gM(n){var e=n.toLowerCase().trim(),t={};if(n.indexOf("(")>-1){var i=n.split("(");e=i[0].toLowerCase().trim();var r=i[1].substring(0,i[1].length-1);if(e==="currency"&&r.indexOf(":")<0)t.currency||(t.currency=r.trim());else if(e==="relativetime"&&r.indexOf(":")<0)t.range||(t.range=r.trim());else{var a=r.split(";");a.forEach(function(o){if(!!o){var s=o.split(":"),l=qw(s),h=l[0],f=l.slice(1),d=f.join(":");d.trim()==="false"&&(t[h.trim()]=!1),d.trim()==="true"&&(t[h.trim()]=!0),isNaN(d.trim())||(t[h.trim()]=parseInt(d.trim(),10)),t[h.trim()]||(t[h.trim()]=d.trim())}})}}return{formatName:e,formatOptions:t}}var yM=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ui(this,n),this.logger=Vi.create("formatter"),this.options=e,this.formats={number:function(i,r,a){return new Intl.NumberFormat(r,a).format(i)},currency:function(i,r,a){return new Intl.NumberFormat(r,zn(zn({},a),{},{style:"currency"})).format(i)},datetime:function(i,r,a){return new Intl.DateTimeFormat(r,zn({},a)).format(i)},relativetime:function(i,r,a){return new Intl.RelativeTimeFormat(r,zn({},a)).format(i,a.range||"day")},list:function(i,r,a){return new Intl.ListFormat(r,zn({},a)).format(i)}},this.init(e)}return $i(n,[{key:"init",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},r=i.interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}},{key:"add",value:function(t,i){this.formats[t.toLowerCase().trim()]=i}},{key:"format",value:function(t,i,r,a){var o=this,s=i.split(this.formatSeparator),l=s.reduce(function(h,f){var d=gM(f),p=d.formatName,y=d.formatOptions;if(o.formats[p]){var m=h;try{var x=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},C=x.locale||x.lng||a.locale||a.lng||r;m=o.formats[p](h,C,zn(zn(zn({},y),a),x))}catch(w){o.logger.warn(w)}return m}else o.logger.warn("there was no format function for ".concat(p));return h},t);return l}}]),n}();function $d(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function zd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$d(Object(t),!0).forEach(function(i){Un(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$d(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function _M(n){var e=mM();return function(){var i=zi(n),r;if(e){var a=zi(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return uo(this,r)}}function mM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xM(n,e){for(var t=n.indexOf(e);t!==-1;)n.splice(t,1),t=n.indexOf(e)}var EM=function(n){Is(t,n);var e=_M(t);function t(i,r,a){var o,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Ui(this,t),o=e.call(this),bs&&$n.call(Bn(o)),o.backend=i,o.store=r,o.services=a,o.languageUtils=a.languageUtils,o.options=s,o.logger=Vi.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(a,s.backend,s),o}return $i(t,[{key:"queueLoad",value:function(r,a,o,s){var l=this,h=[],f=[],d=[],p=[];return r.forEach(function(y){var m=!0;a.forEach(function(x){var C="".concat(y,"|").concat(x);!o.reload&&l.store.hasResourceBundle(y,x)?l.state[C]=2:l.state[C]<0||(l.state[C]===1?f.indexOf(C)<0&&f.push(C):(l.state[C]=1,m=!1,f.indexOf(C)<0&&f.push(C),h.indexOf(C)<0&&h.push(C),p.indexOf(x)<0&&p.push(x)))}),m||d.push(y)}),(h.length||f.length)&&this.queue.push({pending:f,loaded:{},errors:[],callback:s}),{toLoad:h,pending:f,toLoadLanguages:d,toLoadNamespaces:p}}},{key:"loaded",value:function(r,a,o){var s=r.split("|"),l=s[0],h=s[1];a&&this.emit("failedLoading",l,h,a),o&&this.store.addResourceBundle(l,h,o),this.state[r]=a?-1:2;var f={};this.queue.forEach(function(d){Qw(d.loaded,[l],h),xM(d.pending,r),a&&d.errors.push(a),d.pending.length===0&&!d.done&&(Object.keys(d.loaded).forEach(function(p){f[p]||(f[p]=[]),d.loaded[p].length&&d.loaded[p].forEach(function(y){f[p].indexOf(y)<0&&f[p].push(y)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",f),this.queue=this.queue.filter(function(d){return!d.done})}},{key:"read",value:function(r,a,o){var s=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:350,f=arguments.length>5?arguments[5]:void 0;return r.length?this.backend[o](r,a,function(d,p){if(d&&p&&l<5){setTimeout(function(){s.read.call(s,r,a,o,l+1,h*2,f)},h);return}f(d,p)}):f(null,{})}},{key:"prepareLoading",value:function(r,a){var o=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();typeof r=="string"&&(r=this.languageUtils.toResolveHierarchy(r)),typeof a=="string"&&(a=[a]);var h=this.queueLoad(r,a,s,l);if(!h.toLoad.length)return h.pending.length||l(),null;h.toLoad.forEach(function(f){o.loadOne(f)})}},{key:"load",value:function(r,a,o){this.prepareLoading(r,a,{},o)}},{key:"reload",value:function(r,a,o){this.prepareLoading(r,a,{reload:!0},o)}},{key:"loadOne",value:function(r){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=r.split("|"),l=s[0],h=s[1];this.read(l,h,"read",void 0,void 0,function(f,d){f&&a.logger.warn("".concat(o,"loading namespace ").concat(h," for language ").concat(l," failed"),f),!f&&d&&a.logger.log("".concat(o,"loaded namespace ").concat(h," for language ").concat(l),d),a.loaded(r,f,d)})}},{key:"saveMissing",value:function(r,a,o,s,l){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(a)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}o==null||o===""||(this.backend&&this.backend.create&&this.backend.create(r,a,o,s,null,zd(zd({},h),{},{isUpdate:l})),!(!r||!r[0])&&this.store.addResource(r[0],a,o,s))}}]),t}($n);function TM(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(jn(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),jn(e[2])==="object"||jn(e[3])==="object"){var i=e[3]||e[2];Object.keys(i).forEach(function(r){t[r]=i[r]})}return t},interpolation:{escapeValue:!0,format:function(e,t,i,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Vd(n){return typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n}function Wd(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Wi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wd(Object(t),!0).forEach(function(i){Un(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wd(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function CM(n){var e=wM();return function(){var i=zi(n),r;if(e){var a=zi(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return uo(this,r)}}function wM(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function As(){}function MM(n){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(n));e.forEach(function(t){typeof n[t]=="function"&&(n[t]=n[t].bind(n))})}var Ns=function(n){Is(t,n);var e=CM(t);function t(){var i,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(Ui(this,t),i=e.call(this),bs&&$n.call(Bn(i)),i.options=Vd(r),i.services={},i.logger=Vi,i.modules={external:[]},MM(Bn(i)),a&&!i.isInitialized&&!r.isClone){if(!i.options.initImmediate)return i.init(r,a),uo(i,Bn(i));setTimeout(function(){i.init(r,a)},0)}return i}return $i(t,[{key:"init",value:function(){var r=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof a=="function"&&(o=a,a={}),!a.defaultNS&&a.ns&&(typeof a.ns=="string"?a.defaultNS=a.ns:a.ns.indexOf("translation")<0&&(a.defaultNS=a.ns[0]));var s=TM();this.options=Wi(Wi(Wi({},s),this.options),Vd(a)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Wi(Wi({},s.interpolation),this.options.interpolation)),a.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=a.keySeparator),a.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=a.nsSeparator);function l(w){return w?typeof w=="function"?new w:w:null}if(!this.options.isClone){this.modules.logger?Vi.init(l(this.modules.logger),this.options):Vi.init(null,this.options);var h;this.modules.formatter?h=this.modules.formatter:typeof Intl!="undefined"&&(h=yM);var f=new uM(this.options);this.store=new oM(this.options.resources,this.options);var d=this.services;d.logger=Vi,d.resourceStore=this.store,d.languageUtils=f,d.pluralResolver=new pM(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(d.formatter=l(h),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new vM(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new EM(l(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(w){for(var S=arguments.length,R=new Array(S>1?S-1:0),I=1;I<S;I++)R[I-1]=arguments[I];r.emit.apply(r,[w].concat(R))}),this.modules.languageDetector&&(d.languageDetector=l(this.modules.languageDetector),d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=l(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Gd(this.services,this.options),this.translator.on("*",function(w){for(var S=arguments.length,R=new Array(S>1?S-1:0),I=1;I<S;I++)R[I-1]=arguments[I];r.emit.apply(r,[w].concat(R))}),this.modules.external.forEach(function(w){w.init&&w.init(r)})}if(this.format=this.options.interpolation.format,o||(o=As),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var y=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];y.forEach(function(w){r[w]=function(){var S;return(S=r.store)[w].apply(S,arguments)}});var m=["addResource","addResources","addResourceBundle","removeResourceBundle"];m.forEach(function(w){r[w]=function(){var S;return(S=r.store)[w].apply(S,arguments),r}});var x=ho(),C=function(){var S=function(I,F){r.isInitialized&&!r.initializedStoreOnce&&r.logger.warn("init: i18next is already initialized. You should call init just once!"),r.isInitialized=!0,r.options.isClone||r.logger.log("initialized",r.options),r.emit("initialized",r.options),x.resolve(F),o(I,F)};if(r.languages&&r.options.compatibilityAPI!=="v1"&&!r.isInitialized)return S(null,r.t.bind(r));r.changeLanguage(r.options.lng,S)};return this.options.resources||!this.options.initImmediate?C():setTimeout(C,0),x}},{key:"loadResources",value:function(r){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:As,s=o,l=typeof r=="string"?r:this.language;if(typeof r=="function"&&(s=r),!this.options.resources||this.options.partialBundledLanguages){if(l&&l.toLowerCase()==="cimode")return s();var h=[],f=function(y){if(!!y){var m=a.services.languageUtils.toResolveHierarchy(y);m.forEach(function(x){h.indexOf(x)<0&&h.push(x)})}};if(l)f(l);else{var d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.forEach(function(p){return f(p)})}this.options.preload&&this.options.preload.forEach(function(p){return f(p)}),this.services.backendConnector.load(h,this.options.ns,s)}else s(null)}},{key:"reloadResources",value:function(r,a,o){var s=ho();return r||(r=this.languages),a||(a=this.options.ns),o||(o=As),this.services.backendConnector.reload(r,a,function(l){s.resolve(),o(l)}),s}},{key:"use",value:function(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&Dd.addPostProcessor(r),r.type==="formatter"&&(this.modules.formatter=r),r.type==="3rdParty"&&this.modules.external.push(r),this}},{key:"changeLanguage",value:function(r,a){var o=this;this.isLanguageChangingTo=r;var s=ho();this.emit("languageChanging",r);var l=function(p){if(o.language=p,o.languages=o.services.languageUtils.toResolveHierarchy(p),o.resolvedLanguage=void 0,!(["cimode","dev"].indexOf(p)>-1))for(var y=0;y<o.languages.length;y++){var m=o.languages[y];if(!(["cimode","dev"].indexOf(m)>-1)&&o.store.hasLanguageSomeTranslations(m)){o.resolvedLanguage=m;break}}},h=function(p,y){y?(l(y),o.translator.changeLanguage(y),o.isLanguageChangingTo=void 0,o.emit("languageChanged",y),o.logger.log("languageChanged",y)):o.isLanguageChangingTo=void 0,s.resolve(function(){return o.t.apply(o,arguments)}),a&&a(p,function(){return o.t.apply(o,arguments)})},f=function(p){!r&&!p&&o.services.languageDetector&&(p=[]);var y=typeof p=="string"?p:o.services.languageUtils.getBestMatchFromCodes(p);y&&(o.language||l(y),o.translator.language||o.translator.changeLanguage(y),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage(y)),o.loadResources(y,function(m){h(m,y)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?f(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(f):f(r),s}},{key:"getFixedT",value:function(r,a,o){var s=this,l=function h(f,d){var p;if(jn(d)!=="object"){for(var y=arguments.length,m=new Array(y>2?y-2:0),x=2;x<y;x++)m[x-2]=arguments[x];p=s.options.overloadTranslationOptionHandler([f,d].concat(m))}else p=Wi({},d);p.lng=p.lng||h.lng,p.lngs=p.lngs||h.lngs,p.ns=p.ns||h.ns;var C=s.options.keySeparator||".",w=o?"".concat(o).concat(C).concat(f):f;return s.t(w,p)};return typeof r=="string"?l.lng=r:l.lngs=r,l.ns=a,l.keyPrefix=o,l}},{key:"t",value:function(){var r;return this.translator&&(r=this.translator).translate.apply(r,arguments)}},{key:"exists",value:function(){var r;return this.translator&&(r=this.translator).exists.apply(r,arguments)}},{key:"setDefaultNamespace",value:function(r){this.options.defaultNS=r}},{key:"hasLoadedNamespace",value:function(r){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var s=this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,h=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;var f=function(y,m){var x=a.services.backendConnector.state["".concat(y,"|").concat(m)];return x===-1||x===2};if(o.precheck){var d=o.precheck(this,f);if(d!==void 0)return d}return!!(this.hasResourceBundle(s,r)||!this.services.backendConnector.backend||f(s,r)&&(!l||f(h,r)))}},{key:"loadNamespaces",value:function(r,a){var o=this,s=ho();return this.options.ns?(typeof r=="string"&&(r=[r]),r.forEach(function(l){o.options.ns.indexOf(l)<0&&o.options.ns.push(l)}),this.loadResources(function(l){s.resolve(),a&&a(l)}),s):(a&&a(),Promise.resolve())}},{key:"loadLanguages",value:function(r,a){var o=ho();typeof r=="string"&&(r=[r]);var s=this.options.preload||[],l=r.filter(function(h){return s.indexOf(h)<0});return l.length?(this.options.preload=s.concat(l),this.loadResources(function(h){o.resolve(),a&&a(h)}),o):(a&&a(),Promise.resolve())}},{key:"dir",value:function(r){if(r||(r=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!r)return"rtl";var a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return a.indexOf(this.services.languageUtils.getLanguagePartFromCode(r))>-1||r.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var r=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:As,s=Wi(Wi(Wi({},this.options),a),{isClone:!0}),l=new t(s),h=["store","services","language"];return h.forEach(function(f){l[f]=r[f]}),l.services=Wi({},this.services),l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l.translator=new Gd(l.services,l.options),l.translator.on("*",function(f){for(var d=arguments.length,p=new Array(d>1?d-1:0),y=1;y<d;y++)p[y-1]=arguments[y];l.emit.apply(l,[f].concat(p))}),l.init(s,o),l.translator.options=l.options,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}($n);Un(Ns,"createInstance",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Ns(n,e)});var He=Ns.createInstance();He.createInstance=Ns.createInstance;He.createInstance;He.init;He.loadResources;He.reloadResources;He.use;He.changeLanguage;He.getFixedT;He.t;He.exists;He.setDefaultNamespace;He.hasLoadedNamespace;He.loadNamespaces;He.loadLanguages;export{jM as $,Oo as A,tu as B,kl as C,IM as D,Rv as E,on as F,Xa as G,Iv as H,Qy as I,BM as J,GM as L,bM as M,NM as O,an as P,Ua as S,AM as T,Wl as V,DM as a,FM as b,Kf as c,LM as d,Sn as e,OM as f,k0 as g,RM as h,wr as i,PM as j,He as k,Vt as l,en as m,SM as n,Dn as o,pi as p,di as q,kM as r,Nn as s,Cn as t,ni as u,Le as v,gx as w,Oi as x,mr as y,On as z};
//# sourceMappingURL=vendor.b9b82a5d.js.map
