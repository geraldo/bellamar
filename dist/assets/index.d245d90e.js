import{f as ce,G as H,T as p,O as de,a as ue,b as O,V as b,c as y,d as L,S as i,e as s,F as g,M as fe,g as me,h as pe,i as ge,o as C,$ as a,L as we,j as _,k as N,l as w,m as he,n as ve,p as be,C as Y,D as ye,P as Z,q as K,u as ke,r as U,s as Le,t as Ce,v as _e,w as Se}from"./vendor.4f39e693.js";const Te=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function d(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}};Te();const J=16,$=ce([1.957,41.271]),Me="https://mapa.psig.es/mapproxy/service",E="https://mapa.psig.es/qgisserver/wfs3/collections/",P="/items.geojson",S="?MAP=/home/ubuntu/bellamar/Obra_Bellamar_web.qgs",A="&limit=10000";let xe=new H({title:"Mapes base",layers:[new p({title:"Ning\xFA",type:"base",source:null,visible:!1}),new p({title:"OpenStreetMap",type:"base",visible:!1,source:new de}),new p({title:"Ortofoto hist\xF2rica de 2020 (AMB)",type:"base",visible:!1,source:new ue({url:"https://geoportal.amb.cat/geoserveis/rest/services/ortofoto_territorial_10cm_2020_25831/MapServer",projection:"EPSG:25831",params:{LAYERS:"Orto2020_10cm"},attributions:['\xA9 <a target="_blank" href="https://www.amb.cat/">AMB</a>']})}),new p({title:"Topogr\xE1fic (AMB)",type:"base",visible:!0,maxZoom:18,source:new O({url:"http://geoserveis.icc.cat/icc_mapesmultibase/utm/wms/service?",params:{LAYERS:"topogris",VERSION:"1.1.1"},attributions:['Cartografia topogr\xE0fica 1:1.000 de l\u2019<a target="_blank" href="http://www.icgc.cat/">Institut Cartogr\xE0fic i Geol\xF2gic de Catalunya (ICGC)</a>, sota una llic\xE8ncia <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/deed.ca">CC BY 4.0</a>']})})]}),Be=new p({title:"Topografia completa",visible:!0,minZoom:18,source:new O({url:Me+S,params:{LAYERS:"bellamar_topografia",TRANSPARENT:!0,VERSION:"1.3.0"},serverType:"qgis"})}),Oe=new p({title:"Catastro",visible:!1,source:new O({url:"http://ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx",params:{LAYERS:"catastro",TILED:!0,SRS:"EPSG:3857"}})}),Ne=new b({title:"Pluvial",visible:!0,source:new y({format:new L,url:E+"bellamar_pluvial"+P+S+A}),style:new i({stroke:new s({lineDash:[10,5],color:"#1f78b4",width:3})})}),Q=new b({title:"Trams de les obres",name:"trams",visible:!0,source:new y({format:new L,url:E+"Trams de les obres"+P+S+A}),style:function(e,t){let r=e.get("estat");return r==="finalitzat"?new i({stroke:new s({color:"#09de00",width:2})}):r==="en obra"?new i({stroke:new s({color:"#db1e2a",width:2})}):r==="inici en breu"?new i({stroke:new s({color:"#ff8c00",width:2})}):r==="pendent"?new i({stroke:new s({color:"#0076b6",width:2})}):r==="excl\xF2s"?new i({stroke:new s({color:"#929397",width:1})}):new i({stroke:new s({color:"#ffff00",width:1})})}}),X=new b({title:"Parcel\xB7les projecte Bellamar",name:"parcelles",visible:!0,source:new y({format:new L,url:E+"Parcel\xB7les projecte Bellamar"+P+S+A}),style:function(e,t){return e.get("residual")==="No"?new i({fill:new g({color:"rgba(196,154,151,0.4)"})}):e.get("residual")==="S\xED"?new i({fill:new g({color:"rgba(135,105,100,0.4)"})}):null}}),Ee=new b({title:"Barris",visible:!0,source:new y({format:new L,url:"barris.geojson"}),style:new i({stroke:new s({color:"#000",width:2})})});const o=new fe({target:"map",controls:me().extend([new pe]),layers:new H({title:"Mapes base",fold:"close",layers:[xe,Oe,Be,Ee,Ne,Q,X]}),view:new ge({center:$,zoom:J,minZoom:14,maxZoom:20})});let I=new C({closeBox:!0,className:"slide-left menu",content:a("#infoWindowDocs").get(0)});o.addControl(I);let W=new C({closeBox:!0,className:"slide-left menu",content:a("#infoWindowLayers").get(0)});o.addControl(W);let Pe=document.getElementById("layers");we.renderPanel(o,Pe,{reverse:!0});let F=new C({closeBox:!0,className:"slide-left menu",content:a("#infoWindowSearch").get(0)});o.addControl(F);let G=new C({closeBox:!0,className:"slide-right info",content:a("#infoWindowFeature").get(0)});o.addControl(G);let ee=new _({className:"ol-top ol-left menuBar"});o.addControl(ee);let m=new _({toggleOne:!0,group:!0});ee.addControl(m);let Ae=new N({html:'<img src="logo.png" />',className:"logo",title:"Castelldefels",handleClick:function(){o.getView().setCenter($),o.getView().setZoom(J)}});m.addControl(Ae);let te=new w({html:'<i class="fa fa-file-text-o"></i>',className:"docs",title:"Documents",onToggle:function(){R("docs"),I.toggle()}});m.addControl(te);let oe=new w({html:'<i class="fa fa-align-justify"></i>',className:"layers",title:"Capas",onToggle:function(){R("layers"),W.toggle()}});m.addControl(oe);let re=new w({html:'<i class="fa fa-search"></i>',className:"search",title:"Buscar",onToggle:function(){R("search"),F.toggle()}});m.addControl(re);function R(e){I.hide(),W.hide(),F.hide(),e!=="docs"?te.setActive(!1):e!=="layers"?oe.setActive(!1):e!=="search"&&re.setActive(!1)}let Ie=new N({html:'<i class="fa fa-whatsapp" aria-hidden="true"></i>',className:"whatsapp",title:"Whatsapp",handleClick:function(){}});m.addControl(Ie);let We=new N({html:'<i class="fa fa-telegram" aria-hidden="true"></i>',className:"telegram",title:"Whatsapp",handleClick:function(){}});m.addControl(We);a(".window").show();let Fe=new he({urlReplace:!0,title:"Compartir enlla\xE7"});o.addControl(Fe);let ne=new ve({title:"On estic?",delay:5e3});o.addControl(ne);let V=new be({positioning:"bottom-center"});o.addOverlay(V);ne.on("position",function(e){e.coordinate?V.show(e.coordinate,"Ets aqu\xED!"):V.hide()});let k,f,T,u,h,Ge="Click per continuar dibuixant el pol\xEDgon",Re="Click per continuar dibuixant la l\xEDnea",D="Clica per iniciar el dibuix",v,M=!1;const j=new y,Ve=new b({source:j,style:new i({fill:new g({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s({color:"#ffcc33",width:2}),image:new Y({radius:7,fill:new g({color:"#ffcc33"})})})});o.addLayer(Ve);o.on("pointermove",function(e){M?He(e):o.getTargetElement().style.cursor=o.hasFeatureAtPixel(o.getEventPixel(e.originalEvent),{hitTolerance:5,layerFilter:function(t){return t.get("name")==="trams"||t.get("name")==="parcelles"}})?"pointer":""});a(document).keyup(function(e){e.keyCode==27&&(o.removeInteraction(v),o.removeOverlay(h),z(),a(".ol-tooltip").addClass("hidden"),q.toggle())});let De=new _({toggleOne:!0,autoDeactivate:!0,controls:[new w({title:"Medir distancia",html:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -8)"><path d="m1.5000001 20.5h21v7h-21z" style="overflow:visible;fill:#c7c7c7;fill-rule:evenodd;stroke:#5b5b5c;stroke-width:.99999994;stroke-linecap:square"/><path d="m4.5 21v3" fill="none" stroke="#5b5b5c"/><path d="m7.5 21v3" fill="none" stroke="#5b5b5c"/><path d="m10.5 20v6" fill="none" stroke="#5b5b5c"/><path d="m13.5 21v3" fill="none" stroke="#5b5b5c"/><path d="m16.5 21v3" fill="none" stroke="#5b5b5c"/><path d="m19.5 21v3" fill="none" stroke="#5b5b5c"/><path d="m2.5 13v4" fill="none" stroke="#415a75"/><path d="m21.5 13v4" fill="none" stroke="#415a75"/><path d="m2 15h20" fill="none" stroke="#415a75" stroke-width="1.99999988"/></g></svg>',onToggle:function(e){M=e,ae(e,!0)}}),new w({title:"Medir \xE0rea",html:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -8)"><path d="m1.5000001 20.5h21v7h-21z" style="overflow:visible;fill:#c7c7c7;fill-rule:evenodd;stroke:#5b5b5c;stroke-width:.99999994;stroke-linecap:square"/><path d="m4.5 21v3" fill="none" stroke="#5b5b5c"/><path d="m7.5 21v3" fill="none" stroke="#5b5b5c"/><path d="m10.5 20v6" fill="none" stroke="#5b5b5c"/><path d="m13.5 21v3" fill="none" stroke="#5b5b5c"/><path d="m16.5 21v3" fill="none" stroke="#5b5b5c"/><path d="m19.5 21v3" fill="none" stroke="#5b5b5c"/><path d="m2.5 9.5h5v2h14v7.5h-6.5v-5h-5v3.5h-7.5z" fill="#6d97c4" fill-rule="evenodd" stroke="#415a75"/></g></svg>',onToggle:function(e){M=e,ae(e,!1)}})]}),q=new w({html:"M",bar:De,title:"Medir",onToggle:function(e){e||(le(),this.toggle())}}),je=new _({autoDeactivate:!0,controls:[q],className:"ol-top ol-right measureBar"});o.addControl(je);function ae(e,t){e?qe(t):le()}function qe(e){var t=e?"LineString":"Polygon";v=new ye({source:j,type:t,style:new i({fill:new g({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new Y({radius:5,stroke:new s({color:"rgba(0, 0, 0, 0.7)"}),fill:new g({color:"rgba(255, 255, 255, 0.2)"})})})}),o.addInteraction(v),se(),ze();let r;v.on("drawstart",function(d){k=d.feature;var n=d.coordinate;r=k.getGeometry().on("change",function(l){var c=l.target,B;c instanceof Z?(B=Ze(c),n=c.getInteriorPoint().getCoordinates()):c instanceof K&&(B=Ye(c),n=c.getLastCoordinate()),u.innerHTML=B,h.setPosition(n)})}),v.on("drawend",function(){u.className="ol-tooltip ol-tooltip-static",h.setOffset([0,-7]),k=null,u=null,se(),ke(r)})}function le(){M=!1,o.removeInteraction(v),o.removeOverlay(h),z(),a(".ol-tooltip").addClass("hidden"),q.toggle(),j.clear()}function ze(){z(),f=document.createElement("div"),f.className="ol-tooltip hidden",T=new U({element:f,offset:[15,0],positioning:"center-left"}),o.addOverlay(T),o.getViewport().addEventListener("mouseout",ie)}var ie=function(){f.classList.add("hidden")};function z(){o.removeOverlay(T),o.getViewport().removeEventListener("mouseout",ie)}function se(){u&&u.parentNode.removeChild(u),u=document.createElement("div"),u.className="ol-tooltip ol-tooltip-measure",h=new U({element:u,offset:[0,-15],positioning:"bottom-center",stopEvent:!1,insertFirst:!1}),o.addOverlay(h)}var He=function(e){if(!e.dragging){if(k){var t=k.getGeometry();t instanceof Z?D=Ge:t instanceof K&&(D=Re)}f&&f!==void 0&&(f.innerHTML=D,T.setPosition(e.coordinate),f.classList.remove("hidden"))}},Ye=function(e){var t=Le(e),r;return t>100?r=Math.round(t/1e3*100)/100+" km":r=Math.round(t*100)/100+" m",r},Ze=function(e){var t=Ce(e),r;return t>1e4?r=Math.round(t/1e6*100)/100+" km<sup>2</sup>":r=Math.round(t*100)/100+" m<sup>2</sup>",r};let x=new _e({layers:[Q,X],hitTolerance:5,style:new i({stroke:new s({color:"#ffff00",width:5})})});o.addInteraction(x);x.getFeatures().on("add",function(e){let t=e.element,r=x.getLayer(t).get("name"),d=a("<div>");r==="trams"?d.append(a("<p>").text("eix_ncar: "+t.get("eix_ncar"))).append(a("<p>").text("observacions: "+t.get("observacions"))).append(a("<p>").text("estat: "+t.get("estat"))).append(a("<p>").text("data_inici_obres: "+t.get("data_inici_obres"))).append(a("<p>").text("data_fi_obres: "+t.get("data_fi_obres"))):r==="parcelles"&&d.append(a("<p>").text("refcat: "+t.get("refcat"))).append(a("<p>").text("residual: "+t.get("residual"))).append(a("<p>").text("conveni: "+t.get("conveni"))),a("#infoWindowFeature .content").html(d),G.show()});x.getFeatures().on("remove",function(e){a("#infoWindowFeature .content").html(""),G.hide()});o.on("click",function(e){console.log(Se(e.coordinate))});
//# sourceMappingURL=index.d245d90e.js.map
